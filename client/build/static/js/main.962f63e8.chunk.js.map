{"version":3,"sources":["pages/student/Study.module.css","pages/admin/StudentProfile.module.css","components/FooterContent.module.css","pages/student/Profile.module.css","components/VideoCall.module.css","components/CallModal.module.css","pages/tutor/VideoRecorder.module.css","pages/admin/Admin.module.css","pages/default/SignInModal.module.css","pages/admin/Subscriptions.module.css","assets/app-logo.png","components/AppLogo.module.css","components/SideBarLogo.module.css","pages/student/StudentCallHistories.module.css","pages/admin/Dashboard.module.css","pages/admin/Students.module.css","pages/admin/Tutors.module.css","pages/student/Student.module.css","components/ChangePasswordModal.module.css","pages/student/Subscriptions.module.css","pages/student/SubscriptionHistory.module.css","pages/tutor/Tutor.module.css","pages/tutor/TutorCallHistories.module.css","pages/admin/RecentCalls.module.css","pages/admin/TopPaid.module.css","pages/admin/CallDetailModal.module.css","pages/admin/TutorProfile.module.css","pages/student/ExtendSubscription.module.css","pages/admin/ReportDetailModal.module.css","assets/flame-welcome.png","assets/welcome-student.png","assets/welcome-tutor.png","components/ForgotPasswordModal.module.css","assets/normal.png","components/ReviewSummary.module.css","assets/silver.png","assets/gold.png","assets/platium.png","assets/endcall.png","assets/unverify.png","assets/timeout.png","pages/student/StudentCallDetailModal.module.css","pages/tutor/VideoPlayer.module.css","assets/tutor-wait.png","assets/complete-profile.png","pages/tutor/Stats.module.css","pages/tutor/Payments.module.css","pages/tutor/Reviews.module.css","pages/admin/OnlineUsers.module.css","pages/admin/MoneyStats.module.css","assets/admin-avatar.png","pages/admin/Reports.module.css","pages/default/RegisterModal.module.css","lib/preferences.js","pages/default/Default.module.css","pages/tutor/Profile.module.css","lib/utils/getAccountInfo.js","context/AccountContext.js","components/FooterContent.js","lib/utils/axiosConfig.js","pages/default/RegisterModal.js","pages/default/SignInModal.js","components/ForgotPasswordModal.js","components/AppLogo.js","pages/default/Default.js","lib/constants.js","components/ChangePasswordModal.js","components/SideBarLogo.js","lib/utils/formatTime.js","pages/student/Profile.js","pages/student/SubscriptionHistory.js","pages/student/ExtendSubscription.js","pages/student/Subscriptions.js","lib/socket.js","lib/Emitter.js","lib/MediaDevice.js","lib/PeerConnection.js","components/CallWindow.js","components/CallModal.js","pages/student/TutorCard.js","pages/admin/VideoPlayer.js","pages/student/TutorDetailModal.js","lib/utils/getReviewCount.js","components/ReviewSummary.js","components/Review.js","pages/student/TutorReviewModal.js","pages/student/TutorList.js","pages/student/FeedbackModal.js","components/VideoCall.js","pages/student/Study.js","components/CallRecordPlayer.js","pages/student/StudentCallDetailModal.js","components/ReportModal.js","pages/student/StudentCallHistories.js","pages/student/Student.js","pages/tutor/VideoRecorder.js","pages/tutor/VideoPlayer.js","pages/tutor/Profile.js","pages/tutor/Teaching.js","pages/tutor/TutorCallHistories.js","pages/tutor/Payments.js","pages/tutor/Reviews.js","pages/tutor/Stats.js","pages/tutor/Tutor.js","pages/admin/OnlineUsers.js","pages/admin/RecentCalls.js","pages/admin/MoneyStats.js","pages/admin/TopPaid.js","pages/admin/Dashboard.js","pages/admin/StudentSub.js","pages/admin/CallDetailModal.js","pages/admin/CallHistories.js","pages/admin/AccountReport.js","pages/admin/StudentProfile.js","pages/admin/Students.js","pages/admin/TutorPayment.js","pages/admin/TutorReviews.js","pages/admin/TutorProfile.js","pages/admin/Tutors.js","pages/admin/ReportDetailModal.js","pages/admin/Reports.js","pages/admin/Subscriptions.js","pages/admin/Payment.js","pages/admin/Admin.js","components/SignOut.js","components/Router.js","App.js","serviceWorker.js","index.js","pages/student/TutorCard.module.css","pages/tutor/Teaching.module.css","pages/admin/Payment.module.css","components/CallWindow.module.css","pages/student/TutorList.module.css","pages/student/TutorDetailModal.module.css"],"names":["module","exports","PREFERENCE_TYPE","Object","freeze","ENG_ACCENT","ENG_FLUENCY","TEACHING_STYLE","STUDENT_TYPE","STUDENT_LVL","SPECIALITY","SPECIALITIES","cookies","Cookies","removeAccountInfo","remove","AccountContext","createContext","AccountContextProvider","props","useState","account","setAccount","useEffect","existAccount","accessToken","get","jwtDecode","getAccountInfo","Provider","value","onSignIn","accountData","onSignOut","localStorage","clear","Footer","Layout","FooterContent","className","styles","footer","contactIconContainer","GithubOutlined","contactIcon","onClick","window","open","FacebookFilled","InstagramOutlined","contactInfoContainer","axiosRequest","axios","create","baseURL","withCredentials","RegisterModal","isStudent","setIsStudent","loading","setLoading","error","setError","Form","useForm","form","useContext","onFinish","values","a","url","accountInfo","username","password","email","name","post","result","data","setItem","location","reload","response","message","studentWelcome","registerWelcomeContent","welcomeImg","draggable","src","welcomeStudentImg","alt","tutorWelcome","welcomeTutorImg","visible","isVisible","title","onCancel","resetFields","onClose","width","registerContent","registerWelcome","formWrapper","style","marginBottom","type","showIcon","banner","closable","afterClose","scrollToFirstError","registerForm","labelCol","xs","span","sm","wrapperCol","Item","label","rules","required","whitespace","hasFeedback","Password","dependencies","getFieldValue","validator","rule","Promise","reject","resolve","offset","htmlType","registerButton","shape","switchModeWrapper","switchMode","onSwitchSignIn","SignInModal","onSwitchRegister","onSwitchForgotPass","user","remember","signInForm","initialValues","prefix","UserOutlined","placeholder","LockOutlined","valuePropName","noStyle","signInForgot","signInButton","registerNow","ForgotPasswordModal","alert","defaultUser","submitBtn","AppLogo","headerWrapper","headerIcon","headerTitle","Header","Content","Default","isRegister","setRegister","isSignIn","setIsSignIn","isForgotPass","setIsForgotPass","showRegister","headerContent","userButtonContainer","userButton","defaultBody","introContainer","introImg","introContent","welcomeText","welcomeDescription","ROLES","ADMIN","TUTOR","STUDENT","STATES","ACTIVE","INACTIVE","PROFILE_STATUS","ACCEPTED","PENDING","REJECTED","serverUrl","SOCKET_EVENTS","INIT","REQUEST","CALL","END","DISCONNECT","GET_ONLINE_TUTORS","LEAVE","RECORD_STUDENT","RECORD_TUTOR","SAVE_VIDEOS","CREATE_CALL_HISTORY","GET_ONLINE_STUDENTS","STATUS","AVAILABLE","BUSY","OFFLINE","SUB_STATE","COMPLETED","CANCELED","SUB_TIER","NORMAL","SILVER","GOLD","PLATIUM","SUB_DISCOUNT_RATE","REPORT_REASONS","REPORT_STATE","RESOLVED","CANCELLED","PAYMENT_STATE","COUNTED","UNCOUNTED","PREFERENCE_TYPES","FAVORITE","RECOMMEND","ChangePasswordModal","onForgot","oldPassword","oldpassword","newPassword","id","role","forgotPass","SideBarLogo","collapsed","logoContainer","Logo","logo","logoText","getTimeFromMs","millisec","seconds","toFixed","minutes","Math","floor","hours","Option","Select","Panel","Collapse","Profile","loadingProfile","setLoadingProfile","profile","setProfile","loadingAva","setLoadingAva","avatar","setAvatar","getStudentProfile","student","avatarProfile","size","icon","onSubmit","put","uploadAvaProps","onRemove","file","beforeUpload","fileList","uploadAvatar","formData","FormData","append","method","resendConfirmation","spinning","accountInfoContainer","remaining_time","verification","color","collapse","phone","birthdate","moment","undefined","address","student_type","student_lvl","accent","specialities","JSON","parse","teaching_styles","defaultActiveKey","header","key","listType","FileImageOutlined","disabled","length","UploadOutlined","preferences","map","lvl","mode","spec","submitWrapper","SubscriptionHistory","studentSub","setStudentSub","getStudentSub","subscriptions","cancelSubscription","state","columns","dataIndex","render","createdAt","format","tier","duration","price","text","record","okText","cancelText","cancelBtn","onConfirm","ReloadOutlined","dataSource","pagination","rowKey","ExtendSubscription","purchaseLoading","setPurchaseLoading","createPurchase","studentId","extendSub","gutter","extendSubContent","subTier","extendDuration","tierImage","Normal","extendPrice","Number","placement","Silver","extendSave","Gold","Platium","TabPane","Tabs","Subscriptions","tab","CreditCardOutlined","HistoryOutlined","tabPaneHistory","socket","io","Emitter","this","events","event","args","forEach","fn","push","_","isFunction","listeners","index","findIndex","_fn","splice","MediaDevice","navigator","mediaDevices","getUserMedia","audio","echoCancellation","then","stream","emit","catch","err","DOMException","on","len","arguments","track","enabled","set","getTracks","stop","PC_CONFIG","iceServers","urls","PeerConnection","friendID","pc","RTCPeerConnection","onicecandidate","to","candidate","ontrack","streams","mediaDevice","isCaller","config","addTrack","createOffer","start","isStarter","close","off","getDescription","bind","createAnswer","desc","setLocalDescription","sdp","rtcSdp","RTCSessionDescription","setRemoteDescription","iceCandidate","RTCIceCandidate","addIceCandidate","CallWindow","peerSrc","localSrc","endCall","callWindow","peerVideo","useRef","localVideo","video","setVideo","setAudio","useBeforeunload","e","preventDefault","current","srcObject","toggle","toggleMediaDevice","deviceType","callWindowWrapper","videoScreenContainer","videoScreen","ref","autoPlay","muted","formatValue","lastUnit","callTime","Hours","Minutes","Seconds","videoControl","VideoCameraFilled","VideoCameraAddOutlined","AudioFilled","AudioMutedOutlined","StopOutlined","CallModal","callModal","callFrom","startCall","rejectCall","acceptWithVideo","callModalWrapper","caller","callerTxt","controlBtns","TutorCard","callWithVideo","openDetailModal","item","openReviewlModal","getPreferences","removeFav","delete","preId","console","actions","tutorCard","tutorInfo","tutorInfoDetail","tutorName","status","CheckCircleFilled","fontSize","marginLeft","MinusCircleFilled","certificates","review","reviewWrapper","defaultValue","round","avg","allowHalf","reviewCount","count","viewReviews","isFav","introduction","VideoPlayer","player","videoNode","videoJsOptions","controls","height","fluid","sources","autoplay","videojs","version_info","VERSION","log","dispose","data-vjs-player","node","playsInline","TutorDetailModal","selected","showDetailModal","setShowDetailModal","destroyOnClose","bodyStyle","overflow","detailWrapper","videoWrapper","bordered","column","fluency","speciality","interests","education","experience","profession","reason","detailTitle","uploadedCert","cert","href","path","FileDoneOutlined","originalname","getReviewCount","reviews","count0","count1","count2","count3","count4","count5","total","rating","rating0","rating1","rating2","rating3","rating4","rating5","ReviewSummary","reviewSummary","reviewOverall","reviewAvg","reviewNumber","marginRight","ratingCountList","ratingCount","showInfo","percent","Review","getTutorReview","deleteReview","deleteBtn","danger","author","content","comment","datetime","fromNow","TutorReviewModal","showReviewModal","setShowReviewModal","setReviews","maxHeight","itemLayout","renderItem","Search","Input","TutorList","onlineTutors","setTutor","remainingTime","setSelected","tutors","setTutors","keyword","setKeyword","setPreferences","favorites","setFavorites","recommend","setRecommend","valid","filteredTutors","tutor","toLowerCase","includes","filterTutorsByKeyword","favoriteTutors","pre","favTutor","tutorId","recommendTutors","recTutor","tutorList","searchTool","remainingTimeTitle","searchBar","enterButton","onSearch","TeamOutlined","tabPane","grid","LikeOutlined","RiseOutlined","FeedbackModal","showFeedback","setShowFeedBack","sucessAlert","setSuccessAlert","errorAlert","setErrorAlert","allowClear","TextArea","VideoCall","getStudent","setCallWindow","setCallModal","setCallFrom","setLocalSrc","setPeerSrc","pcRef","configRef","peerRecorder","localRecorder","end","setOnlineTutors","afterCallModal","setAfterCallModal","setShowFeedback","from","Date","now","setTimeout","online","MediaRecorder","mimeType","ondataavailable","stopRecording","renderCallFrom","btnHolder","addToFav","StarOutlined","videoCall","tutorProfile","isEmpty","afterCall","endCallImg","endUser","endDuration","Study","setStudent","renderStudy","unverify","timeoutImg","Timeout","unverifyTxt","unverifyImg","Unverify","study","CallRecordPlayer","StudentCallDetailModal","showCallDetail","setShowCallDetail","recordHolder","Report","showReport","setShowReport","accountId","callId","description","autoSize","minRows","StudentCallHistories","history","setHistory","searchKey","setSearchKey","getHistory","callHistories","viewRecordBtn","onViewRecord","onReportRecord","Sider","Student","isChangePass","setIsChangePass","userAvatar","margin","userMenu","KeyOutlined","LogoutOutlined","minHeight","collapsible","theme","defaultSelectedKeys","selectedKeys","pathname","VideoCameraOutlined","ContactsOutlined","DollarCircleOutlined","userControl","overlay","DownOutlined","dropDownIcon","component","exact","plugins","maxLength","debug","VideoRecorder","cancelRecord","existedVideo","refreshProfile","recorded","setRecorded","uploadVideo","getPluginVersion","RecordRTC","version","recordedData","element","warn","deviceErrorCode","btnWrapper","videoBtn","btnWrapperNoCancel","recordNew","setFileList","uploading","setUploading","isRecord","setIsRecord","getTutorProfile","profileStatus","formItemLayout","uploadBtnLayout","uploadProps","indexOf","newFileList","slice","handleUpload","FileTextOutlined","introInstruct","introTips","Step","Steps","Teaching","getProfile","ProfileOutlined","teachingWrapper","teaching","SolutionOutlined","SmileOutlined","wait","waitImg","WaitImg","waitTxt","CompleteProfileImg","TutorCallHistories","paymentLoading","setPaymentLoading","createPayment","counted","onReport","Payments","payments","setPayments","getPayments","Reviews","reviewsRender","Stats","stats","Tutor","BarChartOutlined","OnlineUsers","onlineStudents","setOnlineStudents","datasets","backgroundColor","hoverBackgroundColor","labels","onlineUsers","RecentCalls","calls","setCalls","getRecentCalls","recentCalls","recentCallsTitle","MoneyStats","earn","pay","setStats","getMoneyStats","moneyStats","TopPaid","users","setUsers","topPaid","getTopPaid","topPaidTitle","Dashboard","dashboard","dashboardRow","StudentSub","CallDetailModal","recordTitle","CallHistories","onRow","AccountReport","reports","StudentProfile","getStudentsData","loadingDetail","setLoadingDetail","detail","setDetail","stateLoading","setStateLoading","updateStateUser","getStudentDetail","renderDetail","detailBasic","detailBasicInfo","banBtnHolder","changeStateBtn","detailAdditional","call_histories","Students","pageSize","setPageSize","students","setStudents","page","setPage","setTotal","tableData","totalResults","studentsLayout","paginationWrapper","defaultCurrent","showSizeChanger","showTotal","onShowSizeChange","ceil","onChange","TutorPayment","TutorReviews","TutorProfile","getTutorsData","updateStatusLoading","setUpdateStatusLoading","updateProfileStatus","getTutorDetail","statusControl","statusControlBtnWrapper","borderColor","statusControlBtn","Tutors","tutorsLayout","ReportDetailModal","showReportDetail","setShowReportDetail","getReports","updateReport","reportDetail","reportDetailContent","reportLabel","reportContent","call_history","setReports","subs","sub","completeSubscription","acceptBtn","Payment","updatePayment","pendingBtn","Admin","setCollapsed","onCollapse","adminMenu","IdcardOutlined","ExceptionOutlined","background","MenuUnfoldOutlined","menuIcon","MenuFoldOutlined","AvatarPic","Reports","SignOut","Router","withRouter","Boolean","hostname","match","app","ReactDOM","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"yGACAA,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,SAAW,wBAAwB,YAAc,2BAA2B,WAAa,0BAA0B,YAAc,6B,oBCAhLD,EAAOC,QAAU,CAAC,OAAS,+BAA+B,YAAc,oCAAoC,WAAa,mCAAmC,gBAAkB,wCAAwC,aAAe,qCAAqC,iBAAmB,yCAAyC,oBAAsB,4CAA4C,eAAiB,yC,oBCAzZD,EAAOC,QAAU,CAAC,OAAS,8BAA8B,YAAc,mCAAmC,qBAAuB,8C,oBCAjID,EAAOC,QAAU,CAAC,QAAU,yBAAyB,qBAAuB,sCAAsC,YAAc,6BAA6B,KAAO,sBAAsB,SAAW,0BAA0B,cAAgB,iC,oBCA/OD,EAAOC,QAAU,CAAC,UAAY,6BAA6B,WAAa,8BAA8B,UAAY,6BAA6B,QAAU,2BAA2B,YAAc,iC,oBCAlMD,EAAOC,QAAU,CAAC,UAAY,6BAA6B,YAAc,+BAA+B,OAAS,0BAA0B,UAAY,6BAA6B,iBAAmB,sC,oBCAvMD,EAAOC,QAAU,CAAC,WAAa,kCAAkC,mBAAqB,0CAA0C,SAAW,kC,oBCA3ID,EAAOC,QAAU,CAAC,cAAgB,6BAA6B,KAAO,oBAAoB,SAAW,wBAAwB,YAAc,2BAA2B,aAAe,4BAA4B,UAAY,yBAAyB,SAAW,0B,oBCAjQD,EAAOC,QAAU,CAAC,WAAa,gCAAgC,aAAe,kCAAkC,aAAe,kCAAkC,YAAc,mC,oBCA/KD,EAAOC,QAAU,CAAC,UAAY,iCAAiC,OAAS,8BAA8B,cAAgB,qCAAqC,UAAY,mC,oBCDvKD,EAAOC,QAAU,IAA0B,sC,oBCC3CD,EAAOC,QAAU,CAAC,cAAgB,+BAA+B,YAAc,6BAA6B,WAAa,8B,oBCAzHD,EAAOC,QAAU,CAAC,cAAgB,mCAAmC,KAAO,0BAA0B,SAAW,gC,oBCAjHD,EAAOC,QAAU,CAAC,qBAAuB,mDAAmD,UAAY,wCAAwC,cAAgB,8C,oBCAhKD,EAAOC,QAAU,CAAC,UAAY,6BAA6B,aAAe,kC,oBCA1ED,EAAOC,QAAU,CAAC,eAAiB,iCAAiC,kBAAoB,oCAAoC,UAAY,8B,oBCAxID,EAAOC,QAAU,CAAC,aAAe,6BAA6B,kBAAoB,kCAAkC,UAAY,4B,oBCAhID,EAAOC,QAAU,CAAC,YAAc,6BAA6B,SAAW,0BAA0B,cAAgB,+BAA+B,KAAO,sBAAsB,SAAW,4B,oBCAzLD,EAAOC,QAAU,CAAC,WAAa,0C,oBCA/BD,EAAOC,QAAU,CAAC,cAAgB,qCAAqC,eAAiB,wC,oBCAxFD,EAAOC,QAAU,CAAC,UAAY,uCAAuC,OAAS,sC,oBCA9ED,EAAOC,QAAU,CAAC,YAAc,2BAA2B,SAAW,wBAAwB,cAAgB,6BAA6B,KAAO,oBAAoB,SAAW,0B,oBCAjLD,EAAOC,QAAU,CAAC,mBAAqB,+CAA+C,UAAY,wC,oBCAlGD,EAAOC,QAAU,CAAC,YAAc,iCAAiC,iBAAmB,wC,oBCApFD,EAAOC,QAAU,CAAC,QAAU,yBAAyB,aAAe,gC,oBCApED,EAAOC,QAAU,CAAC,YAAc,uC,mBCAhCD,EAAOC,QAAU,CAAC,OAAS,6BAA6B,YAAc,kCAAkC,WAAa,iCAAiC,gBAAkB,sCAAsC,aAAe,mCAAmC,iBAAmB,uCAAuC,oBAAsB,0CAA0C,cAAgB,oCAAoC,wBAA0B,8CAA8C,iBAAmB,uCAAuC,eAAiB,qCAAqC,cAAgB,oCAAoC,YAAc,kCAAkC,aAAe,mCAAmC,aAAe,qC,mBCA3wBD,EAAOC,QAAU,CAAC,UAAY,sCAAsC,iBAAmB,6CAA6C,eAAiB,2CAA2C,YAAc,wCAAwC,WAAa,uCAAuC,UAAY,sCAAsC,QAAU,sC,mBCAtWD,EAAOC,QAAU,CAAC,aAAe,wCAAwC,YAAc,uCAAuC,cAAgB,yCAAyC,aAAe,wCAAwC,cAAgB,yCAAyC,wBAA0B,mDAAmD,iBAAmB,8C,oBCDvYD,EAAOC,QAAU,IAA0B,2C,oBCA3CD,EAAOC,QAAU,IAA0B,6C,oBCA3CD,EAAOC,QAAU,IAA0B,2C,oBCC3CD,EAAOC,QAAU,CAAC,UAAY,yC,oBCD9BD,EAAOC,QAAU,IAA0B,oC,mBCC3CD,EAAOC,QAAU,CAAC,cAAgB,qCAAqC,YAAc,mCAAmC,gBAAkB,uCAAuC,OAAS,8BAA8B,UAAY,iCAAiC,cAAgB,qCAAqC,aAAe,sC,oBCDzUD,EAAOC,QAAU,IAA0B,oC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,qC,oBCA3CD,EAAOC,QAAU,IAA0B,qC,oBCA3CD,EAAOC,QAAU,IAA0B,sC,oBCA3CD,EAAOC,QAAU,IAA0B,qC,oBCC3CD,EAAOC,QAAU,CAAC,aAAe,+C,oBCAjCD,EAAOC,QAAU,CAAC,WAAa,kC,oBCD/BD,EAAOC,QAAU,IAA0B,wC,oBCA3CD,EAAOC,QAAU,IAA0B,8C,oBCC3CD,EAAOC,QAAU,CAAC,MAAQ,uB,oBCA1BD,EAAOC,QAAU,CAAC,SAAW,6B,oBCA7BD,EAAOC,QAAU,CAAC,QAAU,2B,oBCA5BD,EAAOC,QAAU,CAAC,YAAc,mC,oBCAhCD,EAAOC,QAAU,CAAC,WAAa,iC,oBCD/BD,EAAOC,QAAU,IAA0B,0C,oBCC3CD,EAAOC,QAAU,CAAC,QAAU,2B,yDCA5BD,EAAOC,QAAU,CAAC,gBAAkB,uCAAuC,gBAAkB,uCAAuC,aAAe,oCAAoC,eAAiB,sCAAsC,YAAc,mCAAmC,WAAa,kCAAkC,kBAAoB,yCAAyC,WAAa,kCAAkC,uBAAyB,gD,iBCDndA,EAAQC,gBAAkBC,OAAOC,OAAO,CACtCC,WAAY,aACZC,YAAa,cACbC,eAAgB,iBAChBC,aAAc,eACdC,YAAa,cACbC,WAAY,eAGdT,EAAQI,WAAc,CACpB,gBACA,yBACA,sBACA,+BACA,wBACA,gBACA,yCACA,yBACA,2BACA,wBACA,eACA,0BACA,YACA,cACA,SAGFJ,EAAQK,YAAc,CACpB,SACA,SACA,iBACA,SAGFL,EAAQM,eAAkB,CACxB,iBACA,mBACA,6BAGFN,EAAQO,aAAe,CACrB,QACA,SAGFP,EAAQQ,YAAc,CACpB,WACA,gBACA,YAGFR,EAAQU,aAAe,CACrB,wBACA,mBACA,kBACA,iCACA,uCACA,oBACA,4BACA,qBACA,kCACA,8B,mBC5DFX,EAAOC,QAAU,CAAC,cAAgB,+BAA+B,WAAa,4BAA4B,eAAiB,gCAAgC,oBAAsB,qCAAqC,YAAc,6BAA6B,eAAiB,gCAAgC,YAAc,6BAA6B,mBAAqB,oCAAoC,aAAe,8BAA8B,SAAW,0BAA0B,YAAc,+B,mBCAtfD,EAAOC,QAAU,CAAC,QAAU,yBAAyB,qBAAuB,sCAAsC,YAAc,6BAA6B,KAAO,sBAAsB,SAAW,0BAA0B,cAAgB,+BAA+B,cAAgB,+BAA+B,aAAe,8BAA8B,UAAY,2BAA2B,cAAgB,iC,6LCC3ZW,EAAU,IAAIC,IAWPC,EAAoB,WAC/BF,EAAQG,OAAO,iBCZJC,EAAiBC,wBAAc,MA6B7BC,EAzBgB,SAACC,GAAW,IAAD,EACVC,mBAHT,MAEmB,mBACjCC,EADiC,KACxBC,EADwB,KAGxCC,qBAAU,WACR,IAAMC,EDNoB,WAC5B,IAAIH,EAAU,KACRI,EAAcb,EAAQc,IAAI,gBAIhC,OAHID,IACFJ,EAAUM,IAAUF,IAEfJ,ECAgBO,GACjBJ,GACFF,EAAWE,KAEZ,IAYH,OACE,kBAACR,EAAea,SAAhB,eAAyBC,MAAO,CAAET,UAASU,SAX5B,SAACC,GAChBV,EAAWU,IAU0CC,UAPrC,WAChBnB,IACAoB,aAAaC,QACbb,EAAW,SAI2DH,K,wFCvBlEiB,EAAWC,IAAXD,OACO,SAASE,IACtB,OACE,kBAACF,EAAD,CAAQG,UAAWC,IAAOC,QACxB,yBAAKF,UAAWC,IAAOE,sBACrB,kBAACC,EAAA,EAAD,CAAgBJ,UAAWC,IAAOI,YAAaC,QAAS,kBAAMC,OAAOC,KAAK,uCAC1E,kBAACC,EAAA,EAAD,CAAgBT,UAAWC,IAAOI,YAAaC,QAAS,kBAAMC,OAAOC,KAAK,8CAC1E,kBAACE,EAAA,EAAD,CAAmBV,UAAWC,IAAOI,YAAaC,QAAS,kBAAMC,OAAOC,KAAK,iDAE/E,yBAAKR,UAAWC,IAAOU,sBAAvB,6CAC4C,6BAD5C,qC,+ICFSC,E,OALMC,EAAMC,OAAO,CAChCC,QAHA,8CAIAC,iBAAiB,ICAJ,SAASC,EAAcrC,GAAQ,IAAD,EACTC,mBAASD,EAAMsC,WADN,mBACpCA,EADoC,KACzBC,EADyB,OAEbtC,oBAAS,GAFI,mBAEpCuC,EAFoC,KAE3BC,EAF2B,OAGjBxC,mBAAS,MAHQ,mBAGpCyC,EAHoC,KAG7BC,EAH6B,OAI5BC,IAAKC,UAAbC,EAJoC,oBAKnClC,EAAamC,qBAAWlD,GAAxBe,SAERR,qBAAU,WACRmC,EAAavC,EAAMsC,aAClB,CAACtC,EAAMsC,YAEV,IAAMU,EAAQ,uCAAG,WAAOC,GAAP,mBAAAC,EAAA,sEAEbT,GAAW,GACLU,EAAMb,EAAW,YAAc,UAC/Bc,EAAc,CAClBC,SAAUJ,EAAOI,SACjBC,SAAUL,EAAOK,SACjBC,MAAON,EAAOM,MACdC,KAAMP,EAAOO,MARF,SAUQvB,EAAMwB,KAAKN,EAAM,YAAaC,GAVtC,OAUPM,EAVO,OAWbjB,GAAW,GACX7B,EAAS8C,EAAOC,KAAKzD,SACrBa,aAAa6C,QAAQ,YAAY,GACjCjC,OAAOkC,SAASC,QAAO,GAdV,kDAgBbrB,GAAW,GACXE,EAAS,KAAMoB,SAASJ,KAAKK,SAjBhB,0DAAH,sDAsDRC,EACJ,yBAAK7C,UAAWC,IAAO6C,wBACrB,yBAAK9C,UAAWC,IAAO8C,WAAYC,WAAW,EAAOC,IAAKC,IAAmBC,IAAI,KACjF,sEACA,qEACA,+EAIEC,EACJ,yBAAKpD,UAAWC,IAAO6C,wBACrB,yBAAK9C,UAAWC,IAAO8C,WAAYC,WAAW,EAAOC,IAAKI,IAAiBF,IAAI,KAC/E,uEACA,uDACA,8EAIJ,OACE,kBAAC,IAAD,CACEG,QAAS1E,EAAM2E,UACfrD,OAAQ,KACRsD,MAAOtC,EAAW,sBAAwB,oBAC1CuC,SAlDY,WACd/B,EAAKgC,cACL9E,EAAM+E,WAiDJC,MAAM,SAEN,yBAAK5D,UAAWC,IAAO4D,iBACrB,yBAAK7D,UAAWC,IAAO6D,iBAEnB5C,EACA,6BAAM2B,GACN,6BAAMO,IAGV,yBAAKpD,UAAWC,IAAO8D,aACpBzC,EAAQ,kBAAC,IAAD,CAAO0C,MAAO,CAACC,aAAc,QAASrB,QAAStB,EAAO4C,KAAK,QAAQC,UAAQ,EAACC,QAAM,EAACC,UAAQ,EAACC,WAAY,kBAAM/C,EAAS,SAAY,KAC5I,kBAAC,IAAD,eACEa,KAAK,WACLR,SAAUA,EACV2C,oBAAkB,EAClBvE,UAAWC,IAAOuE,aAClB9C,KAAMA,GA/DO,CACrB+C,SAAU,CACRC,GAAI,CAAEC,KAAM,IACZC,GAAI,CAAED,KAAM,IAEdE,WAAY,CACVH,GAAI,CAAEC,KAAM,IACZC,GAAI,CAAED,KAAM,OA2DN,kBAAC,IAAKG,KAAN,CACE1C,KAAK,QACL2C,MAAM,SACNC,MAAO,CACL,CACEd,KAAM,QACNtB,QAAS,kCAEX,CACEqC,UAAU,EACVrC,QAAS,+BAIb,kBAAC,IAAD,OAEF,kBAAC,IAAKkC,KAAN,CACE1C,KAAK,WACL2C,MAAM,WACNC,MAAO,CAAC,CAAEC,UAAU,EAAMrC,QAAS,8BAA+BsC,YAAY,KAE9E,kBAAC,IAAD,OAEF,kBAAC,IAAKJ,KAAN,CACE1C,KAAK,WACL2C,MAAM,WACNC,MAAO,CACL,CACEC,UAAU,EACVrC,QAAS,gCAGbuC,aAAW,GAEX,kBAAC,IAAMC,SAAP,OAEF,kBAAC,IAAKN,KAAN,CACE1C,KAAK,UACL2C,MAAM,mBACNM,aAAc,CAAC,YACfF,aAAW,EACXH,MAAO,CACL,CACEC,UAAU,EACVrC,QAAS,iCAEX,gBAAG0C,EAAH,EAAGA,cAAH,MAAwB,CACtBC,UADsB,SACZC,EAAMjG,GACd,OAAKA,GAAS+F,EAAc,cAAgB/F,EAGrCkG,QAAQC,OAAO,oDAFbD,QAAQE,eAOvB,kBAAC,IAAMP,SAAP,OAEF,kBAAC,IAAKN,KAAN,CACE1C,KAAK,OACL2C,MAAM,YACNC,MAAO,CAAC,CAAEC,UAAU,EAAMrC,QAAS,8BAA+BsC,YAAY,KAE9E,kBAAC,IAAD,OAEF,kBAAC,IAAKJ,KAzHW,CACzBD,WAAY,CACVH,GAAI,CACFC,KAAM,GACNiB,OAAQ,GAEVhB,GAAI,CACFD,KAAM,GACNiB,OAAQ,KAkHF,kBAAC,IAAD,CAAQ1B,KAAK,UAAU2B,SAAS,SAAS7F,UAAWC,IAAO6F,eAAgBC,MAAM,QAAQ3E,QAASA,GAAlG,YAGA,uBAAGpB,UAAWC,IAAO+F,mBAArB,KAA0C,0BAAM1F,QAnJzC,WACjBa,GAAcD,IAkJiElB,UAAWC,IAAOgG,YAA7C,aAAoE/E,EAAW,QAAU,UAAzF,aAC1C,uBAAGlB,UAAWC,IAAO+F,mBAArB,4BAAiE,0BAAM1F,QAjJhE,WACjB1B,EAAM+E,UACN/E,EAAMsH,kBA+IgGlG,UAAWC,IAAOgG,YAA7C,kB,iDCpLhE,SAASE,EAAT,GAAoF,IAA7D5C,EAA4D,EAA5DA,UAAWI,EAAiD,EAAjDA,QAASyC,EAAwC,EAAxCA,iBAAkBC,EAAsB,EAAtBA,mBAAsB,EACjF7E,IAAKC,UAAbC,EADyF,sBAElE7C,oBAAS,GAFyD,mBAEzFuC,EAFyF,KAEhFC,EAFgF,OAGtExC,mBAAS,MAH6D,mBAGzFyC,EAHyF,KAGlFC,EAHkF,KAIxF/B,EAAamC,qBAAWlD,GAAxBe,SACFoC,EAAQ,uCAAG,WAAOC,GAAP,iBAAAC,EAAA,sEAEbT,GAAW,GACLvC,EAAU,CACdwH,KAAMzE,EAAOyE,KACbpE,SAAUL,EAAOK,SACjBqE,SAAU1E,EAAO0E,UANN,SAQQ1F,EAAMwB,KAAK,oBAAqBvD,GARxC,OAQPwD,EARO,OASbjB,GAAW,GACX7B,EAAS8C,EAAOC,KAAKzD,SACrByB,OAAOkC,SAASC,QAAO,GAXV,kDAabrB,GAAW,GACXE,EAAS,KAAMoB,SAASJ,KAAKK,SAdhB,0DAAH,sDAiCd,OACE,kBAAC,IAAD,CACEU,QAASC,EACTrD,OAAQ,KACRuD,SAda,WACf/B,EAAKgC,cACLC,KAaEH,MAAM,UACNI,MAAM,SAELtC,EAAQ,kBAAC,IAAD,CAAO0C,MAAO,CAAEC,aAAc,QAAUrB,QAAStB,EAAO4C,KAAK,QAAQC,UAAQ,EAACC,QAAM,EAACC,UAAQ,EAACC,WAAY,kBAAM/C,EAAS,SAAY,KAC9I,kBAAC,IAAD,CACEa,KAAK,iBACLpC,UAAWC,IAAOuG,WAClBC,cAAe,CAAEF,UAAU,GAC3B3E,SAAUA,EACVF,KAAMA,GAEN,kBAAC,IAAKoD,KAAN,CACE1C,KAAK,OACL4C,MAAO,CAAC,CAAEC,UAAU,EAAMrC,QAAS,0CAEnC,kBAAC,IAAD,CAAO8D,OAAQ,kBAACC,EAAA,EAAD,CAAc3G,UAAU,wBAA0B4G,YAAY,uBAE/E,kBAAC,IAAK9B,KAAN,CACE1C,KAAK,WACL4C,MAAO,CAAC,CAAEC,UAAU,EAAMrC,QAAS,iCAEnC,kBAAC,IAAD,CACE8D,OAAQ,kBAACG,EAAA,EAAD,CAAc7G,UAAU,wBAChCkE,KAAK,WACL0C,YAAY,cAGhB,kBAAC,IAAK9B,KAAN,KACE,kBAAC,IAAKA,KAAN,CAAW1C,KAAK,WAAW0E,cAAc,UAAUC,SAAO,GACxD,kBAAC,IAAD,qBAEF,uBAAGzG,QAzCU,WACnBqD,IACA0C,KAuCgCrG,UAAWC,IAAO+G,cAA5C,qBAIF,kBAAC,IAAKlC,KAAN,KACE,kBAAC,IAAD,CAAQZ,KAAK,UAAU2B,SAAS,SAAS7F,UAAWC,IAAOgH,aAAclB,MAAM,QAAQ3E,QAASA,GAAhG,WADF,0BAIyB,0BAAMpB,UAAWC,IAAOiH,YAAa5G,QA3D/C,WACnBqD,IACAyC,GAAiB,KAyDY,gB,uBClFlB,SAASe,GAAT,GAAsD,IAAvB5D,EAAsB,EAAtBA,UAAWI,EAAW,EAAXA,QAAW,EACnDnC,IAAKC,UAAbC,EAD2D,sBAEpC7C,oBAAS,GAF2B,mBAE3DuC,EAF2D,KAElDC,EAFkD,KAG1DvC,EAAY6C,qBAAWlD,GAAvBK,QAEF8C,EAAQ,uCAAG,WAAMC,GAAN,SAAAC,EAAA,sEAEbT,GAAW,GAFE,SAGPR,EAAMwB,KAAK,2BAA4B,CAAEiE,KAAMzE,EAAOyE,OAH/C,OAIbjF,GAAW,GAJE,gDAMbA,GAAW,GACX+F,MAAM,KAAMzE,SAASJ,KAAKK,SAPb,yDAAH,sDAeRyE,EAAcvI,EAAUA,EAAQqD,MAAQ,KAE9C,OACE,kBAAC,IAAD,CAAOmB,QAASC,EAAWrD,OAAQ,KAAMsD,MAAM,sBAAsBI,MAAM,QAAQH,SARpE,WACf/B,EAAKgC,cACLC,MAOE,kBAAC,IAAD,CAAMvB,KAAK,kBAAkBV,KAAMA,EAAME,SAAUA,EAAU6E,cAAe,CAAEH,KAAMe,IAClF,kBAAC,IAAKvC,KAAN,CAAW1C,KAAK,OAAO4C,MAAO,CAAC,CAAEC,UAAU,EAAMrC,QAAS,0CACxD,kBAAC,IAAD,CAAO8D,OAAQ,kBAACC,EAAA,EAAD,CAAc3G,UAAU,wBAA0B4G,YAAY,kCAE/E,kBAAC,IAAK9B,KAAN,KACE,kBAAC,IAAD,CAAQZ,KAAK,UAAU2B,SAAS,SAASE,MAAM,QAAQ3E,QAASA,EAASpB,UAAWC,KAAOqH,WAA3F,a,8CChCK,SAASC,KACtB,OACE,yBAAKvH,UAAWC,KAAOuH,eACrB,yBAAKxH,UAAWC,KAAOwH,WAAYxE,IAAKwE,KAAYzE,WAAW,EAAOG,IAAI,KAC1E,wBAAInD,UAAWC,KAAOyH,aAAtB,W,ICEEC,GAAoB7H,IAApB6H,OAAQC,GAAY9H,IAAZ8H,QAED,SAASC,KAAW,IAAD,EACEhJ,oBAAS,GADX,mBACzBiJ,EADyB,KACbC,EADa,OAEAlJ,oBAAS,GAFT,mBAEzBmJ,EAFyB,KAEfC,EAFe,OAGQpJ,oBAAS,GAHjB,mBAGzBqJ,EAHyB,KAGXC,EAHW,OAIEtJ,oBAAS,GAJX,mBAIzBqC,EAJyB,KAIdC,EAJc,KAM1BiH,EAAe,SAAClH,GACpBC,EAAaD,GACb6G,GAAY,IAGd,OACE,kBAAC,IAAD,KACE,kBAAC5B,EAAD,CAAa5C,UAAWyE,EAAUrE,QAAS,kBAAMsE,GAAY,IAAQ7B,iBAAkBgC,EAAc/B,mBAAoB,kBAAM8B,GAAgB,MAC/I,kBAAClH,EAAD,CAAesC,UAAWuE,EAAYnE,QAAS,WAAOoE,GAAY,IAAS7G,UAAWA,EAAWgF,eAAgB,kBAAM+B,GAAY,MACnI,kBAACd,GAAD,CAAqB5D,UAAW2E,EAAcvE,QAAS,kBAAMwE,GAAgB,MAC7E,kBAACR,GAAD,KACE,yBAAK3H,UAAWC,IAAOoI,eACrB,kBAACd,GAAD,MACA,yBAAKvH,UAAWC,IAAOqI,qBACrB,kBAAC,IAAD,CAAQtI,UAAWC,IAAOsI,WAAYrE,KAAK,YAAY6B,MAAM,QAAQzF,QAAS,kBAAM2H,GAAY,KAAhG,WACA,kBAAC,IAAD,CAAQjI,UAAWC,IAAOsI,WAAYrE,KAAK,UAAU6B,MAAM,QAAQzF,QAAS,kBAAM8H,GAAa,KAA/F,eAIN,kBAACR,GAAD,KACE,yBAAK5H,UAAWC,IAAOuI,aACrB,yBAAKxI,UAAWC,IAAOwI,gBACrB,yBAAKzI,UAAWC,IAAOyI,SAAU1F,WAAW,EAAOC,IAAKyF,IAAUvF,IAAI,KACtE,yBAAKnD,UAAWC,IAAO0I,cACrB,uBAAG3I,UAAWC,IAAO2I,aAArB,sBACA,uBAAG5I,UAAWC,IAAO4I,oBAArB,gDACA,kBAAC,IAAD,CAAQ7I,UAAWC,IAAO6F,eAAgB5B,KAAK,UAAU6B,MAAM,QAAQzF,QAAS,kBAAM8H,GAAa,KAAnG,aACA,kBAAC,IAAD,CAASpE,MAAO,CAAEJ,MAAO,UAAzB,MACA,kBAAC,IAAD,CAAQ5D,UAAWC,IAAO6F,eAAgB5B,KAAK,YAAY6B,MAAM,QAAQzF,QAAS,kBAAM8H,GAAa,KAArG,oBAKR,kBAACrI,EAAD,O,kJCnDO+I,GAAQlL,OAAOC,OAAO,CACjCkL,MAAO,EACPC,MAAO,EACPC,QAAS,IAGEC,GAAStL,OAAOC,OAAO,CAClCsL,OAAQ,EACRC,SAAU,IAGCC,GAAiBzL,OAAOC,OAAO,CAC1CyL,SAAU,EACVC,QAAS,EACTC,SAAU,IAGCC,GAC8D,2CAE9DC,GAAgB9L,OAAOC,OAAO,CACzC8L,KAAM,OACNC,QAAS,UACTC,KAAM,OACNC,IAAK,MACLC,WAAY,aACZC,kBAAmB,oBACnBC,MAAO,QACPC,eAAgB,iBAChBC,aAAc,eACdC,YAAa,cACbC,oBAAqB,sBACrBC,oBAAqB,wBAGVC,GAAS3M,OAAOC,OAAO,CAClC2M,UAAW,EACXC,KAAM,EACNC,QAAS,IAGEC,GAAY/M,OAAOC,OAAO,CACrC+M,UAAW,EACXrB,QAAS,EACTsB,SAAU,IAGCC,GAAWlN,OAAOC,OAAO,CACpCkN,OAAQ,EACRC,OAAQ,EACRC,KAAM,EACNC,QAAS,IAKEC,GAAoBvN,OAAOC,OAAO,CAC7CkN,OAAQ,EACRC,OAAQ,IACRC,KAAM,IACNC,QAAS,MAGEE,GAAiB,CAAC,SAAU,aAAc,OAAQ,cAAe,kBAEjEC,GAAezN,OAAOC,OAAO,CACxCyN,SAAU,EACV/B,QAAS,EACTgC,UAAW,IAQAC,IALgB5N,OAAOC,OAAO,CACzC4N,QAAS,EACTC,UAAW,IAGgB9N,OAAOC,OAAO,CACzC+M,UAAW,EACXrB,QAAS,EACTsB,SAAU,KAGCc,GAAmB/N,OAAOC,OAAO,CAC5C+N,SAAU,EACVC,UAAW,IC7EE,SAASC,GAAT,GAAgE,IAAjCvI,EAAgC,EAAhCA,UAAWwI,EAAqB,EAArBA,SAAUpI,EAAW,EAAXA,QAAW,EAC7DnC,IAAKC,UAAbC,EADqE,sBAE9C7C,oBAAS,GAFqC,mBAErEuC,EAFqE,KAE5DC,EAF4D,KAGpEvC,EAAY6C,qBAAWlD,GAAvBK,QAEF8C,EAAQ,uCAAG,WAAMC,GAAN,eAAAC,EAAA,sEAEbT,GAAW,GACLa,EAAW,CACf8J,YAAanK,EAAOoK,YACpBC,YAAarK,EAAOK,UALT,SAOPrB,EAAMwB,KAAK,aAAevD,EAAQqN,GAAK,mBAAoBjK,GAPpD,OAQbb,GAAW,GARE,gDAUbA,GAAW,GACX+F,MAAM,KAAMzE,SAASJ,KAAKK,SAXb,yDAAH,sDAcRa,EAAW,WACf/B,EAAKgC,cACLC,KAeF,OACE,kBAAC,IAAD,CAAOL,QAASC,EAAWrD,OAAQ,KAAMsD,MAAM,uBAAuBC,SAAUA,EAAUG,MAAM,SAC9F,kBAAC,IAAD,iBAVW,CACba,SAAU,CAAEE,KAAM,GAClBE,WAAY,CAAEF,KAAM,KAQlB,CAAkBvC,KAAK,kBAAkBR,SAAUA,EAAUF,KAAMA,IACjE,kBAAC,IAAKoD,KAAN,CACE1C,KAAK,cACL2C,MAAM,mBACNC,MAAO,CACL,CACEC,UAAU,EACVrC,QAAS,yCAIb,kBAAC,IAAMwC,SAAP,OAEF,kBAAC,IAAKN,KAAN,CACE1C,KAAK,WACL2C,MAAM,eACNC,MAAO,CACL,CACEC,UAAU,EACVrC,QAAS,oCAGbuC,aAAW,GAEX,kBAAC,IAAMC,SAAP,OAEF,kBAAC,IAAKN,KAAN,CACE1C,KAAK,UACL2C,MAAM,kBACNM,aAAc,CAAC,YACfF,aAAW,EACXH,MAAO,CACL,CACEC,UAAU,EACVrC,QAAS,iCAEX,gBAAG0C,EAAH,EAAGA,cAAH,MAAwB,CACtBC,UADsB,SACZC,EAAMjG,GACd,OAAKA,GAAS+F,EAAc,cAAgB/F,EAGrCkG,QAAQC,OAAO,oDAFbD,QAAQE,eAOvB,kBAAC,IAAMP,SAAP,OAEF,kBAAC,IAAKN,KAtDO,CACjBD,WAAY,CAAEe,OAAQ,EAAGjB,KAAM,KAsDzB,kBAAC,IAAD,CAAQT,KAAK,UAAU2B,SAAS,SAAS7F,UAAWC,KAAO6F,eAAgB1E,QAASA,GAApF,mBAGCtC,EAAQsN,OAAStD,GAAMC,MAAQ,KAC9B,0BAAM/I,UAAWC,KAAOoM,WAAY/L,QApEvB,WACrBmD,IACAsI,MAkEQ,uB,yBC9FG,SAASO,GAAT,GAAqC,IAAdC,EAAa,EAAbA,UACpC,OACE,yBAAKvM,UAAWC,KAAOuM,eACrB,yBAAKvJ,IAAKwJ,KAAMtJ,IAAI,GAAGnD,UAAWC,KAAOyM,KAAM1J,WAAW,IACzDuJ,EAAY,KAAO,uBAAGvM,UAAWC,KAAO0M,UAArB,W,iJCRbC,GAAgB,SAACC,GAC5B,IAAIC,GAAWD,EAAW,KAAME,QAAQ,GACpCC,EAAUC,KAAKC,MAAMJ,EAAU,IAC/BK,EAAQ,GAUZ,OATIH,EAAU,KAIVA,GADAA,GAA6B,IAD7BG,GADAA,EAAQF,KAAKC,MAAMF,EAAU,MACX,GAAMG,EAAQ,IAAMA,KAEhB,GAAMH,EAAU,IAAMA,GAIhDF,GADAA,EAAUG,KAAKC,MAAMJ,EAAU,MACT,GAAMA,EAAU,IAAMA,EAC9B,KAAVK,EACOA,EAAQ,IAAMH,EAAU,IAAMF,EAElCE,EAAU,IAAMF,GCNjBM,GAAWC,KAAXD,OACAE,GAAUC,KAAVD,MAEO,SAASE,KAAW,IAAD,EACY3O,oBAAS,GADrB,mBACzB4O,EADyB,KACTC,EADS,OAEF7O,oBAAS,GAFP,mBAEzBuC,EAFyB,KAEhBC,EAFgB,OAGFxC,mBAAS,CAAEC,QAAS,CAAEqD,MAAO,QAH3B,mBAGzBwL,EAHyB,KAGhBC,EAHgB,KAIxB9O,EAAY6C,qBAAWlD,GAAvBK,QAJwB,EAKID,oBAAS,GALb,mBAKzBgP,EALyB,KAKbC,EALa,OAMJjP,mBAAS,IANL,mBAMzBkP,EANyB,KAMjBC,EANiB,KAQ1BC,EAAiB,uCAAG,4BAAAnM,EAAA,sEAEtB4L,GAAkB,GAFI,SAGD7M,EAAM1B,IAAI,aAAeL,EAAQoP,QAAQ/B,IAHxC,OAGhB7J,EAHgB,OAItBsL,EAAWtL,EAAOC,KAAK2L,SACvBR,GAAkB,GALI,gDAOtBA,GAAkB,GAClBtG,MAAM,KAAMzE,SAASJ,KAAKK,SARJ,yDAAH,qDAYvB5D,qBAAU,WACRiP,MAEC,IAEH,IAAME,EACJR,GAAWA,EAAQI,OACjB,kBAAC,KAAD,CAAQ9K,IAAKwG,GAAYkE,EAAQI,OAAQK,KAAM,MAE/C,kBAAC,KAAD,CAAQC,KAAM,kBAAC1H,EAAA,EAAD,MAAkByH,KAAM,MAgBpCE,EAAQ,uCAAG,WAAMzM,GAAN,SAAAC,EAAA,sEAEbT,GAAW,GAFE,SAGPR,EAAM0N,IAAI,aAAeZ,EAAQxB,GAAItK,GAH9B,OAIboM,IACA5M,GAAW,GALE,gDAObA,GAAW,GACX+F,MAAM,KAAMzE,SAASJ,KAAKK,SARb,yDAAH,sDAYR4L,EAAiB,CACrBC,SAAU,SAAAC,GACRV,EAAU,KAEZW,aAAc,SAAAD,GAKZ,OAJiC,eAAdA,EAAKxK,MAAuC,cAAdwK,EAAKxK,OAEpD8J,EAAU,CAACU,KAEN,GAETE,SAAUb,GAGNc,EAAY,uCAAG,4BAAA/M,EAAA,sEAEjBgM,GAAc,IACRgB,EAAW,IAAIC,UACZC,OAAO,SAAUjB,EAAO,IAJhB,SAKXlN,EAAM,oBAAsB8M,EAAQ7O,QAAQmD,SAAU,CAC1DgN,OAAQ,OACR1M,KAAMuM,IAPS,uBASXb,IATW,OAUjB1N,OAAOkC,SAASC,QAAO,GACvBoL,GAAc,GAXG,kDAajBA,GAAc,GACd1G,MAAM,KAAMzE,SAASJ,KAAKK,SAdT,0DAAH,qDAkBZsM,EAAkB,uCAAG,sBAAApN,EAAA,+EAEjBjB,EAAMwB,KAAK,0BAA2B,CAAEF,MAAOwL,EAAQ7O,QAAQqD,QAF9C,sDAIvBiF,MAAM,KAAMzE,SAASJ,KAAKK,SAJH,wDAAH,qDAQxB,OACE,kBAAC,KAAD,CAAMuM,SAAU1B,GACd,yBAAKzN,UAAWC,KAAO0N,SACrB,yBAAK3N,UAAWC,KAAOmP,sBACpBjB,EACD,yBAAKnO,UAAWC,KAAO+B,aACrB,uBAAGhC,UAAWC,KAAOmC,MAAOuL,EAAQvL,MACpC,qCAAWuL,EAAQ7O,QAAQqD,OAC3B,8CAAoByK,GAAce,EAAQ0B,iBACzCvQ,EAAQwQ,aACP,kBAAC,KAAD,CAAKC,MAAM,WAAX,YAEA,8BACE,kBAAC,KAAD,CAAKA,MAAM,WAAX,cACA,kBAAC,IAAD,CAAQrL,KAAK,OAAO5D,QAAS4O,GAA7B,gCAOR,yBAAKlP,UAAWC,KAAOuP,UACpB7B,EAAQvL,KACP,kBAAC,IAAD,iBAxFa,CACrBqC,SAAU,CACRC,GAAI,CAAEC,KAAM,IACZC,GAAI,CAAED,KAAM,IAEdE,WAAY,CACVH,GAAI,CAAEC,KAAM,IACZC,GAAI,CAAED,KAAM,MAiFN,CAEE/C,SAAU0M,EACV7H,cAAe,CACbrE,KAAMuL,EAAQvL,KACdqN,MAAO9B,EAAQ8B,MACfC,UAAW/B,EAAQ+B,UAAYC,KAAOhC,EAAQ+B,gBAAaE,EAC3DC,QAASlC,EAAQkC,QACjBC,aAAcnC,EAAQmC,aAAenC,EAAQmC,kBAAeF,EAC5DG,YAAapC,EAAQoC,YAAcpC,EAAQoC,iBAAcH,EACzDI,OAAQrC,EAAQqC,OAASrC,EAAQqC,YAASJ,EAC1CK,aAActC,EAAQsC,aAAeC,KAAKC,MAAMxC,EAAQsC,mBAAgBL,EACxEQ,gBAAiBzC,EAAQyC,gBAAkBF,KAAKC,MAAMxC,EAAQyC,sBAAmBR,KAGnF,kBAAC,KAAD,CAAUS,iBAAkB,CAAC,IAAK,MAChC,kBAAC/C,GAAD,CAAOgD,OAAO,aAAaC,IAAI,KAC7B,kBAAC,IAAKzL,KAAN,CAAWC,MAAM,OAAO3C,KAAK,OAAO4C,MAAO,CAAC,CAAEC,UAAU,EAAMrC,QAAS,4BACrE,kBAAC,IAAD,CAAOgE,YAAY,gBAAgBrH,MAAOoO,EAAQvL,QAEpD,kBAAC,IAAK0C,KAAN,CAAW1C,KAAK,QAAQ2C,MAAM,SAC5B,kBAAC,IAAD,CAAO6B,YAAY,kCAErB,kBAAC,IAAK9B,KAAN,CAAW1C,KAAK,YAAY2C,MAAM,aAChC,kBAAC,KAAD,OAEF,kBAAC,IAAKD,KAAN,CAAW1C,KAAK,SAAS2C,MAAM,iBAC7B,kBAAC,KAAD,iBAAYyJ,EAAZ,CAA4BgC,SAAS,iBACnC,kBAAC,IAAD,CAAQnC,KAAM,kBAACoC,GAAA,EAAD,OAAd,mBAGJ,kBAAC,IAAK3L,KA7GE,CACtBD,WAAY,CAAEe,OAAQ,EAAGjB,KAAM,KA6Gf,kBAAC,IAAD,CACE+L,SAAU3C,EAAO4C,QAAU,EAC3BrQ,QAASuO,EACTzN,QAASyM,EACT7J,MAAO,CAAEJ,MAAO,UAEhB,kBAACgN,GAAA,EAAD,MANF,oBAUJ,kBAACtD,GAAD,CAAOgD,OAAO,oBAAoBC,IAAI,KACpC,kBAAC,IAAD,CACEvM,MAAO,CAAEC,aAAc,QACvBrB,QAAQ,kEACRsB,KAAK,OACLC,UAAQ,IAEV,kBAAC,IAAKW,KAAN,CAAW1C,KAAK,eAAe2C,MAAM,QACnC,kBAAC,KAAD,CAAQ6B,YAAY,iCACjBiK,KAAY5S,aAAa6S,KAAI,SAAA5M,GAC5B,OACE,kBAACkJ,GAAD,CAAQ7N,MAAO2E,EAAMqM,IAAKrM,GACvBA,QAMX,kBAAC,IAAKY,KAAN,CAAW1C,KAAK,cAAc2C,MAAM,cAClC,kBAAC,KAAD,CAAQ6B,YAAY,sBACjBiK,KAAY3S,YAAY4S,KAAI,SAAAC,GAC3B,OACE,kBAAC3D,GAAD,CAAQ7N,MAAOwR,EAAKR,IAAKQ,GACtBA,QAMX,kBAAC,IAAKjM,KAAN,CAAW1C,KAAK,SAAS2C,MAAM,mBAC7B,kBAAC,KAAD,CAAQ6B,YAAY,yCACjBiK,KAAY/S,WAAWgT,KAAI,SAAAd,GAC1B,OACE,kBAAC5C,GAAD,CAAQ7N,MAAOyQ,EAAQO,IAAKP,GACzBA,QAMX,kBAAC,IAAKlL,KAAN,CAAW1C,KAAK,eAAe2C,MAAM,aACnC,kBAAC,KAAD,CAAQiM,KAAK,WAAWpK,YAAY,8BACjCiK,KAAYzS,aAAa0S,KAAI,SAAAG,GAC5B,OACE,kBAAC7D,GAAD,CAAQ7N,MAAO0R,EAAMV,IAAKU,GACvBA,QAMX,kBAAC,IAAKnM,KAAN,CAAW1C,KAAK,kBAAkB2C,MAAM,mBACtC,kBAAC,KAAD,CAAQiM,KAAK,WAAWpK,YAAY,2CACjCiK,KAAY7S,eAAe8S,KAAI,SAAA9M,GAC9B,OACE,kBAACoJ,GAAD,CAAQ7N,MAAOyE,EAAOuM,IAAKvM,GACxBA,UAQf,yBAAKhE,UAAWC,KAAOiR,eACrB,kBAAC,IAAD,CAAQhN,KAAK,UAAU2B,SAAS,SAASzE,QAASA,GAAlD,oBAKF,Q,gGC5OC,SAAS+P,KAAuB,IACrCrS,EAAY6C,qBAAWlD,GAAvBK,QADoC,EAERD,mBAAS,IAFD,mBAErCuS,EAFqC,KAEzBC,EAFyB,OAGdxS,oBAAS,GAHK,mBAGrCuC,EAHqC,KAG5BC,EAH4B,KAKtCiQ,EAAa,uCAAG,4BAAAxP,EAAA,6DACpBT,GAAW,GADS,kBAGGR,EAAM1B,IAAI,kBAAoBL,EAAQoP,QAAQ/B,IAHjD,OAGZ7J,EAHY,OAIlB+O,EAAc/O,EAAOC,KAAKgP,eAC1BlQ,GAAW,GALO,gDAOlB+F,MAAM,KAAMzE,SAASJ,KAAKK,SAC1BvB,GAAW,GARO,yDAAH,qDAYbmQ,EAAkB,uCAAG,WAAMrF,GAAN,SAAArK,EAAA,6DACzBT,GAAW,GADc,kBAGjBR,EAAM0N,IAAI,kBAAoBpC,EAAI,CACtCsF,MAAO9G,GAAUE,WAJI,OAMvByG,IANuB,gDAQvBlK,MAAM,KAAMzE,SAASJ,KAAKK,SAC1BvB,GAAW,GATY,yDAAH,sDAalBqQ,EAAU,CACd,CACElO,MAAO,OACPmO,UAAW,YACXC,OAAQ,SAAAC,GACN,OAAO,6BAAMlC,KAAOkC,GAAWC,OAAO,8BAG1C,CACEtO,MAAO,OACPmO,UAAW,OACXC,OAAQ,SAAAG,GACN,OAAIA,IAASjH,GAASE,OACb,kBAAC,KAAD,CAAKuE,MAAM,WAAX,UACEwC,IAASjH,GAASG,KACpB,kBAAC,KAAD,CAAKsE,MAAM,WAAX,QACEwC,IAASjH,GAASI,QACpB,kBAAC,KAAD,CAAKqE,MAAM,cAAX,WAEA,kBAAC,KAAD,iBAIb,CACE/L,MAAO,WACPmO,UAAW,WACXC,OAAQ,SAAAI,GACN,OAAO,6BAAMA,EAAW,IAAjB,WAGX,CACExO,MAAO,QACPmO,UAAW,QACXC,OAAQ,SAAAK,GACN,OAAO,6BAAMA,EAAN,OAGX,CACEzO,MAAO,QACPmO,UAAW,QACXC,OAAQ,SAAAH,GACN,OAAIA,IAAU9G,GAAUC,UACf,kBAAC,KAAD,CAAK2E,MAAM,WAAX,aACEkC,IAAU9G,GAAUpB,QACtB,kBAAC,KAAD,CAAKgG,MAAM,QAAX,WAEA,kBAAC,KAAD,CAAKA,MAAM,SAAX,eAIb,CACE/L,MAAO,SACPmO,UAAW,QACXC,OAAQ,SAACM,EAAMC,GACb,OAAIA,EAAOV,QAAU9G,GAAUpB,QAE3B,kBAAC,KAAD,CACE/F,MAAM,sCACN4O,OAAO,MACPC,WAAW,KACXrS,UAAWC,KAAOqS,UAClBC,UAAW,kBAAMf,EAAmBW,EAAOhG,MAL7C,UAWK,uCAUf,OAJAnN,qBAAU,WACRsS,MAEC,IAED,kBAAC,KAAD,CAAMnC,SAAU/N,GACd,kBAAC,IAAD,CAAQpB,UAAWC,KAAOyC,OAAQpC,QAASgR,EAAejD,KAAM,kBAACmE,GAAA,EAAD,OAAhE,UAGA,kBAAC,KAAD,CAAOd,QAASA,EAASe,WAAYrB,EAAYsB,YAAY,EAAOC,OAAO,Q,yIC9GlE,SAASC,KAAsB,IAAD,EACG/T,oBAAS,GADZ,mBACpCgU,EADoC,KACnBC,EADmB,KAEnChU,EAAY6C,qBAAWlD,GAAvBK,QACFiU,EAAc,uCAAG,WAAOf,EAAUD,GAAjB,SAAAjQ,EAAA,6DACrBgR,GAAmB,GADE,kBAGbjS,EAAMwB,KAAK,iBAAkB,CACjC2P,SAAqB,GAAXA,EAAgB,IAC1BgB,UAAWlU,EAAQoP,QAAQ/B,GAC3B4F,KAAMA,IANW,OAQnBe,GAAmB,GARA,gDAUnBA,GAAmB,GACnB1L,MAAM,KAAMzE,SAASJ,KAAKK,SAXP,yDAAH,wDAepB,OACE,yBAAK5C,UAAWC,KAAOgT,WACrB,kBAAC,KAAD,CAAKC,OAAQ,IACX,kBAAC,KAAD,CAAKvO,KAAM,GACT,kBAAC,KAAD,KACE,yBAAK3E,UAAWC,KAAOkT,kBACrB,yBAAKnT,UAAWC,KAAOmT,SAAvB,UACA,yBAAKpT,UAAWC,KAAOoT,gBAAvB,cACA,kBAAC,IAAD,MACA,yBAAKrT,UAAWC,KAAOqT,UAAWrQ,IAAKsQ,KAAQpQ,IAAI,GAAGH,UAAU,UAChE,yBAAKhD,UAAWC,KAAOuT,aACpBC,OAAO,EAAqBtI,GAAkBJ,QAAQgC,QAAQ,GADjE,KAGA,kBAAC,KAAD,CACE2G,UAAU,MACVlQ,MAAM,0CACN+O,UAAW,kBAAMQ,EAAe,GAAIjI,GAASC,SAC7CqH,OAAO,MACPC,WAAW,MAEX,kBAAC,IAAD,CAAQnO,KAAK,UAAU6B,MAAM,QAAQ3E,QAASyR,GAA9C,gBAOR,kBAAC,KAAD,CAAKlO,KAAM,GACT,kBAAC,KAAD,KACE,yBAAK3E,UAAWC,KAAOkT,kBACrB,yBAAKnT,UAAWC,KAAOmT,SAAvB,UACA,yBAAKpT,UAAWC,KAAOoT,gBAAvB,eACA,kBAAC,IAAD,MACA,yBAAKrT,UAAWC,KAAOqT,UAAWrQ,IAAK0Q,KAAQxQ,IAAI,GAAGH,UAAU,UAChE,yBAAKhD,UAAWC,KAAOuT,aACpBC,OAAO,GAAsBtI,GAAkBH,QAAQ+B,QAAQ,GADlE,IACuE,IACrE,0BAAM/M,UAAWC,KAAO2T,YAAxB,eAEF,kBAAC,KAAD,CACEF,UAAU,MACVlQ,MAAM,0CACN+O,UAAW,kBAAMQ,EAAe,IAAKjI,GAASE,SAC9CoH,OAAO,MACPC,WAAW,MAEX,kBAAC,IAAD,CAAQnO,KAAK,UAAU6B,MAAM,QAAQ3E,QAASyR,GAA9C,gBAOR,kBAAC,KAAD,CAAKlO,KAAM,GACT,kBAAC,KAAD,KACE,yBAAK3E,UAAWC,KAAOkT,kBACrB,yBAAKnT,UAAWC,KAAOmT,SAAvB,QACA,yBAAKpT,UAAWC,KAAOoT,gBAAvB,eACA,kBAAC,IAAD,MACA,yBAAKrT,UAAWC,KAAOqT,UAAWrQ,IAAK4Q,KAAM1Q,IAAI,GAAGH,UAAU,UAC9D,yBAAKhD,UAAWC,KAAOuT,aACpBC,OAAO,GAAsBtI,GAAkBF,MAAM8B,QAAQ,GADhE,IACqE,IACnE,0BAAM/M,UAAWC,KAAO2T,YAAxB,eAEF,kBAAC,KAAD,CACEF,UAAU,MACVlQ,MAAM,0CACN+O,UAAW,kBAAMQ,EAAe,IAAKjI,GAASG,OAC9CmH,OAAO,MACPC,WAAW,MAEX,kBAAC,IAAD,CAAQnO,KAAK,UAAU6B,MAAM,QAAQ3E,QAASyR,GAA9C,gBAOR,kBAAC,KAAD,CAAKlO,KAAM,GACT,kBAAC,KAAD,KACE,yBAAK3E,UAAWC,KAAOkT,kBACrB,yBAAKnT,UAAWC,KAAOmT,SAAvB,WACA,yBAAKpT,UAAWC,KAAOoT,gBAAvB,eACA,kBAAC,IAAD,MACA,yBAAKrT,UAAWC,KAAOqT,UAAWrQ,IAAK6Q,KAAS3Q,IAAI,GAAGH,UAAU,UACjE,yBAAKhD,UAAWC,KAAOuT,aACpBC,OAAO,GAAsBtI,GAAkBD,SAAS6B,QAAQ,GADnE,IACwE,IACtE,0BAAM/M,UAAWC,KAAO2T,YAAxB,eAEF,kBAAC,KAAD,CACEF,UAAU,MACVlQ,MAAM,0CACN+O,UAAW,kBAAMQ,EAAe,IAAKjI,GAASI,UAC9CkH,OAAO,MACPC,WAAW,MAEX,kBAAC,IAAD,CAAQnO,KAAK,UAAU6B,MAAM,QAAQ3E,QAASyR,GAA9C,kB,ICrHRkB,GAAYC,KAAZD,QAEO,SAASE,KAEtB,OACE,yBAAKjU,UAAWC,KAAOsR,eACrB,kBAAC,KAAD,CACElB,iBAAiB,SACjBnM,KAAK,QAEL,kBAAC6P,GAAD,CACEG,IACE,8BACE,kBAACC,GAAA,EAAD,MADF,wBAKF5D,IAAI,UAEJ,kBAACqC,GAAD,OAEF,kBAACmB,GAAD,CACEG,IACE,8BACE,kBAACE,GAAA,EAAD,MADF,yBAKF7D,IAAI,UACJvQ,UAAWC,KAAOoU,gBAElB,kBAAClD,GAAD,S,yBClCJjS,IAFU,IAAIZ,KAEQa,IAAI,gBAQjBmV,GAFAC,KAAG,GAAD,OAFf,0CAEe,kBAAuBrV,K,qECoBzBsV,G,WA3Bb,aAAe,qBACbC,KAAKC,OAAS,G,kDAGXC,GAAiB,IAAD,uBAANC,EAAM,iCAANA,EAAM,kBAInB,OAHIH,KAAKC,OAAOC,IACdF,KAAKC,OAAOC,GAAOE,SAAQ,SAAAC,GAAE,OAAIA,EAAE,WAAF,EAAMF,MAElCH,O,yBAGNE,EAAOG,GAGR,OAFIL,KAAKC,OAAOC,GAAQF,KAAKC,OAAOC,GAAOI,KAAKD,GAC3CL,KAAKC,OAAOC,GAAS,CAACG,GACpBL,O,0BAGLE,EAAOG,GACT,GAAIH,GAASK,KAAEC,WAAWH,GAAK,CAC7B,IAAMI,EAAYT,KAAKC,OAAOC,GACxBQ,EAAQD,EAAUE,WAAU,SAAAC,GAAG,OAAIA,IAAQP,KACjDI,EAAUI,OAAOH,EAAO,QACnBV,KAAKC,OAAOC,GAAS,GAC5B,OAAOF,S,KCuCIc,G,qLAvDJ,IAAD,OAyBN,OAdAC,UAAUC,aACPC,aAXiB,CAKlBC,MAAO,CACLC,kBAAkB,KAMnBC,MAAK,SAAAC,GACJ,EAAKA,OAASA,EACd,EAAKC,KAAK,SAAUD,MAErBE,OAAM,SAAAC,GACDA,aAAeC,aACjB9O,MAAM,wCAENA,MAAM6O,MAILxB,O,6BAQFvQ,EAAMiS,GACX,IAAMC,EAAMC,UAAU1F,OAOtB,OANI8D,KAAKqB,QACPrB,KAAKqB,OAAL,aAAkB5R,EAAlB,aAAkC2Q,SAAQ,SAAAyB,GACxC,IAAM7E,EAAgB,IAAR2E,EAAYD,GAAMG,EAAMC,QACtCvB,KAAEwB,IAAIF,EAAO,UAAW7E,MAGrBgD,O,6BAUP,OAHIA,KAAKqB,QACPrB,KAAKqB,OAAOW,YAAY5B,SAAQ,SAAAyB,GAAK,OAAIA,EAAMI,UAE1CjC,S,GAvDeD,ICFpBmC,GAAY,CAAEC,WAAY,CAAC,CAAEC,KAAM,CAAC,mCAqG3BC,G,YA9Fb,WAAYC,GAAW,IAAD,+BACpB,iDACKC,GAAK,IAAIC,kBAAkBN,IAChC,EAAKK,GAAGE,eAAiB,SAAAvC,GAAK,OAC5BL,GAAOyB,KAAK,OAAQ,CAClBoB,GAAI,EAAKJ,SACTK,UAAWzC,EAAMyC,aAErB,EAAKJ,GAAGK,QAAU,SAAA1C,GAAK,OAAI,EAAKoB,KAAK,aAAcpB,EAAM2C,QAAQ,KAEjE,EAAKC,YAAc,IAAIhC,GACvB,EAAKwB,SAAWA,EAXI,E,qEAmBhBS,EAAUC,GAAS,IAAD,OAYtB,OAXAhD,KAAK8C,YACFpB,GAAG,UAAU,SAAAL,GACZA,EAAOW,YAAY5B,SAAQ,SAAAyB,GACzB,EAAKU,GAAGU,SAASpB,EAAOR,MAE1B,EAAKC,KAAK,cAAeD,GACrB0B,EAAUlD,GAAOyB,KAAK,UAAW,CAAEoB,GAAI,EAAKJ,WAC3C,EAAKY,iBAEXC,MAAMH,GAEFhD,O,2BAOJoD,GAUH,OATIA,GACFvD,GAAOyB,KAAK,MAAO,CAAEoB,GAAI1C,KAAKsC,WAEhCtC,KAAK8C,YAAYb,OACbjC,KAAKuC,IACPvC,KAAKuC,GAAGc,QAEVrD,KAAKuC,GAAK,KACVvC,KAAKsD,MACEtD,O,oCAQP,OAJAA,KAAKuC,GACFW,cACA9B,KAAKpB,KAAKuD,eAAeC,KAAKxD,OAC9BuB,OAAM,SAAAC,GAAG,OAAI7O,MAAM6O,MACfxB,O,qCAQP,OAJAA,KAAKuC,GACFkB,eACArC,KAAKpB,KAAKuD,eAAeC,KAAKxD,OAC9BuB,OAAM,SAAAC,GAAG,OAAI7O,MAAM6O,MACfxB,O,qCAGM0D,GAGb,OAFA1D,KAAKuC,GAAGoB,oBAAoBD,GAC5B7D,GAAOyB,KAAK,OAAQ,CAAEoB,GAAI1C,KAAKsC,SAAUsB,IAAKF,IACvC1D,O,2CAMY4D,GACnB,IAAMC,EAAS,IAAIC,sBAAsBF,GAEzC,OADA5D,KAAKuC,GAAGwB,qBAAqBF,GACtB7D,O,sCAMO2C,GACd,GAAIA,EAAW,CACb,IAAMqB,EAAe,IAAIC,gBAAgBtB,GACzC3C,KAAKuC,GAAG2B,gBAAgBF,GAE1B,OAAOhE,S,GA/FkBD,I,qGCCd,SAASoE,GAAT,GAAsF,IAAhEC,EAA+D,EAA/DA,QAASC,EAAsD,EAAtDA,SAAUrB,EAA4C,EAA5CA,OAAQF,EAAoC,EAApCA,YAAawB,EAAuB,EAAvBA,QAASC,EAAc,EAAdA,WAC9EC,EAAYC,iBAAO,MACnBC,EAAaD,iBAAO,MAFwE,EAGxEra,mBAAS4Y,EAAO2B,OAHwD,mBAG3FA,EAH2F,KAGpFC,EAHoF,OAIxExa,mBAAS4Y,EAAO9B,OAJwD,mBAI3FA,EAJ2F,KAIpF2D,EAJoF,KAKlGC,4BAAgB,SAACC,GACfA,EAAEC,iBACFV,GAAQ,MAGV/Z,qBAAU,WACJia,EAAUS,SAAWb,IAASI,EAAUS,QAAQC,UAAYd,GAC5DM,EAAWO,SAAWZ,IAAUK,EAAWO,QAAQC,UAAYb,KAClE,CAACA,EAAUD,IAEd7Z,qBAAU,WACJuY,IACFA,EAAYqC,OAAO,QAASR,GAC5B7B,EAAYqC,OAAO,QAASjE,OAQhC,IAAMkE,EAAoB,SAACC,GACN,UAAfA,IACFT,GAAUD,GACV7B,EAAYqC,OAAO,UAEF,UAAfE,IACFR,GAAU3D,GACV4B,EAAYqC,OAAO,WAGvB,OACEZ,EACE,yBAAKhZ,UAAWC,KAAO8Z,mBACrB,yBAAK/Z,UAAWC,KAAO+Y,YACrB,yBAAKhZ,UAAWC,KAAO+Z,sBACrB,2BAAOha,UAAWC,KAAOga,YAAaC,IAAKf,EAAYgB,UAAQ,EAACC,OAAK,IACpEvB,GAAW,2BAAO7Y,UAAWC,KAAOga,YAAaC,IAAKjB,EAAWkB,UAAQ,KAE3EtB,GACC,6BACE,kBAAC,KAAD,CACEwB,YAAa,SAAC9a,GAAD,gBAAeA,EAAQ,GAAR,WAAiBA,GAAUA,IACvD+a,SAAS,IACTta,UAAWC,KAAOsa,UAElB,kBAAC,KAAMC,MAAP,MALF,IAMF,kBAAC,KAAMC,QAAP,MANE,IAOF,kBAAC,KAAMC,QAAP,QAKF,yBAAK1a,UAAWC,KAAO0a,cACrB,kBAAC,IAAD,CACE5U,MAAM,SACN7B,KAAMkV,EAAQ,UAAY,SAC1B/K,KAAM+K,EAAQ,kBAACwB,GAAA,EAAD,MAAwB,kBAACC,GAAA,EAAD,MACtCva,QAAS,kBAAMuZ,EAAkB,UACjCzL,KAAK,UAEP,kBAAC,IAAD,CACErI,MAAM,SACN7B,KAAMyR,EAAQ,UAAY,SAC1BtH,KAAMsH,EAAQ,kBAACmF,GAAA,EAAD,MAAkB,kBAACC,GAAA,EAAD,MAChCza,QAAS,kBAAMuZ,EAAkB,UACjCzL,KAAK,UAEP,kBAAC,IAAD,CACErI,MAAM,SACN7B,KAAK,SACL5D,QAAS,kBAAMyY,GAAQ,IACvB1K,KAAM,kBAAC2M,GAAA,EAAD,MACN5M,KAAK,aAKX,K,yBCnFO,SAAS6M,GAAT,GAAoE,IAA/CC,EAA8C,EAA9CA,UAAWC,EAAmC,EAAnCA,SAAUC,EAAyB,EAAzBA,UAAWC,EAAc,EAAdA,WAClE9B,4BAAgB,SAACC,GAEf6B,OAEF,IAAMC,EAAkB,SAAClC,GACvB,IAAM3B,EAAS,CAAE9B,OAAO,EAAMyD,SAC9B,OAAO,kBAAMgC,GAAU,EAAOD,EAASlZ,SAAUwV,KAEnD,OACEyD,EAEI,yBAAKlb,UAAWC,KAAOsb,kBACvB,yBAAKvb,UAAWC,KAAOib,WACrB,yBAAKlb,UAAWC,KAAOub,QACnBL,EAASjN,SAAWiN,EAASjN,QAAQH,OACrC,kBAAC,KAAD,CAAQ9K,IAAKwG,GAAY0R,EAASjN,QAAQH,OAAQK,KAAM,KACtD,kBAAC,KAAD,CAAQC,KAAM,kBAAC1H,EAAA,EAAD,MAAkByH,KAAM,KACxC+M,EAASjN,SACT,0BAAMlO,UAAWC,KAAOwb,WAAxB,UAAuCN,EAASjN,QAAQ9L,KAAxD,oBAIJ,yBAAKpC,UAAWC,KAAOyb,aACrB,kBAAC,IAAD,CACE3V,MAAM,QACN7B,KAAK,UACLmK,KAAM,kBAACuM,GAAA,EAAD,MACNta,QAASgb,GAAgB,GACzBlN,KAAK,SALP,cASA,kBAAC,IAAD,CACErI,MAAM,QACN7B,KAAK,UACLmK,KAAM,kBAACyM,GAAA,EAAD,MACNxa,QAASgb,GAAgB,GACzBlN,KAAK,SALP,cASA,kBAAC,IAAD,CACErI,MAAM,QACN7B,KAAK,SACL5D,QAAS+a,EACThN,KAAM,kBAAC2M,GAAA,EAAD,MACN5M,KAAK,SALP,kBAYF,K,2HCtDK,SAASuN,GAAT,GAAgG,IAA3EC,EAA0E,EAA1EA,cAAeC,EAA2D,EAA3DA,gBAAiBC,EAA0C,EAA1CA,KAAMC,EAAoC,EAApCA,iBAAkBC,EAAkB,EAAlBA,eACpFC,EAAS,uCAAG,sBAAAna,EAAA,+EAERjB,EAAMqb,OAAO,gBAAkBJ,EAAKK,OAF5B,OAGdH,IAHc,+CAKdI,QAAQ9a,MAAM,KAAMqB,UALN,wDAAH,qDAQf,OACE,kBAAC,KAAD,CACE0Z,QAAS,CACP,kBAAC,KAAD,CAAS7Y,MAAM,cACb,kBAACoX,GAAA,EAAD,CAAmBta,QAAS,kBAAMsb,GAAc,EAAME,OAExD,kBAAC,KAAD,CAAStY,MAAM,cACb,kBAACsX,GAAA,EAAD,CAAaxa,QAAS,kBAAMsb,GAAc,EAAOE,OAEnD,kBAAC,KAAD,CAAStY,MAAM,WACb,kBAACmD,EAAA,EAAD,CAAcrG,QAAS,kBAAMub,EAAgBC,SAIjD,yBAAK9b,UAAWC,KAAOqc,WACrB,yBAAKtc,UAAWC,KAAOsc,WACrB,6BACGT,EAAKnO,QAAQI,OACZ,kBAAC,KAAD,CAAQ9K,IAAKwG,GAAYqS,EAAKnO,QAAQI,OAAQK,KAAM,KAEpD,kBAAC,KAAD,CAAQC,KAAM,kBAAC1H,EAAA,EAAD,MAAkByH,KAAM,MAI1C,yBAAKpO,UAAWC,KAAOuc,iBACrB,yBAAKxc,UAAWC,KAAOwc,WACpBX,EAAKnO,QAAQvL,KACb0Z,EAAKY,SAAWnS,GAAOC,UACtB,kBAAC,KAAD,CAAShH,MAAM,UACb,kBAACmZ,GAAA,EAAD,CAAmB3Y,MAAO,CAAEuL,MAAO,UAAWqN,SAAU,OAAQC,WAAY,UAE5E,KACHf,EAAKY,SAAWnS,GAAOE,KACtB,kBAAC,KAAD,CAASjH,MAAM,QACb,kBAACsZ,GAAA,EAAD,CAAmB9Y,MAAO,CAAEuL,MAAO,MAAOqN,SAAU,OAAQC,WAAY,UAExE,KACHf,EAAKY,SAAWnS,GAAOG,QACtB,kBAAC,KAAD,CAASlH,MAAM,WACb,kBAACsZ,GAAA,EAAD,CAAmB9Y,MAAO,CAAEuL,MAAO,OAAQqN,SAAU,OAAQC,WAAY,UAEzE,MAEN,6BACGf,EAAKnO,QAAQoP,cAAgB7M,KAAKC,MAAM2L,EAAKnO,QAAQoP,aAAapM,QAAU,EAC3E,kBAAC,KAAD,8BACE,MAELmL,EAAKnO,QAAQqP,OACZ,kBAAC,KAAD,CAAStJ,UAAU,cAAclQ,MAAM,yBACrC,yBAAKlD,QAAS,kBAAMyb,EAAiBD,IAAO9b,UAAWC,KAAOgd,eAC5D,kBAAC,KAAD,CACEvM,UAAQ,EACRwM,aAAczJ,QAAQxG,KAAKkQ,MAAgC,EAA1BrB,EAAKnO,QAAQqP,OAAOI,KAAW,GAAGrQ,QAAQ,IAC3EsQ,WAAS,IAEX,0BAAMrd,UAAWC,KAAOqd,aAAxB,KAAwCxB,EAAKnO,QAAQqP,OAAOO,MAA5D,gBAIJ,uBAAGvd,UAAWC,KAAOud,YAAald,QAAS,kBAAMyb,EAAiBD,KAAlE,gBAIDA,EAAK2B,MACJ,yBAAKzd,UAAWC,KAAOgc,UAAW3b,QAAS,kBAAM2b,MAAjD,UAGE,OAGR,2BAAIH,EAAKnO,QAAQ+P,gB,0CClFV,SAASC,GAAT,GAAoC,IAAb1b,EAAY,EAAZA,SAC9B2b,EAAS1E,iBAAO,MAChB2E,EAAY3E,iBAAO,MACnB4E,EAAiB,CACrBC,UAAU,EACVna,MAAO,IACPoa,OAAQ,IACRC,OAAO,EACPC,QAAS,CAAC,CACRjb,IAAKwG,GAAY,oBAAsBxH,EACvCiC,KAAM,eAERia,UAAU,GAcZ,OAZAnf,qBAAU,WAKR,OAJA4e,EAAOlE,QAAU0E,mBAAQP,EAAUnE,QAASoE,GAAgB,WAC1D,IAAMO,EAAe,kBAAoBD,WAAQE,QACjDF,WAAQG,IAAIF,MAEP,WACDT,EAAOlE,SACTkE,EAAOlE,QAAQ8E,aAIlB,IAED,yBAAKC,mBAAA,GACH,2BAAOtS,GAAG,UAAU+N,IAAK,SAAAwE,GAAI,OAAIb,EAAUnE,QAAUgF,GAAM1e,UAAU,kDAAkD2e,aAAW,K,wBC1BzH,SAASC,GAAT,GAA8E,IAAlDC,EAAiD,EAAjDA,SAAUC,EAAuC,EAAvCA,gBAAiBC,EAAsB,EAAtBA,mBACpE,OACE,kBAAC,IAAD,CACEvb,MAAOqb,EAAWA,EAASlR,QAAQvL,KAAO,KAC1CkB,QAASwb,EACTrb,SAAU,kBAAMsb,GAAmB,IACnC7e,OAAQ,KACR0D,MAAM,QACNob,gBAAc,EACdC,UAAW,CAAEjB,OAAQ,QAASkB,SAAU,SAExC,6BACE,6BACGL,EACC,6BACE,yBAAK7e,UAAWC,KAAOkf,eACpBN,EAASlR,QAAQyL,MAAQ,yBAAKpZ,UAAWC,KAAOmf,cAAc,kBAACzB,GAAD,CAAa1b,SAAU4c,EAAS5c,YAAqB,KACnH4c,EAASlR,QAAQ+P,cAEpB,yBAAK1d,UAAWC,KAAOkf,eACrB,kBAAC,KAAD,CAAcE,UAAQ,EAACjR,KAAK,QAAQkR,OAAQ,EAAG9b,MAAM,wBACnD,kBAAC,KAAasB,KAAd,CAAmBC,MAAM,iBAAiB8Z,EAASlR,QAAQoC,aAC3D,kBAAC,KAAajL,KAAd,CAAmBC,MAAM,gBAAgB8Z,EAASlR,QAAQmC,cAC1D,kBAAC,KAAahL,KAAd,CAAmBC,MAAM,UAAU8Z,EAASlR,QAAQqC,QACpD,kBAAC,KAAalL,KAAd,CAAmBC,MAAM,WAAW8Z,EAASlR,QAAQ4R,SACrD,kBAAC,KAAaza,KAAd,CAAmBC,MAAM,gBAAzB,IAA0C8Z,EAASlR,QAAQyC,gBAAkBF,KAAKC,MAAM0O,EAASlR,QAAQyC,iBAAiBU,KAAI,SAAA9M,GAAW,OAAO,kBAAC,KAAD,CAAKuM,IAAKvM,GAAQA,MAAkB,MACpL,kBAAC,KAAac,KAAd,CAAmBC,MAAM,gBAAgB8Z,EAASlR,QAAQsC,aAAeC,KAAKC,MAAM0O,EAASlR,QAAQsC,cAAca,KAAI,SAAA0O,GAAgB,OAAO,kBAAC,KAAD,CAAKjP,IAAKiP,GAAaA,MAAuB,QAGhM,yBAAKxf,UAAWC,KAAOkf,eACrB,kBAAC,KAAD,CAAcE,UAAQ,EAACjR,KAAK,QAAQkR,OAAQ,EAAG9b,MAAM,MACnD,kBAAC,KAAasB,KAAd,CAAmBC,MAAM,aAAa8Z,EAASlR,QAAQ8R,WACvD,kBAAC,KAAa3a,KAAd,CAAmBC,MAAM,aAAa8Z,EAASlR,QAAQ+R,WACvD,kBAAC,KAAa5a,KAAd,CAAmBC,MAAM,cAAc8Z,EAASlR,QAAQgS,YACxD,kBAAC,KAAa7a,KAAd,CAAmBC,MAAM,cAAc8Z,EAASlR,QAAQiS,YACxD,kBAAC,KAAa9a,KAAd,CAAmBC,MAAM,UAAU8Z,EAASlR,QAAQkS,UAGxD,yBAAK7f,UAAWC,KAAOkf,eACrB,uBAAGnf,UAAWC,KAAO6f,aAArB,gBACA,yBAAK9f,UAAWC,KAAO8f,cACpBlB,EAASlR,QAAQoP,aAChB7M,KAAKC,MAAM0O,EAASlR,QAAQoP,cAAcjM,KAAI,SAACkP,EAAM7K,GACnD,OAAQ,uBAAG5E,IAAK4E,EAAO8K,KAAMxW,GAAYuW,EAAKE,MAAM,kBAACC,GAAA,EAAD,MAAqBH,EAAKI,iBAE9E,QAKR,Q,aCxDDC,GAAiB,SAACC,GAC7B,IAAIC,EAAS,EACTC,EAAS,EACTC,EAAS,EACTC,EAAS,EACTC,EAAS,EACTC,EAAS,EACPC,EAAQP,EAAQ3P,OAyBtB,OAxBA2P,EAAQzL,SAAQ,SAAAmI,GACd,OAAQA,EAAO8D,QACb,KAAK,EACHP,IACA,MACF,KAAK,EACHC,IACA,MACF,KAAK,EACHC,IACA,MACF,KAAK,EACHC,IACA,MACF,KAAK,EACHC,IACA,MACF,KAAK,EACHC,QAMC,CACLG,QAAUR,EAASM,EAAS,IAC5BG,QAAUR,EAASK,EAAS,IAC5BI,QAAUR,EAASI,EAAS,IAC5BK,QAAUR,EAASG,EAAS,IAC5BM,QAAUR,EAASE,EAAS,IAC5BO,QAAUR,EAASC,EAAS,M,8BClCjB,SAASQ,GAAT,GAAqC,IAAZf,EAAW,EAAXA,QACtC,OACE,yBAAKtgB,UAAWC,KAAOqhB,eACrB,yBAAKthB,UAAWC,KAAOshB,eACrB,yBAAKvhB,UAAWC,KAAOuhB,WAAY/N,OAAO6M,EAAQlD,KAAKrQ,QAAQ,IAC/D,kBAAC,KAAD,CAAM2D,UAAQ,EAACwM,aAAczJ,QAAQxG,KAAKkQ,MAAoB,EAAdmD,EAAQlD,KAAW,GAAGrQ,QAAQ,IAAKsQ,WAAS,EAACrZ,MAAO,CAAE4Y,SAAU,UAChH,yBAAK5c,UAAWC,KAAOwhB,cAAc,kBAAC9a,EAAA,EAAD,CAAc3C,MAAO,CAAE0d,YAAa,SAAYpB,EAAQ/C,QAE/F,yBAAKvd,UAAWC,KAAO0hB,iBACrB,yBAAK3hB,UAAWC,KAAO2hB,aACrB,0BAAM5hB,UAAWC,KAAO6gB,QAAxB,KAAwC,kBAAC,KAAD,CAAUe,UAAU,EAAOC,QAASxB,EAAQsB,YAAYR,WAElG,yBAAKphB,UAAWC,KAAO2hB,aACrB,0BAAM5hB,UAAWC,KAAO6gB,QAAxB,KAAwC,kBAAC,KAAD,CAAUe,UAAU,EAAOC,QAASxB,EAAQsB,YAAYT,WAElG,yBAAKnhB,UAAWC,KAAO2hB,aACrB,0BAAM5hB,UAAWC,KAAO6gB,QAAxB,KAAwC,kBAAC,KAAD,CAAUe,UAAU,EAAOC,QAASxB,EAAQsB,YAAYV,WAElG,yBAAKlhB,UAAWC,KAAO2hB,aACrB,0BAAM5hB,UAAWC,KAAO6gB,QAAxB,KAAwC,kBAAC,KAAD,CAAUe,UAAU,EAAOC,QAASxB,EAAQsB,YAAYX,WAElG,yBAAKjhB,UAAWC,KAAO2hB,aACrB,0BAAM5hB,UAAWC,KAAO6gB,QAAxB,KAAwC,kBAAC,KAAD,CAAUe,UAAU,EAAOC,QAASxB,EAAQsB,YAAYZ,WAElG,yBAAKhhB,UAAWC,KAAO2hB,aACrB,0BAAM5hB,UAAWC,KAAO6gB,QAAxB,KAAwC,kBAAC,KAAD,CAAUe,UAAU,EAAOC,QAASxB,EAAQsB,YAAYb,a,cCrB3F,SAASgB,GAAT,GAA6C,IAA3B/E,EAA0B,EAA1BA,OAAQgF,EAAkB,EAAlBA,eAC/BljB,EAAY6C,qBAAWlD,GAAvBK,QAEFmjB,EAAY,uCAAG,WAAM9V,GAAN,SAAArK,EAAA,+EAEXjB,EAAMqb,OAAO,YAAc/P,GAFhB,OAGjB6V,IAHiB,+CAKjB5a,MAAM,KAAMzE,SAASJ,KAAKK,SALT,wDAAH,sDASdsf,EAAY,KAShB,OARIpjB,EAAQsN,OAAStD,GAAMC,OAAUjK,EAAQsN,OAAStD,GAAMG,SAAWnK,EAAQoP,QAAQ/B,KAAO6Q,EAAOhK,aACnGkP,EACE,kBAAC,IAAD,CAAQhe,KAAK,OAAOie,QAAM,EAAC7hB,QAAS,kBAAM2hB,EAAajF,EAAO7Q,MAA9D,WAOF,kBAAC,KAAD,CACEiW,OAAQpF,EAAO9O,QAAQ9L,KACvB2L,OACEiP,EAAO9O,QAAQH,OAAS,kBAAC,KAAD,CAAQ9K,IAAKwG,GAAYuT,EAAO9O,QAAQH,SAAa,kBAAC,KAAD,CAAQM,KAAM,kBAAC1H,EAAA,EAAD,QAE7F0b,QAAS,2BAAIrF,EAAOsF,SACpBC,SAAU5S,KAAOqN,EAAOnL,WAAW2Q,UACnCnG,QAAS,CAAC,kBAAC,KAAD,CAAM3L,UAAQ,EAACwM,aAAcF,EAAO8D,OAAQ9c,MAAO,CAAE4Y,SAAU,UAAcsF,KC/B9E,SAASO,GAAT,GAA8E,IAAlD5D,EAAiD,EAAjDA,SAAU6D,EAAuC,EAAvCA,gBAAiBC,EAAsB,EAAtBA,mBAAsB,EAC5D9jB,mBAAS,MADmD,mBACnFyhB,EADmF,KAC1EsC,EAD0E,KAGpFZ,EAAc,uCAAG,8BAAAlgB,EAAA,+EAEEjB,EAAM1B,IAAI,YAAc0f,EAASlR,QAAQxB,IAF3C,OAEb7J,EAFa,OAGbsf,EAAcvB,GAAe/d,EAAOC,KAAK+d,SAC/CsC,EAAW,gBAAKtgB,EAAOC,KAAb,CAAmBqf,iBAJV,gDAMnBxF,QAAQmC,IAAI,KAAM5b,UANC,yDAAH,qDAiBpB,OAPA3D,qBAAU,WACJ6f,GACFmD,MAGD,CAACnD,IAGF,kBAAC,IAAD,CACErb,MAAOqb,EAAWA,EAASlR,QAAQvL,KAAO,KAC1CkB,QAASof,EACTjf,SAAU,kBAAMkf,GAAmB,IACnCziB,OAAQ,KACR0D,MAAM,QACNob,gBAAc,EACdC,UAAW,CAAE4D,UAAW,QAAS3D,SAAU,SAE1CoB,EACC,6BACE,kBAACe,GAAD,CAAef,QAASA,IACxB,kBAAC,KAAD,CACEwC,WAAW,aACXrQ,WAAY6N,EAAQA,QACpByC,WAAY,SAAAjH,GAAI,OACd,kBAAC,KAAKhX,KAAN,KACE,kBAACid,GAAD,CAAQ/E,OAAQlB,EAAMkG,eAAgBA,SAK5C,M,ICvCFjO,GAAYC,KAAZD,QACAiP,GAAWC,IAAXD,OAEO,SAASE,GAAT,GAA0E,IAArD9H,EAAoD,EAApDA,UAAW+H,EAAyC,EAAzCA,aAAcC,EAA2B,EAA3BA,SAAUC,EAAiB,EAAjBA,cAAiB,EACxCxkB,oBAAS,GAD+B,mBAC/EigB,EAD+E,KAC9DC,EAD8D,OAEtDlgB,mBAAS,MAF6C,mBAE/EggB,EAF+E,KAErEyE,EAFqE,OAGxCzkB,oBAAS,GAH+B,mBAG/E6jB,EAH+E,KAG9DC,EAH8D,OAI1D9jB,mBAAS,IAJiD,mBAI/E0kB,EAJ+E,KAIvEC,EAJuE,OAKxD3kB,mBAAS,IAL+C,mBAK/E4kB,EAL+E,KAKtEC,EALsE,OAMhD7kB,mBAAS,IANuC,mBAM/EgS,EAN+E,KAMlE8S,EANkE,KAO9E7kB,EAAY6C,qBAAWlD,GAAvBK,QAP8E,EAQpDD,mBAAS,IAR2C,mBAQ/E+kB,EAR+E,KAQpEC,EARoE,OASpDhlB,mBAAS,IAT2C,mBAS/EilB,EAT+E,KASpEC,EAToE,KAWtF/kB,qBAAU,WACR,IAAIglB,GAAQ,EAuCZR,EAtC8B,SAAAD,GAC5B,GAAgB,KAAZE,EAAgB,CAClB,IAAMQ,EAAiB,GA+BvB,OA9BAV,EAAO1O,SAAQ,SAAAqP,GACbF,GAAQ,EACJE,EAAMvW,QAAQvL,KAAK+hB,cAAcC,SAASX,KAC5CO,GAAQ,GAENE,EAAMvW,QAAQsC,aAAakU,cAAcC,SAASX,KACpDO,GAAQ,GAENE,EAAMvW,QAAQyC,gBAAgB+T,cAAcC,SAASX,KACvDO,GAAQ,GAENE,EAAMvW,QAAQqC,OAAOmU,cAAcC,SAASX,KAC9CO,GAAQ,GAENE,EAAMvW,QAAQoC,YAAYoU,cAAcC,SAASX,KACnDO,GAAQ,GAENE,EAAMvW,QAAQmC,aAAaqU,cAAcC,SAASX,KACpDO,GAAQ,GAENE,EAAMvW,QAAQ8R,UAAU0E,cAAcC,SAASX,KACjDO,GAAQ,GAENE,EAAMvW,QAAQ4R,QAAQ4E,cAAcC,SAASX,KAC/CO,GAAQ,GAENA,GACFC,EAAelP,KAAKmP,MAGjBD,EAEP,OAAOV,EAGDc,CAAsBlB,MAC/B,CAACA,EAAcM,IAElBzkB,qBAAU,WACRgd,MAEC,IAEHhd,qBAAU,WACR,IAAMslB,EAAiB,GACvBzT,EAAYgE,SAAQ,SAAA0P,GAClB,GAAIA,EAAIrgB,OAASyH,GAAiBC,SAAU,CAC1C,IAAM4Y,EAAW,CACfrI,MAAOoI,EAAIpY,GACXwB,QAAS4W,EAAIL,MACbxH,OAAQnS,GAAOG,QACfzI,SAAUsiB,EAAIL,MAAMplB,QAAQmD,SAC5Bwb,OAAO,GAET0F,EAAatO,SAAQ,SAAAqP,GACfA,EAAMvW,QAAQxB,KAAOoY,EAAIE,UAC3BD,EAAS9H,OAASwH,EAAMxH,WAG5B4H,EAAevP,KAAKyP,OAGxBX,EAAaS,KACZ,CAACnB,EAActS,IAElB7R,qBAAU,WACR,IAAM0lB,EAAkB,GACxB7T,EAAYgE,SAAQ,SAAA0P,GAClB,GAAIA,EAAIrgB,OAASyH,GAAiBE,UAAW,CAC3C,IAAM8Y,EAAW,CACfhX,QAAS4W,EAAIL,MACbxH,OAAQnS,GAAOG,QACfzI,SAAUsiB,EAAIL,MAAMplB,QAAQmD,UAE9BkhB,EAAatO,SAAQ,SAAAqP,GACfA,EAAMvW,QAAQxB,KAAOoY,EAAIE,UAC3BE,EAASjI,OAASwH,EAAMxH,WAG5BgI,EAAgB3P,KAAK4P,OAGzBZ,EAAaW,KACZ,CAACvB,EAActS,IAElB,IAAMmL,EAAc,uCAAG,4BAAAla,EAAA,+EAEEjB,EAAM1B,IAAI,0BAA4BL,EAAQoP,QAAQ/B,IAFxD,OAEb7J,EAFa,OAGnBqhB,EAAerhB,EAAOC,KAAKsO,aAHR,gDAKnBzJ,MAAM,KAAMzE,SAASJ,KAAKK,SALP,yDAAH,qDASdgZ,EAAgB,SAACxC,EAAO9S,GAC5B,GAAIA,EAAKoW,SAAWnS,GAAOC,UAAW,CACpC4Y,EAAS9c,EAAKqH,SACd,IAAM8J,EAAS,CAAE9B,OAAO,EAAMyD,SAC9BgC,GAAU,EAAM9U,EAAKrE,SAAUwV,QAE/BrQ,MAAM,+CAIJyU,EAAkB,SAAAqI,GACtBZ,EAAYY,GACZnF,GAAmB,IAGfhD,EAAmB,SAAAmI,GACvBZ,EAAYY,GACZvB,GAAmB,IAOrB,OACE,yBAAK3iB,UAAWC,KAAO2kB,WACrB,kBAAChG,GAAD,CAAkBC,SAAUA,EAAUC,gBAAiBA,EAAiBC,mBAAoBA,IAC5F,kBAAC0D,GAAD,CAAkB5D,SAAUA,EAAU6D,gBAAiBA,EAAiBC,mBAAoBA,IAC5F,yBAAK3iB,UAAWC,KAAO4kB,YACrB,6BACE,0BAAM7kB,UAAWC,KAAO6kB,oBAAxB,oBACClY,GAAcyW,IAEjB,yBAAKrjB,UAAWC,KAAO8kB,WACrB,kBAAC/B,GAAD,CAAQpc,YAAY,yCAAyCoe,aAAW,EAACC,SAd5D,SAAA1lB,GACnBmkB,EAAWnkB,EAAM4kB,oBAgBf,kBAAC,KAAD,CAAM9T,iBAAiB,SAASnM,KAAK,QACnC,kBAAC,GAAD,CACEgQ,IACE,8BACE,kBAACgR,GAAA,EAAD,MADF,UAKF3U,IAAI,SACJvQ,UAAWC,KAAOklB,SAElB,kBAAC,KAAD,CACEC,KAAM,CAAElS,OAAQ,GAAIoM,OAAQ,GAC5B7M,WAAY8Q,EACZR,WAAY,SAAAjH,GAAI,OACd,kBAAC,KAAKhX,KAAN,KACE,kBAAC6W,GAAD,CACEG,KAAMA,EACNF,cAAeA,EACfC,gBAAiBA,EACjBE,iBAAkBA,SAM5B,kBAAC,GAAD,CACE7H,IACE,8BACE,kBAACmR,GAAA,EAAD,MADF,YAKF9U,IAAI,WACJvQ,UAAWC,KAAOklB,SAElB,kBAAC,KAAD,CACEC,KAAM,CAAElS,OAAQ,GAAIoM,OAAQ,GAC5B7M,WAAYmR,EACZb,WAAY,SAAAjH,GAAI,OACd,kBAAC,KAAKhX,KAAN,KACE,kBAAC6W,GAAD,CACEG,KAAMA,EACNF,cAAeA,EACfC,gBAAiBA,EACjBE,iBAAkBA,EAClBC,eAAgBA,SAM1B,kBAAC,GAAD,CACE9H,IACE,8BACE,kBAACoR,GAAA,EAAD,MADF,aAKF/U,IAAI,YACJvQ,UAAWC,KAAOklB,SAElB,kBAAC,KAAD,CACEC,KAAM,CAAElS,OAAQ,GAAIoM,OAAQ,GAC5B7M,WAAYqR,EACZf,WAAY,SAAAjH,GAAI,OACd,kBAAC,KAAKhX,KAAN,KACE,kBAAC6W,GAAD,CACEG,KAAMA,EACNF,cAAeA,EACfC,gBAAiBA,EACjBE,iBAAkBA,W,wDCnOrB,SAASwJ,GAAT,GAAkE,IAAzCC,EAAwC,EAAxCA,aAAcC,EAA0B,EAA1BA,gBAAiBvB,EAAS,EAATA,MAAS,EAChDrlB,oBAAS,GADuC,mBACvEuC,EADuE,KAC9DC,EAD8D,OAEvCxC,oBAAS,GAF8B,mBAEvE6mB,EAFuE,KAE1DC,EAF0D,OAG1C9mB,oBAAS,GAHiC,mBAGvE+mB,EAHuE,KAG3DC,EAH2D,KAItE/mB,EAAY6C,qBAAWlD,GAAvBK,QAWFwP,EAAQ,uCAAG,WAAMzM,GAAN,eAAAC,EAAA,sEAEbT,GAAW,GACLkB,EAHO,gBAIRV,EAJQ,CAKXmR,UAAWlU,EAAQoP,QAAQ/B,GAC3BsY,QAASP,EAAM/X,KANJ,SAQPtL,EAAMwB,KAAK,YAAaE,GARjB,OASblB,GAAW,GACXskB,GAAgB,GAVH,gDAYbtkB,GAAW,GACXwkB,GAAc,GACdze,MAAM,KAAMzE,SAASJ,KAAKK,SAdb,yDAAH,sDAwBd,OACE,kBAAC,IAAD,CACEU,QAASkiB,EACTxG,gBAAc,EACdvb,SAVkB,WACpBgiB,GAAgB,GAChBE,GAAgB,GAChBE,GAAc,IAQZ3lB,QAAQ,EACRsD,MAAM,6BAELkiB,EAAc,kBAAC,IAAD,CAAO9iB,QAAQ,mBAAmBsB,KAAK,UAAUC,UAAQ,IAAM,KAC7EyhB,EAAa,kBAAC,IAAD,CAAOhjB,QAAQ,mCAAmCsB,KAAK,QAAQC,UAAQ,IAAM,KAC3F,kBAAC,IAAD,iBA3CW,CACbM,SAAU,CAAEE,KAAM,GAClBE,WAAY,CAAEF,KAAM,KAyClB,CAAkB/C,SAAU0M,IAC1B,kBAAC,IAAKxJ,KAAN,CAAW1C,KAAK,SAAS2C,MAAM,UAC7B,kBAAC,KAAD,CAAM+gB,YAAY,EAAM5I,aAAc,KAExC,kBAAC,IAAKpY,KAAN,CACE1C,KAAK,UACL2C,MAAM,UACNC,MAAO,CACL,CACEC,UAAU,EACVrC,QAAS,+BAIb,kBAAC,IAAMmjB,SAAP,CAAgBnf,YAAY,2BAE9B,kBAAC,IAAK9B,KAtDO,CACjBD,WAAY,CAAEe,OAAQ,EAAGjB,KAAM,KAsDzB,kBAAC,IAAD,CAAQT,KAAK,UAAU2B,SAAS,SAASzE,QAASA,GAAlD,aCtDK,SAAS4kB,GAAT,GAA4D,IAAvClnB,EAAsC,EAAtCA,QAASukB,EAA6B,EAA7BA,cAAe4C,EAAc,EAAdA,WAAc,EAEpCpnB,oBAAS,GAF2B,mBAEjEma,EAFiE,KAErDkN,EAFqD,OAGtCrnB,oBAAS,GAH6B,mBAGjEqc,EAHiE,KAGtDiL,EAHsD,OAIxCtnB,mBAAS,IAJ+B,mBAIjEsc,EAJiE,KAIvDiL,EAJuD,OAKxCvnB,mBAAS,MAL+B,mBAKjEia,EALiE,KAKvDuN,EALuD,OAM1CxnB,mBAAS,MANiC,mBAMjEga,EANiE,KAMxDyN,EANwD,KAOlEC,EAAQrN,iBAAO,IACfsN,EAAYtN,iBAAO,MAEnBuN,EAAevN,iBAAO,MACtBwN,EAAgBxN,iBAAO,MAEvBtB,EAAQsB,iBAAO,GACfyN,EAAMzN,iBAAO,GAdqD,EAgBhCra,mBAAS,IAhBuB,mBAgBjEskB,EAhBiE,KAgBnDyD,EAhBmD,KAiBlE1C,EAAQhL,iBAAO,MAjBmD,EAoB5Bra,oBAAS,GApBmB,mBAoBjEgoB,EApBiE,KAoBjDC,EApBiD,OAqBhCjoB,oBAAS,GArBuB,mBAqBjE2mB,EArBiE,KAqBnDuB,EArBmD,KAuBxE/nB,qBAAU,WA6BR,OA3BAsV,GACG6B,GAAGzM,GAAcC,MAAM,eACvBwM,GAAGzM,GAAcE,SAAS,YAAe,IAAZod,EAAW,EAAXA,KAC5Bb,GAAa,GACbC,EAAYY,MAEb7Q,GAAGzM,GAAcG,MAAM,SAAAtH,GAClBA,EAAK8V,KACPkO,EAAM7M,QAAQlB,qBAAqBjW,EAAK8V,KAClB,UAAlB9V,EAAK8V,IAAInU,MAAkBqiB,EAAM7M,QAAQxB,eACzCpZ,EAAQsN,OAAStD,GAAME,OAEzBsL,GAAOyB,KAAKrM,GAAcU,cAEvBmc,EAAM7M,QAAQf,gBAAgBpW,EAAK6U,WAC1CQ,EAAM8B,QAAUuN,KAAKC,MAGjBpoB,EAAQsN,OAAStD,GAAMG,SACzBke,YAAW,kBAAMpO,GAAQ,KAAOsK,MAGnClN,GAAGzM,GAAcI,KAAK,kBAAMiP,GAAQ,MACpC5C,GAAGzM,GAAcM,mBAAmB,SAAAzH,GACnCqkB,EAAgBrkB,EAAK6kB,WAEtBrR,KAAKrM,GAAcC,KAAM,CAAE7K,YACvB,WACLuc,IACA/G,GAAOyB,KAAKrM,GAAcO,OAC1BqK,GACGyD,IAAIrO,GAAcC,MAClBoO,IAAIrO,GAAcE,SAClBmO,IAAIrO,GAAcG,MAClBkO,IAAIrO,GAAcI,KAClBiO,IAAIrO,GAAcM,sBAItB,CAAClL,IAEJE,qBAAU,WACJ6Z,GAAW/Z,EAAQsN,OAAStD,GAAME,QACpCyd,EAAa/M,QAAU,IAAI2N,cAAcxO,EAAS,CAAEyO,SAAU,2BAC9Db,EAAa/M,QAAQ6N,gBAAkB,SAAA/N,GACjCA,EAAEjX,MAAQiX,EAAEjX,KAAK6L,KAAO,GAC1BkG,GAAOyB,KAAKrM,GAAcQ,eAAgBsP,EAAEjX,OAGhDkkB,EAAa/M,QAAQ9B,MAAM,QAE5B,CAACiB,EAAS/Z,EAAQsN,OAErBpN,qBAAU,WACJ8Z,GAAYha,EAAQsN,OAAStD,GAAME,QACrC0d,EAAchN,QAAU,IAAI2N,cAAcvO,EAAU,CAAEwO,SAAU,2BAChEZ,EAAchN,QAAQ6N,gBAAkB,SAAA/N,GAClCA,EAAEjX,MAAQiX,EAAEjX,KAAK6L,KAAO,GAC1BkG,GAAOyB,KAAKrM,GAAcS,aAAcqP,EAAEjX,OAG9CmkB,EAAchN,QAAQ9B,MAAM,QAE7B,CAACkB,EAAUha,EAAQsN,OAEtB,IAIMgP,EAAY,SAAC5D,EAAUT,EAAUU,GACrC+O,EAAU9M,QAAUjC,EACpB8O,EAAM7M,QAAU,IAAI5C,GAAeC,GAChCZ,GAAG,eAAe,SAAAlT,GACZuU,GACH2O,GAAa,GAEfD,GAAc,GACdG,EAAYpjB,MAEbkT,GAAG,cAAc,SAAAlT,GAAG,OAAIqjB,EAAWrjB,MACnC2U,MAAMJ,EAAUC,IAGf4D,EAAa,WACjB/G,GAAOyB,KAAKrM,GAAcI,IAAK,CAAEqN,GAAIgE,EAASlZ,WAC9CkkB,GAAa,IAGTpN,EAAO,uCAAG,WAAMlB,GAAN,SAAA/V,EAAA,6DACVhD,EAAQsN,OAAStD,GAAME,OACzBsL,GAAOyB,KAAKrM,GAAcW,oBAAqB8Q,EAASjN,SAEtDpP,EAAQsN,OAAStD,GAAMG,UACzBqL,GAAOyB,KAAKrM,GAAcW,oBAAqBvL,EAAQoP,SAEvD+X,KAEFU,EAAIjN,QAAUuN,KAAKC,MACftP,EAAM8B,QAAU,GAClBoN,GAAkB,GAEhB9R,KAAEC,WAAWsR,EAAM7M,QAAQhD,OAC7B6P,EAAM7M,QAAQhD,KAAKmB,GAdP,SAgBR2P,KAhBQ,OAiBdjB,EAAM7M,QAAU,GAChB8M,EAAU9M,QAAU,KACpByM,GAAa,GACbD,GAAc,GACdG,EAAY,MACZC,EAAW,MAtBG,4CAAH,sDAyBPkB,GAAa,uCAAG,WAAMhO,GAAN,SAAA1X,EAAA,sDAChBhD,EAAQsN,OAAStD,GAAMG,UACrBwd,EAAa/M,SAAWb,GAC1B4N,EAAa/M,QAAQhD,OAEnBgQ,EAAchN,SAAWZ,GAC3B4N,EAAchN,QAAQhD,QANN,2CAAH,sDAiBf+Q,GAAiB,KACjBC,GAAY,KACZvM,EAASjN,QACXuZ,GAAiBtM,EAASjN,QAAQ9L,KACzB8hB,EAAMxK,UACf+N,GAAiBvD,EAAMxK,QAAQtX,KAC/BslB,GACE,6BACE,kBAAC,KAAD,CAAYlkB,MAAM,oCAAoC4O,OAAO,MAAMC,WAAW,KAAKE,UAAW,kBAAMoV,OAClG,kBAAC,IAAD,CAAQ5hB,MAAM,QAAQ7B,KAAK,UAAUmK,KAAM,kBAACgX,GAAA,EAAD,MAAkBjX,KAAK,SAAlE,aAKF,kBAAC,IAAD,CAAQrI,MAAM,QAAQsI,KAAM,kBAACuZ,GAAA,EAAD,MAAkBxZ,KAAK,QAAQ9N,QAAS,kBAAMymB,GAAgB,KAA1F,cAON,IAAMY,GAAQ,uCAAG,sBAAA7lB,EAAA,+EAEPjB,EAAMwB,KAAK,eAAgB,CAC/B2Q,UAAWlU,EAAQoP,QAAQ/B,GAC3BsY,QAASP,EAAMxK,QAAQvN,GACvBjI,KAAMyH,GAAiBC,WALZ,OAObxE,MAAM,oCAPO,+CASbA,MAAM,KAAMzE,SAASJ,KAAKK,SATb,wDAAH,qDAad,OACE,yBAAK5C,UAAWC,KAAO4nB,WACrB,kBAACtC,GAAD,CAAerB,MAAOA,EAAMxK,QAAS8L,aAAcA,EAAcC,gBAAiBsB,IACjFjoB,EAAQsN,OAAStD,GAAMG,UAAY+P,GAClC,kBAACkK,GAAD,CACEC,aAAcA,EACd/H,UAAWA,EACXgI,SA1GS,SAAA0E,GACf5D,EAAMxK,QAAUoO,GA0GVzE,cAAeA,KAGjBrO,KAAE+S,QAAQvB,EAAU9M,UACpB,kBAACd,GAAD,CACEI,WAAYA,EACZF,SAAUA,EACVD,QAASA,EACTpB,OAAQ+O,EAAU9M,QAClBnC,YAAagP,EAAM7M,QAAQnC,YAC3BwB,QAASA,IAGb,kBAACkC,GAAD,CAAWC,UAAWA,EAAWE,UAAWA,EAAWC,WAAYA,EAAYF,SAAUA,IACzF,kBAAC,IAAD,CACE7X,QAASujB,EACTrjB,MAAM,aACNC,SAjEiB,WACrBqjB,GAAkB,GAClBlP,EAAM8B,QAAU,EAChBiN,EAAIjN,QAAU,GA+DVsF,gBAAc,EACd9e,QAAQ,EACR0D,MAAM,SAEN,yBAAK5D,UAAWC,KAAO+nB,WACrB,yBAAKhoB,UAAWC,KAAOgoB,WAAYhlB,IAAKglB,KAAYjlB,WAAW,EAAOG,IAAI,KAC1E,6BACE,yBAAKnD,UAAWC,KAAOioB,SAAvB,aAA2CT,IAC3C,yBAAKznB,UAAWC,KAAOkoB,aAAvB,aAA+Cvb,GAAc+Z,EAAIjN,QAAU9B,EAAM8B,UACjF,yBAAK1Z,UAAWC,KAAOynB,WAAYA,Q,mECzOhC,SAASU,KAAS,IACvBtpB,EAAY6C,qBAAWlD,GAAvBK,QADsB,EAEAD,mBAAS,MAFT,mBAEvBqP,EAFuB,KAEdma,EAFc,KAI9BrpB,qBAAU,WACRinB,MAEC,CAACnnB,IAEJ,IAAMmnB,EAAU,uCAAG,4BAAAnkB,EAAA,+EAEMjB,EAAM1B,IAAI,aAAeL,EAAQoP,QAAQ/B,IAF/C,OAET7J,EAFS,OAGf+lB,EAAW/lB,EAAOC,KAAK2L,SAHR,gDAKf9G,MAAM,KAAMzE,SAASJ,KAAKK,SALX,yDAAH,qDASZ0lB,EAAc,KA2BlB,OAxBIA,EAFAxpB,GAAWA,EAAQwQ,aACjBpB,GAAWA,EAAQmB,eAAiB,EACxB,kBAAC2W,GAAD,CAAWlnB,QAASA,EAASukB,cAAenV,EAAQmB,eAAgB4W,WAAYA,IAG5F,yBAAKjmB,UAAWC,KAAOsoB,UACrB,yBAAKvoB,UAAWC,KAAOuoB,WAAYvlB,IAAKwlB,KAAStlB,IAAI,GAAGH,UAAU,UAClE,yBAAKhD,UAAWC,KAAOyoB,aACrB,qEACA,8DAON,yBAAK1oB,UAAWC,KAAOsoB,UACrB,yBAAKvoB,UAAWC,KAAO0oB,YAAa1lB,IAAK2lB,KAAUzlB,IAAI,GAAGH,UAAU,UACpE,yBAAKhD,UAAWC,KAAOyoB,aACrB,oDACA,kEAMD,yBAAK1oB,UAAWC,KAAO4oB,OAAQP,G,8CCjDzB,SAASQ,GAAT,GAAoC,IAAR/mB,EAAO,EAAPA,IACnC6b,EAAS1E,iBAAO,MAChB2E,EAAY3E,iBAAO,MACnB4E,EAAiB,CACrBC,UAAU,EACVna,MAAO,IACPoa,OAAQ,IACRC,OAAO,EACPC,QAAS,CAAC,CACRjb,IAAKlB,EACLmC,KAAM,eAERia,UAAU,GAcZ,OAZAnf,qBAAU,WAKR,OAJA4e,EAAOlE,QAAU0E,mBAAQP,EAAUnE,QAASoE,GAAgB,WAC1D,IAAMO,EAAe,kBAAoBD,WAAQE,QACjDF,WAAQG,IAAIF,MAEP,WACDT,EAAOlE,SACTkE,EAAOlE,QAAQ8E,aAIlB,CAACzc,IAEF,yBAAK0c,mBAAA,GACH,2BAAOtS,GAAG,UAAU+N,IAAK,SAAAwE,GAAI,OAAIb,EAAUnE,QAAUgF,GAAM1e,UAAU,kDAAkD2e,aAAW,KCxBzH,SAASoK,GAAT,GAAkF,IAAhDC,EAA+C,EAA/CA,eAAgBnK,EAA+B,EAA/BA,SAAUoK,EAAqB,EAArBA,kBACzE,OAAOpK,EACL,kBAAC,IAAD,CACErb,MAAO,0BAA4BmM,KAAOkP,EAAShN,WAAWC,OAAO,2BACrExO,QAAS0lB,EACTvlB,SAAU,kBAAMwlB,GAAkB,IAClC/oB,OAAQ,KACR0D,MAAM,QACNob,gBAAc,EACdC,UAAW,CAAEjB,OAAQ,QAASkB,SAAU,SAExC,yBAAKlf,UAAWC,KAAOipB,cACrB,kBAACJ,GAAD,CACE/mB,IAAG,UAAK0H,GAAL,8BAAoCoV,EAAS1S,GAA7C,mBAIP,K,ICnBEiB,GAAWC,KAAXD,OAEO,SAAS+b,GAAT,GAA0D,IAAxCC,EAAuC,EAAvCA,WAAYvK,EAA2B,EAA3BA,SAAUwK,EAAiB,EAAjBA,cAAiB,EACxCxqB,oBAAS,GAD+B,mBAC/DuC,EAD+D,KACtDC,EADsD,KAE9DvC,EAAY6C,qBAAWlD,GAAvBK,QAUFwP,EAAQ,uCAAG,WAAMzM,GAAN,eAAAC,EAAA,6DACXwnB,EAAY,KAEdA,EADExqB,EAAQsN,OAAStD,GAAMG,QACb4V,EAASqF,MAAMplB,QAAQqN,GAEvB0S,EAAS3Q,QAAQpP,QAAQqN,GAEvC9K,GAAW,GAPI,kBASPR,EAAMwB,KAAK,WAAY,CAC3BinB,YACAC,OAAQ1K,EAAS1S,GACjBqd,YAAa3nB,EAAO2nB,YACpB3J,OAAQhe,EAAOge,SAbJ,OAebxe,GAAW,GACX+F,MAAM,oBACNiiB,GAAc,GAjBD,kDAmBbhoB,GAAW,GAnBE,0DAAH,sDAuBd,OAAOwd,EACL,kBAAC,IAAD,CACErb,MAAM,kBACNF,QAAS8lB,EACT3lB,SAAU,kBAAM4lB,GAAc,IAC9BnpB,OAAQ,KACR0D,MAAM,QACNob,gBAAc,EACdC,UAAW,CAAEjB,OAAQ,QAASkB,SAAU,SAExC,kBAAC,IAAD,iBA1CW,CACbza,SAAU,CAAEE,KAAM,GAClBE,WAAY,CAAEF,KAAM,KAwClB,CAAkB/C,SAAU0M,IAC1B,kBAAC,IAAKxJ,KAAN,CAAW1C,KAAK,SAAS2C,MAAM,SAASC,MAAO,CAAC,CAAEC,UAAU,EAAMrC,QAAS,4BACzE,kBAAC,KAAD,CAAQgE,YAAY,mBACjBwE,GAAe0F,KAAI,SAAA+O,GAClB,OACE,kBAAC,GAAD,CAAQtgB,MAAOsgB,EAAQtP,IAAKsP,GACzBA,QAMX,kBAAC,IAAK/a,KAAN,CAAW1C,KAAK,cAAc2C,MAAM,eAClC,kBAAC,IAAMghB,SAAP,CACE0D,SAAU,CAAEC,QAAS,GACrB9iB,YAAY,8EAGhB,kBAAC,IAAK9B,KAvDO,CACjBD,WAAY,CAAEe,OAAQ,EAAGjB,KAAM,KAuDzB,kBAAC,IAAD,CAAQT,KAAK,UAAUie,QAAM,EAACtc,SAAS,SAASzE,QAASA,GAAzD,aAMJ,K,ICrEE4hB,GAAWC,IAAXD,OAEO,SAAS2G,KAAwB,IACtC7qB,EAAY6C,qBAAWlD,GAAvBK,QADqC,EAEfD,mBAAS,IAFM,mBAEtC+qB,EAFsC,KAE7BC,EAF6B,OAGfhrB,oBAAS,GAHM,mBAGtCuC,EAHsC,KAG7BC,EAH6B,OAIDxC,oBAAS,GAJR,mBAItCmqB,EAJsC,KAItBC,EAJsB,OAKbpqB,mBAAS,MALI,mBAKtCggB,EALsC,KAK5ByE,EAL4B,OAMXzkB,mBAAS,IANE,mBAMtCirB,EANsC,KAM3BC,EAN2B,OAOTlrB,oBAAS,GAPA,mBAOtCuqB,EAPsC,KAO1BC,EAP0B,KASvCW,EAAU,uCAAG,4BAAAloB,EAAA,6DACjBT,GAAW,GADM,kBAGMR,EAAM1B,IAAI,6BAA+BL,EAAQoP,QAAQ/B,GAAK,WAAa2d,GAHjF,OAGTxnB,EAHS,OAIfunB,EAAWvnB,EAAOC,KAAK0nB,eACvB5oB,GAAW,GALI,gDAOf+F,MAAM,KAAMzE,SAASJ,KAAKK,SAC1BvB,GAAW,GARI,yDAAH,qDAWhBrC,qBAAU,WACRgrB,MAEC,CAACF,IACJ,IAcMpY,EAAU,CACd,CACElO,MAAO,OACPmO,UAAW,YACXC,OAAQ,SAAAC,GACN,OAAO,6BAAMlC,KAAOkC,GAAWC,OAAO,8BAG1C,CACEtO,MAAO,QACPmO,UAAW,QACXC,OAAQ,SAAAsS,GACN,OAAO,6BAAMA,EAAM9hB,QAGvB,CACEoB,MAAO,WACPmO,UAAW,QACXC,OAAQ,SAAAsS,GACN,OAAO,6BAAMA,EAAMplB,QAAQmD,YAG/B,CACEuB,MAAO,WACPmO,UAAW,WACXC,OAAQ,SAAAI,GACN,OAAO,6BAAMpF,GAAcoF,MAG/B,CACExO,MAAO,SACPoO,OAAQ,SAACM,EAAMC,GACb,OACE,6BACE,kBAAC,IAAD,CAAQnS,UAAWC,KAAOiqB,cAAe5pB,QAAS,kBAhDvC,SAAA6R,GACnBmR,EAAYnR,GACZ8W,GAAkB,GA8C8CkB,CAAahY,KAArE,eAGA,kBAAC,IAAD,CAAQgQ,QAAM,EAAC7hB,QAAS,kBA9CX,SAAA6R,GACrBmR,EAAYnR,GACZkX,GAAc,GA4CwBe,CAAejY,KAA7C,cASV,OACE,yBAAKnS,UAAWC,KAAO0pB,sBACrB,kBAACZ,GAAD,CACEE,kBAAmBA,EACnBD,eAAgBA,EAChBnK,SAAUA,IAEZ,kBAACsK,GAAD,CAAaE,cAAeA,EAAeD,WAAYA,EAAYvK,SAAUA,IAC7E,yBAAK7e,UAAWC,KAAO8kB,WACrB,kBAAC,GAAD,CAAQne,YAAY,4BAA4Bqe,SA3DnC,SAAA1lB,GACjBwqB,EAAaxqB,IA0D6DylB,aAAW,KAEnF,kBAAC,KAAD,CAAM7V,SAAU/N,GACd,kBAAC,KAAD,CAAOsQ,QAASA,EAASe,WAAYmX,EAASlX,YAAY,EAAOC,OAAO,S,IC3FxEhL,GAA2B7H,IAA3B6H,OAAQC,GAAmB9H,IAAnB8H,QAASyiB,GAAUvqB,IAAVuqB,MAEV,SAASC,GAAQ1rB,GAAQ,IAAD,EACN+C,qBAAWlD,GAAlCK,EAD6B,EAC7BA,QAASY,EADoB,EACpBA,UADoB,EAEGb,oBAAS,GAFZ,mBAE9B0rB,EAF8B,KAEhBC,EAFgB,OAGG3rB,oBAAS,GAHZ,mBAG9BqJ,EAH8B,KAGhBC,EAHgB,KAI7B1F,EAAa7D,EAAb6D,SACFgoB,EAAc3rB,EAAQoP,SAAWpP,EAAQoP,QAAQH,OACrD,kBAAC,KAAD,CAAQ/J,MAAO,CAAE0mB,OAAQ,QAAUznB,IAAKwG,GAAY3K,EAAQoP,QAAQH,SACpE,kBAAC,KAAD,CAAQ/J,MAAO,CAAE0mB,OAAQ,QAAUrc,KAAM,kBAAC1H,EAAA,EAAD,QACrCgkB,EACJ,kBAAC,KAAD,KACE,kBAAC,KAAK7lB,KAAN,CAAWxE,QAAS,kBAAMkqB,GAAgB,KACxC,kBAACI,GAAA,EAAD,MAAe,kDAEjB,kBAAC,KAAK9lB,KAAN,CAAWxE,QAASZ,GAClB,kBAACmrB,GAAA,EAAD,MAAkB,4CAIxB,OACE,kBAAC,IAAD,CAAQ7mB,MAAO,CAAE8mB,UAAW,UAC1B,kBAAC3jB,GAAD,CAAqB5D,UAAW2E,EAAcvE,QAAS,kBAAMwE,GAAgB,MAC7E,kBAAC2D,GAAD,CACEvI,UAAWgnB,EACX5mB,QAAS,kBAAM6mB,GAAgB,IAC/Bze,SAAU,kBAAM5D,GAAgB,MAElC,kBAACkiB,GAAD,CAAOU,aAAW,GAChB,kBAACze,GAAD,CAAaC,WAAW,IACxB,kBAAC,KAAD,CAAMye,MAAM,OAAOC,oBAAqB,CAAC,uBAAwBja,KAAK,SAASka,aAAc,CAACzoB,EAAS0oB,WACrG,kBAAC,KAAKrmB,KAAN,CAAWyL,IAAI,kBACb,kBAAC6a,GAAA,EAAD,MAAuB,kBAAC,IAAD,CAAMjU,GAAG,kBAAiB,yCAEnD,kBAAC,KAAKrS,KAAN,CAAWyL,IAAI,YACb,kBAAC8a,GAAA,EAAD,MAAoB,kBAAC,IAAD,CAAMlU,GAAG,YAAW,2CAE1C,kBAAC,KAAKrS,KAAN,CAAWyL,IAAI,0BACb,kBAAC+a,GAAA,EAAD,MAAwB,kBAAC,IAAD,CAAMnU,GAAG,0BAAyB,iDAE5D,kBAAC,KAAKrS,KAAN,CAAWyL,IAAI,2BACb,kBAAC6D,GAAA,EAAD,MAAmB,kBAAC,IAAD,CAAM+C,GAAG,2BAA0B,oDAI5D,kBAAC,IAAD,KACE,kBAAC,GAAD,KACE,yBAAKnX,UAAWC,KAAOsrB,aAAvB,UACUzsB,EAAQmD,SAChB,kBAAC,KAAD,CAAUupB,QAASb,EAAUjX,UAAU,cACrC,6BACG+W,EAAW,kBAACgB,GAAA,EAAD,CAAczrB,UAAWC,KAAOyrB,mBAKpD,kBAAC,GAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOxL,KAAK,yBAAyByL,UAAW1X,KAChD,kBAAC,IAAD,CAAOiM,KAAK,iBAAiByL,UAAWvD,KACxC,kBAAC,IAAD,CAAOlI,KAAK,0BAA0ByL,UAAWhC,KACjD,kBAAC,IAAD,CAAOzJ,KAAK,WAAWyL,UAAWne,GAASoe,OAAK,MAGpD,kBAAC7rB,EAAD,Q,6ICpEF+d,GAAiB,CACrBC,UAAU,EACVna,MAAO,IACPoa,OAAQ,IACRC,OAAO,EACP4N,QAAS,CACP1Z,OAAQ,CACNwD,OAAO,EACPyD,OAAO,EACP0S,UAAW,IACXC,OAAO,KAKE,SAASC,GAAT,GAAwE,IAA/CC,EAA8C,EAA9CA,aAAcC,EAAgC,EAAhCA,aAAcC,EAAkB,EAAlBA,eAC5DvO,EAAS1E,iBAAO,MAChB2E,EAAY3E,iBAAO,MAF2D,EAGpDra,mBAAS,MAH2C,mBAG7EutB,EAH6E,KAGnEC,EAHmE,OAItDxtB,oBAAS,GAJ6C,mBAI7EuC,EAJ6E,KAIpEC,EAJoE,KAK5EvC,EAAY6C,qBAAWlD,GAAvBK,QACFwtB,EAAW,uCAAG,4BAAAxqB,EAAA,sEAEhBT,GAAW,IACLyN,EAAW,IAAIC,UACZC,OAAO,QAASod,EAAU,mBAJnB,SAKVvrB,EAAM,iBAAmB/B,EAAQmD,SAAU,CAC/CM,KAAMuM,EACNG,OAAQ,SAPM,OAShBgd,IACAE,IAVgB,kDAYhB/kB,MAAM,KAAMzE,SAASJ,KAAKK,SAC1BvB,GAAW,GAbK,0DAAH,qDAwDjB,OAvCArC,qBAAU,WAiCR,OAhCA4e,EAAOlE,QAAU0E,mBAAQP,EAAUnE,QAASoE,IAAgB,WAC1D,IAAMO,EACJ,kBACAD,WAAQE,QACR,wBACAF,WAAQmO,iBAAiB,UACzB,kBACAC,KAAUC,QACZrO,WAAQG,IAAIF,MAEdT,EAAOlE,QAAQvD,GAAG,eAAe,WAC/BiG,QAAQmC,IAAI,uBAEdX,EAAOlE,QAAQvD,GAAG,eAAe,WAC/BiG,QAAQmC,IAAI,yBAIdX,EAAOlE,QAAQvD,GAAG,gBAAgB,WAGhCkW,EAAYzO,EAAOlE,QAAQgT,iBAI7B9O,EAAOlE,QAAQvD,GAAG,SAAS,SAACwW,EAASrrB,GACnC8a,QAAQwQ,KAAKtrB,MAGfsc,EAAOlE,QAAQvD,GAAG,eAAe,WAC/BiG,QAAQ9a,MAAM,gBAAiBsc,EAAOlE,QAAQmT,oBAEzC,WACDjP,EAAOlE,SACTkE,EAAOlE,QAAQ8E,aAGlB,IAED,6BACE,yBAAKC,mBAAA,GACH,2BACEtS,GAAG,gBACH+N,IAAK,SAAAwE,GAAI,OAAKb,EAAUnE,QAAUgF,GAClC1e,UAAU,4BACV2e,aAAW,KAGduN,EACC,yBAAKlsB,UAAWC,KAAO6sB,YACrB,kBAAC,IAAD,CAAQ9sB,UAAWC,KAAO8sB,SAAUzsB,QAASgsB,EAAalrB,QAASA,GAAnE,UAGA,kBAAC,IAAD,CAAQpB,UAAWC,KAAO8sB,SAAU7oB,KAAK,SAAS5D,QAAS2rB,GAA3D,WAKF,yBAAKjsB,UAAWC,KAAO+sB,oBACrB,kBAAC,IAAD,CAAQhtB,UAAWC,KAAO8sB,SAAUzsB,QAASgsB,EAAalrB,QAASA,GAAnE,Y,yBCtGK,SAASuc,GAAT,GAAqC,IAAdsP,EAAa,EAAbA,UAC9BrP,EAAS1E,iBAAO,MAChB2E,EAAY3E,iBAAO,MACjBpa,EAAY6C,qBAAWlD,GAAvBK,QACFgf,EAAiB,CACrBC,UAAU,EACVna,MAAO,IACPoa,OAAQ,IACRC,OAAO,EACPC,QAAS,CAAC,CACRjb,IAAKwG,GAAY,oBAAsB3K,EAAQmD,SAC/CiC,KAAM,eAERia,UAAU,GAcZ,OAZAnf,qBAAU,WAKR,OAJA4e,EAAOlE,QAAU0E,mBAAQP,EAAUnE,QAASoE,GAAgB,WAC1D,IAAMO,EAAe,kBAAoBD,WAAQE,QACjDF,WAAQG,IAAIF,MAEP,WACDT,EAAOlE,SACTkE,EAAOlE,QAAQ8E,aAIlB,IAED,6BACE,yBAAKC,mBAAA,GACH,2BAAOtS,GAAG,UAAU+N,IAAK,SAAAwE,GAAI,OAAIb,EAAUnE,QAAUgF,GAAM1e,UAAU,kDAAkD2e,aAAW,KAEpI,yBAAK3e,UAAWC,KAAO6sB,YACtB,kBAAC,IAAD,CAAQxsB,QAAS2sB,GAAjB,sB,IC7BC3f,GAAUC,KAAVD,MACAF,GAAWC,KAAXD,OAEO,SAASI,KAAW,IAAD,EACY3O,oBAAS,GADrB,mBACzB4O,EADyB,KACTC,EADS,OAEF7O,oBAAS,GAFP,mBAEzBuC,EAFyB,KAEhBC,EAFgB,OAGFxC,mBAAS,CAAEC,QAAS,CAAEqD,MAAO,QAH3B,mBAGzBwL,EAHyB,KAGhBC,EAHgB,KAIxB9O,EAAY6C,qBAAWlD,GAAvBK,QAJwB,EAKAD,mBAAS,IALT,mBAKzB+P,EALyB,KAKfse,EALe,OAMEruB,oBAAS,GANX,mBAMzBsuB,EANyB,KAMdC,EANc,OAOIvuB,oBAAS,GAPb,mBAOzBgP,EAPyB,KAObC,EAPa,OAQJjP,mBAAS,IARL,mBAQzBkP,EARyB,KAQjBC,EARiB,OASAnP,oBAAS,GATT,mBASzBwuB,EATyB,KASfC,EATe,KAW1BC,EAAe,uCAAG,4BAAAzrB,EAAA,sEAEpB4L,GAAkB,GAFE,SAGC7M,EAAM1B,IAAI,WAAaL,EAAQolB,MAAM/X,IAHtC,OAGd7J,EAHc,OAIpBsL,EAAWtL,EAAOC,KAAK2hB,OACnB5hB,EAAOC,KAAK2hB,MAAM9K,OACpBkU,GAAY,GAEd5f,GAAkB,GARE,kDAUpBA,GAAkB,GAClBtG,MAAM,KAAMzE,SAASJ,KAAKK,SAXN,0DAAH,qDAerB5D,qBAAU,WACRuuB,MAEC,IAEH,IA2GIC,EA3GErf,EACJR,GAAWA,EAAQI,OACjB,kBAAC,KAAD,CAAQ9K,IAAKwG,GAAYkE,EAAQI,OAAQK,KAAM,MAE/C,kBAAC,KAAD,CAAQC,KAAM,kBAAC1H,EAAA,EAAD,MAAkByH,KAAM,MAGpCqf,EAAiB,CACrBhpB,SAAU,CACRC,GAAI,CAAEC,KAAM,IACZC,GAAI,CAAED,KAAM,IAEdE,WAAY,CACVH,GAAI,CAAEC,KAAM,IACZC,GAAI,CAAED,KAAM,MAGV+oB,EAAkB,CACtB7oB,WAAY,CAAEe,OAAQ,EAAGjB,KAAM,KAE3B2J,EAAQ,uCAAG,WAAMzM,GAAN,SAAAC,EAAA,sEAEbT,GAAW,GAFE,SAGPR,EAAM0N,IAAI,WAAaZ,EAAQxB,GAAItK,GAH5B,OAIb0rB,IACAlsB,GAAW,GALE,gDAObA,GAAW,GACX+F,MAAM,KAAMzE,SAASJ,KAAKK,SARb,yDAAH,sDAWR+qB,EAAc,CAClBlf,SAAU,SAAAC,GACR,IAAMyG,EAAQvG,EAASgf,QAAQlf,GACzBmf,EAAcjf,EAASkf,QAC7BD,EAAYvY,OAAOH,EAAO,GAC1B+X,EAAYW,IAEdlf,aAAc,SAAAD,GAOZ,OALgB,oBAAdA,EAAKxK,MACS,4EAAdwK,EAAKxK,OAELgpB,EAAY,GAAD,oBAAKte,GAAL,CAAeF,MAErB,GAETE,SAAUA,GAENJ,EAAiB,CACrBC,SAAU,SAAAC,GACRV,EAAU,KAEZW,aAAc,SAAAD,GAKZ,OAJiC,eAAdA,EAAKxK,MAAuC,cAAdwK,EAAKxK,OAEpD8J,EAAU,CAACU,KAEN,GAETE,SAAUb,GAENggB,EAAY,uCAAG,4BAAAjsB,EAAA,sEAEjBsrB,GAAa,GACPte,EAAW,IAAIC,SACrBH,EAASiG,SAAQ,SAAAnG,GACfI,EAASE,OAAO,eAAgBN,MALjB,SAOX7N,EAAM,wBAA0B8M,EAAQ7O,QAAQmD,SAAU,CAC9DgN,OAAQ,OACR1M,KAAMuM,IATS,uBAWXye,IAXW,OAYjBH,GAAa,GAZI,kDAcjBhmB,MAAM,KAAMzE,SAASJ,KAAKK,SAC1BwqB,GAAa,GAfI,0DAAH,qDAmBZve,GAAY,uCAAG,4BAAA/M,EAAA,sEAEjBgM,GAAc,IACRgB,EAAW,IAAIC,UACZC,OAAO,SAAUjB,EAAO,IAJhB,SAKXlN,EAAM,kBAAoB8M,EAAQ7O,QAAQmD,SAAU,CACxDgN,OAAQ,OACR1M,KAAMuM,IAPS,uBASXye,IATW,OAUjBhtB,OAAOkC,SAASC,QAAO,GACvBoL,GAAc,GAXG,kDAajBA,GAAc,GACd1G,MAAM,KAAMzE,SAASJ,KAAKK,SAdT,0DAAH,qDAkBZsM,GAAkB,uCAAG,sBAAApN,EAAA,+EAEjBjB,EAAMwB,KAAK,0BAA2B,CAAEF,MAAOwL,EAAQ7O,QAAQqD,QAF9C,sDAIvBiF,MAAM,KAAMzE,SAASJ,KAAKK,SAJH,wDAAH,qDAgBxB,OAPI+K,EAAQ6f,gBAAkBnkB,GAAeC,SAC3CkkB,EAAgB,kBAAC,IAAD,CAAO5qB,QAAQ,8BAA8BsB,KAAK,UAAUC,UAAQ,IAC3EwJ,EAAQ6f,gBAAkBnkB,GAAeE,QAClDikB,EAAgB,kBAAC,IAAD,CAAO5qB,QAAQ,gDAAgDsB,KAAK,OAAOC,UAAQ,IAC1FwJ,EAAQ6f,gBAAkBnkB,GAAeG,WAClDgkB,EAAgB,kBAAC,IAAD,CAAO5qB,QAAQ,2CAA2CsB,KAAK,QAAQC,UAAQ,KAG/F,kBAAC,KAAD,CAAMgL,SAAU1B,GACd,yBAAKzN,UAAWC,KAAO0N,SACrB,yBAAK3N,UAAWC,KAAOmP,sBACpBjB,EACD,yBAAKnO,UAAWC,KAAO+B,aACrB,uBAAGhC,UAAWC,KAAOmC,MAAOuL,EAAQvL,MACpC,qCAAWuL,EAAQ7O,QAAQqD,OAC1BrD,EAAQwQ,aACP,kBAAC,KAAD,CAAKC,MAAM,WAAX,YAEA,8BACE,kBAAC,KAAD,CAAKA,MAAM,WAAX,cACA,kBAAC,IAAD,CAAQrL,KAAK,OAAO5D,QAAS4O,IAA7B,8BAKJ,yBAAKlP,UAAWC,KAAOutB,eAAgBA,KAG3C,yBAAKxtB,UAAWC,KAAOuP,UACpB7B,EAAQvL,KACP,kBAAC,IAAD,iBACMqrB,EADN,CAEE7rB,SAAU0M,EACV7H,cAAe,CACbrE,KAAMuL,EAAQvL,KACdqN,MAAO9B,EAAQ8B,MACfC,UAAW/B,EAAQ+B,UAAYC,KAAOhC,EAAQ+B,gBAAaE,EAC3DC,QAASlC,EAAQkC,QACjB4P,UAAW9R,EAAQ8R,UACnBC,UAAW/R,EAAQ+R,UACnBC,WAAYhS,EAAQgS,WACpBC,WAAYjS,EAAQiS,WACpB9P,aAAcnC,EAAQmC,aAAenC,EAAQmC,kBAAeF,EAC5DG,YAAapC,EAAQoC,YAAcpC,EAAQoC,iBAAcH,EACzDI,OAAQrC,EAAQqC,OAASrC,EAAQqC,YAASJ,EAC1C2P,QAAS5R,EAAQ4R,QAAU5R,EAAQ4R,aAAU3P,EAC7CiQ,OAAQlS,EAAQkS,OAChB5P,aAActC,EAAQsC,aAAeC,KAAKC,MAAMxC,EAAQsC,mBAAgBL,EACxE8N,aAAc/P,EAAQ+P,aACtBtN,gBAAiBzC,EAAQyC,gBAAkBF,KAAKC,MAAMxC,EAAQyC,sBAAmBR,KAGnF,kBAAC,KAAD,CAAUS,iBAAkB,CAAC,MAC3B,kBAAC,GAAD,CAAOC,OAAO,aAAaC,IAAI,KAC7B,kBAAC,IAAKzL,KAAN,CAAWC,MAAM,OAAO3C,KAAK,OAAO4C,MAAO,CAAC,CAAEC,UAAU,EAAMrC,QAAS,4BACrE,kBAAC,IAAD,CAAOgE,YAAY,gBAAgBrH,MAAOoO,EAAQvL,QAEpD,kBAAC,IAAK0C,KAAN,CAAW1C,KAAK,QAAQ2C,MAAM,SAC5B,kBAAC,IAAD,CAAO6B,YAAY,kCAErB,kBAAC,IAAK9B,KAAN,CAAW1C,KAAK,YAAY2C,MAAM,aAChC,kBAAC,KAAD,OAEF,kBAAC,IAAKD,KAAN,CAAW1C,KAAK,UAAU2C,MAAM,WAC9B,kBAAC,IAAD,CAAO6B,YAAY,2CAErB,kBAAC,IAAK9B,KAAN,CAAW1C,KAAK,SAAS2C,MAAM,iBAC7B,kBAAC,KAAD,iBAAYyJ,EAAZ,CAA4BgC,SAAS,iBACnC,kBAAC,IAAD,CAAQnC,KAAM,kBAACoC,GAAA,EAAD,OAAd,mBAGJ,kBAAC,IAAK3L,KAAS4oB,EACb,kBAAC,IAAD,CACEhd,SAAU3C,EAAO4C,QAAU,EAC3BrQ,QAASuO,GACTzN,QAASyM,EACT7J,MAAO,CAAEJ,MAAO,SAChByK,KAAM,kBAACuC,GAAA,EAAD,OALR,mBAWJ,kBAAC,GAAD,CAAON,OAAO,KAAKC,IAAI,KACrB,kBAAC,IAAKzL,KAAN,CAAW1C,KAAK,YAAY2C,MAAM,aAChC,kBAAC,IAAMghB,SAAP,CAAgBnf,YAAY,oFAE9B,kBAAC,IAAK9B,KAAN,CAAW1C,KAAK,YAAY2C,MAAM,aAChC,kBAAC,IAAMghB,SAAP,CAAgBnf,YAAY,4CAE9B,kBAAC,IAAK9B,KAAN,CAAW1C,KAAK,aAAa2C,MAAM,cACjC,kBAAC,IAAMghB,SAAP,CAAgBnf,YAAY,6BAE9B,kBAAC,IAAK9B,KAAN,CAAW1C,KAAK,aAAa2C,MAAM,cACjC,kBAAC,IAAD,CAAO6B,YAAY,mCAErB,kBAAC,IAAK9B,KAAN,CAAW1C,KAAK,SAAS2C,MAAM,UAC7B,kBAAC,IAAMghB,SAAP,CAAgBnf,YAAY,sCAGhC,kBAAC,GAAD,CAAO0J,OAAO,uBAAuBC,IAAI,KACvC,kBAAC,IAAKzL,KAAN,CAAW1C,KAAK,eAAe2C,MAAM,UACnC,kBAAC,KAAD,CAAQ6B,YAAY,6BACjBiK,KAAY5S,aAAa6S,KAAI,SAAA5M,GAC5B,OACE,kBAAC,GAAD,CAAQ3E,MAAO2E,EAAMqM,IAAKrM,GACvBA,QAMX,kBAAC,IAAKY,KAAN,CAAW1C,KAAK,cAAc2C,MAAM,iBAClC,kBAAC,KAAD,CAAQ6B,YAAY,6CACjBiK,KAAY3S,YAAY4S,KAAI,SAAAC,GAC3B,OACE,kBAAC,GAAD,CAAQxR,MAAOwR,EAAKR,IAAKQ,GACtBA,QAMX,kBAAC,IAAKjM,KAAN,CAAW1C,KAAK,SAAS2C,MAAM,UAC7B,kBAAC,KAAD,CAAQ6B,YAAY,uBACjBiK,KAAY/S,WAAWgT,KAAI,SAAAd,GAC1B,OACE,kBAAC,GAAD,CAAQzQ,MAAOyQ,EAAQO,IAAKP,GACzBA,QAMX,kBAAC,IAAKlL,KAAN,CAAW1C,KAAK,UAAU2C,MAAM,WAC9B,kBAAC,KAAD,CAAQ6B,YAAY,gBACjBiK,KAAY9S,YAAY+S,KAAI,SAAAyO,GAC3B,OACE,kBAAC,GAAD,CAAQhgB,MAAOggB,EAAShP,IAAKgP,GAC1BA,QAMX,kBAAC,IAAKza,KAAN,CAAW1C,KAAK,eAAe2C,MAAM,gBACnC,kBAAC,KAAD,CAAQiM,KAAK,WAAWpK,YAAY,4BACjCiK,KAAYzS,aAAa0S,KAAI,SAAAG,GAC5B,OACE,kBAAC,GAAD,CAAQ1R,MAAO0R,EAAMV,IAAKU,GACvBA,QAMX,kBAAC,IAAKnM,KAAN,CAAW1C,KAAK,kBAAkB2C,MAAM,mBACtC,kBAAC,KAAD,CAAQiM,KAAK,WAAWpK,YAAY,eACjCiK,KAAY7S,eAAe8S,KAAI,SAAA9M,GAC9B,OACE,kBAAC,GAAD,CAAQzE,MAAOyE,EAAOuM,IAAKvM,GACxBA,SAOb,kBAAC,GAAD,CAAOsM,OAAO,mCAAmCC,IAAI,KAElD5C,EAAQoP,cAAgB7M,KAAKC,MAAMxC,EAAQoP,cAAcpM,OAAS,EACjE,kBAAC,IAAK7L,KAAN,iBAAe2oB,EAAf,CAA+B1oB,MAAM,qBACnC,yBAAK/E,UAAWC,KAAO8f,cACpBpS,EAAQoP,aACL7M,KAAKC,MAAMxC,EAAQoP,cAAcjM,KAAI,SAACkP,EAAM7K,GAC1C,OACE,uBAAG5E,IAAK4E,EAAO8K,KAAMxW,GAAYuW,EAAKE,MACpC,kBAACC,GAAA,EAAD,MACCH,EAAKI,iBAIZ,OAGN,KACJ,kBAAC,IAAKtb,KAAN,CAAW1C,KAAK,QAAQ2C,MAAM,sBAC5B,kBAAC,KAAD,iBAAY4oB,EAAZ,CAAyBnd,SAAS,iBAChC,kBAAC,IAAD,CAAQnC,KAAM,kBAAC2f,GAAA,EAAD,OAAd,iBAGJ,kBAAC,IAAKlpB,KAAS4oB,EACb,kBAAC,IAAD,CACEptB,QAASytB,EACT3sB,QAAS+rB,EACTnpB,MAAO,CAAEJ,MAAO,SAChByK,KAAM,kBAACuC,GAAA,EAAD,OAJR,WASF,kBAAC,IAAD,CACEhO,QAAQ,oFACRsB,KAAK,UACLC,UAAQ,KAGZ,kBAAC,GAAD,CAAOmM,OAAO,qBAAqBC,IAAI,KACrC,kBAAC,IAAKzL,KAAN,CAAW1C,KAAK,eAAe2C,MAAM,gBACnC,kBAAC,IAAMghB,SAAP,CAAgBnf,YAAY,wBAE9B,6BACE,uBAAG5G,UAAWC,KAAOguB,eAArB,kOAKA,yBAAKjuB,UAAWC,KAAOiuB,WACrB,kFACA,6DACA,8DACA,6CACA,yDAGJ,kBAAC,IAAKppB,KAAN,CAAWC,MAAM,eACdsoB,EACC,kBAACrB,GAAD,CACEC,aAAc,kBAAMqB,GAAY,IAChCpB,aAAcve,EAAQyL,MACtB+S,eAAgBoB,IAGlB,kBAAC,GAAD,CAAaN,UAAW,kBAAMK,GAAY,SAKlD,yBAAKttB,UAAWC,KAAOiR,eACrB,kBAAC,IAAD,CAAQhN,KAAK,UAAU2B,SAAS,SAASzE,QAASA,GAAlD,oBAKF,Q,0GCnYN+sB,GAASC,KAATD,KAEO,SAASE,KAAY,IAuB9Bb,EAtBI1uB,EAAY6C,qBAAWlD,GAAvBK,QADyB,EAEHD,oBAAS,GAFN,mBAE1BuC,EAF0B,KAEjBC,EAFiB,OAGHxC,mBAAS,IAHN,mBAG1B8O,EAH0B,KAGjBC,EAHiB,KAK3B0gB,EAAU,uCAAG,4BAAAxsB,EAAA,sEAEfT,GAAW,GAFI,SAGMR,EAAM1B,IAAI,WAAaL,EAAQolB,MAAM/X,IAH3C,OAGT7J,EAHS,OAIfxD,EAAQolB,MAAQ5hB,EAAOC,KAAK2hB,MAC5BtW,EAAWtL,EAAOC,KAAK2hB,OACvB7iB,GAAW,GANI,kDAQfA,GAAW,GACX+F,MAAM,KAAMzE,SAASJ,KAAKK,SATX,0DAAH,qDA2BhB,OAdA5D,qBAAU,WACRsvB,MAEC,IAGC3gB,EAAQ6f,gBAAkBnkB,GAAeC,SAC3CkkB,EAAgB,kBAACW,GAAD,CAAMzR,OAAO,SAASlZ,MAAM,mBAAmB6K,KAAM,kBAACkgB,GAAA,EAAD,QAC5D5gB,EAAQ6f,gBAAkBnkB,GAAeE,QAClDikB,EAAgB,kBAACW,GAAD,CAAMzR,OAAO,OAAOlZ,MAAM,mBAAmB6K,KAAM,kBAACkgB,GAAA,EAAD,QAC1D5gB,EAAQ6f,gBAAkBnkB,GAAeG,WAClDgkB,EAAgB,kBAACW,GAAD,CAAMzR,OAAO,QAAQlZ,MAAM,mBAAmB6K,KAAM,kBAACkgB,GAAA,EAAD,SAIpE,yBAAKvuB,UAAWC,KAAOuuB,iBACrB,yBAAKxuB,UAAWC,KAAOwuB,UACrB,kBAAC,KAAD,CAAMrgB,KAAK,QAAQe,SAAU/N,GAC3B,kBAAC,KAAD,CAAO4C,MAAO,CAAEJ,MAAO,SACrB,kBAACuqB,GAAD,CACEzR,OAAQ/O,EAAQ7O,SAAW6O,EAAQ7O,QAAQwQ,aAAe,SAAW,OACrE9L,MAAM,eACN6K,KAAM,kBAACqgB,GAAA,EAAD,QAEPlB,EACD,kBAACW,GAAD,CACEzR,OACE/O,EAAQ7O,SAAW6O,EAAQ7O,QAAQwQ,cAAgB3B,EAAQ6f,gBAAkBnkB,GAAeC,SACxF,SACA,OAEN9F,MAAM,QACN6K,KAAM,kBAACsgB,GAAA,EAAD,SAGThhB,EAAQ7O,SAAW6O,EAAQ7O,QAAQwQ,cAAgB3B,EAAQ6f,gBAAkBnkB,GAAeC,SAC3F,yBAAKtJ,UAAWC,KAAO2uB,MACrB,yBAAK5uB,UAAWC,KAAO4uB,QAAS5rB,IAAK6rB,KAAS3rB,IAAI,GAAGH,UAAU,UAC/D,yBAAKhD,UAAWC,KAAO8uB,SACrB,+CACA,wDACA,sEAIJ,yBAAK/uB,UAAWC,KAAO2uB,MACrB,yBAAK5uB,UAAWC,KAAO4uB,QAAS5rB,IAAK+rB,KAAoB7rB,IAAI,GAAGH,UAAU,UAC1E,yBAAKhD,UAAWC,KAAO8uB,SACrB,oDACA,kEACA,iEAIL3tB,EAAU,KAAO,kBAAC4kB,GAAD,CAAWlnB,QAASA,O,yBC5ExCkkB,GAAWC,IAAXD,OAEO,SAASiM,KAAsB,IACpCnwB,EAAY6C,qBAAWlD,GAAvBK,QADmC,EAEbD,mBAAS,IAFI,mBAEpC+qB,EAFoC,KAE3BC,EAF2B,OAGbhrB,oBAAS,GAHI,mBAGpCuC,EAHoC,KAG3BC,EAH2B,OAIPxC,oBAAS,GAJF,mBAIpCuqB,EAJoC,KAIxBC,EAJwB,OAKXxqB,mBAAS,MALE,mBAKpCggB,EALoC,KAK1ByE,EAL0B,OAMTzkB,mBAAS,IANA,mBAMpCirB,EANoC,KAMzBC,EANyB,OAOClrB,oBAAS,GAPV,mBAOpCqwB,EAPoC,KAOpBC,EAPoB,KASrCnF,EAAU,uCAAG,4BAAAloB,EAAA,6DACjBT,GAAW,GADM,kBAGMR,EAAM1B,IAAI,2BAA6BL,EAAQolB,MAAM/X,GAAK,WAAa2d,GAH7E,OAGTxnB,EAHS,OAIfunB,EAAWvnB,EAAOC,KAAK0nB,eACvB5oB,GAAW,GALI,gDAOf+F,MAAM,KAAMzE,SAASJ,KAAKK,SAC1BvB,GAAW,GARI,yDAAH,qDAYV+tB,EAAa,uCAAG,sBAAAttB,EAAA,6DACpBqtB,GAAkB,GADE,kBAGZtuB,EAAMwB,KAAK,YAAa,CAC5BoiB,QAAS3lB,EAAQolB,MAAM/X,KAJP,OAMlBgjB,GAAkB,GAClBnF,IAPkB,gDASlB5iB,MAAM,KAAMzE,SAASJ,KAAKK,SAC1BusB,GAAkB,GAVA,yDAAH,qDAcnBnwB,qBAAU,WACRgrB,MAEC,CAACF,IACJ,IASMpY,EAAU,CACd,CACElO,MAAO,OACPmO,UAAW,YACXC,OAAQ,SAAAC,GACN,OAAO,6BAAMlC,KAAOkC,GAAWC,OAAO,8BAG1C,CACEtO,MAAO,UACPmO,UAAW,UACXC,OAAQ,SAAA1D,GACN,OAAO,6BAAMA,EAAQ9L,QAGzB,CACEoB,MAAO,WACPmO,UAAW,UACXC,OAAQ,SAAA1D,GACN,OAAO,6BAAMA,EAAQpP,QAAQmD,YAGjC,CACEuB,MAAO,WACPmO,UAAW,WACXC,OAAQ,SAAAI,GACN,OAAO,6BAAMpF,GAAcoF,MAG/B,CACExO,MAAO,gBACPmO,UAAW,UACXC,OAAQ,SAAAyd,GACN,OAAIA,EACK,kBAAC,KAAD,CAAK9f,MAAM,WAAX,WAEA,kBAAC,KAAD,oBAIb,CACE/L,MAAO,SACPoO,OAAQ,SAACM,EAAMC,GACb,OACE,6BACE,kBAAC,IAAD,CAAQgQ,QAAM,EAAC7hB,QAAS,kBAtDjB,SAAA6R,GACfmR,EAAYnR,GACZkX,GAAc,GAoDwBiG,CAASnd,KAAvC,cASV,OACE,yBAAKnS,UAAWC,KAAOgvB,oBACrB,kBAAC9F,GAAD,CAAaE,cAAeA,EAAeD,WAAYA,EAAYvK,SAAUA,IAC7E,kBAAC,IAAD,CAAQ3a,KAAK,UAAU5D,QAAS8uB,EAAehuB,QAAS8tB,GAAxD,0BAGA,yBAAKlvB,UAAWC,KAAO8kB,WACrB,kBAAC,GAAD,CAAQne,YAAY,4BAA4Bqe,SAjEnC,SAAA1lB,GACjBwqB,EAAaxqB,IAgE6DylB,aAAW,KAEnF,kBAAC,KAAD,CAAM7V,SAAU/N,GACd,kBAAC,KAAD,CAAOsQ,QAASA,EAASe,WAAYmX,EAASlX,YAAY,EAAOC,OAAO,S,8CCnHjE,SAAS4c,KAAY,IAAD,EACD1wB,mBAAS,IADR,mBAC1B2wB,EAD0B,KAChBC,EADgB,OAEH5wB,oBAAS,GAFN,mBAE1BuC,EAF0B,KAEjBC,EAFiB,KAGzBvC,EAAY6C,qBAAWlD,GAAvBK,QACF4S,EAAU,CACd,CACElO,MAAO,OACPmO,UAAW,YACXC,OAAQ,SAAAC,GACN,OAAO,6BAAMlC,KAAOkC,GAAWC,OAAO,8BAG1C,CACEtO,MAAO,QACPmO,UAAW,QACXC,OAAQ,SAAAK,GACN,OAAO,6BAAMA,EAAN,OAGX,CACEzO,MAAO,QACPmO,UAAW,QACXC,OAAQ,SAAAH,GACN,OAAIA,IAAUjG,GAAcZ,UACnB,kBAAC,KAAD,CAAK2E,MAAM,WAAX,aACEkC,IAAUjG,GAAcjC,QAC1B,kBAAC,KAAD,CAAKgG,MAAM,QAAX,WAEA,kBAAC,KAAD,CAAKA,MAAM,SAAX,gBAMTmgB,EAAW,uCAAG,4BAAA5tB,EAAA,6DAClBT,GAAW,GADO,kBAGKR,EAAM1B,IAAI,aAAeL,EAAQolB,MAAM/X,IAH5C,OAGV7J,EAHU,OAIhBmtB,EAAYntB,EAAOC,KAAKitB,UACxBnuB,GAAW,GALK,gDAOhB+F,MAAM,KAAMzE,SAASJ,KAAKK,SAC1BvB,GAAW,GARK,yDAAH,qDAgBjB,OAJArC,qBAAU,WACR0wB,MAEC,IAED,yBAAK1vB,UAAWC,KAAOuvB,UACrB,kBAAC,KAAD,CAAMrgB,SAAU/N,GACd,kBAAC,KAAD,CAAOuR,OAAO,KAAKjB,QAASA,EAASe,WAAY+c,EAAU9c,YAAY,M,yBCpDhE,SAASid,KAAW,IACzB7wB,EAAY6C,qBAAWlD,GAAvBK,QADwB,EAEFD,mBAAS,MAFP,mBAEzByhB,EAFyB,KAEhBsC,EAFgB,KAIhC5jB,qBAAU,YACY,uCAAG,8BAAA8C,EAAA,+EAEEjB,EAAM1B,IAAI,YAAcL,EAAQolB,MAAM/X,IAFxC,OAEb7J,EAFa,OAGbsf,EAAcvB,GAAe/d,EAAOC,KAAK+d,SAC/CsC,EAAW,gBAAKtgB,EAAOC,KAAb,CAAmBqf,iBAJV,gDAMnBxa,MAAM,KAAMzE,SAASJ,KAAKK,SANP,yDAAH,qDASpBof,KACC,CAACljB,EAAQolB,MAAM/X,KAClB,IAAIyjB,EAAgB,KAiBpB,OAhBItP,IACFsP,EACE,yBAAK5vB,UAAWC,KAAOqgB,SACrB,kBAACe,GAAD,CAAef,QAASA,IACxB,kBAAC,KAAD,CACEwC,WAAW,aACXrQ,WAAY6N,EAAQA,QACpByC,WAAY,SAAAjH,GAAI,OACd,kBAAC,KAAKhX,KAAN,KACE,kBAACid,GAAD,CAAQ/E,OAAQlB,UAOrB8T,ECrCM,SAASC,KACtB,OACE,yBAAK7vB,UAAWC,KAAO6vB,OACrB,kBAACP,GAAD,MACA,kBAACI,GAAD,O,ICgBEhoB,GAA2B7H,IAA3B6H,OAAQC,GAAmB9H,IAAnB8H,QAASyiB,GAAUvqB,IAAVuqB,MAEV,SAAS0F,GAAMnxB,GAAQ,IAAD,EACJ+C,qBAAWlD,GAAlCK,EAD2B,EAC3BA,QAASY,EADkB,EAClBA,UADkB,EAEKb,oBAAS,GAFd,mBAE5B0rB,EAF4B,KAEdC,EAFc,OAGK3rB,oBAAS,GAHd,mBAG5BqJ,EAH4B,KAGdC,EAHc,KAI3B1F,EAAa7D,EAAb6D,SACFgoB,EACJ3rB,EAAQolB,OAASplB,EAAQolB,MAAMnW,OAC7B,kBAAC,KAAD,CAAQ/J,MAAO,CAAE0mB,OAAQ,QAAUznB,IAAKwG,GAAY3K,EAAQolB,MAAMnW,SAElE,kBAAC,KAAD,CAAQ/J,MAAO,CAAE0mB,OAAQ,QAAUrc,KAAM,kBAAC1H,EAAA,EAAD,QAEvCgkB,EACJ,kBAAC,KAAD,KACE,kBAAC,KAAK7lB,KAAN,CAAWxE,QAAS,kBAAMkqB,GAAgB,KACxC,kBAACI,GAAA,EAAD,MACA,kDAEF,kBAAC,KAAK9lB,KAAN,CAAWxE,QAASZ,GAClB,kBAACmrB,GAAA,EAAD,MACA,4CAIN,OACE,kBAAC,IAAD,CAAQ7mB,MAAO,CAAE8mB,UAAW,UAC1B,kBAAC3jB,GAAD,CAAqB5D,UAAW2E,EAAcvE,QAAS,kBAAMwE,GAAgB,MAC7E,kBAAC2D,GAAD,CACEvI,UAAWgnB,EACX5mB,QAAS,kBAAM6mB,GAAgB,IAC/Bze,SAAU,kBAAM5D,GAAgB,MAElC,kBAAC,GAAD,CAAO4iB,aAAW,GAChB,kBAACze,GAAD,CAAaC,WAAW,IACxB,kBAAC,KAAD,CAAMye,MAAM,OAAOC,oBAAqB,CAAC,UAAWja,KAAK,SAASka,aAAc,CAACzoB,EAAS0oB,WACxF,kBAAC,KAAKrmB,KAAN,CAAWyL,IAAI,UACb,kBAAC8a,GAAA,EAAD,MACA,kBAAC,IAAD,CAAMlU,GAAG,UACP,2CAGJ,kBAAC,KAAKrS,KAAN,CAAWyL,IAAI,mBACb,kBAAC6a,GAAA,EAAD,MACA,kBAAC,IAAD,CAAMjU,GAAG,mBACP,4CAGJ,kBAAC,KAAKrS,KAAN,CAAWyL,IAAI,yBACb,kBAAC6D,GAAA,EAAD,MACA,kBAAC,IAAD,CAAM+C,GAAG,yBACP,kDAGJ,kBAAC,KAAKrS,KAAN,CAAWyL,IAAI,gBACb,kBAACyf,GAAA,EAAD,MACA,kBAAC,IAAD,CAAM7Y,GAAG,gBACP,2CAKR,kBAAC,IAAD,KACE,kBAAC,GAAD,KACE,yBAAKnX,UAAWC,KAAOsrB,aAAvB,UACUzsB,EAAQmD,SAChB,kBAAC,KAAD,CAAUupB,QAASb,EAAUjX,UAAU,cACrC,6BACG+W,EACD,kBAACgB,GAAA,EAAD,CAAczrB,UAAWC,KAAOyrB,mBAKxC,kBAAC,GAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOxL,KAAK,eAAeyL,UAAWkE,KACtC,kBAAC,IAAD,CAAO3P,KAAK,kBAAkByL,UAAW0C,KACzC,kBAAC,IAAD,CAAOnO,KAAK,wBAAwByL,UAAWsD,KAC/C,kBAAC,IAAD,CAAO/O,KAAK,SAASyL,UAAWne,GAASoe,OAAK,MAGlD,kBAAC7rB,EAAD,Q,gGCrGO,SAASkwB,KAAe,IAAD,EACIpxB,mBAAS,IADb,mBAC7BskB,EAD6B,KACfyD,EADe,OAEQ/nB,mBAAS,IAFjB,mBAE7BqxB,EAF6B,KAEbC,EAFa,KAIpCnxB,qBAAU,WAQR,OAPAsV,GACG6B,GAAGzM,GAAcM,mBAAmB,SAAAzH,GACnCqkB,EAAgBrkB,EAAK6kB,WAEtBjR,GAAGzM,GAAcY,qBAAqB,SAAA/H,GACrC4tB,EAAkB5tB,EAAK6kB,WAEpB,WACL9S,GAAOyD,IAAIrO,GAAcY,qBAAqByN,IAAIrO,GAAcM,sBAEjE,IAEH,IAAMzH,EAAO,CACX6tB,SAAU,CACR,CACE7tB,KAAM,CAAC2tB,EAAevf,OAAQwS,EAAaxS,QAC3C0f,gBAAiB,CAAC,UAAW,WAC7BC,qBAAsB,CAAC,UAAW,aAGtCC,OAAQ,CAAC,WAAY,WAGvB,OACE,yBAAKvwB,UAAWC,KAAOuwB,aACrB,2CACA,kBAAC,KAAD,CAAUjuB,KAAMA,K,8CC9BP,SAASkuB,KAAe,IAAD,EACV5xB,mBAAS,IADC,mBAC7B6xB,EAD6B,KACtBC,EADsB,KAEpC3xB,qBAAU,YACY,uCAAG,4BAAA8C,EAAA,+EAEEjB,EAAM1B,IAAI,mBAFZ,OAEbmD,EAFa,OAGnBquB,EAASruB,EAAOC,KAAK0nB,cAAc6D,MAAM,EAAG,IAHzB,gDAKnB1mB,MAAM,KAAMzE,SAASJ,KAAKK,SALP,yDAAH,qDAQpBguB,KACC,IACH,IAAMlf,EAAU,CACd,CACElO,MAAO,OACPmO,UAAW,YACXC,OAAQ,SAAAC,GACN,OAAO,6BAAMlC,KAAOkC,GAAWC,OAAO,8BAG1C,CACEtO,MAAO,UACPmO,UAAW,UACXC,OAAQ,SAAA1D,GACN,OAAO,6BAAMA,EAAQ9L,QAGzB,CACEoB,MAAO,QACPmO,UAAW,QACXC,OAAQ,SAAAsS,GACN,OAAO,6BAAMA,EAAM9hB,QAGvB,CACEoB,MAAO,WACPmO,UAAW,WACXC,OAAQ,SAAAI,GACN,OAAO,6BAAMpF,GAAcoF,OAIjC,OACE,yBAAKhS,UAAWC,KAAO4wB,aACrB,uBAAG7wB,UAAWC,KAAO6wB,kBAArB,gBACA,kBAAC,KAAD,CAAOpf,QAASA,EAASe,WAAYie,EAAOhe,YAAY,EAAOC,OAAO,Q,yBChD7D,SAASoe,KAAc,IAAD,EACTlyB,mBAAS,CAAEmyB,KAAM,EAAGC,IAAK,IADhB,mBAC5BnB,EAD4B,KACrBoB,EADqB,KAGnClyB,qBAAU,YACW,uCAAG,4BAAA8C,EAAA,+EAEGjB,EAAM1B,IAAI,gBAFb,OAEZmD,EAFY,OAGlB4uB,EAAS5uB,EAAOC,KAAKutB,OAHH,gDAKlB1oB,MAAM,KAAMzE,SAASJ,KAAKK,SALR,yDAAH,qDAQnBuuB,KACC,IAEH,IAAM5uB,EAAO,CACX6tB,SAAU,CACR,CACE7tB,KAAM,CAACutB,EAAMkB,KAAMlB,EAAMmB,KACzBZ,gBAAiB,CAAC,UAAW,WAC7BtrB,MAAM,WAAD,QAAc+qB,EAAMkB,KAAOlB,EAAMmB,KAAKlkB,QAAQ,GAA9C,OAGTwjB,OAAQ,CAAC,OAAQ,QAGnB,OACE,yBAAKvwB,UAAWC,KAAOmxB,YACrB,oCACA,kBAAC,KAAD,CAAK7uB,KAAMA,K,yBC7BF,SAAS8uB,KAAW,IAAD,EACNxyB,mBAAS,IADH,mBACzByyB,EADyB,KAClBC,EADkB,KAEhCvyB,qBAAU,YACQ,uCAAG,4BAAA8C,EAAA,+EAEMjB,EAAM1B,IAAI,mBAFhB,OAETmD,EAFS,OAGfivB,EAASjvB,EAAOC,KAAKivB,SAHN,gDAKfpqB,MAAM,KAAMzE,SAASJ,KAAKK,SALX,yDAAH,qDAQhB6uB,KACC,IACH,IAAM/f,EAAU,CACd,CACElO,MAAO,OACP+M,IAAK,QACLqB,OAAQ,SAACM,EAAMC,EAAQgD,GACrB,OAAOA,EAAQ,IAGnB,CACE3R,MAAO,OACPmO,UAAW,UACXC,OAAQ,SAAA1D,GACN,OAAO,6BAAMA,EAAQ9L,QAGzB,CACEoB,MAAO,SACPmO,UAAW,QACXC,OAAQ,SAAAiP,GACN,OAAO,6BAAMA,EAAM9T,QAAQ,GAApB,QAIb,OACE,yBAAK/M,UAAWC,KAAOuxB,SACrB,uBAAGxxB,UAAWC,KAAOyxB,cAArB,oBACA,kBAAC,KAAD,CAAOhgB,QAASA,EAASe,WAAY6e,EAAO5e,YAAY,EAAOC,OAAO,eCrC7D,SAASgf,KACtB,OACE,yBAAK3xB,UAAWC,KAAO2xB,WACrB,yBAAK5xB,UAAWC,KAAO4xB,cACrB,kBAAC5B,GAAD,MACA,kBAACQ,GAAD,OAEF,yBAAKzwB,UAAWC,KAAO4xB,cACrB,kBAACd,GAAD,MAEA,kBAACM,GAAD,Q,wDCZO,SAASS,GAAT,GAAwC,IAAlBvgB,EAAiB,EAAjBA,cAC7BG,EAAU,CACd,CACElO,MAAO,OACPmO,UAAW,YACXC,OAAQ,SAAAC,GACN,OAAO,6BAAMlC,KAAOkC,GAAWC,OAAO,8BAG1C,CACEtO,MAAO,OACPmO,UAAW,OACXC,OAAQ,SAAAG,GACN,OAAIA,IAASjH,GAASE,OACb,kBAAC,KAAD,CAAKuE,MAAM,WAAX,UACEwC,IAASjH,GAASG,KACpB,kBAAC,KAAD,CAAKsE,MAAM,WAAX,QACEwC,IAASjH,GAASI,QACpB,kBAAC,KAAD,CAAKqE,MAAM,cAAX,WAEA,kBAAC,KAAD,iBAIb,CACE/L,MAAO,WACPmO,UAAW,WACXC,OAAQ,SAAAI,GACN,OAAO,6BAAMA,EAAW,IAAjB,WAGX,CACExO,MAAO,QACPmO,UAAW,QACXC,OAAQ,SAAAK,GACN,OAAO,6BAAMA,EAAN,OAGX,CACEzO,MAAO,QACPmO,UAAW,QACXC,OAAQ,SAAAH,GACN,OAAIA,IAAU9G,GAAUC,UACf,kBAAC,KAAD,CAAK2E,MAAM,WAAX,aACEkC,IAAU9G,GAAUpB,QACtB,kBAAC,KAAD,CAAKgG,MAAM,QAAX,WAEA,kBAAC,KAAD,CAAKA,MAAM,SAAX,gBAKf,OACE,6BACE,kBAAC,KAAD,CAAOmC,QAASA,EAASe,WAAYlB,EAAemB,YAAY,EAAOC,OAAO,Q,yBCnDrE,SAASof,GAAT,GAA2E,IAAhD/I,EAA+C,EAA/CA,eAAgBnK,EAA+B,EAA/BA,SAAUoK,EAAqB,EAArBA,kBAClE,OAAOpK,EACL,kBAAC,IAAD,CACErb,MAAO,UAAYmM,KAAOkP,EAAShN,WAAWC,OAAO,2BACrDxO,QAAS0lB,EACTvlB,SAAU,kBAAMwlB,GAAkB,IAClC/oB,OAAQ,KACR0D,MAAM,QACNob,gBAAc,EACdC,UAAW,CAAEjB,OAAQ,QAASkB,SAAU,SAExC,6BACE,yBAAKlf,UAAWC,KAAO+xB,aAAvB,mBACA,kBAAClJ,GAAD,CACE/mB,IAAG,UAAK0H,GAAL,8BAAoCoV,EAAS1S,GAA7C,mBAEL,yBAAKnM,UAAWC,KAAO+xB,aAAvB,iBACA,kBAAClJ,GAAD,CACE/mB,IAAG,UAAK0H,GAAL,8BAAoCoV,EAAS1S,GAA7C,mBAIP,KCxBS,SAAS8lB,GAAT,GAA2C,IAAlBhI,EAAiB,EAAjBA,cAAiB,EACXprB,oBAAS,GADE,mBAChDmqB,EADgD,KAChCC,EADgC,OAEvBpqB,mBAAS,MAFc,mBAEhDggB,EAFgD,KAEtCyE,EAFsC,KAGjD5R,EAAU,CACd,CACElO,MAAO,OACPmO,UAAW,YACXC,OAAQ,SAAAC,GACN,OAAO,6BAAMlC,KAAOkC,GAAWC,OAAO,8BAG1C,CACEtO,MAAO,UACPmO,UAAW,UACXC,OAAQ,SAAA1D,GACN,OAAO,6BAAMA,EAAQ9L,QAGzB,CACEoB,MAAO,QACPmO,UAAW,QACXC,OAAQ,SAAAsS,GACN,OAAO,6BAAMA,EAAM9hB,QAGvB,CACEoB,MAAO,WACPmO,UAAW,WACXC,OAAQ,SAAAI,GACN,OAAO,6BAAMpF,GAAcoF,OAYjC,OACE,6BACE,kBAAC+f,GAAD,CACE9I,kBAAmBA,EACnBD,eAAgBA,EAChBnK,SAAUA,IAEZ,kBAAC,KAAD,CACEnN,QAASA,EACTe,WAAYwX,EACZvX,YAAY,EACZwf,MAnBc,SAAC/f,EAAQgD,GAC3B,MAAO,CACL7U,QAAS,SAAAqU,GACP2O,EAAYnR,GACZ8W,GAAkB,MAgBlBtW,OAAO,QCtDA,SAASwf,GAAT,GAAqC,IAAZC,EAAW,EAAXA,QAChC1gB,EAAU,CACd,CACElO,MAAO,OACPmO,UAAW,YACXC,OAAQ,SAAAC,GACN,OAAO,6BAAMlC,KAAOkC,GAAWC,OAAO,8BAG1C,CACEtO,MAAO,SACPmO,UAAW,UAEb,CACEnO,MAAO,QACPmO,UAAW,QACXC,OAAQ,SAAAH,GACN,OAAIA,IAAUpG,GAAaC,SAClB,kBAAC,KAAD,CAAKiE,MAAM,WAAX,YACEkC,IAAUpG,GAAa9B,QACzB,kBAAC,KAAD,CAAKgG,MAAM,QAAX,WAEA,kBAAC,KAAD,CAAKA,MAAM,SAAX,gBAMf,OACE,6BACE,kBAAC,KAAD,CAAOoD,OAAO,KAAKjB,QAASA,EAASe,WAAY2f,EAAS1f,YAAY,K,ICvBpEqB,GAAYC,KAAZD,QAEO,SAASse,GAAT,GAA6F,IAAnExT,EAAkE,EAAlEA,SAAUyT,EAAwD,EAAxDA,gBAAiBvT,EAAuC,EAAvCA,mBAAoBD,EAAmB,EAAnBA,gBAAmB,EAC/DjgB,oBAAS,GADsD,mBAClG0zB,EADkG,KACnFC,EADmF,OAE7E3zB,mBAAS,MAFoE,mBAElG4zB,EAFkG,KAE1FC,EAF0F,OAGjE7zB,oBAAS,GAHwD,mBAGlG8zB,EAHkG,KAGpFC,EAHoF,KAKnGC,EAAe,uCAAG,WAAMphB,GAAN,SAAA3P,EAAA,sEAEpB8wB,GAAgB,GAFI,SAGd/xB,EAAM0N,IAAI,aAAesQ,EAASyK,UAAW,CAAE7X,MAAOA,IAHxC,uBAId6gB,IAJc,OAKpBM,GAAgB,GAChB7T,GAAmB,GANC,kDAQpB6T,GAAgB,GAChBxrB,MAAM,KAAMzE,SAASJ,KAAKK,SATN,0DAAH,sDAarB5D,qBAAU,WAWJ6f,GAVkB,uCAAG,4BAAA/c,EAAA,sEAErB0wB,GAAiB,GAFI,SAGA3xB,EAAM1B,IAAI,aAAe0f,EAAS1S,IAHlC,OAGf7J,EAHe,OAIrBowB,EAAUpwB,EAAOC,KAAK2L,SACtBskB,GAAiB,GALI,gDAOrBA,GAAiB,GAPI,yDAAH,oDAWpBM,KAED,CAACjU,IAEJ,IAAMkU,EAAeN,EACnB,kBAAC,KAAD,CAAMpiB,iBAAiB,UAAUnM,KAAK,QACpC,kBAAC,GAAD,CAASgQ,IAAI,UAAU3D,IAAI,WACzB,yBAAKvQ,UAAWC,KAAOwyB,QACrB,yBAAKzyB,UAAWC,KAAO+yB,aACpBP,EAAO1kB,OACN,kBAAC,KAAD,CAAQ9K,IAAKwG,GAAYgpB,EAAO1kB,OAAQK,KAAM,MAE9C,kBAAC,KAAD,CAAQC,KAAM,kBAAC1H,EAAA,EAAD,MAAkByH,KAAM,MAExC,yBAAKpO,UAAWC,KAAOgzB,iBACrB,kBAAC,KAAD,CAAc7kB,KAAK,QAAQkR,OAAQ,EAAG9b,MAAOivB,EAAOrwB,KAAMid,UAAQ,GAChE,kBAAC,KAAava,KAAd,CAAmBC,MAAM,YAAY8Z,EAAS5c,UAC9C,kBAAC,KAAa6C,KAAd,CAAmBC,MAAM,SAAS8Z,EAAS1c,OAC3C,kBAAC,KAAa2C,KAAd,CAAmBC,MAAM,aACtB0tB,EAAO/iB,UAAYC,KAAO8iB,EAAO/iB,WAAWoC,OAAO,cAAgB,MAEtE,kBAAC,KAAahN,KAAd,CAAmBC,MAAM,kBAAkB6H,GAAc6lB,EAAOpjB,iBAChE,kBAAC,KAAavK,KAAd,CAAmBC,MAAM,UACtB8Z,EAASvP,aAAe,kBAAC,KAAD,CAAKC,MAAM,WAAX,YAAsC,kBAAC,KAAD,CAAKA,MAAM,WAAX,cAC9DsP,EAASpN,MAAQ,kBAAC,KAAD,CAAKlC,MAAM,WAAX,UAAoC,kBAAC,KAAD,CAAKA,MAAM,SAAX,gBAK9D,yBAAKvP,UAAWC,KAAOizB,cACpBrU,EAASpN,MACR,kBAAC,IAAD,CACErQ,QAASuxB,EACT3yB,UAAWC,KAAOkzB,eAClBjvB,KAAK,UACLie,QAAM,EACN7hB,QAAS,kBAAMuyB,EAAgB3pB,GAAOE,YALxC,OAUA,kBAAC,IAAD,CACEhI,QAASuxB,EACT3yB,UAAWC,KAAOkzB,eAClBjvB,KAAK,UACL5D,QAAS,kBAAMuyB,EAAgB3pB,GAAOC,UAJxC,UAUJ,yBAAKnJ,UAAWC,KAAOmzB,kBACrB,kBAAC,KAAD,CAAc/T,UAAQ,EAACjR,KAAK,QAAQkR,OAAQ,GAC1C,kBAAC,KAAaxa,KAAd,CAAmBC,MAAM,SAAS0tB,EAAOhjB,OACzC,kBAAC,KAAa3K,KAAd,CAAmBC,MAAM,aACtB0tB,EAAO/iB,UAAYC,KAAO8iB,EAAO/iB,WAAWoC,OAAO,cAAgB,MAEtE,kBAAC,KAAahN,KAAd,CAAmBC,MAAM,iBAAiB0tB,EAAO1iB,aACjD,kBAAC,KAAajL,KAAd,CAAmBC,MAAM,gBAAgB0tB,EAAO3iB,cAChD,kBAAC,KAAahL,KAAd,CAAmBC,MAAM,mBAAmB0tB,EAAOziB,QACnD,kBAAC,KAAalL,KAAd,CAAmBC,MAAM,yBACtB,IACA0tB,EAAOriB,gBACJF,KAAKC,MAAMsiB,EAAOriB,iBAAiBU,KAAI,SAAA9M,GACrC,OAAO,kBAAC,KAAD,CAAKuM,IAAKvM,GAAQA,MAE3B,MAEN,kBAAC,KAAac,KAAd,CAAmBC,MAAM,aACtB0tB,EAAOxiB,aACJC,KAAKC,MAAMsiB,EAAOxiB,cAAca,KAAI,SAAA0O,GAClC,OAAO,kBAAC,KAAD,CAAKjP,IAAKiP,GAAaA,MAEhC,UAMd,kBAAC,GAAD,CAAStL,IAAI,UAAU3D,IAAI,WACzB,kBAAC0hB,GAAD,CAAehI,cAAewI,EAAOY,kBAEvC,kBAAC,GAAD,CAASnf,IAAI,SAAS3D,IAAI,UACxB,kBAAC4hB,GAAD,CAAeC,QAASK,EAAO3zB,QAAQszB,WAEzC,kBAAC,GAAD,CAASle,IAAI,eAAe3D,IAAI,gBAC9B,kBAACuhB,GAAD,CAAYvgB,cAAekhB,EAAOlhB,kBAGpC,KAEJ,OACE,kBAAC,IAAD,CACE/N,MAAOqb,EAAWA,EAASzc,KAAO,KAClCkB,QAASwb,EACTrb,SAAU,kBAAMsb,GAAmB,IACnC7e,OAAQ,KACR0D,MAAM,QACNob,gBAAc,EACdC,UAAW,CAAEjB,OAAQ,QAASkB,SAAU,SAExC,kBAAC,KAAD,CAAM/P,SAAUojB,GAAgBQ,I,IC5I9B/P,GAAWC,IAAXD,OAEO,SAASsQ,KAAY,IAAD,EACDz0B,mBAAS,IADR,mBAC1B00B,EAD0B,KAChBC,EADgB,OAED30B,mBAAS,IAFR,mBAE1B40B,EAF0B,KAEhBC,EAFgB,OAGT70B,mBAAS,GAHA,mBAG1B80B,EAH0B,KAGpBC,EAHoB,OAIC/0B,mBAAS,IAJV,mBAI1BirB,EAJ0B,KAIfC,EAJe,OAKPlrB,mBAAS,GALF,mBAK1BgiB,EAL0B,KAKnBgT,EALmB,OAMHh1B,oBAAS,GANN,mBAM1BuC,EAN0B,KAMjBC,EANiB,OAOaxC,oBAAS,GAPtB,mBAO1BigB,EAP0B,KAOTC,EAPS,OAQDlgB,mBAAS,MARR,mBAQ1BggB,EAR0B,KAQhByE,EARgB,KAU3BgP,EAAe,uCAAG,8BAAAxwB,EAAA,sEAEpBT,GAAW,GAFS,SAGCR,EAAM1B,IAAI,yBAAkBw0B,EAAlB,iBAA+BJ,EAA/B,YAAoDzJ,GAH/D,OAGdxnB,EAHc,OAIdwxB,EAAY,GAClBxxB,EAAOC,KAAKkxB,SAAS5e,SAAQ,SAAA3G,GAC3B4lB,EAAU/e,KAAK,CACbxE,IAAKrC,EAAQ/B,GACbA,GAAI+B,EAAQ/B,GACZ/J,KAAM8L,EAAQ9L,KACdH,SAAUiM,EAAQpP,QAAQmD,SAC1BE,MAAO+L,EAAQpP,QAAQqD,MACvBsP,MAAOvD,EAAQpP,QAAQ2S,MACvBnC,aAAcpB,EAAQpP,QAAQwQ,aAC9Bga,UAAWpb,EAAQpP,QAAQqN,QAG/B0nB,EAASvxB,EAAOC,KAAKwxB,cACrBL,EAAYI,GACZzyB,GAAW,GAnBS,kDAqBpBA,GAAW,GACX+F,MAAM,KAAMzE,SAASJ,KAAKK,SAtBN,0DAAH,qDA0BrB5D,qBAAU,WACRszB,MAEC,CAACqB,EAAMJ,EAAUzJ,IAEpB,IAAMpY,EAAU,CACd,CACElO,MAAO,OACPmO,UAAW,QAEb,CACEnO,MAAO,WACPmO,UAAW,YAEb,CACEnO,MAAO,QACPmO,UAAW,SAEb,CACEnO,MAAO,QACPmO,UAAW,QACXC,OAAQ,SAAAH,GAAK,OAAKA,EAAQ,kBAAC,KAAD,CAAKlC,MAAM,WAAX,UAAoC,kBAAC,KAAD,CAAKA,MAAM,SAAX,cAEhE,CACE/L,MAAO,eACPmO,UAAW,eACXC,OAAQ,SAAAtC,GAAY,OAClBA,EAAe,kBAAC,KAAD,CAAKC,MAAM,WAAX,YAAsC,kBAAC,KAAD,CAAKA,MAAM,WAAX,iBA8B3D,OACE,yBAAKvP,UAAWC,KAAO+zB,gBACrB,kBAAC3B,GAAD,CACEtT,mBAAoBA,EACpBD,gBAAiBA,EACjBwT,gBAAiBA,EACjBzT,SAAUA,IAEZ,yBAAK7e,UAAWC,KAAO8kB,WACrB,kBAAC,GAAD,CAAQne,YAAY,qCAAqCqe,SAb5C,SAAA1lB,GACjBwqB,EAAaxqB,IAYsEylB,aAAW,KAE5F,kBAAC,KAAD,CAAM7V,SAAU/N,GACd,kBAAC,KAAD,CAAOsQ,QAASA,EAASe,WAAYghB,EAAU/gB,YAAY,EAAOwf,MAzBpD,SAAC/f,EAAQgD,GAC3B,MAAO,CACL7U,QAAS,SAAAqU,GACP2O,EAAYnR,GACZ4M,GAAmB,SAuBrB,yBAAK/e,UAAWC,KAAOg0B,mBACrB,kBAAC,KAAD,CACEva,QAASia,EACTO,eAAgBP,EAChB9S,MAAOA,EACP0S,SAAUA,EACVY,iBAAe,EACfC,UA/CU,WAChB,MAAM,SAAN,OAAgBvT,EAAhB,aA+CMwT,iBA5Ce,SAAC3a,EAAStL,GAC/BolB,EAAYplB,GACZwlB,EAAQ3mB,KAAKqnB,KAAKzT,EAAQzS,KA2CpBmmB,SAxCW,SAACZ,EAAMJ,GACxBK,EAAQD,Q,6CC/EG,SAASa,GAAT,GAAqC,IAAbhF,EAAY,EAAZA,SAC/B9d,EAAU,CACd,CACElO,MAAO,OACPmO,UAAW,YACXC,OAAQ,SAAAC,GACN,OAAO,6BAAMlC,KAAOkC,GAAWC,OAAO,8BAG1C,CACEtO,MAAO,QACPmO,UAAW,SAEb,CACEnO,MAAO,QACPmO,UAAW,QACXC,OAAQ,SAAAH,GACN,OAAIA,IAAUjG,GAAcZ,UACnB,kBAAC,KAAD,CAAK2E,MAAM,WAAX,aACEkC,IAAUjG,GAAcjC,QAC1B,kBAAC,KAAD,CAAKgG,MAAM,QAAX,WAEA,kBAAC,KAAD,CAAKA,MAAM,SAAX,gBAMf,OACE,6BACE,kBAAC,KAAD,CAAOoD,OAAO,KAAKjB,QAASA,EAASe,WAAY+c,EAAU9c,YAAY,KC5B9D,SAAS+hB,GAAT,GAAqC,IAAb5V,EAAY,EAAZA,SAAY,EACnBhgB,mBAAS,MADU,mBAC1CyhB,EAD0C,KACjCsC,EADiC,KAGjD5jB,qBAAU,WACJ6f,GACkB,uCAAG,8BAAA/c,EAAA,+EAEEjB,EAAM1B,IAAI,YAAc0f,EAAS1S,IAFnC,OAEb7J,EAFa,OAGbsf,EAAcvB,GAAe/d,EAAOC,KAAK+d,SAC/CsC,EAAW,gBAAKtgB,EAAOC,KAAb,CAAmBqf,iBAJV,gDAMnBxa,MAAM,KAAMzE,SAASJ,KAAKK,SANP,yDAAH,oDASpBof,KAED,CAACnD,IACJ,IAAMnc,EAAM,uCAAG,8BAAAZ,EAAA,+EAEUjB,EAAM1B,IAAI,YAAc0f,EAAS1S,IAF3C,OAEL7J,EAFK,OAGLsf,EAAcvB,GAAe/d,EAAOC,KAAK+d,SAC/CsC,EAAW,gBAAKtgB,EAAOC,KAAb,CAAmBqf,iBAJlB,gDAMXxa,MAAM,KAAMzE,SAASJ,KAAKK,SANf,yDAAH,qDASRgtB,EAAgB,KAiBpB,OAhBItP,IACFsP,EACE,6BACE,kBAACvO,GAAD,CAAef,QAASA,IACxB,kBAAC,KAAD,CACEwC,WAAW,aACXrQ,WAAY6N,EAAQA,QACpByC,WAAY,SAAAjH,GAAI,OACd,kBAAC,KAAKhX,KAAN,KACE,kBAACid,GAAD,CAAQ/E,OAAQlB,EAAMkG,eAAgBtf,UAO3CktB,E,ICpCD7b,GAAYC,KAAZD,QAEO,SAAS2gB,GAAT,GAAyF,IAAjE7V,EAAgE,EAAhEA,SAAUE,EAAsD,EAAtDA,mBAAoB4V,EAAkC,EAAlCA,cAAe7V,EAAmB,EAAnBA,gBAAmB,EAC3DjgB,oBAAS,GADkD,mBAC9F0zB,EAD8F,KAC/EC,EAD+E,OAEzE3zB,mBAAS,MAFgE,mBAE9F4zB,EAF8F,KAEtFC,EAFsF,OAG/C7zB,oBAAS,GAHsC,mBAG9F+1B,EAH8F,KAGzEC,EAHyE,OAI7Dh2B,oBAAS,GAJoD,mBAI9F8zB,EAJ8F,KAIhFC,EAJgF,KAM/FkC,EAAmB,uCAAG,WAAMpY,GAAN,SAAA5a,EAAA,sEAExB+yB,GAAuB,GAFC,SAGlBh0B,EAAM0N,IAAI,WAAasQ,EAAS1S,GAAI,CAAEqhB,cAAe9Q,IAHnC,uBAIlBiY,IAJkB,OAKxBE,GAAuB,GACvB9V,GAAmB,GANK,kDAQxB8V,GAAuB,GARC,0DAAH,sDAYnBhC,EAAe,uCAAG,WAAMphB,GAAN,SAAA3P,EAAA,sEAEpB8wB,GAAgB,GAFI,SAGd/xB,EAAM0N,IAAI,aAAesQ,EAASyK,UAAW,CAAE7X,MAAOA,IAHxC,uBAIdkjB,IAJc,OAKpB/B,GAAgB,GAChB7T,GAAmB,GANC,kDAQpB6T,GAAgB,GAChBxrB,MAAM,KAAMzE,SAASJ,KAAKK,SATN,0DAAH,sDAarB5D,qBAAU,WAWJ6f,GAVgB,uCAAG,4BAAA/c,EAAA,sEAEnB0wB,GAAiB,GAFE,SAGE3xB,EAAM1B,IAAI,WAAa0f,EAAS1S,IAHlC,OAGb7J,EAHa,OAInBowB,EAAUpwB,EAAOC,KAAK2hB,OACtBsO,GAAiB,GALE,gDAOnBA,GAAiB,GAPE,yDAAH,oDAWlBuC,KAED,CAAClW,IAEJ,IAAImW,EACF,yBAAKh1B,UAAWC,KAAO+0B,eACrB,kBAAC,IAAD,CAAO7wB,UAAQ,EAACvB,QAAQ,WAAWsB,KAAK,UACxC,yBAAKlE,UAAWC,KAAOg1B,yBACrB,kBAAC,IAAD,CACE/wB,KAAK,UACLF,MAAO,CAAEqsB,gBAAiB,UAAW9gB,MAAO,QAAS2lB,YAAa,WAClEl1B,UAAWC,KAAOk1B,iBAClB70B,QAAS,kBAAMw0B,EAAoBzrB,GAAeC,YAJpD,UAQA,kBAAC,IAAD,CAAQtJ,UAAWC,KAAOk1B,iBAAkB70B,QAAS,kBAAMw0B,EAAoBzrB,GAAeE,WAA9F,aAMFsV,GAAYA,EAAS2O,gBAAkBnkB,GAAeC,WACxD0rB,EACE,yBAAKh1B,UAAWC,KAAO+0B,eACrB,kBAAC,IAAD,CAAO7wB,UAAQ,EAACvB,QAAQ,WAAWsB,KAAK,YACxC,yBAAKlE,UAAWC,KAAOg1B,yBACrB,kBAAC,IAAD,CAAQj1B,UAAWC,KAAOk1B,iBAAkB70B,QAAS,kBAAMw0B,EAAoBzrB,GAAeE,WAA9F,WAGA,kBAAC,IAAD,CACErF,KAAK,UACLie,QAAM,EACNniB,UAAWC,KAAOk1B,iBAClB70B,QAAS,kBAAMw0B,EAAoBzrB,GAAeG,YAJpD,aAYJqV,GAAYA,EAAS2O,gBAAkBnkB,GAAeE,UACxDyrB,EACE,yBAAKh1B,UAAWC,KAAO+0B,eACrB,kBAAC,IAAD,CAAO7wB,UAAQ,EAACvB,QAAQ,UAAUsB,KAAK,SACvC,yBAAKlE,UAAWC,KAAOg1B,yBACrB,kBAAC,IAAD,CACEj1B,UAAWC,KAAOk1B,iBAClBnxB,MAAO,CAAEqsB,gBAAiB,UAAW9gB,MAAO,QAAS2lB,YAAa,WAClE50B,QAAS,kBAAMw0B,EAAoBzrB,GAAeC,YAHpD,UAOA,kBAAC,IAAD,CACEpF,KAAK,UACLie,QAAM,EACNniB,UAAWC,KAAOk1B,iBAClB70B,QAAS,kBAAMw0B,EAAoBzrB,GAAeG,YAJpD,aAaR,IAAMse,EACJ,6BACE,kBAAC,KAAD,CAAM3Y,SAAUylB,GACbI,EACD,6BACGvC,EACC,6BACE,yBAAKzyB,UAAWC,KAAOkf,eACrB,kBAAC,KAAD,CAAcE,UAAQ,EAACjR,KAAK,QAAQkR,OAAQ,EAAG9b,MAAM,wBACnD,kBAAC,KAAasB,KAAd,CAAmBC,MAAM,iBAAiB0tB,EAAO1iB,aACjD,kBAAC,KAAajL,KAAd,CAAmBC,MAAM,gBAAgB0tB,EAAO3iB,cAChD,kBAAC,KAAahL,KAAd,CAAmBC,MAAM,UAAU0tB,EAAOziB,QAC1C,kBAAC,KAAalL,KAAd,CAAmBC,MAAM,WAAW0tB,EAAOlT,SAC3C,kBAAC,KAAaza,KAAd,CAAmBC,MAAM,gBACtB,IACA0tB,EAAOriB,gBACJF,KAAKC,MAAMsiB,EAAOriB,iBAAiBU,KAAI,SAAA9M,GACrC,OAAO,kBAAC,KAAD,CAAKuM,IAAKvM,GAAQA,MAE3B,MAEN,kBAAC,KAAac,KAAd,CAAmBC,MAAM,gBACtB0tB,EAAOxiB,aACJC,KAAKC,MAAMsiB,EAAOxiB,cAAca,KAAI,SAAA0O,GAClC,OAAO,kBAAC,KAAD,CAAKjP,IAAKiP,GAAaA,MAEhC,QAIV,yBAAKxf,UAAWC,KAAOkf,eACrB,kBAAC,KAAD,CAAcE,UAAQ,EAACjR,KAAK,QAAQkR,OAAQ,EAAG9b,MAAM,MACnD,kBAAC,KAAasB,KAAd,CAAmBC,MAAM,aAAa0tB,EAAOhT,WAC7C,kBAAC,KAAa3a,KAAd,CAAmBC,MAAM,aAAa0tB,EAAO/S,WAC7C,kBAAC,KAAa5a,KAAd,CAAmBC,MAAM,cAAc0tB,EAAO9S,YAC9C,kBAAC,KAAa7a,KAAd,CAAmBC,MAAM,cAAc0tB,EAAO7S,YAC9C,kBAAC,KAAa9a,KAAd,CAAmBC,MAAM,UAAU0tB,EAAO5S,UAG9C,yBAAK7f,UAAWC,KAAOkf,eACrB,uBAAGnf,UAAWC,KAAO6f,aAArB,gBACA,yBAAK9f,UAAWC,KAAO8f,cACpB0S,EAAO1V,aACJ7M,KAAKC,MAAMsiB,EAAO1V,cAAcjM,KAAI,SAACkP,EAAM7K,GACzC,OACE,uBAAG5E,IAAK4E,EAAO8K,KAAMxW,GAAYuW,EAAKE,MACpC,kBAACC,GAAA,EAAD,MACCH,EAAKI,iBAIZ,OAGR,yBAAKpgB,UAAWC,KAAOkf,eACrB,kBAAC,KAAD,CAAcE,UAAQ,EAACjR,KAAK,QAAQkR,OAAQ,EAAG9b,MAAM,gBACnD,kBAAC,KAAasB,KAAd,CAAmBC,MAAM,gBAAgB0tB,EAAO/U,eAEjD+U,EAAOrZ,MACN,yBAAKpZ,UAAWC,KAAOmf,cACrB,kBAACzB,GAAD,CAAa1b,SAAU4c,EAAS5c,YAEhC,OAGN,QAMN8wB,EAAeN,EACnB,kBAAC,KAAD,CAAMpiB,iBAAiB,OAAOnM,KAAK,QACjC,kBAAC,GAAD,CAASgQ,IAAI,OAAO3D,IAAI,QACtB,yBAAKvQ,UAAWC,KAAOwyB,QACrB,yBAAKzyB,UAAWC,KAAO+yB,aACpBP,EAAO1kB,OACN,kBAAC,KAAD,CAAQ9K,IAAKwG,GAAYgpB,EAAO1kB,OAAQK,KAAM,MAE9C,kBAAC,KAAD,CAAQC,KAAM,kBAAC1H,EAAA,EAAD,MAAkByH,KAAM,MAExC,yBAAKpO,UAAWC,KAAOgzB,iBACrB,kBAAC,KAAD,CAAc7kB,KAAK,QAAQkR,OAAQ,EAAG9b,MAAOivB,EAAOrwB,KAAMid,UAAQ,GAChE,kBAAC,KAAava,KAAd,CAAmBC,MAAM,YAAY8Z,EAAS5c,UAC9C,kBAAC,KAAa6C,KAAd,CAAmBC,MAAM,SAAS8Z,EAAS1c,OAC3C,kBAAC,KAAa2C,KAAd,CAAmBC,MAAM,SAAS0tB,EAAOhjB,OACzC,kBAAC,KAAa3K,KAAd,CAAmBC,MAAM,WAAW0tB,EAAO5iB,SAC3C,kBAAC,KAAa/K,KAAd,CAAmBC,MAAM,aACtB0tB,EAAO/iB,UAAYC,KAAO8iB,EAAO/iB,WAAWoC,OAAO,cAAgB,MAEtE,kBAAC,KAAahN,KAAd,CAAmBC,MAAM,UACtB8Z,EAASvP,aAAe,kBAAC,KAAD,CAAKC,MAAM,WAAX,YAAsC,kBAAC,KAAD,CAAKA,MAAM,WAAX,cAC9DsP,EAASpN,MAAQ,kBAAC,KAAD,CAAKlC,MAAM,WAAX,UAAoC,kBAAC,KAAD,CAAKA,MAAM,SAAX,gBAK9D,yBAAKvP,UAAWC,KAAOizB,cACpBrU,EAASpN,MACR,kBAAC,IAAD,CACErQ,QAASuxB,EACT3yB,UAAWC,KAAOkzB,eAClBjvB,KAAK,UACLie,QAAM,EACN7hB,QAAS,kBAAMuyB,EAAgB3pB,GAAOE,YALxC,OAUA,kBAAC,IAAD,CACEhI,QAASuxB,EACT3yB,UAAWC,KAAOkzB,eAClBjvB,KAAK,UACL5D,QAAS,kBAAMuyB,EAAgB3pB,GAAOC,UAJxC,YAYR,kBAAC,GAAD,CAAS+K,IAAI,UAAU3D,IAAI,WACxBuX,GAEH,kBAAC,GAAD,CAAS5T,IAAI,UAAU3D,IAAI,WACzB,kBAAC0hB,GAAD,CAAehI,cAAewI,EAAOY,kBAEvC,kBAAC,GAAD,CAASnf,IAAI,SAAS3D,IAAI,UACxB,kBAAC4hB,GAAD,CAAeC,QAASK,EAAO3zB,QAAQszB,WAEzC,kBAAC,GAAD,CAASle,IAAI,UAAU3D,IAAI,WACzB,kBAACikB,GAAD,CAAchF,SAAUiD,EAAOjD,YAEjC,kBAAC,GAAD,CAAStb,IAAI,UAAU3D,IAAI,WACzB,kBAACkkB,GAAD,CAAc5V,SAAU4T,MAG1B,KAEJ,OACE,kBAAC,IAAD,CACEjvB,MAAOqb,EAAWA,EAASzc,KAAO,KAClCkB,QAASwb,EACTrb,SAAU,kBAAMsb,GAAmB,IACnC7e,OAAQ,KACR0D,MAAM,QACNob,gBAAc,EACdC,UAAW,CAAEjB,OAAQ,QAASkB,SAAU,SAExC,kBAAC,KAAD,CAAM/P,SAAUojB,GAAgBQ,I,IC7Q9B/P,GAAWC,IAAXD,OAEO,SAASoS,KAAU,IAAD,EACCv2B,mBAAS,IADV,mBACxB00B,EADwB,KACdC,EADc,OAEH30B,mBAAS,IAFN,mBAExB0kB,EAFwB,KAEhBC,EAFgB,OAGP3kB,mBAAS,GAHF,mBAGxB80B,EAHwB,KAGlBC,EAHkB,OAIG/0B,mBAAS,IAJZ,mBAIxBirB,EAJwB,KAIbC,EAJa,OAKLlrB,mBAAS,GALJ,mBAKxBgiB,EALwB,KAKjBgT,EALiB,OAMDh1B,oBAAS,GANR,mBAMxBuC,EANwB,KAMfC,EANe,OAOexC,oBAAS,GAPxB,mBAOxBigB,EAPwB,KAOPC,EAPO,OAQClgB,mBAAS,MARV,mBAQxBggB,EARwB,KAQdyE,EARc,KAUzBqR,EAAa,uCAAG,8BAAA7yB,EAAA,sEAElBT,GAAW,GAFO,SAGGR,EAAM1B,IAAI,uBAAgBw0B,EAAhB,iBAA6BJ,EAA7B,YAAkDzJ,GAH/D,OAGZxnB,EAHY,OAIZwxB,EAAY,GAClBxxB,EAAOC,KAAKghB,OAAO1O,SAAQ,SAAAqP,GACzB4P,EAAU/e,KAAK,CACbxE,IAAK2T,EAAM/X,GACXA,GAAI+X,EAAM/X,GACV/J,KAAM8hB,EAAM9hB,KACZH,SAAUiiB,EAAMplB,QAAQmD,SACxBE,MAAO+hB,EAAMplB,QAAQqD,MACrBsP,MAAOyS,EAAMplB,QAAQ2S,MACrBnC,aAAc4U,EAAMplB,QAAQwQ,aAC5Bga,UAAWpF,EAAMplB,QAAQqN,GACzBqhB,cAAetJ,EAAMsJ,mBAGzBqG,EAASvxB,EAAOC,KAAKwxB,cACrBvQ,EAAUsQ,GACVzyB,GAAW,GApBO,kDAsBlB+F,MAAM,KAAMzE,SAASJ,KAAKK,SAC1BvB,GAAW,GAvBO,0DAAH,qDA2BnBrC,qBAAU,WACR21B,MAEC,CAAChB,EAAMJ,EAAUzJ,IAEpB,IAAMpY,EAAU,CACd,CACElO,MAAO,OACPmO,UAAW,QAEb,CACEnO,MAAO,WACPmO,UAAW,YAEb,CACEnO,MAAO,QACPmO,UAAW,SAEb,CACEnO,MAAO,QACPmO,UAAW,QACXC,OAAQ,SAAAH,GAAK,OAAKA,EAAQ,kBAAC,KAAD,CAAKlC,MAAM,WAAX,UAAoC,kBAAC,KAAD,CAAKA,MAAM,SAAX,cAEhE,CACE/L,MAAO,eACPmO,UAAW,eACXC,OAAQ,SAAAtC,GAAY,OAClBA,EAAe,kBAAC,KAAD,CAAKC,MAAM,WAAX,YAAsC,kBAAC,KAAD,CAAKA,MAAM,WAAX,gBAEzD,CACE/L,MAAO,iBACPmO,UAAW,gBACXC,OAAQ,SAAA4b,GACN,OAAIA,IAAkBnkB,GAAeC,SAC5B,kBAAC,KAAD,CAAKiG,MAAM,WAAX,YACEie,IAAkBnkB,GAAeE,QACnC,kBAAC,KAAD,CAAKgG,MAAM,QAAX,WAEA,kBAAC,KAAD,CAAKA,MAAM,SAAX,eAgCf,OACE,yBAAKvP,UAAWC,KAAOo1B,cACrB,kBAACX,GAAD,CACE7V,SAAUA,EACVE,mBAAoBA,EACpBD,gBAAiBA,EACjB6V,cAAeA,IAEjB,yBAAK30B,UAAWC,KAAO8kB,WACrB,kBAAC,GAAD,CAAQne,YAAY,qCAAqCqe,SAb5C,SAAA1lB,GACjBwqB,EAAaxqB,IAYsEylB,aAAW,KAE5F,kBAAC,KAAD,CAAM7V,SAAU/N,GACd,kBAAC,KAAD,CAAOsQ,QAASA,EAASe,WAAY8Q,EAAQ7Q,YAAY,EAAOwf,MAzBlD,SAAC/f,EAAQgD,GAC3B,MAAO,CACL7U,QAAS,SAAAqU,GACP2O,EAAYnR,GACZ4M,GAAmB,SAuBrB,yBAAK/e,UAAWC,KAAOg0B,mBACrB,kBAAC,KAAD,CACEva,QAASia,EACTO,eAAgBP,EAChB9S,MAAOA,EACP0S,SAAUA,EACVY,iBAAe,EACfC,UA/CU,WAChB,MAAM,SAAN,OAAgBvT,EAAhB,aA+CMwT,iBA5Ce,SAAC3a,EAAStL,GAC/BolB,EAAYplB,GACZwlB,EAAQ3mB,KAAKqnB,KAAKzT,EAAQzS,KA2CpBmmB,SAxCW,SAACZ,EAAMJ,GACxBK,EAAQD,Q,kECzFG,SAAS2B,GAAT,GAA6F,IAAhEC,EAA+D,EAA/DA,iBAAkB1W,EAA6C,EAA7CA,SAAU2W,EAAmC,EAAnCA,oBAAqBC,EAAc,EAAdA,WACrFC,EAAY,uCAAG,WAAMjkB,GAAN,SAAA3P,EAAA,+EAEXjB,EAAM0N,IAAI,YAAcsQ,EAAS1S,GAAI,CACzCsF,UAHe,OAKjBgkB,IACAD,GAAoB,GANH,gDAQjBA,GAAoB,GARH,yDAAH,sDAWlB,OAAO3W,EACL,kBAAC,IAAD,CACErb,MAAO,YAAcmM,KAAOkP,EAAShN,WAAWC,OAAO,2BACvDxO,QAASiyB,EACT9xB,SAAU,kBAAM+xB,GAAoB,IACpCt1B,OAAQ,KACR0D,MAAM,QACNob,gBAAc,EACdC,UAAW,CAAEjB,OAAQ,QAASkB,SAAU,SAExC,yBAAKlf,UAAWC,KAAO01B,cACrB,yBAAK31B,UAAWC,KAAO21B,qBACrB,yBAAK51B,UAAWC,KAAO41B,aAAvB,WACW,IACT,0BAAM71B,UAAWC,KAAO61B,eACrBnmB,KAAOkP,EAASkX,aAAalkB,WAAWC,OAAO,6BAGpD,yBAAK9R,UAAWC,KAAO41B,aAAvB,WACU,0BAAM71B,UAAWC,KAAO61B,eAAgBjX,EAASgB,SAE3D,yBAAK7f,UAAWC,KAAO41B,aAAvB,gBACe,0BAAM71B,UAAWC,KAAO61B,eAAgBjX,EAAS2K,cAE/D3K,EAAS/f,QAAQsN,OAAStD,GAAMG,QAC/B,6BACE,yBAAKjJ,UAAWC,KAAO41B,aAAvB,SACQ,0BAAM71B,UAAWC,KAAO61B,eAAgBjX,EAASkX,aAAa7nB,QAAQ9L,OAE9E,kBAAC0mB,GAAD,CAAkB/mB,IAAG,UAAK0H,GAAL,8BAAoCoV,EAASkX,aAAa5pB,GAA1D,oBAGvB,6BACE,yBAAKnM,UAAWC,KAAO41B,aAAvB,SACQ,0BAAM71B,UAAWC,KAAO61B,eAAgBjX,EAASkX,aAAa7R,MAAM9hB,OAE5E,kBAAC0mB,GAAD,CAAkB/mB,IAAG,UAAK0H,GAAL,8BAAoCoV,EAASkX,aAAa5pB,GAA1D,mBAI1B0S,EAASpN,QAAUpG,GAAa9B,QAC/B,yBAAKvJ,UAAWC,KAAOg1B,yBACrB,kBAAC,IAAD,CACEj1B,UAAWC,KAAOk1B,iBAClBnxB,MAAO,CAAEqsB,gBAAiB,UAAW9gB,MAAO,QAAS2lB,YAAa,WAClE50B,QAAS,kBAAMo1B,EAAarqB,GAAaC,YAH3C,WAOA,kBAAC,IAAD,CACEpH,KAAK,UACLie,QAAM,EACNniB,UAAWC,KAAOk1B,iBAClB70B,QAAS,kBAAMo1B,EAAarqB,GAAaE,aAJ3C,WASA,KACHsT,EAASpN,QAAUpG,GAAaC,SAC/B,yBAAKtL,UAAWC,KAAOg1B,yBACrB,kBAAC,IAAD,CAAQj1B,UAAWC,KAAOk1B,iBAAkB70B,QAAS,kBAAMo1B,EAAarqB,GAAa9B,WAArF,WAGA,kBAAC,IAAD,CACErF,KAAK,UACLie,QAAM,EACNniB,UAAWC,KAAOk1B,iBAClB70B,QAAS,kBAAMo1B,EAAarqB,GAAaE,aAJ3C,WASA,KACHsT,EAASpN,QAAUpG,GAAaE,UAC/B,yBAAKvL,UAAWC,KAAOg1B,yBACrB,kBAAC,IAAD,CACEj1B,UAAWC,KAAOk1B,iBAClBnxB,MAAO,CAAEqsB,gBAAiB,UAAW9gB,MAAO,QAAS2lB,YAAa,WAClE50B,QAAS,kBAAMo1B,EAAarqB,GAAaC,YAH3C,WAOA,kBAAC,IAAD,CAAQtL,UAAWC,KAAOk1B,iBAAkB70B,QAAS,kBAAMo1B,EAAarqB,GAAa9B,WAArF,YAIA,OAGN,KCxGS,SAAS4f,KAAU,IAAD,EACDtqB,mBAAS,IADR,mBACxBuzB,EADwB,KACf4D,EADe,OAEDn3B,oBAAS,GAFR,mBAExBuC,EAFwB,KAEfC,EAFe,OAGCxC,mBAAS,MAHV,mBAGxBggB,EAHwB,KAGdyE,EAHc,OAIiBzkB,oBAAS,GAJ1B,mBAIxB02B,EAJwB,KAINC,EAJM,KAMzBC,EAAU,uCAAG,4BAAA3zB,EAAA,6DACjBT,GAAW,GADM,kBAGMR,EAAM1B,IAAI,YAHhB,OAGTmD,EAHS,OAIf0zB,EAAW1zB,EAAOC,KAAK6vB,SACvB/wB,GAAW,GALI,gDAOf+F,MAAM,KAAMzE,SAASJ,KAAKK,SAC1BvB,GAAW,GARI,yDAAH,qDAWhBrC,qBAAU,WACRy2B,MAEC,IACH,IAAM/jB,EAAU,CACd,CACElO,MAAO,OACPmO,UAAW,YACXC,OAAQ,SAAAC,GACN,OAAO,6BAAMlC,KAAOkC,GAAWC,OAAO,8BAG1C,CACEtO,MAAO,WACPoO,OAAQ,SAACM,EAAMC,GACb,OAAO,6BAAMA,EAAOrT,QAAQmD,YAGhC,CACEuB,MAAO,OACPoO,OAAQ,SAACM,EAAMC,GACb,OAAIA,EAAOrT,QAAQsN,OAAStD,GAAMG,QACzB,wCAEA,wCAIb,CACEzF,MAAO,SACPmO,UAAW,UAEb,CACEnO,MAAO,QACPmO,UAAW,QACXC,OAAQ,SAAAH,GACN,OAAIA,IAAUpG,GAAaC,SAClB,kBAAC,KAAD,CAAKiE,MAAM,WAAX,YACEkC,IAAUpG,GAAa9B,QACzB,kBAAC,KAAD,CAAKgG,MAAM,QAAX,WAEA,kBAAC,KAAD,CAAKA,MAAM,SAAX,gBAef,OACE,yBAAKvP,UAAWC,KAAOmyB,SACrB,kBAACkD,GAAD,CACEE,oBAAqBA,EACrBD,iBAAkBA,EAClB1W,SAAUA,EACV4W,WAAYA,IAEd,kBAAC,KAAD,CAAMtmB,SAAU/N,GACd,kBAAC,KAAD,CAAOsQ,QAASA,EAASe,WAAY2f,EAAS1f,YAAY,EAAOC,OAAO,KAAKuf,MAlB/D,SAAC/f,EAAQgD,GAC3B,MAAO,CACL7U,QAAS,SAAAqU,GACP2O,EAAYnR,GACZqjB,GAAoB,U,yBCpEb,SAASvhB,KAAiB,IAAD,EACFpV,mBAAS,IADP,mBAC/BuS,EAD+B,KACnBC,EADmB,OAERxS,oBAAS,GAFD,mBAE/BuC,EAF+B,KAEtBC,EAFsB,KAIhCiQ,EAAa,uCAAG,8BAAAxP,EAAA,6DACpBT,GAAW,GADS,kBAGGR,EAAM1B,IAAI,mBAHb,OAGZmD,EAHY,OAIZ2zB,EAAO,GACb3zB,EAAOC,KAAKgP,cAAcsD,SAAQ,SAAAqhB,GAChCA,EAAI3lB,IAAM2lB,EAAI/pB,GACd+pB,EAAIj0B,SAAWi0B,EAAIhoB,QAAQpP,QAAQmD,SACnCi0B,EAAI9zB,KAAO8zB,EAAIhoB,QAAQ9L,KACvB6zB,EAAKlhB,KAAKmhB,MAEZ7kB,EAAc4kB,GACd50B,GAAW,GAZO,kDAclB+F,MAAM,KAAMzE,SAASJ,KAAKK,SAC1BvB,GAAW,GAfO,0DAAH,qDAmBbmQ,EAAkB,uCAAG,WAAMrF,GAAN,SAAArK,EAAA,6DACzBT,GAAW,GADc,kBAGjBR,EAAM0N,IAAI,kBAAoBpC,EAAI,CACtCsF,MAAO9G,GAAUE,WAJI,OAMvByG,IANuB,gDAQvBlK,MAAM,KAAMzE,SAASJ,KAAKK,SAC1BvB,GAAW,GATY,yDAAH,sDAalB80B,EAAoB,uCAAG,WAAMhqB,GAAN,SAAArK,EAAA,6DAC3BT,GAAW,GADgB,kBAGnBR,EAAM0N,IAAI,kBAAoBpC,EAAI,CACtCsF,MAAO9G,GAAUC,YAJM,OAMzB0G,IANyB,gDAQzBlK,MAAM,KAAMzE,SAASJ,KAAKK,SAC1BvB,GAAW,GATc,yDAAH,sDAapBqQ,EAAU,CACd,CACElO,MAAO,OACPmO,UAAW,YACXC,OAAQ,SAAAC,GACN,OAAO,6BAAMlC,KAAOkC,GAAWC,OAAO,8BAG1C,CACEtO,MAAO,OACPmO,UAAW,QAEb,CACEnO,MAAO,WACPmO,UAAW,YAEb,CACEnO,MAAO,OACPmO,UAAW,OACXC,OAAQ,SAAAG,GACN,OAAIA,IAASjH,GAASE,OACb,kBAAC,KAAD,CAAKuE,MAAM,WAAX,UACEwC,IAASjH,GAASG,KACpB,kBAAC,KAAD,CAAKsE,MAAM,WAAX,QACEwC,IAASjH,GAASI,QACpB,kBAAC,KAAD,CAAKqE,MAAM,cAAX,WAEA,kBAAC,KAAD,iBAIb,CACE/L,MAAO,WACPmO,UAAW,WACXC,OAAQ,SAAAI,GACN,OAAO,6BAAMA,EAAW,IAAjB,WAGX,CACExO,MAAO,QACPmO,UAAW,QACXC,OAAQ,SAAAK,GACN,OAAO,6BAAMA,EAAN,OAGX,CACEzO,MAAO,QACPmO,UAAW,QACXC,OAAQ,SAAAH,GACN,OAAIA,IAAU9G,GAAUC,UACf,kBAAC,KAAD,CAAK2E,MAAM,WAAX,aACEkC,IAAU9G,GAAUpB,QACtB,kBAAC,KAAD,CAAKgG,MAAM,QAAX,WAEA,kBAAC,KAAD,CAAKA,MAAM,SAAX,eAIb,CACE/L,MAAO,SACPmO,UAAW,QACXC,OAAQ,SAACM,EAAMC,GACb,OAAIA,EAAOV,QAAU9G,GAAUpB,QAE3B,6BACE,kBAAC,KAAD,CACE/F,MAAM,sCACN4O,OAAO,MACPC,WAAW,KACXrS,UAAWC,KAAOm2B,UAClB7jB,UAAW,kBAAM4jB,EAAqBhkB,EAAOhG,MAL/C,YASA,kBAAC,KAAD,CACE3I,MAAM,sCACN4O,OAAO,MACPC,WAAW,KACXrS,UAAWC,KAAOqS,UAClBC,UAAW,kBAAMf,EAAmBW,EAAOhG,MAL7C,WAYG,uCAUf,OAJAnN,qBAAU,WACRsS,MAEC,IAED,yBAAKtR,UAAWC,KAAOsR,eACrB,kBAAC,KAAD,CAAMpC,SAAU/N,GACd,kBAAC,IAAD,CAAQpB,UAAWC,KAAOyC,OAAQpC,QAASgR,EAAejD,KAAM,kBAACmE,GAAA,EAAD,OAAhE,UAGA,kBAAC,KAAD,CAAOd,QAASA,EAASe,WAAYrB,EAAYsB,YAAY,M,wBCvJtD,SAAS2jB,KAAW,IAAD,EACAx3B,mBAAS,IADT,mBACzB2wB,EADyB,KACfC,EADe,OAEF5wB,oBAAS,GAFP,mBAEzBuC,EAFyB,KAEhBC,EAFgB,KAI1BquB,EAAW,uCAAG,4BAAA5tB,EAAA,6DAClBT,GAAW,GADO,kBAGKR,EAAM1B,IAAI,cAHf,OAGVmD,EAHU,OAIhBmtB,EAAYntB,EAAOC,KAAKitB,UACxBnuB,GAAW,GALK,gDAOhB+F,MAAM,KAAMzE,SAASJ,KAAKK,SAC1BvB,GAAW,GARK,yDAAH,qDAYXi1B,EAAa,uCAAG,WAAOnqB,EAAIsF,GAAX,SAAA3P,EAAA,6DACpBT,GAAW,GADS,kBAGZR,EAAM0N,IAAI,aAAepC,EAAI,CACjCsF,MAAOA,IAJS,OAMlBie,IANkB,gDAQlBtoB,MAAM,KAAMzE,SAASJ,KAAKK,SAC1BvB,GAAW,GATO,yDAAH,wDAabqQ,EAAU,CACd,CACElO,MAAO,OACPmO,UAAW,YACXC,OAAQ,SAAAC,GACN,OAAO,6BAAMlC,KAAOkC,GAAWC,OAAO,8BAG1C,CACEtO,MAAO,OACPoO,OAAQ,SAACM,EAAMC,GACb,OAAOA,EAAO+R,MAAM9hB,OAGxB,CACEoB,MAAO,WACPoO,OAAQ,SAACM,EAAMC,GACb,OAAOA,EAAO+R,MAAMplB,QAAQmD,WAGhC,CACEuB,MAAO,QACPmO,UAAW,QACXC,OAAQ,SAACM,EAAMC,GACb,OAAOA,EAAO+R,MAAMplB,QAAQqD,QAGhC,CACEqB,MAAO,QACPmO,UAAW,QACXC,OAAQ,SAAAK,GACN,OAAO,6BAAMA,EAAN,OAGX,CACEzO,MAAO,QACPmO,UAAW,QACXC,OAAQ,SAAAH,GACN,OAAIA,IAAUjG,GAAcZ,UACnB,kBAAC,KAAD,CAAK2E,MAAM,WAAX,aACEkC,IAAUjG,GAAcjC,QAC1B,kBAAC,KAAD,CAAKgG,MAAM,QAAX,WAEA,kBAAC,KAAD,CAAKA,MAAM,SAAX,eAIb,CACE/L,MAAO,SACPoO,OAAQ,SAACM,EAAMC,GACb,OAAIA,EAAOV,QAAUjG,GAAcjC,QAE/B,6BACE,kBAAC,KAAD,CACE/F,MAAM,sCACN4O,OAAO,MACPC,WAAW,KACXrS,UAAWC,KAAOm2B,UAClB7jB,UAAW,kBAAM+jB,EAAcnkB,EAAOhG,GAAIX,GAAcZ,aAL1D,YASA,kBAAC,KAAD,CACEpH,MAAM,sCACN4O,OAAO,MACPC,WAAW,KACXrS,UAAWC,KAAOqS,UAClBC,UAAW,kBAAM+jB,EAAcnkB,EAAOhG,GAAIX,GAAcX,YAL1D,WAWKsH,EAAOV,QAAUjG,GAAcZ,UAEtC,6BACE,kBAAC,KAAD,CACEpH,MAAM,sCACN4O,OAAO,MACPC,WAAW,KACXrS,UAAWC,KAAOs2B,WAClBhkB,UAAW,kBAAM+jB,EAAcnkB,EAAOhG,GAAIX,GAAcjC,WAL1D,WASA,kBAAC,KAAD,CACE/F,MAAM,sCACN4O,OAAO,MACPC,WAAW,KACXrS,UAAWC,KAAOqS,UAClBC,UAAW,kBAAM+jB,EAAcnkB,EAAOhG,GAAIX,GAAcX,YAL1D,WAaF,6BACE,kBAAC,KAAD,CACErH,MAAM,sCACN4O,OAAO,MACPC,WAAW,KACXrS,UAAWC,KAAOm2B,UAClB7jB,UAAW,kBAAM+jB,EAAcnkB,EAAOhG,GAAIX,GAAcZ,aAL1D,YASA,kBAAC,KAAD,CACEpH,MAAM,sCACN4O,OAAO,MACPC,WAAW,KACXrS,UAAWC,KAAOs2B,WAClBhkB,UAAW,kBAAM+jB,EAAcnkB,EAAOhG,GAAIX,GAAcjC,WAL1D,eAoBZ,OAJAvK,qBAAU,WACR0wB,MAEC,IAED,yBAAK1vB,UAAWC,KAAOuvB,UACrB,kBAAC,KAAD,CAAMrgB,SAAU/N,GACd,kBAAC,IAAD,CAAQpB,UAAWC,KAAOyC,OAAQpC,QAASovB,EAAarhB,KAAM,kBAACmE,GAAA,EAAD,OAA9D,UAGA,kBAAC,KAAD,CAAOG,OAAO,KAAKjB,QAASA,EAASe,WAAY+c,EAAU9c,YAAY,M,ICzJvE/K,GAA2B7H,IAA3B6H,OAAQC,GAAmB9H,IAAnB8H,QAASyiB,GAAUvqB,IAAVuqB,MAEV,SAASmM,GAAM53B,GAAQ,IAAD,EACDC,oBAAS,GADR,mBAC5B0N,EAD4B,KACjBkqB,EADiB,OAEK53B,oBAAS,GAFd,mBAE5B0rB,EAF4B,KAEdC,EAFc,OAGK3rB,oBAAS,GAHd,mBAG5BqJ,EAH4B,KAGdC,EAHc,OAIJxG,qBAAWlD,GAAlCiB,EAJ2B,EAI3BA,UAAWZ,EAJgB,EAIhBA,QACX2D,EAAa7D,EAAb6D,SAMFkoB,EACJ,kBAAC,KAAD,KACE,kBAAC,KAAK7lB,KAAN,CAAWxE,QAAS,kBAAMkqB,GAAgB,KACxC,kBAACI,GAAA,EAAD,MAAe,kDAEjB,kBAAC,KAAK9lB,KAAN,CAAWxE,QAASZ,GAClB,kBAACmrB,GAAA,EAAD,MAAkB,4CAKxB,OACE,kBAAC,IAAD,KACE,kBAAC1jB,GAAD,CAAqB5D,UAAW2E,EAAcvE,QAAS,kBAAMwE,GAAgB,MAC7E,kBAAC2D,GAAD,CACEvI,UAAWgnB,EACX5mB,QAAS,kBAAM6mB,GAAgB,IAC/Bze,SAAU,kBAAM5D,GAAgB,MAElC,kBAAC,GAAD,CAAO4iB,aAAW,EAACxe,UAAWA,EAAWmqB,WAvB1B,SAACnqB,GAClBkqB,EAAalqB,IAsBsDvM,UAAWC,KAAO02B,WACjF,kBAACrqB,GAAD,CAAaC,UAAWA,IACxB,kBAAC,KAAD,CAAMye,MAAM,OAAOC,oBAAqB,CAAC,UAAWja,KAAK,SAASka,aAAc,CAACzoB,EAAS0oB,WACxF,kBAAC,KAAKrmB,KAAN,CAAWyL,IAAI,UACb,kBAACyf,GAAA,EAAD,MAAoB,kBAAC,IAAD,CAAM7Y,GAAG,UAAS,6CAExC,kBAAC,KAAKrS,KAAN,CAAWyL,IAAI,mBACb,kBAAC2U,GAAA,EAAD,MAAgB,kBAAC,IAAD,CAAM/N,GAAG,mBAAkB,4CAE7C,kBAAC,KAAKrS,KAAN,CAAWyL,IAAI,iBACb,kBAACqmB,GAAA,EAAD,MAAkB,kBAAC,IAAD,CAAMzf,GAAG,iBAAgB,0CAE7C,kBAAC,KAAKrS,KAAN,CAAWyL,IAAI,kBACb,kBAACsmB,GAAA,EAAD,MAAqB,kBAAC,IAAD,CAAM1f,GAAG,kBAAiB,2CAEjD,kBAAC,KAAKrS,KAAN,CAAWyL,IAAI,wBACb,kBAAC4D,GAAA,EAAD,MAAsB,kBAAC,IAAD,CAAMgD,GAAG,wBAAuB,iDAExD,kBAAC,KAAKrS,KAAN,CAAWyL,IAAI,kBACb,kBAAC+a,GAAA,EAAD,MAAwB,kBAAC,IAAD,CAAMnU,GAAG,kBAAiB,6CAIxD,kBAAC,IAAD,KACE,kBAAC,GAAD,CAAQnT,MAAO,CAAE8yB,WAAY,UAEzBvqB,EAAY,kBAACwqB,GAAA,EAAD,CAAoB/2B,UAAWC,KAAO+2B,SAAU12B,QAAS,kBAAMm2B,GAAa,MAAa,kBAACQ,GAAA,EAAD,CAAkBj3B,UAAWC,KAAO+2B,SAAU12B,QAAS,kBAAMm2B,GAAa,MAEjL,yBAAKz2B,UAAWC,KAAOsrB,aAAvB,UACUzsB,EAAQmD,SAChB,kBAAC,KAAD,CAAUupB,QAASb,EAAUjX,UAAU,cACrC,6BAAK,kBAAC,KAAD,CAAQzQ,IAAKi0B,KAAW9oB,KAAK,QAAQpL,WAAW,IAAS,kBAACyoB,GAAA,EAAD,CAAczrB,UAAWC,KAAOyrB,mBAIpG,kBAAC,GAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOxL,KAAK,kBAAkByL,UAAW2H,KACzC,kBAAC,IAAD,CAAOpT,KAAK,gBAAgByL,UAAWyJ,KACvC,kBAAC,IAAD,CAAOlV,KAAK,iBAAiByL,UAAWwL,KACxC,kBAAC,IAAD,CAAOjX,KAAK,uBAAuByL,UAAW1X,KAC9C,kBAAC,IAAD,CAAOiM,KAAK,iBAAiByL,UAAW0K,KACxC,kBAAC,IAAD,CAAOnW,KAAK,SAASyL,UAAWgG,GAAW/F,OAAK,MAGpD,kBAAC7rB,EAAD,QC3FO,SAASq3B,KAItB,OAHAp4B,qBAAU,WACRT,MACC,IACI,kBAAC,IAAD,CAAU4Y,GAAG,MCEP,SAASkgB,KAAU,IACxBv4B,EAAY6C,qBAAWlD,GAAvBK,QACR,OAAIA,GAAWA,EAAQsN,OAAStD,GAAMG,QAElC,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOiX,KAAK,WAAWyL,UAAWrB,KAClC,kBAAC,IAAD,CAAUnT,GAAG,cAGRrY,GAAWA,EAAQsN,OAAStD,GAAME,MAEzC,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOkX,KAAK,SAASyL,UAAWoE,KAChC,kBAAC,IAAD,CAAU5Y,GAAG,YAGRrY,GAAWA,EAAQsN,OAAStD,GAAMC,MAEzC,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOmX,KAAK,SAASyL,UAAW6K,KAChC,kBAAC,IAAD,CAAUrf,GAAG,YAKf,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAO+I,KAAK,IAAI0L,OAAK,EAACD,UAAW9jB,KACjC,kBAAC,IAAD,CAAOqY,KAAK,YAAYyL,UAAWyL,KACnC,kBAAC,IAAD,CAAUjgB,GAAG,OCvBNmgB,oBAVf,WACE,OACE,yBAAKt3B,UAAU,OACb,kBAAC,EAAD,KACE,kBAACq3B,GAAD,WCGYE,QACW,cAA7Bh3B,OAAOkC,SAAS+0B,UAEe,UAA7Bj3B,OAAOkC,SAAS+0B,UAEhBj3B,OAAOkC,SAAS+0B,SAASC,MACvB,2D,kBCVAC,GACJ,kBAAC,IAAD,KACE,kBAAC,GAAD,OAIJC,IAAS/lB,OAAO8lB,GAAKE,SAASC,eAAe,SDqHvC,kBAAmBriB,WACrBA,UAAUsiB,cAAcC,MACrBliB,MAAK,SAAAmiB,GACJA,EAAaC,gBAEdjiB,OAAM,SAAA1U,GACL8a,QAAQ9a,MAAMA,EAAMsB,a,mBExI5BnF,EAAOC,QAAU,CAAC,UAAY,6BAA6B,gBAAkB,mCAAmC,UAAY,6BAA6B,OAAS,0BAA0B,UAAY,6BAA6B,YAAc,+BAA+B,cAAgB,iCAAiC,YAAc,+BAA+B,UAAY,+B,mBCA5XD,EAAOC,QAAU,CAAC,SAAW,2BAA2B,QAAU,0BAA0B,KAAO,uBAAuB,QAAU,0BAA0B,gBAAkB,oC,mBCAhLD,EAAOC,QAAU,CAAC,SAAW,0BAA0B,UAAY,2BAA2B,UAAY,2BAA2B,WAAa,8B,mBCAlJD,EAAOC,QAAU,CAAC,WAAa,+BAA+B,qBAAuB,yCAAyC,YAAc,gCAAgC,aAAe,iCAAiC,kBAAoB,sCAAsC,SAAW,+B,mBCAjSD,EAAOC,QAAU,CAAC,UAAY,6BAA6B,QAAU,2BAA2B,UAAY,6BAA6B,mBAAqB,sCAAsC,WAAa,gC,mBCAjND,EAAOC,QAAU,CAAC,cAAgB,wCAAwC,YAAc,sCAAsC,aAAe,uCAAuC,aAAe,0C","file":"static/js/main.962f63e8.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"study\":\"Study_study__3yzrl\",\"unverify\":\"Study_unverify__Mf_4V\",\"unverifyImg\":\"Study_unverifyImg__3kHB3\",\"timeoutImg\":\"Study_timeoutImg___XQ0t\",\"unverifyTxt\":\"Study_unverifyTxt__1ftai\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"detail\":\"StudentProfile_detail__3arUr\",\"detailBasic\":\"StudentProfile_detailBasic__11ALf\",\"detailName\":\"StudentProfile_detailName__B97Z6\",\"detailBasicInfo\":\"StudentProfile_detailBasicInfo__1yVRN\",\"banBtnHolder\":\"StudentProfile_banBtnHolder__cs3lC\",\"detailAdditional\":\"StudentProfile_detailAdditional__3SjAt\",\"detailAdditionalRow\":\"StudentProfile_detailAdditionalRow__1BK_6\",\"changeStateBtn\":\"StudentProfile_changeStateBtn__1J4lj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"FooterContent_footer__1Ftu8\",\"contactIcon\":\"FooterContent_contactIcon__3BLxb\",\"contactInfoContainer\":\"FooterContent_contactInfoContainer__5Bz7Z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile\":\"Profile_profile__3fURR\",\"accountInfoContainer\":\"Profile_accountInfoContainer__12z_A\",\"accountInfo\":\"Profile_accountInfo__2HZIj\",\"name\":\"Profile_name__2JrBD\",\"collapse\":\"Profile_collapse__16CjJ\",\"submitWrapper\":\"Profile_submitWrapper__3HxsU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"videoCall\":\"VideoCall_videoCall__3AYzp\",\"endCallImg\":\"VideoCall_endCallImg__1XDrs\",\"afterCall\":\"VideoCall_afterCall__2irdi\",\"endUser\":\"VideoCall_endUser__2jBko\",\"endDuration\":\"VideoCall_endDuration__14hqw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"callModal\":\"CallModal_callModal__c1fk0\",\"controlBtns\":\"CallModal_controlBtns__97SxF\",\"caller\":\"CallModal_caller__Dz1q0\",\"callerTxt\":\"CallModal_callerTxt__1yRH8\",\"callModalWrapper\":\"CallModal_callModalWrapper__393GQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btnWrapper\":\"VideoRecorder_btnWrapper__1N2-J\",\"btnWrapperNoCancel\":\"VideoRecorder_btnWrapperNoCancel__3RkaW\",\"videoBtn\":\"VideoRecorder_videoBtn__368GH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"logoContainer\":\"Admin_logoContainer__STuZW\",\"logo\":\"Admin_logo__BcI4N\",\"logoText\":\"Admin_logoText__OIkA9\",\"userControl\":\"Admin_userControl__3Z4Vh\",\"dropDownIcon\":\"Admin_dropDownIcon__3sTud\",\"adminMenu\":\"Admin_adminMenu__2BAC4\",\"menuIcon\":\"Admin_menuIcon__L4lgP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"signInForm\":\"SignInModal_signInForm__2iJoj\",\"signInForgot\":\"SignInModal_signInForgot__1ryjr\",\"signInButton\":\"SignInModal_signInButton__2Q5nw\",\"registerNow\":\"SignInModal_registerNow__Ht0vT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cancelBtn\":\"Subscriptions_cancelBtn__1Zgpp\",\"reload\":\"Subscriptions_reload__3mKNz\",\"subscriptions\":\"Subscriptions_subscriptions__1Sjt8\",\"acceptBtn\":\"Subscriptions_acceptBtn__2PoNS\"};","module.exports = __webpack_public_path__ + \"static/media/app-logo.05772604.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"headerWrapper\":\"AppLogo_headerWrapper__2hMe_\",\"headerTitle\":\"AppLogo_headerTitle__2Yd0-\",\"headerIcon\":\"AppLogo_headerIcon__QWZw2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"logoContainer\":\"SideBarLogo_logoContainer__3jLC4\",\"logo\":\"SideBarLogo_logo__3nDhW\",\"logoText\":\"SideBarLogo_logoText__2NfcE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"StudentCallHistories\":\"StudentCallHistories_StudentCallHistories__rse8R\",\"searchBar\":\"StudentCallHistories_searchBar__2h0tP\",\"viewRecordBtn\":\"StudentCallHistories_viewRecordBtn__1xRTt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dashboard\":\"Dashboard_dashboard__TgW6w\",\"dashboardRow\":\"Dashboard_dashboardRow__ZOvya\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"studentsLayout\":\"Students_studentsLayout__1IzW1\",\"paginationWrapper\":\"Students_paginationWrapper__3mWPG\",\"searchBar\":\"Students_searchBar__cXPN7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tutorsLayout\":\"Tutors_tutorsLayout__3r6D2\",\"paginationWrapper\":\"Tutors_paginationWrapper__74mgI\",\"searchBar\":\"Tutors_searchBar__w_FW1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userControl\":\"Student_userControl__2OhXJ\",\"sideMenu\":\"Student_sideMenu__32xS1\",\"logoContainer\":\"Student_logoContainer__2-lbe\",\"logo\":\"Student_logo__oQ2Xq\",\"logoText\":\"Student_logoText__13Abr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"forgotPass\":\"ChangePasswordModal_forgotPass__CGDsg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"subscriptions\":\"Subscriptions_subscriptions__1PV4U\",\"tabPaneHistory\":\"Subscriptions_tabPaneHistory__22fxc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cancelBtn\":\"SubscriptionHistory_cancelBtn__CyXyF\",\"reload\":\"SubscriptionHistory_reload__B1WGO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userControl\":\"Tutor_userControl__VXq1k\",\"sideMenu\":\"Tutor_sideMenu__1Rtxn\",\"logoContainer\":\"Tutor_logoContainer__MzlJP\",\"logo\":\"Tutor_logo__aL0MZ\",\"logoText\":\"Tutor_logoText__DQNfE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"TutorCallHistories\":\"TutorCallHistories_TutorCallHistories__1ayj3\",\"searchBar\":\"TutorCallHistories_searchBar__32FTn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"recentCalls\":\"RecentCalls_recentCalls__10_XS\",\"recentCallsTitle\":\"RecentCalls_recentCallsTitle__3TF7C\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"topPaid\":\"TopPaid_topPaid__3Vg1U\",\"topPaidTitle\":\"TopPaid_topPaidTitle__1pDmY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"recordTitle\":\"CallDetailModal_recordTitle__2oYlc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"detail\":\"TutorProfile_detail__24lf1\",\"detailBasic\":\"TutorProfile_detailBasic__TCuPe\",\"detailName\":\"TutorProfile_detailName__jTOsH\",\"detailBasicInfo\":\"TutorProfile_detailBasicInfo__lLIgi\",\"banBtnHolder\":\"TutorProfile_banBtnHolder__3ur7_\",\"detailAdditional\":\"TutorProfile_detailAdditional__3_LCi\",\"detailAdditionalRow\":\"TutorProfile_detailAdditionalRow__1xr0F\",\"statusControl\":\"TutorProfile_statusControl__2ep4s\",\"statusControlBtnWrapper\":\"TutorProfile_statusControlBtnWrapper__3pk0T\",\"statusControlBtn\":\"TutorProfile_statusControlBtn__32_JF\",\"changeStateBtn\":\"TutorProfile_changeStateBtn__3sTHI\",\"detailWrapper\":\"TutorProfile_detailWrapper__2ZjVk\",\"detailTitle\":\"TutorProfile_detailTitle__WNYO8\",\"uploadedCert\":\"TutorProfile_uploadedCert__TM4qr\",\"videoWrapper\":\"TutorProfile_videoWrapper__39zQw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"extendSub\":\"ExtendSubscription_extendSub__19Cxs\",\"extendSubContent\":\"ExtendSubscription_extendSubContent__1D7fN\",\"extendDuration\":\"ExtendSubscription_extendDuration__29NHk\",\"extendPrice\":\"ExtendSubscription_extendPrice__2eU60\",\"extendSave\":\"ExtendSubscription_extendSave__N1dp-\",\"tierImage\":\"ExtendSubscription_tierImage__2Qj_h\",\"subTier\":\"ExtendSubscription_subTier__2VYGM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"reportDetail\":\"ReportDetailModal_reportDetail__1Qr07\",\"reportLabel\":\"ReportDetailModal_reportLabel__kquXK\",\"reportContent\":\"ReportDetailModal_reportContent__2i_sF\",\"banBtnHolder\":\"ReportDetailModal_banBtnHolder__eNKtc\",\"statusControl\":\"ReportDetailModal_statusControl__1fnb7\",\"statusControlBtnWrapper\":\"ReportDetailModal_statusControlBtnWrapper__3SIIC\",\"statusControlBtn\":\"ReportDetailModal_statusControlBtn__2zo3n\"};","module.exports = __webpack_public_path__ + \"static/media/flame-welcome.2b090893.png\";","module.exports = __webpack_public_path__ + \"static/media/welcome-student.0c7630e5.png\";","module.exports = __webpack_public_path__ + \"static/media/welcome-tutor.66b32adc.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"submitBtn\":\"ForgotPasswordModal_submitBtn__19bj8\"};","module.exports = __webpack_public_path__ + \"static/media/normal.e7bbb1c5.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"reviewSummary\":\"ReviewSummary_reviewSummary__Jwt72\",\"ratingCount\":\"ReviewSummary_ratingCount__1JQhM\",\"ratingCountList\":\"ReviewSummary_ratingCountList__ZBfIa\",\"rating\":\"ReviewSummary_rating__2MEhz\",\"reviewAvg\":\"ReviewSummary_reviewAvg__2fNIu\",\"reviewOverall\":\"ReviewSummary_reviewOverall__354ys\",\"reviewNumber\":\"ReviewSummary_reviewNumber__gEB8z\"};","module.exports = __webpack_public_path__ + \"static/media/silver.f90e93f6.png\";","module.exports = __webpack_public_path__ + \"static/media/gold.5aac3e94.png\";","module.exports = __webpack_public_path__ + \"static/media/platium.d927c89d.png\";","module.exports = __webpack_public_path__ + \"static/media/endcall.6812f833.png\";","module.exports = __webpack_public_path__ + \"static/media/unverify.e737cc3d.png\";","module.exports = __webpack_public_path__ + \"static/media/timeout.5eb4aa73.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"recordHolder\":\"StudentCallDetailModal_recordHolder__2_CP9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btnWrapper\":\"VideoPlayer_btnWrapper__36NBd\"};","module.exports = __webpack_public_path__ + \"static/media/tutor-wait.a732bc74.png\";","module.exports = __webpack_public_path__ + \"static/media/complete-profile.5dfe81ca.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"stats\":\"Stats_stats__17STS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"payments\":\"Payments_payments__3NcjE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"reviews\":\"Reviews_reviews__LggTJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"onlineUsers\":\"OnlineUsers_onlineUsers__13xP_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"moneyStats\":\"MoneyStats_moneyStats__3dC_u\"};","module.exports = __webpack_public_path__ + \"static/media/admin-avatar.4fc32273.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"reports\":\"Reports_reports__n4zJa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"registerContent\":\"RegisterModal_registerContent__1IyVz\",\"registerWelcome\":\"RegisterModal_registerWelcome__FbIzJ\",\"registerForm\":\"RegisterModal_registerForm__2CZRj\",\"registerButton\":\"RegisterModal_registerButton__z1ulB\",\"formWrapper\":\"RegisterModal_formWrapper__4GBIy\",\"switchMode\":\"RegisterModal_switchMode__2h5aY\",\"switchModeWrapper\":\"RegisterModal_switchModeWrapper__2XhUs\",\"welcomeImg\":\"RegisterModal_welcomeImg__Ktazu\",\"registerWelcomeContent\":\"RegisterModal_registerWelcomeContent__2mKlf\"};","exports.PREFERENCE_TYPE = Object.freeze({\r\n  ENG_ACCENT: 'eng_accent',\r\n  ENG_FLUENCY: 'eng_fluency',\r\n  TEACHING_STYLE: 'teaching_style',\r\n  STUDENT_TYPE: 'student_type',\r\n  STUDENT_LVL: 'student_lvl',\r\n  SPECIALITY: 'speciality'\r\n});\r\n\r\nexports.ENG_ACCENT =  [\r\n  \"North America\",\r\n  \"North America - Canada\",\r\n  \"North America - USA\",\r\n  \"North America - Southern USA\",\r\n  \"North America - Other\",\r\n  \"British Isles\",\r\n  \"British Isles - Received Pronunciation\",\r\n  \"British Isle - Ireland\",\r\n  \"British Isles - Scotland\",\r\n  \"British Isles - Other\",\r\n  \"South Africa\",\r\n  \"Australia / New Zealand\",\r\n  \"Australia\",\r\n  \"New Zealand\",\r\n  \"Other\"\r\n];\r\n\r\nexports.ENG_FLUENCY = [\r\n  'Native',\r\n  'Fluent',\r\n  'Conversational',\r\n  'Basic'\r\n];\r\n\r\nexports.TEACHING_STYLE =  [\r\n  \"Kind & patient\" ,\r\n  \"Fun & gregarious\",\r\n  \"Scholarly & knowledgeable\"\r\n];\r\n\r\nexports.STUDENT_TYPE = [\r\n  \"Adult\",\r\n  \"Child\"\r\n];\r\n\r\nexports.STUDENT_LVL = [\r\n  \"Beginner\",\r\n  \"Intermeditate\",\r\n  \"Advanced\"\r\n];\r\n\r\nexports.SPECIALITIES = [\r\n  \"Friendly conversation\", \r\n  \"Business English\", \r\n  \"Public speaking\", \r\n  \"Test prep (IELTS, TOEFL, etc.)\", \r\n  \"Grammar instruction, Accent coaching\", \r\n  \"Correcting speech\", \r\n  \"Discussing current events\", \r\n  \"Vocational lessons\", \r\n  \"Culture (i.e. manners, customs)\",\r\n  \"Teaching idioms and slang\"\r\n];","// extracted by mini-css-extract-plugin\nmodule.exports = {\"headerContent\":\"Default_headerContent__3c_AR\",\"userButton\":\"Default_userButton__fph_C\",\"registerButton\":\"Default_registerButton__2UbXV\",\"userButtonContainer\":\"Default_userButtonContainer__85zRo\",\"defaultBody\":\"Default_defaultBody__1ZuJT\",\"introContainer\":\"Default_introContainer__U5vQA\",\"welcomeText\":\"Default_welcomeText__JSskc\",\"welcomeDescription\":\"Default_welcomeDescription__WsJCP\",\"introContent\":\"Default_introContent__2U9ZG\",\"introImg\":\"Default_introImg__34kCu\",\"becomeTutor\":\"Default_becomeTutor__3Ev_x\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile\":\"Profile_profile__19UaV\",\"accountInfoContainer\":\"Profile_accountInfoContainer__1KEpp\",\"accountInfo\":\"Profile_accountInfo__1IP5V\",\"name\":\"Profile_name__2R_BL\",\"collapse\":\"Profile_collapse__dQhU3\",\"submitWrapper\":\"Profile_submitWrapper__18lTv\",\"profileStatus\":\"Profile_profileStatus__9eVFK\",\"uploadedCert\":\"Profile_uploadedCert__1yD_I\",\"introTips\":\"Profile_introTips__3p6sY\",\"introInstruct\":\"Profile_introInstruct__7aU6W\"};","import Cookies from 'universal-cookie';\r\nimport jwtDecode from 'jwt-decode';\r\nconst cookies = new Cookies();\r\n\r\nexport const getAccountInfo = () => {\r\n  let account = null;\r\n  const accessToken = cookies.get('access_token');\r\n  if (accessToken) {\r\n    account = jwtDecode(accessToken);\r\n  }\r\n  return account;\r\n}\r\n\r\nexport const removeAccountInfo = () => {\r\n  cookies.remove('access_token');\r\n}\r\n","import React, { createContext, useState, useEffect } from 'react';\r\nimport { getAccountInfo, removeAccountInfo } from '../lib/utils/getAccountInfo';\r\nexport const AccountContext = createContext(null);\r\n\r\nconst initialAccount = null;\r\n\r\nconst AccountContextProvider = (props) => {\r\n  const [account, setAccount] = useState(initialAccount);\r\n\r\n  useEffect(() => {\r\n    const existAccount = getAccountInfo();\r\n    if (existAccount) {\r\n      setAccount(existAccount);\r\n    }\r\n  }, []);\r\n\r\n  const onSignIn = (accountData) => {\r\n    setAccount(accountData);\r\n  };\r\n\r\n  const onSignOut = () => {\r\n    removeAccountInfo();\r\n    localStorage.clear();\r\n    setAccount(null);\r\n  };\r\n\r\n  return (\r\n    <AccountContext.Provider value={{ account, onSignIn, onSignOut }} {...props} />\r\n  )\r\n}\r\n\r\nexport default AccountContextProvider;","import React from 'react';\r\nimport styles from './FooterContent.module.css';\r\nimport { GithubOutlined, FacebookFilled, InstagramOutlined } from '@ant-design/icons';\r\nimport { Layout } from 'antd';\r\nconst { Footer } = Layout;\r\nexport default function FooterContent() {\r\n  return (\r\n    <Footer className={styles.footer}>\r\n      <div className={styles.contactIconContainer}>\r\n        <GithubOutlined className={styles.contactIcon} onClick={() => window.open('https://github.com/huynguyend191')} />\r\n        <FacebookFilled className={styles.contactIcon} onClick={() => window.open('https://www.facebook.com/sneezingcat191')} />\r\n        <InstagramOutlined className={styles.contactIcon} onClick={() => window.open('https://www.instagram.com/sneezingcat191/')} />\r\n      </div>\r\n      <div className={styles.contactInfoContainer}>\r\n        Mirage 2020 - English Video Call Platform <br /> \r\n        Contact: huynguyend191@gmail.com\r\n      </div>\r\n    </Footer>\r\n  );\r\n}\r\n","import axios from 'axios';\r\n\r\nconst baseURL = process.env.NODE_ENV === 'development'\r\n? 'https://192.168.0.164:3003/api'\r\n: 'https://mirage-video-call.herokuapp.com/api' ;\r\n\r\nconst axiosRequest = axios.create({\r\n  baseURL,\r\n  withCredentials: true\r\n});\r\n\r\nexport default axiosRequest;","import React, { useState, useEffect, useContext } from 'react';\r\nimport { Modal, Form, Input, Button, Alert } from 'antd';\r\nimport styles from './RegisterModal.module.css';\r\nimport welcomeStudentImg from '../../assets/welcome-student.png';\r\nimport welcomeTutorImg from '../../assets/welcome-tutor.png';\r\nimport axios from '../../lib/utils/axiosConfig';\r\nimport { AccountContext } from '../../context/AccountContext';\r\n\r\nexport default function RegisterModal(props) {\r\n  const [isStudent, setIsStudent] = useState(props.isStudent);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [form] = Form.useForm();\r\n  const { onSignIn } = useContext(AccountContext);\r\n\r\n  useEffect(() => {\r\n    setIsStudent(props.isStudent)\r\n  }, [props.isStudent])\r\n\r\n  const onFinish = async (values) => {\r\n    try {\r\n      setLoading(true);\r\n      const url = isStudent? '/students' : '/tutors';\r\n      const accountInfo = {\r\n        username: values.username,\r\n        password: values.password,\r\n        email: values.email,\r\n        name: values.name\r\n      };\r\n      const result = await axios.post(url + '/register', accountInfo);\r\n      setLoading(false);\r\n      onSignIn(result.data.account);\r\n      localStorage.setItem('remember', true);\r\n      window.location.reload(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setError(error.response.data.message);\r\n    }\r\n  };\r\n  const switchRole = () => {\r\n    setIsStudent(!isStudent);\r\n  };\r\n  const switchMode = () => {\r\n    props.onClose();\r\n    props.onSwitchSignIn();\r\n  };\r\n  const onClose = () => {\r\n    form.resetFields();\r\n    props.onClose();\r\n  }\r\n\r\n  const formItemLayout = {\r\n    labelCol: {\r\n      xs: { span: 24 },\r\n      sm: { span: 8 },\r\n    },\r\n    wrapperCol: {\r\n      xs: { span: 24 },\r\n      sm: { span: 16 },\r\n    },\r\n  };\r\n  const tailFormItemLayout = {\r\n    wrapperCol: {\r\n      xs: {\r\n        span: 24,\r\n        offset: 0,\r\n      },\r\n      sm: {\r\n        span: 16,\r\n        offset: 8,\r\n      },\r\n    },\r\n  };\r\n  const studentWelcome = (\r\n    <div className={styles.registerWelcomeContent}>\r\n      <img className={styles.welcomeImg} draggable={false} src={welcomeStudentImg} alt=\"\" />\r\n      <h3>Experience new way of studying English</h3>\r\n      <h4>Improve your English anywhere anytime</h4>\r\n      <h4>Learn from interesting people around the world</h4>\r\n    </div>\r\n  )\r\n  \r\n  const tutorWelcome = (\r\n    <div className={styles.registerWelcomeContent}>\r\n      <img className={styles.welcomeImg} draggable={false} src={welcomeTutorImg} alt=\"\" />\r\n      <h3>Tutoring with Mirage is fun & rewarding</h3>\r\n      <h4>No experience necessary</h4>\r\n      <h4>Share your knowledge with people and get paid</h4>\r\n    </div>\r\n  )\r\n\r\n  return (\r\n    <Modal\r\n      visible={props.isVisible}\r\n      footer={null}\r\n      title={isStudent? 'Register as student' : 'Register as tutor'}\r\n      onCancel={onClose}\r\n      width=\"800px\"\r\n    >\r\n      <div className={styles.registerContent}>\r\n        <div className={styles.registerWelcome}>\r\n          {\r\n            isStudent?\r\n            <div>{studentWelcome}</div> :\r\n            <div>{tutorWelcome}</div>\r\n          }\r\n        </div>\r\n        <div className={styles.formWrapper}>\r\n          {error ? <Alert style={{marginBottom: \"15px\"}} message={error} type=\"error\" showIcon banner closable afterClose={() => setError(null)} /> : null}\r\n          <Form\r\n            name=\"register\"\r\n            onFinish={onFinish}\r\n            scrollToFirstError\r\n            className={styles.registerForm}\r\n            form={form}\r\n            {...formItemLayout}\r\n          >\r\n            <Form.Item\r\n              name=\"email\"\r\n              label=\"E-mail\"\r\n              rules={[\r\n                {\r\n                  type: 'email',\r\n                  message: 'The input is not valid E-mail!',\r\n                },\r\n                {\r\n                  required: true,\r\n                  message: 'Please input your E-mail!',\r\n                },\r\n              ]}\r\n            >\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item\r\n              name=\"username\"\r\n              label=\"Username\"\r\n              rules={[{ required: true, message: 'Please input your username!', whitespace: false }]}\r\n            >\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item\r\n              name=\"password\"\r\n              label=\"Password\"\r\n              rules={[\r\n                {\r\n                  required: true,\r\n                  message: 'Please input your password!',\r\n                },\r\n              ]}\r\n              hasFeedback\r\n            >\r\n              <Input.Password />\r\n            </Form.Item>\r\n            <Form.Item\r\n              name=\"confirm\"\r\n              label=\"Confirm Password\"\r\n              dependencies={['password']}\r\n              hasFeedback\r\n              rules={[\r\n                {\r\n                  required: true,\r\n                  message: 'Please confirm your password!',\r\n                },\r\n                ({ getFieldValue }) => ({\r\n                  validator(rule, value) {\r\n                    if (!value || getFieldValue('password') === value) {\r\n                      return Promise.resolve();\r\n                    }\r\n                    return Promise.reject('The two passwords that you entered do not match!');\r\n                  },\r\n                }),\r\n              ]}\r\n            >\r\n              <Input.Password />\r\n            </Form.Item>\r\n            <Form.Item\r\n              name=\"name\"\r\n              label=\"Full name\"\r\n              rules={[{ required: true, message: 'Please input your fullname!', whitespace: true }]}\r\n            >\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item {...tailFormItemLayout}>\r\n              <Button type=\"primary\" htmlType=\"submit\" className={styles.registerButton} shape=\"round\" loading={loading}>\r\n                Register\r\n              </Button>\r\n              <p className={styles.switchModeWrapper}>Or<span onClick={switchRole} className={styles.switchMode}> become a {isStudent? \"tutor\" : \"student\"} instead</span></p>\r\n              <p className={styles.switchModeWrapper}>Already have an account? <span onClick={switchMode} className={styles.switchMode}> Sign in</span></p>\r\n            </Form.Item>\r\n          </Form>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  )\r\n}\r\n","import React, { useContext, useState } from 'react';\r\nimport { Modal, Form, Input, Button, Alert, Checkbox } from 'antd';\r\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\r\nimport styles from './SignInModal.module.css';\r\nimport { AccountContext } from '../../context/AccountContext';\r\nimport axios from '../../lib/utils/axiosConfig';\r\n\r\nexport default function SignInModal({ isVisible, onClose, onSwitchRegister, onSwitchForgotPass }) {\r\n  const [form] = Form.useForm();\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const { onSignIn } = useContext(AccountContext);\r\n  const onFinish = async (values) => {\r\n    try {\r\n      setLoading(true);\r\n      const account = {\r\n        user: values.user,\r\n        password: values.password,\r\n        remember: values.remember\r\n      };\r\n      const result = await axios.post('/accounts/sign-in', account);\r\n      setLoading(false);\r\n      onSignIn(result.data.account);\r\n      window.location.reload(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setError(error.response.data.message);\r\n    }\r\n  };\r\n\r\n  const onChangeMode = () => {\r\n    onClose();\r\n    onSwitchRegister(true);\r\n  };\r\n\r\n  const onCancel = () => {\r\n    form.resetFields()\r\n    onClose();\r\n  };\r\n\r\n  const onForgotPass = () => {\r\n    onClose();\r\n    onSwitchForgotPass();\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      visible={isVisible}\r\n      footer={null}\r\n      onCancel={onCancel}\r\n      title=\"Sign in\"\r\n      width=\"400px\"\r\n    >\r\n      {error ? <Alert style={{ marginBottom: \"15px\" }} message={error} type=\"error\" showIcon banner closable afterClose={() => setError(null)} /> : null}\r\n      <Form\r\n        name=\"normal_sign_in\"\r\n        className={styles.signInForm}\r\n        initialValues={{ remember: true }}\r\n        onFinish={onFinish}\r\n        form={form}\r\n      >\r\n        <Form.Item\r\n          name=\"user\"\r\n          rules={[{ required: true, message: 'Please input your username or email!' }]}\r\n        >\r\n          <Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"Username or email\" />\r\n        </Form.Item>\r\n        <Form.Item\r\n          name=\"password\"\r\n          rules={[{ required: true, message: 'Please input your Password!' }]}\r\n        >\r\n          <Input\r\n            prefix={<LockOutlined className=\"site-form-item-icon\" />}\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n          />\r\n        </Form.Item>\r\n        <Form.Item>\r\n          <Form.Item name=\"remember\" valuePropName=\"checked\" noStyle>\r\n            <Checkbox>Remember me</Checkbox>\r\n          </Form.Item>\r\n          <p onClick={onForgotPass} className={styles.signInForgot}>\r\n            Forgot password?\r\n          </p>\r\n        </Form.Item>\r\n        <Form.Item>\r\n          <Button type=\"primary\" htmlType=\"submit\" className={styles.signInButton} shape=\"round\" loading={loading}>\r\n            Sign in\r\n        </Button>\r\n          Don't have an account? <span className={styles.registerNow} onClick={onChangeMode}>Register!</span>\r\n        </Form.Item>\r\n\r\n      </Form>\r\n    </Modal>\r\n  )\r\n}\r\n","import React, { useState, useContext } from 'react';\r\nimport { Modal, Button, Input, Form } from 'antd';\r\nimport { UserOutlined } from '@ant-design/icons';\r\nimport styles from './ForgotPasswordModal.module.css';\r\nimport axios from '../lib/utils/axiosConfig';\r\nimport { AccountContext } from '../context/AccountContext';\r\n\r\nexport default function ForgotPasswordModal({ isVisible, onClose }) {\r\n  const [form] = Form.useForm();\r\n  const [loading, setLoading] = useState(false);\r\n  const { account } = useContext(AccountContext);\r\n\r\n  const onFinish = async values => {\r\n    try {\r\n      setLoading(true);\r\n      await axios.post('/accounts/reset-password', { user: values.user });\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      alert(error.response.data.message);\r\n    }\r\n  };\r\n  const onCancel = () => {\r\n    form.resetFields();\r\n    onClose();\r\n  };\r\n\r\n  const defaultUser = account ? account.email : null;\r\n\r\n  return (\r\n    <Modal visible={isVisible} footer={null} title=\"Reset your password\" width=\"350px\" onCancel={onCancel}>\r\n      <Form name=\"forgot_password\" form={form} onFinish={onFinish} initialValues={{ user: defaultUser }}>\r\n        <Form.Item name=\"user\" rules={[{ required: true, message: 'Please input your username or email!' }]}>\r\n          <Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"Enter your username or email\" />\r\n        </Form.Item>\r\n        <Form.Item>\r\n          <Button type=\"primary\" htmlType=\"submit\" shape=\"round\" loading={loading} className={styles.submitBtn}>\r\n            Submit\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport styles from'./AppLogo.module.css';\r\nimport headerIcon from '../assets/app-logo.png';\r\n\r\nexport default function AppLogo() {\r\n  return (\r\n    <div className={styles.headerWrapper}>\r\n      <img className={styles.headerIcon} src={headerIcon} draggable={false} alt=\"\" />\r\n      <h1 className={styles.headerTitle}>MIRAGE</h1>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState } from 'react'\r\nimport styles from './Default.module.css';\r\nimport { Button, Layout, Divider } from 'antd';\r\nimport FooterContent from '../../components/FooterContent';\r\nimport introImg from '../../assets/flame-welcome.png';\r\nimport RegisterModal from './RegisterModal';\r\nimport SignInModal from './SignInModal';\r\nimport ForgotPasswordModal from '../../components/ForgotPasswordModal';\r\nimport AppLogo from '../../components/AppLogo';\r\n\r\nconst { Header, Content } = Layout;\r\n\r\nexport default function Default() {\r\n  const [isRegister, setRegister] = useState(false);\r\n  const [isSignIn, setIsSignIn] = useState(false);\r\n  const [isForgotPass, setIsForgotPass] = useState(false);\r\n  const [isStudent, setIsStudent] = useState(true);\r\n\r\n  const showRegister = (isStudent) => {\r\n    setIsStudent(isStudent);\r\n    setRegister(true);\r\n  };\r\n\r\n  return (\r\n    <Layout>\r\n      <SignInModal isVisible={isSignIn} onClose={() => setIsSignIn(false)} onSwitchRegister={showRegister} onSwitchForgotPass={() => setIsForgotPass(true)} />\r\n      <RegisterModal isVisible={isRegister} onClose={() => {setRegister(false)}} isStudent={isStudent} onSwitchSignIn={() => setIsSignIn(true)} />\r\n      <ForgotPasswordModal isVisible={isForgotPass} onClose={() => setIsForgotPass(false)} />\r\n      <Header>\r\n        <div className={styles.headerContent}>\r\n          <AppLogo />\r\n          <div className={styles.userButtonContainer}>\r\n            <Button className={styles.userButton} type=\"secondary\" shape=\"round\" onClick={() => setIsSignIn(true)}>Sign in</Button>\r\n            <Button className={styles.userButton} type=\"primary\" shape=\"round\" onClick={() => showRegister(true)}>Register</Button>\r\n          </div>\r\n        </div>\r\n      </Header>\r\n      <Content>\r\n        <div className={styles.defaultBody}>\r\n          <div className={styles.introContainer}> \r\n            <img className={styles.introImg} draggable={false} src={introImg} alt=\"\" />\r\n            <div className={styles.introContent}>\r\n              <p className={styles.welcomeText}>Welcome to Mirage!</p>\r\n              <p className={styles.welcomeDescription}>Go on, say something in English!</p>\r\n              <Button className={styles.registerButton} type=\"primary\" shape=\"round\" onClick={() => showRegister(true)}>STUDY NOW</Button>\r\n              <Divider style={{ width: \"300px\" }}>OR</Divider>\r\n              <Button className={styles.registerButton} type=\"secondary\" shape=\"round\" onClick={() => showRegister(false)}>BECOME TUTOR</Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Content>\r\n      <FooterContent />\r\n    </Layout>\r\n  )\r\n}\r\n","export const ROLES = Object.freeze({\r\n  ADMIN: 1,\r\n  TUTOR: 2,\r\n  STUDENT: 3\r\n});\r\n\r\nexport const STATES = Object.freeze({\r\n  ACTIVE: 1,\r\n  INACTIVE: 0\r\n});\r\n\r\nexport const PROFILE_STATUS = Object.freeze({\r\n  ACCEPTED: 1,\r\n  PENDING: 2,\r\n  REJECTED: 3\r\n});\r\n\r\nexport const serverUrl =\r\n  process.env.NODE_ENV === 'development' ? 'https://192.168.0.164:3003/' : 'https://mirage-video-call.herokuapp.com/';\r\n\r\nexport const SOCKET_EVENTS = Object.freeze({\r\n  INIT: 'init',\r\n  REQUEST: 'request',\r\n  CALL: 'call',\r\n  END: 'end',\r\n  DISCONNECT: 'disconnect',\r\n  GET_ONLINE_TUTORS: 'get_online_tutors',\r\n  LEAVE: 'leave',\r\n  RECORD_STUDENT: 'record_student',\r\n  RECORD_TUTOR: 'record_tutor',\r\n  SAVE_VIDEOS: 'save_videos',\r\n  CREATE_CALL_HISTORY: 'create_call_history',\r\n  GET_ONLINE_STUDENTS: 'get_online_students'\r\n});\r\n\r\nexport const STATUS = Object.freeze({\r\n  AVAILABLE: 1,\r\n  BUSY: 0,\r\n  OFFLINE: 2\r\n});\r\n\r\nexport const SUB_STATE = Object.freeze({\r\n  COMPLETED: 1,\r\n  PENDING: 2,\r\n  CANCELED: 3\r\n});\r\n\r\nexport const SUB_TIER = Object.freeze({\r\n  NORMAL: 1,\r\n  SILVER: 2,\r\n  GOLD: 3,\r\n  PLATIUM: 4\r\n});\r\n\r\nexport const PRICE_PER_MIN = 0.1; //$\r\n\r\nexport const SUB_DISCOUNT_RATE = Object.freeze({\r\n  NORMAL: 1,\r\n  SILVER: 0.85,\r\n  GOLD: 0.75,\r\n  PLATIUM: 0.65\r\n});\r\n\r\nexport const REPORT_REASONS = ['Nudity', 'Harassment', 'Spam', 'Hate speech', 'Something else'];\r\n\r\nexport const REPORT_STATE = Object.freeze({\r\n  RESOLVED: 1,\r\n  PENDING: 2,\r\n  CANCELLED: 3\r\n});\r\n\r\nexport const HISTORY_COUNT = Object.freeze({\r\n  COUNTED: 1,\r\n  UNCOUNTED: 0\r\n});\r\n\r\nexport const PAYMENT_STATE = Object.freeze({\r\n  COMPLETED: 1,\r\n  PENDING: 2,\r\n  CANCELED: 3\r\n});\r\n\r\nexport const PREFERENCE_TYPES = Object.freeze({\r\n  FAVORITE: 1,\r\n  RECOMMEND: 2\r\n});\r\n","import React, { useState, useContext } from 'react';\r\nimport styles from './ChangePasswordModal.module.css';\r\nimport { Modal, Form, Input, Button } from 'antd';\r\nimport { AccountContext } from '../context/AccountContext';\r\nimport axios from '../lib/utils/axiosConfig';\r\nimport { ROLES } from '../lib/constants';\r\n\r\nexport default function ChangePasswordModal({ isVisible, onForgot, onClose }) {\r\n  const [form] = Form.useForm();\r\n  const [loading, setLoading] = useState(false);\r\n  const { account } = useContext(AccountContext);\r\n\r\n  const onFinish = async values => {\r\n    try {\r\n      setLoading(true);\r\n      const password = {\r\n        oldPassword: values.oldpassword,\r\n        newPassword: values.password\r\n      };\r\n      await axios.post('/accounts/' + account.id + '/change-password', password);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      alert(error.response.data.message);\r\n    }\r\n  };\r\n  const onCancel = () => {\r\n    form.resetFields();\r\n    onClose();\r\n  };\r\n  const forgotPassword = () => {\r\n    onCancel();\r\n    onForgot();\r\n  };\r\n\r\n  const layout = {\r\n    labelCol: { span: 8 },\r\n    wrapperCol: { span: 16 }\r\n  };\r\n  const tailLayout = {\r\n    wrapperCol: { offset: 8, span: 16 }\r\n  };\r\n\r\n  return (\r\n    <Modal visible={isVisible} footer={null} title=\"Change your password\" onCancel={onCancel} width=\"500px\">\r\n      <Form {...layout} name=\"change-password\" onFinish={onFinish} form={form}>\r\n        <Form.Item\r\n          name=\"oldpassword\"\r\n          label=\"Current password\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Please input your current password!'\r\n            }\r\n          ]}\r\n        >\r\n          <Input.Password />\r\n        </Form.Item>\r\n        <Form.Item\r\n          name=\"password\"\r\n          label=\"New password\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Please input your new password!'\r\n            }\r\n          ]}\r\n          hasFeedback\r\n        >\r\n          <Input.Password />\r\n        </Form.Item>\r\n        <Form.Item\r\n          name=\"confirm\"\r\n          label=\"Retype password\"\r\n          dependencies={['password']}\r\n          hasFeedback\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Please confirm your password!'\r\n            },\r\n            ({ getFieldValue }) => ({\r\n              validator(rule, value) {\r\n                if (!value || getFieldValue('password') === value) {\r\n                  return Promise.resolve();\r\n                }\r\n                return Promise.reject('The two passwords that you entered do not match!');\r\n              }\r\n            })\r\n          ]}\r\n        >\r\n          <Input.Password />\r\n        </Form.Item>\r\n        <Form.Item {...tailLayout}>\r\n          <Button type=\"primary\" htmlType=\"submit\" className={styles.registerButton} loading={loading}>\r\n            Update password\r\n          </Button>\r\n          {account.role === ROLES.ADMIN ? null : (\r\n            <span className={styles.forgotPass} onClick={forgotPassword}>\r\n              Forgot password?\r\n            </span>\r\n          )}\r\n        </Form.Item>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport Logo from '../assets/app-logo.png';\r\nimport styles from './SideBarLogo.module.css';\r\n\r\nexport default function SideBarLogo( {collapsed} ) {\r\n  return (\r\n    <div className={styles.logoContainer}>\r\n      <img src={Logo} alt=\"\" className={styles.logo} draggable={false} />\r\n      {collapsed ? null : <p className={styles.logoText}>MIRAGE</p>}\r\n    </div>\r\n  )\r\n}\r\n","export const getTimeFromMs = (millisec) => {\r\n  var seconds = (millisec / 1000).toFixed(0);\r\n  var minutes = Math.floor(seconds / 60);\r\n  var hours = \"\";\r\n  if (minutes > 59) {\r\n      hours = Math.floor(minutes / 60);\r\n      hours = (hours >= 10) ? hours : \"0\" + hours;\r\n      minutes = minutes - (hours * 60);\r\n      minutes = (minutes >= 10) ? minutes : \"0\" + minutes;\r\n  }\r\n\r\n  seconds = Math.floor(seconds % 60);\r\n  seconds = (seconds >= 10) ? seconds : \"0\" + seconds;\r\n  if (hours !== \"\") {\r\n      return hours + \":\" + minutes + \":\" + seconds;\r\n  }\r\n  return minutes + \":\" + seconds;\r\n}","import React, { useEffect, useState, useContext } from 'react';\r\nimport styles from './Profile.module.css';\r\nimport axios from '../../lib/utils/axiosConfig';\r\nimport { AccountContext } from '../../context/AccountContext';\r\nimport { Avatar, Collapse, Form, Input, DatePicker, Button, Select, Upload, Alert, Tag, Spin } from 'antd';\r\nimport { UserOutlined, UploadOutlined, FileImageOutlined } from '@ant-design/icons';\r\nimport preferences from '../../lib/preferences';\r\nimport moment from 'moment';\r\nimport { serverUrl } from '../../lib/constants';\r\nimport { getTimeFromMs } from '../../lib/utils/formatTime';\r\nconst { Option } = Select;\r\nconst { Panel } = Collapse;\r\n\r\nexport default function Profile() {\r\n  const [loadingProfile, setLoadingProfile] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [profile, setProfile] = useState({ account: { email: null } });\r\n  const { account } = useContext(AccountContext);\r\n  const [loadingAva, setLoadingAva] = useState(false);\r\n  const [avatar, setAvatar] = useState([]);\r\n\r\n  const getStudentProfile = async () => {\r\n    try {\r\n      setLoadingProfile(true);\r\n      const result = await axios.get('/students/' + account.student.id);\r\n      setProfile(result.data.student);\r\n      setLoadingProfile(false);\r\n    } catch (error) {\r\n      setLoadingProfile(false);\r\n      alert(error.response.data.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getStudentProfile();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const avatarProfile =\r\n    profile && profile.avatar ? (\r\n      <Avatar src={serverUrl + profile.avatar} size={100} />\r\n    ) : (\r\n      <Avatar icon={<UserOutlined />} size={100} />\r\n    );\r\n\r\n  const formItemLayout = {\r\n    labelCol: {\r\n      xs: { span: 24 },\r\n      sm: { span: 5 }\r\n    },\r\n    wrapperCol: {\r\n      xs: { span: 24 },\r\n      sm: { span: 16 }\r\n    }\r\n  };\r\n  const uploadBtnLayout = {\r\n    wrapperCol: { offset: 5, span: 16 }\r\n  };\r\n  const onSubmit = async values => {\r\n    try {\r\n      setLoading(true);\r\n      await axios.put('/students/' + profile.id, values);\r\n      getStudentProfile();\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      alert(error.response.data.message);\r\n    }\r\n  };\r\n\r\n  const uploadAvaProps = {\r\n    onRemove: file => {\r\n      setAvatar([]);\r\n    },\r\n    beforeUpload: file => {\r\n      const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\r\n      if (isJpgOrPng) {\r\n        setAvatar([file]);\r\n      }\r\n      return false;\r\n    },\r\n    fileList: avatar\r\n  };\r\n\r\n  const uploadAvatar = async () => {\r\n    try {\r\n      setLoadingAva(true);\r\n      const formData = new FormData();\r\n      formData.append('avatar', avatar[0]);\r\n      await axios('/students/avatar/' + profile.account.username, {\r\n        method: 'POST',\r\n        data: formData\r\n      });\r\n      await getStudentProfile();\r\n      window.location.reload(false);\r\n      setLoadingAva(false);\r\n    } catch (error) {\r\n      setLoadingAva(false);\r\n      alert(error.response.data.message);\r\n    }\r\n  };\r\n\r\n  const resendConfirmation = async () => {\r\n    try {\r\n      await axios.post('/accounts/resend-verify', { email: profile.account.email });\r\n    } catch (error) {\r\n      alert(error.response.data.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Spin spinning={loadingProfile}>\r\n      <div className={styles.profile}>\r\n        <div className={styles.accountInfoContainer}>\r\n          {avatarProfile}\r\n          <div className={styles.accountInfo}>\r\n            <p className={styles.name}>{profile.name}</p>\r\n            <p>Email: {profile.account.email}</p>\r\n            <p>Remaining time: {getTimeFromMs(profile.remaining_time)}</p>\r\n            {account.verification ? (\r\n              <Tag color=\"success\">Verified</Tag>\r\n            ) : (\r\n              <span>\r\n                <Tag color=\"default\">Unverified</Tag>\r\n                <Button type=\"link\" onClick={resendConfirmation}>\r\n                  Resend confirmation email\r\n                </Button>\r\n              </span>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className={styles.collapse}>\r\n          {profile.name ? (\r\n            <Form\r\n              {...formItemLayout}\r\n              onFinish={onSubmit}\r\n              initialValues={{\r\n                name: profile.name,\r\n                phone: profile.phone,\r\n                birthdate: profile.birthdate ? moment(profile.birthdate) : undefined,\r\n                address: profile.address,\r\n                student_type: profile.student_type ? profile.student_type : undefined,\r\n                student_lvl: profile.student_lvl ? profile.student_lvl : undefined,\r\n                accent: profile.accent ? profile.accent : undefined,\r\n                specialities: profile.specialities ? JSON.parse(profile.specialities) : undefined,\r\n                teaching_styles: profile.teaching_styles ? JSON.parse(profile.teaching_styles) : undefined\r\n              }}\r\n            >\r\n              <Collapse defaultActiveKey={['1', '2']}>\r\n                <Panel header=\"Basic info\" key=\"1\">\r\n                  <Form.Item label=\"Name\" name=\"name\" rules={[{ required: true, message: 'Please enter your name' }]}>\r\n                    <Input placeholder=\"Your fullname\" value={profile.name} />\r\n                  </Form.Item>\r\n                  <Form.Item name=\"phone\" label=\"Phone\">\r\n                    <Input placeholder=\"Your phone number (optional)\" />\r\n                  </Form.Item>\r\n                  <Form.Item name=\"birthdate\" label=\"Birthdate\">\r\n                    <DatePicker />\r\n                  </Form.Item>\r\n                  <Form.Item name=\"avatar\" label=\"Upload avatar\">\r\n                    <Upload {...uploadAvaProps} listType=\"picture-card\">\r\n                      <Button icon={<FileImageOutlined />}>Change avatar</Button>\r\n                    </Upload>\r\n                  </Form.Item>\r\n                  <Form.Item {...uploadBtnLayout}>\r\n                    <Button\r\n                      disabled={avatar.length <= 0}\r\n                      onClick={uploadAvatar}\r\n                      loading={loadingAva}\r\n                      style={{ width: '159px' }}\r\n                    >\r\n                      <UploadOutlined /> Upload avatar\r\n                    </Button>\r\n                  </Form.Item>\r\n                </Panel>\r\n                <Panel header=\"Study preferences\" key=\"2\">\r\n                  <Alert\r\n                    style={{ marginBottom: '15px' }}\r\n                    message=\"Complete your profile to help finding appropriate tutors easier\"\r\n                    type=\"info\"\r\n                    showIcon\r\n                  />\r\n                  <Form.Item name=\"student_type\" label=\"Type\">\r\n                    <Select placeholder=\"What type of student are you?\">\r\n                      {preferences.STUDENT_TYPE.map(type => {\r\n                        return (\r\n                          <Option value={type} key={type}>\r\n                            {type}\r\n                          </Option>\r\n                        );\r\n                      })}\r\n                    </Select>\r\n                  </Form.Item>\r\n                  <Form.Item name=\"student_lvl\" label=\"Your level\">\r\n                    <Select placeholder=\"Your English level\">\r\n                      {preferences.STUDENT_LVL.map(lvl => {\r\n                        return (\r\n                          <Option value={lvl} key={lvl}>\r\n                            {lvl}\r\n                          </Option>\r\n                        );\r\n                      })}\r\n                    </Select>\r\n                  </Form.Item>\r\n                  <Form.Item name=\"accent\" label=\"Favorite accent\">\r\n                    <Select placeholder=\"What is your favorite English accent?\">\r\n                      {preferences.ENG_ACCENT.map(accent => {\r\n                        return (\r\n                          <Option value={accent} key={accent}>\r\n                            {accent}\r\n                          </Option>\r\n                        );\r\n                      })}\r\n                    </Select>\r\n                  </Form.Item>\r\n                  <Form.Item name=\"specialities\" label=\"Interests\">\r\n                    <Select mode=\"multiple\" placeholder=\"What do you want to study?\">\r\n                      {preferences.SPECIALITIES.map(spec => {\r\n                        return (\r\n                          <Option value={spec} key={spec}>\r\n                            {spec}\r\n                          </Option>\r\n                        );\r\n                      })}\r\n                    </Select>\r\n                  </Form.Item>\r\n                  <Form.Item name=\"teaching_styles\" label=\"Teaching styles\">\r\n                    <Select mode=\"multiple\" placeholder=\"Which styles of teaching do you prefer?\">\r\n                      {preferences.TEACHING_STYLE.map(style => {\r\n                        return (\r\n                          <Option value={style} key={style}>\r\n                            {style}\r\n                          </Option>\r\n                        );\r\n                      })}\r\n                    </Select>\r\n                  </Form.Item>\r\n                </Panel>\r\n              </Collapse>\r\n              <div className={styles.submitWrapper}>\r\n                <Button type=\"primary\" htmlType=\"submit\" loading={loading}>\r\n                  Update profile\r\n                </Button>\r\n              </div>\r\n            </Form>\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n    </Spin>\r\n  );\r\n}\r\n","import React, { useState, useContext, useEffect } from 'react';\r\nimport { Table, Spin, Tag, Popconfirm, Button } from 'antd';\r\nimport axios from '../../lib/utils/axiosConfig';\r\nimport { AccountContext } from '../../context/AccountContext';\r\nimport { SUB_STATE, SUB_TIER } from '../../lib/constants';\r\nimport moment from 'moment';\r\nimport styles from './SubscriptionHistory.module.css';\r\nimport { ReloadOutlined } from '@ant-design/icons';\r\n\r\nexport default function SubscriptionHistory() {\r\n  const { account } = useContext(AccountContext);\r\n  const [studentSub, setStudentSub] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const getStudentSub = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await axios.get('/subscriptions/' + account.student.id);\r\n      setStudentSub(result.data.subscriptions);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      alert(error.response.data.message);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const cancelSubscription = async id => {\r\n    setLoading(true);\r\n    try {\r\n      await axios.put('/subscriptions/' + id, {\r\n        state: SUB_STATE.CANCELED\r\n      });\r\n      getStudentSub();\r\n    } catch (error) {\r\n      alert(error.response.data.message);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Date',\r\n      dataIndex: 'createdAt',\r\n      render: createdAt => {\r\n        return <div>{moment(createdAt).format('MMMM Do YYYY, h:mm:ss a')}</div>;\r\n      }\r\n    },\r\n    {\r\n      title: 'Tier',\r\n      dataIndex: 'tier',\r\n      render: tier => {\r\n        if (tier === SUB_TIER.SILVER) {\r\n          return <Tag color=\"#C0C0C0\">Silver</Tag>;\r\n        } else if (tier === SUB_TIER.GOLD) {\r\n          return <Tag color=\"#DAA520\">Gold</Tag>;\r\n        } else if (tier === SUB_TIER.PLATIUM) {\r\n          return <Tag color=\"processing\">Platium</Tag>;\r\n        } else {\r\n          return <Tag>Normal</Tag>;\r\n        }\r\n      }\r\n    },\r\n    {\r\n      title: 'Duration',\r\n      dataIndex: 'duration',\r\n      render: duration => {\r\n        return <div>{duration / 60000} mins</div>;\r\n      }\r\n    },\r\n    {\r\n      title: 'Price',\r\n      dataIndex: 'price',\r\n      render: price => {\r\n        return <div>{price}$</div>;\r\n      }\r\n    },\r\n    {\r\n      title: 'State',\r\n      dataIndex: 'state',\r\n      render: state => {\r\n        if (state === SUB_STATE.COMPLETED) {\r\n          return <Tag color=\"success\">Completed</Tag>;\r\n        } else if (state === SUB_STATE.PENDING) {\r\n          return <Tag color=\"blue\">Pending</Tag>;\r\n        } else {\r\n          return <Tag color=\"error\">Cancelled</Tag>;\r\n        }\r\n      }\r\n    },\r\n    {\r\n      title: 'Action',\r\n      dataIndex: 'state',\r\n      render: (text, record) => {\r\n        if (record.state === SUB_STATE.PENDING) {\r\n          return (\r\n            <Popconfirm\r\n              title=\"Do you want to cancel this request?\"\r\n              okText=\"Yes\"\r\n              cancelText=\"No\"\r\n              className={styles.cancelBtn}\r\n              onConfirm={() => cancelSubscription(record.id)}\r\n            >\r\n              Cancel\r\n            </Popconfirm>\r\n          );\r\n        } else {\r\n          return <div>N/A</div>;\r\n        }\r\n      }\r\n    }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    getStudentSub();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n  return (\r\n    <Spin spinning={loading}>\r\n      <Button className={styles.reload} onClick={getStudentSub} icon={<ReloadOutlined />}>\r\n        Reload\r\n      </Button>\r\n      <Table columns={columns} dataSource={studentSub} pagination={false} rowKey=\"id\" />\r\n    </Spin>\r\n  );\r\n}\r\n","import React, { useState, useContext } from 'react';\r\nimport styles from './ExtendSubscription.module.css';\r\nimport { Card, Row, Col, Divider, Button, Popconfirm } from 'antd';\r\nimport { PRICE_PER_MIN, SUB_DISCOUNT_RATE, SUB_TIER } from '../../lib/constants';\r\nimport Normal from '../../assets/normal.png';\r\nimport Silver from '../../assets/silver.png';\r\nimport Gold from '../../assets/gold.png';\r\nimport Platium from '../../assets/platium.png';\r\nimport axios from '../../lib/utils/axiosConfig';\r\nimport { AccountContext } from '../../context/AccountContext';\r\n\r\nexport default function ExtendSubscription() {\r\n  const [purchaseLoading, setPurchaseLoading] = useState(false);\r\n  const { account } = useContext(AccountContext);\r\n  const createPurchase = async (duration, tier) => {\r\n    setPurchaseLoading(true);\r\n    try {\r\n      await axios.post('/subscriptions', {\r\n        duration: duration * 60 * 1000,\r\n        studentId: account.student.id,\r\n        tier: tier\r\n      });\r\n      setPurchaseLoading(false);\r\n    } catch (error) {\r\n      setPurchaseLoading(false);\r\n      alert(error.response.data.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.extendSub}>\r\n      <Row gutter={24}>\r\n        <Col span={6}>\r\n          <Card>\r\n            <div className={styles.extendSubContent}>\r\n              <div className={styles.subTier}>Normal</div>\r\n              <div className={styles.extendDuration}>60 minutes</div>\r\n              <Divider />\r\n              <img className={styles.tierImage} src={Normal} alt=\"\" draggable=\"false\" />\r\n              <div className={styles.extendPrice}>\r\n                {Number(60 * PRICE_PER_MIN * SUB_DISCOUNT_RATE.NORMAL).toFixed(2)}$\r\n              </div>\r\n              <Popconfirm\r\n                placement=\"top\"\r\n                title=\"Do you want to create purchase request?\"\r\n                onConfirm={() => createPurchase(60, SUB_TIER.NORMAL)}\r\n                okText=\"Yes\"\r\n                cancelText=\"No\"\r\n              >\r\n                <Button type=\"primary\" shape=\"round\" loading={purchaseLoading}>\r\n                  Purchase\r\n                </Button>\r\n              </Popconfirm>\r\n            </div>\r\n          </Card>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Card>\r\n            <div className={styles.extendSubContent}>\r\n              <div className={styles.subTier}>Silver</div>\r\n              <div className={styles.extendDuration}>120 minutes</div>\r\n              <Divider />\r\n              <img className={styles.tierImage} src={Silver} alt=\"\" draggable=\"false\" />\r\n              <div className={styles.extendPrice}>\r\n                {Number(120 * PRICE_PER_MIN * SUB_DISCOUNT_RATE.SILVER).toFixed(2)}${' '}\r\n                <span className={styles.extendSave}>(Save 15%)</span>\r\n              </div>\r\n              <Popconfirm\r\n                placement=\"top\"\r\n                title=\"Do you want to create purchase request?\"\r\n                onConfirm={() => createPurchase(120, SUB_TIER.SILVER)}\r\n                okText=\"Yes\"\r\n                cancelText=\"No\"\r\n              >\r\n                <Button type=\"primary\" shape=\"round\" loading={purchaseLoading}>\r\n                  Purchase\r\n                </Button>\r\n              </Popconfirm>\r\n            </div>\r\n          </Card>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Card>\r\n            <div className={styles.extendSubContent}>\r\n              <div className={styles.subTier}>Gold</div>\r\n              <div className={styles.extendDuration}>480 minutes</div>\r\n              <Divider />\r\n              <img className={styles.tierImage} src={Gold} alt=\"\" draggable=\"false\" />\r\n              <div className={styles.extendPrice}>\r\n                {Number(480 * PRICE_PER_MIN * SUB_DISCOUNT_RATE.GOLD).toFixed(2)}${' '}\r\n                <span className={styles.extendSave}>(Save 25%)</span>\r\n              </div>\r\n              <Popconfirm\r\n                placement=\"top\"\r\n                title=\"Do you want to create purchase request?\"\r\n                onConfirm={() => createPurchase(480, SUB_TIER.GOLD)}\r\n                okText=\"Yes\"\r\n                cancelText=\"No\"\r\n              >\r\n                <Button type=\"primary\" shape=\"round\" loading={purchaseLoading}>\r\n                  Purchase\r\n                </Button>\r\n              </Popconfirm>\r\n            </div>\r\n          </Card>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Card>\r\n            <div className={styles.extendSubContent}>\r\n              <div className={styles.subTier}>Platium</div>\r\n              <div className={styles.extendDuration}>720 minutes</div>\r\n              <Divider />\r\n              <img className={styles.tierImage} src={Platium} alt=\"\" draggable=\"false\" />\r\n              <div className={styles.extendPrice}>\r\n                {Number(720 * PRICE_PER_MIN * SUB_DISCOUNT_RATE.PLATIUM).toFixed(2)}${' '}\r\n                <span className={styles.extendSave}>(Save 35%)</span>\r\n              </div>\r\n              <Popconfirm\r\n                placement=\"top\"\r\n                title=\"Do you want to create purchase request?\"\r\n                onConfirm={() => createPurchase(720, SUB_TIER.PLATIUM)}\r\n                okText=\"Yes\"\r\n                cancelText=\"No\"\r\n              >\r\n                <Button type=\"primary\" shape=\"round\" loading={purchaseLoading}>\r\n                  Purchase\r\n                </Button>\r\n              </Popconfirm>\r\n            </div>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport styles from './Subscriptions.module.css';\r\nimport { HistoryOutlined, CreditCardOutlined } from '@ant-design/icons';\r\nimport { Tabs } from 'antd';\r\nimport SubscriptionHistory from './SubscriptionHistory';\r\nimport ExtendSubscription from './ExtendSubscription';\r\n\r\nconst { TabPane } = Tabs;\r\n\r\nexport default function Subscriptions() {\r\n\r\n  return (\r\n    <div className={styles.subscriptions}>\r\n      <Tabs\r\n        defaultActiveKey=\"extend\"\r\n        type=\"card\"\r\n      >\r\n        <TabPane\r\n          tab={\r\n            <span>\r\n              <CreditCardOutlined />\r\n              Extend subscriptions\r\n            </span>\r\n          }\r\n          key=\"extend\"\r\n        >\r\n          <ExtendSubscription />\r\n        </TabPane>\r\n        <TabPane\r\n          tab={\r\n            <span>\r\n              <HistoryOutlined />\r\n              Subscriptions history\r\n            </span>\r\n          }\r\n          key=\"history\"\r\n          className={styles.tabPaneHistory}\r\n        >\r\n          <SubscriptionHistory />\r\n        </TabPane>\r\n      </Tabs>\r\n    </div>\r\n  )\r\n}\r\n","import io from 'socket.io-client';\r\nimport Cookies from 'universal-cookie';\r\nconst cookies = new Cookies();\r\n\r\nconst accessToken = cookies.get('access_token');\r\n\r\nconst socketURL = process.env.NODE_ENV === 'development'\r\n? 'https://192.168.0.164:3003'\r\n: 'https://mirage-video-call.herokuapp.com' ;\r\n\r\nconst socket = io(`${socketURL}?token=${accessToken}`);\r\n\r\nexport default socket;\r\n","import _ from 'lodash';\r\n\r\nclass Emitter {\r\n  constructor() {\r\n    this.events = {};\r\n  }\r\n\r\n  emit(event, ...args) {\r\n    if (this.events[event]) {\r\n      this.events[event].forEach(fn => fn(...args));\r\n    }\r\n    return this;\r\n  }\r\n\r\n  on(event, fn) {\r\n    if (this.events[event]) this.events[event].push(fn);\r\n    else this.events[event] = [fn];\r\n    return this;\r\n  }\r\n\r\n  off(event, fn) {\r\n    if (event && _.isFunction(fn)) {\r\n      const listeners = this.events[event];\r\n      const index = listeners.findIndex(_fn => _fn === fn);\r\n      listeners.splice(index, 1);\r\n    } else this.events[event] = [];\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default Emitter;\r\n","import _ from 'lodash';\r\nimport Emitter from './Emitter';\r\n\r\n/**\r\n * Manage all media devices\r\n */\r\nclass MediaDevice extends Emitter {\r\n  /**\r\n   * Start media devices and send stream\r\n   */\r\n  start() {\r\n    const constraints = {\r\n      // video: {\r\n      //   facingMode: 'user',\r\n      //   height: { min: 360, ideal: 720, max: 1080 }\r\n      // },\r\n      audio: {\r\n        echoCancellation: false\r\n      }\r\n    };\r\n\r\n    navigator.mediaDevices\r\n      .getUserMedia(constraints)\r\n      .then(stream => {\r\n        this.stream = stream;\r\n        this.emit('stream', stream);\r\n      })\r\n      .catch(err => {\r\n        if (err instanceof DOMException) {\r\n          alert('Cannot open webcam and/or microphone');\r\n        } else {\r\n          alert(err);\r\n        }\r\n      });\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Turn on/off a device\r\n   * @param {String} type - Type of the device\r\n   * @param {Boolean} [on] - State of the device\r\n   */\r\n  toggle(type, on) {\r\n    const len = arguments.length;\r\n    if (this.stream) {\r\n      this.stream[`get${type}Tracks`]().forEach(track => {\r\n        const state = len === 2 ? on : !track.enabled;\r\n        _.set(track, 'enabled', state);\r\n      });\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Stop all media track of devices\r\n   */\r\n  stop() {\r\n    if (this.stream) {\r\n      this.stream.getTracks().forEach(track => track.stop());\r\n    }\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default MediaDevice;\r\n","import MediaDevice from './MediaDevice';\r\nimport Emitter from './Emitter';\r\nimport socket from './socket';\r\n\r\nconst PC_CONFIG = { iceServers: [{ urls: ['stun:stun.l.google.com:19302'] }] };\r\n\r\nclass PeerConnection extends Emitter {\r\n  /**\r\n   * Create a PeerConnection.\r\n   * @param {String} friendID - ID of the friend you want to call.\r\n   */\r\n  constructor(friendID) {\r\n    super();\r\n    this.pc = new RTCPeerConnection(PC_CONFIG);\r\n    this.pc.onicecandidate = event =>\r\n      socket.emit('call', {\r\n        to: this.friendID,\r\n        candidate: event.candidate\r\n      });\r\n    this.pc.ontrack = event => this.emit('peerStream', event.streams[0]);\r\n\r\n    this.mediaDevice = new MediaDevice();\r\n    this.friendID = friendID;\r\n  }\r\n\r\n  /**\r\n   * Starting the call\r\n   * @param {Boolean} isCaller\r\n   * @param {Object} config - configuration for the call {audio: boolean, video: boolean}\r\n   */\r\n  start(isCaller, config) {\r\n    this.mediaDevice\r\n      .on('stream', stream => {\r\n        stream.getTracks().forEach(track => {\r\n          this.pc.addTrack(track, stream);\r\n        });\r\n        this.emit('localStream', stream);\r\n        if (isCaller) socket.emit('request', { to: this.friendID });\r\n        else this.createOffer();\r\n      })\r\n      .start(config);\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Stop the call\r\n   * @param {Boolean} isStarter\r\n   */\r\n  stop(isStarter) {\r\n    if (isStarter) {\r\n      socket.emit('end', { to: this.friendID });\r\n    }\r\n    this.mediaDevice.stop();\r\n    if (this.pc) {\r\n      this.pc.close();\r\n    }\r\n    this.pc = null;\r\n    this.off();\r\n    return this;\r\n  }\r\n\r\n  createOffer() {\r\n    this.pc\r\n      .createOffer()\r\n      .then(this.getDescription.bind(this))\r\n      .catch(err => alert(err));\r\n    return this;\r\n  }\r\n\r\n  createAnswer() {\r\n    this.pc\r\n      .createAnswer()\r\n      .then(this.getDescription.bind(this))\r\n      .catch(err => alert(err));\r\n    return this;\r\n  }\r\n\r\n  getDescription(desc) {\r\n    this.pc.setLocalDescription(desc);\r\n    socket.emit('call', { to: this.friendID, sdp: desc });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @param {Object} sdp - Session description\r\n   */\r\n  setRemoteDescription(sdp) {\r\n    const rtcSdp = new RTCSessionDescription(sdp);\r\n    this.pc.setRemoteDescription(rtcSdp);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @param {Object} candidate - ICE Candidate\r\n   */\r\n  addIceCandidate(candidate) {\r\n    if (candidate) {\r\n      const iceCandidate = new RTCIceCandidate(candidate);\r\n      this.pc.addIceCandidate(iceCandidate);\r\n    }\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default PeerConnection;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { useBeforeunload } from 'react-beforeunload';\r\nimport { Button } from 'antd';\r\nimport { VideoCameraFilled, AudioFilled, StopOutlined, AudioMutedOutlined, VideoCameraAddOutlined } from '@ant-design/icons';\r\nimport styles from './CallWindow.module.css';\r\nimport Timer from 'react-compound-timer';\r\n\r\nexport default function CallWindow({ peerSrc, localSrc, config, mediaDevice, endCall, callWindow }) {\r\n  const peerVideo = useRef(null);\r\n  const localVideo = useRef(null);\r\n  const [video, setVideo] = useState(config.video);\r\n  const [audio, setAudio] = useState(config.audio);\r\n  useBeforeunload((e) => {\r\n    e.preventDefault();\r\n    endCall(true)\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (peerVideo.current && peerSrc) peerVideo.current.srcObject = peerSrc;\r\n    if (localVideo.current && localSrc) localVideo.current.srcObject = localSrc;\r\n  }, [localSrc, peerSrc]);\r\n\r\n  useEffect(() => {\r\n    if (mediaDevice) {\r\n      mediaDevice.toggle('Video', video);\r\n      mediaDevice.toggle('Audio', audio);\r\n    }\r\n  });\r\n\r\n  /**\r\n   * Turn on/off a media device\r\n   * @param {String} deviceType - Type of the device eg: Video, Audio\r\n   */\r\n  const toggleMediaDevice = (deviceType) => {\r\n    if (deviceType === 'video') {\r\n      setVideo(!video);\r\n      mediaDevice.toggle('Video');\r\n    }\r\n    if (deviceType === 'audio') {\r\n      setAudio(!audio);\r\n      mediaDevice.toggle('Audio');\r\n    }\r\n  };\r\n  return (\r\n    callWindow ? (\r\n      <div className={styles.callWindowWrapper}>\r\n        <div className={styles.callWindow}>\r\n          <div className={styles.videoScreenContainer}>\r\n            <video className={styles.videoScreen} ref={localVideo} autoPlay muted />\r\n            {peerSrc && <video className={styles.videoScreen} ref={peerVideo} autoPlay />}\r\n          </div>\r\n          {peerSrc && (\r\n            <div>\r\n              <Timer\r\n                formatValue={(value) => `${(value < 10 ? `0${value}` : value)}`}\r\n                lastUnit=\"h\"\r\n                className={styles.callTime}\r\n              >\r\n                <Timer.Hours />:\r\n            <Timer.Minutes />:\r\n            <Timer.Seconds />\r\n              </Timer>\r\n            </div>\r\n\r\n          )}\r\n          <div className={styles.videoControl}>\r\n            <Button\r\n              shape=\"circle\"\r\n              type={video ? \"primary\" : \"danger\"}\r\n              icon={video ? <VideoCameraFilled /> : <VideoCameraAddOutlined />}\r\n              onClick={() => toggleMediaDevice('video')}\r\n              size=\"large\"\r\n            />\r\n            <Button\r\n              shape=\"circle\"\r\n              type={audio ? \"primary\" : \"danger\"}\r\n              icon={audio ? <AudioFilled /> : <AudioMutedOutlined />}\r\n              onClick={() => toggleMediaDevice('audio')}\r\n              size=\"large\"\r\n            />\r\n            <Button\r\n              shape=\"circle\"\r\n              type=\"danger\"\r\n              onClick={() => endCall(true)}\r\n              icon={<StopOutlined />}\r\n              size=\"large\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    ) : null\r\n\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { useBeforeunload } from 'react-beforeunload';\r\nimport { Button, Avatar } from 'antd';\r\nimport { VideoCameraFilled, AudioFilled, StopOutlined, UserOutlined } from '@ant-design/icons';\r\nimport styles from './CallModal.module.css';\r\nimport { serverUrl } from '../lib/constants';\r\n\r\nexport default function CallModal({ callModal, callFrom, startCall, rejectCall }) {\r\n  useBeforeunload((e) => {\r\n    // e.preventDefault();\r\n    rejectCall();\r\n  });\r\n  const acceptWithVideo = (video) => {\r\n    const config = { audio: true, video };\r\n    return () => startCall(false, callFrom.username, config);\r\n  };\r\n  return (\r\n    callModal ?\r\n      (\r\n        <div className={styles.callModalWrapper}>\r\n        <div className={styles.callModal}>\r\n          <div className={styles.caller}>\r\n            {(callFrom.student && callFrom.student.avatar) ?\r\n              <Avatar src={serverUrl + callFrom.student.avatar} size={50} />\r\n              : <Avatar icon={<UserOutlined />} size={50} />}\r\n            {(callFrom.student) && (\r\n              <span className={styles.callerTxt}>{`${callFrom.student.name} is calling...`}</span>\r\n            )}\r\n          </div>\r\n\r\n          <div className={styles.controlBtns}>\r\n            <Button\r\n              shape=\"round\"\r\n              type=\"primary\"\r\n              icon={<VideoCameraFilled />}\r\n              onClick={acceptWithVideo(true)}\r\n              size=\"large\"\r\n            >\r\n              Video call\r\n            </Button>\r\n            <Button\r\n              shape=\"round\"\r\n              type=\"primary\"\r\n              icon={<AudioFilled />}\r\n              onClick={acceptWithVideo(false)}\r\n              size=\"large\"\r\n            >\r\n              Audio call\r\n            </Button>\r\n            <Button\r\n              shape=\"round\"\r\n              type=\"danger\"\r\n              onClick={rejectCall}\r\n              icon={<StopOutlined />}\r\n              size=\"large\"\r\n            >\r\n              Reject call\r\n            </Button>\r\n          </div>\r\n        </div>\r\n        </div>\r\n      ) : null\r\n  )\r\n}\r\n","import React from 'react';\r\nimport styles from './TutorCard.module.css';\r\nimport { Card, Avatar, Tooltip, Tag, Rate } from 'antd';\r\nimport { VideoCameraFilled, AudioFilled, UserOutlined, CheckCircleFilled, MinusCircleFilled } from '@ant-design/icons';\r\nimport { serverUrl, STATUS } from '../../lib/constants';\r\nimport axios from '../../lib/utils/axiosConfig';\r\n\r\nexport default function TutorCard({ callWithVideo, openDetailModal, item, openReviewlModal, getPreferences }) {\r\n  const removeFav = async () => {\r\n    try {\r\n      await axios.delete('/preferences/' + item.preId);\r\n      getPreferences();\r\n    } catch (error) {\r\n      console.error(error.response);\r\n    }\r\n  };\r\n  return (\r\n    <Card\r\n      actions={[\r\n        <Tooltip title=\"Video call\">\r\n          <VideoCameraFilled onClick={() => callWithVideo(true, item)} />\r\n        </Tooltip>,\r\n        <Tooltip title=\"Audio call\">\r\n          <AudioFilled onClick={() => callWithVideo(false, item)} />\r\n        </Tooltip>,\r\n        <Tooltip title=\"Profile\">\r\n          <UserOutlined onClick={() => openDetailModal(item)} />\r\n        </Tooltip>\r\n      ]}\r\n    >\r\n      <div className={styles.tutorCard}>\r\n        <div className={styles.tutorInfo}>\r\n          <div>\r\n            {item.profile.avatar ? (\r\n              <Avatar src={serverUrl + item.profile.avatar} size={80} />\r\n            ) : (\r\n              <Avatar icon={<UserOutlined />} size={80} />\r\n            )}\r\n          </div>\r\n\r\n          <div className={styles.tutorInfoDetail}>\r\n            <div className={styles.tutorName}>\r\n              {item.profile.name}\r\n              {item.status === STATUS.AVAILABLE ? (\r\n                <Tooltip title=\"Online\">\r\n                  <CheckCircleFilled style={{ color: '#52c41a', fontSize: '12px', marginLeft: '3px' }} />\r\n                </Tooltip>\r\n              ) : null}\r\n              {item.status === STATUS.BUSY ? (\r\n                <Tooltip title=\"Busy\">\r\n                  <MinusCircleFilled style={{ color: 'red', fontSize: '12px', marginLeft: '3px' }} />\r\n                </Tooltip>\r\n              ) : null}\r\n              {item.status === STATUS.OFFLINE ? (\r\n                <Tooltip title=\"Offline\">\r\n                  <MinusCircleFilled style={{ color: 'gray', fontSize: '12px', marginLeft: '3px' }} />\r\n                </Tooltip>\r\n              ) : null}\r\n            </div>\r\n            <div>\r\n              {item.profile.certificates && JSON.parse(item.profile.certificates.length) > 0 ? (\r\n                <Tag>Teaching certificates</Tag>\r\n              ) : null}\r\n            </div>\r\n            {item.profile.review ? (\r\n              <Tooltip placement=\"bottomRight\" title=\"Click to show reviews\">\r\n                <div onClick={() => openReviewlModal(item)} className={styles.reviewWrapper}>\r\n                  <Rate\r\n                    disabled\r\n                    defaultValue={Number((Math.round(item.profile.review.avg * 2) / 2).toFixed(1))}\r\n                    allowHalf\r\n                  />\r\n                  <span className={styles.reviewCount}>/ {item.profile.review.count} review(s)</span>\r\n                </div>\r\n              </Tooltip>\r\n            ) : (\r\n              <p className={styles.viewReviews} onClick={() => openReviewlModal(item)}>\r\n                View reviews\r\n              </p>\r\n            )}\r\n            {item.isFav ? (\r\n              <div className={styles.removeFav} onClick={() => removeFav()}>\r\n                Remove\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n        </div>\r\n        <p>{item.profile.introduction}</p>\r\n      </div>\r\n    </Card>\r\n  );\r\n}\r\n","import React, { useEffect, useRef } from 'react';\r\nimport 'video.js/dist/video-js.css';\r\nimport videojs from 'video.js';\r\nimport { serverUrl } from '../../lib/constants';\r\n\r\nexport default function VideoPlayer({ username }) {\r\n  const player = useRef(null);\r\n  const videoNode = useRef(null);\r\n  const videoJsOptions = {\r\n    controls: true,\r\n    width: 513,\r\n    height: 360,\r\n    fluid: false,\r\n    sources: [{\r\n      src: serverUrl + 'api/tutors/video/' + username,\r\n      type: 'video/webm'\r\n    }],\r\n    autoplay: false\r\n  };\r\n  useEffect(() => {\r\n    player.current = videojs(videoNode.current, videoJsOptions, () => {\r\n      const version_info = 'Using video.js ' + videojs.VERSION\r\n      videojs.log(version_info);\r\n    });\r\n    return () => {\r\n      if (player.current) {\r\n        player.current.dispose();\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n  return (\r\n    <div data-vjs-player>\r\n      <video id=\"myVideo\" ref={node => videoNode.current = node} className=\"video-js vjs-default-skin vjs-big-play-centered\" playsInline></video>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport styles from './TutorDetailModal.module.css';\r\nimport { serverUrl } from '../../lib/constants';\r\nimport VideoPlayer from '../admin/VideoPlayer';\r\nimport { FileDoneOutlined } from '@ant-design/icons';\r\nimport { Tag, Modal, Descriptions } from 'antd';\r\n\r\nexport default function TutorDetailModal({ selected, showDetailModal, setShowDetailModal }) {\r\n  return (\r\n    <Modal\r\n      title={selected ? selected.profile.name : null}\r\n      visible={showDetailModal}\r\n      onCancel={() => setShowDetailModal(false)}\r\n      footer={null}\r\n      width=\"600px\"\r\n      destroyOnClose\r\n      bodyStyle={{ height: \"600px\", overflow: \"auto\" }}\r\n    >\r\n      <div>\r\n        <div>\r\n          {selected ? (\r\n            <div>\r\n              <div className={styles.detailWrapper}>\r\n                {selected.profile.video ? <div className={styles.videoWrapper}><VideoPlayer username={selected.username} /></div> : null}\r\n                {selected.profile.introduction}\r\n              </div>\r\n              <div className={styles.detailWrapper}>\r\n                <Descriptions bordered size=\"small\" column={1} title=\"Teaching preferences\">\r\n                  <Descriptions.Item label=\"Student level\">{selected.profile.student_lvl}</Descriptions.Item>\r\n                  <Descriptions.Item label=\"Student type\">{selected.profile.student_type}</Descriptions.Item>\r\n                  <Descriptions.Item label=\"Accent\">{selected.profile.accent}</Descriptions.Item>\r\n                  <Descriptions.Item label=\"Fluency\">{selected.profile.fluency}</Descriptions.Item>\r\n                  <Descriptions.Item label=\"Tutor styles\"> {selected.profile.teaching_styles ? JSON.parse(selected.profile.teaching_styles).map(style => { return <Tag key={style}>{style}</Tag> }) : null}</Descriptions.Item>\r\n                  <Descriptions.Item label=\"Specialities\">{selected.profile.specialities ? JSON.parse(selected.profile.specialities).map(speciality => { return <Tag key={speciality}>{speciality}</Tag> }) : null}</Descriptions.Item>\r\n                </Descriptions>\r\n              </div>\r\n              <div className={styles.detailWrapper}>\r\n                <Descriptions bordered size=\"small\" column={1} title=\"CV\">\r\n                  <Descriptions.Item label=\"Interests\">{selected.profile.interests}</Descriptions.Item>\r\n                  <Descriptions.Item label=\"Education\">{selected.profile.education}</Descriptions.Item>\r\n                  <Descriptions.Item label=\"Experience\">{selected.profile.experience}</Descriptions.Item>\r\n                  <Descriptions.Item label=\"Profession\">{selected.profile.profession}</Descriptions.Item>\r\n                  <Descriptions.Item label=\"Reason\">{selected.profile.reason}</Descriptions.Item>\r\n                </Descriptions>\r\n              </div>\r\n              <div className={styles.detailWrapper}>\r\n                <p className={styles.detailTitle}>Certificates</p>\r\n                <div className={styles.uploadedCert}>\r\n                  {selected.profile.certificates ? (\r\n                    JSON.parse(selected.profile.certificates).map((cert, index) => {\r\n                      return (<a key={index} href={serverUrl + cert.path}><FileDoneOutlined />{cert.originalname}</a>);\r\n                    })\r\n                  ) : null}\r\n                </div>\r\n              </div>\r\n\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  )\r\n}\r\n","\r\nexport const getReviewCount = (reviews) => {\r\n  let count0 = 0;\r\n  let count1 = 0;\r\n  let count2 = 0;\r\n  let count3 = 0;\r\n  let count4 = 0;\r\n  let count5 = 0;\r\n  const total = reviews.length;\r\n  reviews.forEach(review => {\r\n    switch (review.rating) {\r\n      case 0: \r\n        count0++;\r\n        break;\r\n      case 1:\r\n        count1++;\r\n        break;\r\n      case 2:\r\n        count2++;\r\n        break;\r\n      case 3:\r\n        count3++;\r\n        break;\r\n      case 4:\r\n        count4++;\r\n        break;\r\n      case 5:\r\n        count5++;\r\n        break;\r\n      default: \r\n        break;\r\n    }\r\n  })\r\n  return {\r\n    rating0: (count0 / total) * 100,\r\n    rating1: (count1 / total) * 100,\r\n    rating2: (count2 / total) * 100,\r\n    rating3: (count3 / total) * 100,\r\n    rating4: (count4 / total) * 100,\r\n    rating5: (count5 / total) * 100,\r\n  }\r\n}\r\n","import React from 'react';\r\nimport styles from './ReviewSummary.module.css';\r\nimport { UserOutlined } from '@ant-design/icons';\r\nimport { Progress, Rate } from 'antd';\r\n\r\nexport default function ReviewSummary({ reviews }) {\r\n  return (\r\n    <div className={styles.reviewSummary}>\r\n      <div className={styles.reviewOverall}>\r\n        <div className={styles.reviewAvg}>{Number(reviews.avg).toFixed(1)}</div>\r\n        <Rate disabled defaultValue={Number((Math.round(reviews.avg * 2) / 2).toFixed(1))} allowHalf style={{ fontSize: '15px' }} />\r\n        <div className={styles.reviewNumber}><UserOutlined style={{ marginRight: '3px' }} />{reviews.count}</div>\r\n      </div>\r\n      <div className={styles.ratingCountList}>\r\n        <div className={styles.ratingCount}>\r\n          <span className={styles.rating}>5</span><Progress showInfo={false} percent={reviews.ratingCount.rating5} />\r\n        </div>\r\n        <div className={styles.ratingCount}>\r\n          <span className={styles.rating}>4</span><Progress showInfo={false} percent={reviews.ratingCount.rating4} />\r\n        </div>\r\n        <div className={styles.ratingCount}>\r\n          <span className={styles.rating}>3</span><Progress showInfo={false} percent={reviews.ratingCount.rating3} />\r\n        </div>\r\n        <div className={styles.ratingCount}>\r\n          <span className={styles.rating}>2</span><Progress showInfo={false} percent={reviews.ratingCount.rating2} />\r\n        </div>\r\n        <div className={styles.ratingCount}>\r\n          <span className={styles.rating}>1</span><Progress showInfo={false} percent={reviews.ratingCount.rating1} />\r\n        </div>\r\n        <div className={styles.ratingCount}>\r\n          <span className={styles.rating}>0</span><Progress showInfo={false} percent={reviews.ratingCount.rating0} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useContext } from 'react';\r\nimport moment from 'moment';\r\nimport { Comment, Avatar, Rate, Button } from 'antd';\r\nimport { serverUrl } from '../lib/constants';\r\nimport { UserOutlined } from '@ant-design/icons';\r\nimport { AccountContext } from '../context/AccountContext';\r\nimport { ROLES } from '../lib/constants';\r\nimport axios from '../lib/utils/axiosConfig';\r\n\r\nexport default function Review({ review, getTutorReview }) {\r\n  const { account } = useContext(AccountContext);\r\n\r\n  const deleteReview = async id => {\r\n    try {\r\n      await axios.delete('/reviews/' + id);\r\n      getTutorReview();\r\n    } catch (error) {\r\n      alert(error.response.data.message);\r\n    }\r\n  };\r\n\r\n  let deleteBtn = null;\r\n  if (account.role === ROLES.ADMIN || (account.role === ROLES.STUDENT && account.student.id === review.studentId)) {\r\n    deleteBtn = (\r\n      <Button type=\"link\" danger onClick={() => deleteReview(review.id)}>\r\n        Delete\r\n      </Button>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Comment\r\n      author={review.student.name}\r\n      avatar={\r\n        review.student.avatar ? <Avatar src={serverUrl + review.student.avatar} /> : <Avatar icon={<UserOutlined />} />\r\n      }\r\n      content={<p>{review.comment}</p>}\r\n      datetime={moment(review.createdAt).fromNow()}\r\n      actions={[<Rate disabled defaultValue={review.rating} style={{ fontSize: '12px' }} />, deleteBtn]}\r\n    />\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Modal, List } from 'antd';\r\nimport axios from '../../lib/utils/axiosConfig';\r\nimport { getReviewCount } from '../../lib/utils/getReviewCount';\r\nimport ReviewSummary from '../../components/ReviewSummary';\r\nimport Review from '../../components/Review';\r\n\r\nexport default function TutorReviewModal({ selected, showReviewModal, setShowReviewModal }) {\r\n  const [reviews, setReviews] = useState(null);\r\n\r\n  const getTutorReview = async () => {\r\n    try {\r\n      const result = await axios.get('/reviews/' + selected.profile.id);\r\n      const ratingCount = getReviewCount(result.data.reviews);\r\n      setReviews({ ...result.data, ratingCount });\r\n    } catch (error) {\r\n      console.log(error.response);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (selected) {\r\n      getTutorReview();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [selected]);\r\n\r\n  return (\r\n    <Modal\r\n      title={selected ? selected.profile.name : null}\r\n      visible={showReviewModal}\r\n      onCancel={() => setShowReviewModal(false)}\r\n      footer={null}\r\n      width=\"600px\"\r\n      destroyOnClose\r\n      bodyStyle={{ maxHeight: '600px', overflow: 'auto' }}\r\n    >\r\n      {reviews ? (\r\n        <div>\r\n          <ReviewSummary reviews={reviews} />\r\n          <List\r\n            itemLayout=\"horizontal\"\r\n            dataSource={reviews.reviews}\r\n            renderItem={item => (\r\n              <List.Item>\r\n                <Review review={item} getTutorReview={getTutorReview} />\r\n              </List.Item>\r\n            )}\r\n          />\r\n        </div>\r\n      ) : null}\r\n    </Modal>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useContext } from 'react';\r\nimport { List, Tabs, Input } from 'antd';\r\nimport { RiseOutlined, LikeOutlined, TeamOutlined } from '@ant-design/icons';\r\nimport styles from './TutorList.module.css';\r\nimport TutorCard from './TutorCard';\r\nimport TutorDetailModal from './TutorDetailModal';\r\nimport TutorReviewModal from './TutorReviewModal';\r\nimport { getTimeFromMs } from '../../lib/utils/formatTime';\r\nimport { STATUS, PREFERENCE_TYPES } from '../../lib/constants';\r\nimport { AccountContext } from '../../context/AccountContext';\r\nimport axios from '../../lib/utils/axiosConfig';\r\nconst { TabPane } = Tabs;\r\nconst { Search } = Input;\r\n\r\nexport default function TutorList({ startCall, onlineTutors, setTutor, remainingTime }) {\r\n  const [showDetailModal, setShowDetailModal] = useState(false);\r\n  const [selected, setSelected] = useState(null);\r\n  const [showReviewModal, setShowReviewModal] = useState(false);\r\n  const [tutors, setTutors] = useState([]);\r\n  const [keyword, setKeyword] = useState('');\r\n  const [preferences, setPreferences] = useState([]);\r\n  const { account } = useContext(AccountContext);\r\n  const [favorites, setFavorites] = useState([]);\r\n  const [recommend, setRecommend] = useState([]);\r\n\r\n  useEffect(() => {\r\n    let valid = false;\r\n    const filterTutorsByKeyword = tutors => {\r\n      if (keyword !== '') {\r\n        const filteredTutors = [];\r\n        tutors.forEach(tutor => {\r\n          valid = false;\r\n          if (tutor.profile.name.toLowerCase().includes(keyword)) {\r\n            valid = true;\r\n          }\r\n          if (tutor.profile.specialities.toLowerCase().includes(keyword)) {\r\n            valid = true;\r\n          }\r\n          if (tutor.profile.teaching_styles.toLowerCase().includes(keyword)) {\r\n            valid = true;\r\n          }\r\n          if (tutor.profile.accent.toLowerCase().includes(keyword)) {\r\n            valid = true;\r\n          }\r\n          if (tutor.profile.student_lvl.toLowerCase().includes(keyword)) {\r\n            valid = true;\r\n          }\r\n          if (tutor.profile.student_type.toLowerCase().includes(keyword)) {\r\n            valid = true;\r\n          }\r\n          if (tutor.profile.interests.toLowerCase().includes(keyword)) {\r\n            valid = true;\r\n          }\r\n          if (tutor.profile.fluency.toLowerCase().includes(keyword)) {\r\n            valid = true;\r\n          }\r\n          if (valid) {\r\n            filteredTutors.push(tutor);\r\n          }\r\n        });\r\n        return filteredTutors;\r\n      } else {\r\n        return tutors;\r\n      }\r\n    };\r\n    setTutors(filterTutorsByKeyword(onlineTutors));\r\n  }, [onlineTutors, keyword]);\r\n\r\n  useEffect(() => {\r\n    getPreferences();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const favoriteTutors = [];\r\n    preferences.forEach(pre => {\r\n      if (pre.type === PREFERENCE_TYPES.FAVORITE) {\r\n        const favTutor = {\r\n          preId: pre.id,\r\n          profile: pre.tutor,\r\n          status: STATUS.OFFLINE,\r\n          username: pre.tutor.account.username,\r\n          isFav: true\r\n        };\r\n        onlineTutors.forEach(tutor => {\r\n          if (tutor.profile.id === pre.tutorId) {\r\n            favTutor.status = tutor.status;\r\n          }\r\n        });\r\n        favoriteTutors.push(favTutor);\r\n      }\r\n    });\r\n    setFavorites(favoriteTutors);\r\n  }, [onlineTutors, preferences]);\r\n\r\n  useEffect(() => {\r\n    const recommendTutors = [];\r\n    preferences.forEach(pre => {\r\n      if (pre.type === PREFERENCE_TYPES.RECOMMEND) {\r\n        const recTutor = {\r\n          profile: pre.tutor,\r\n          status: STATUS.OFFLINE,\r\n          username: pre.tutor.account.username\r\n        };\r\n        onlineTutors.forEach(tutor => {\r\n          if (tutor.profile.id === pre.tutorId) {\r\n            recTutor.status = tutor.status;\r\n          }\r\n        });\r\n        recommendTutors.push(recTutor);\r\n      }\r\n    });\r\n    setRecommend(recommendTutors);\r\n  }, [onlineTutors, preferences]);\r\n\r\n  const getPreferences = async () => {\r\n    try {\r\n      const result = await axios.get('/preferences?studentId=' + account.student.id);\r\n      setPreferences(result.data.preferences);\r\n    } catch (error) {\r\n      alert(error.response.data.message);\r\n    }\r\n  };\r\n\r\n  const callWithVideo = (video, user) => {\r\n    if (user.status === STATUS.AVAILABLE) {\r\n      setTutor(user.profile);\r\n      const config = { audio: true, video };\r\n      startCall(true, user.username, config);\r\n    } else {\r\n      alert('This tutor is not available at the moment!');\r\n    }\r\n  };\r\n\r\n  const openDetailModal = tutor => {\r\n    setSelected(tutor);\r\n    setShowDetailModal(true);\r\n  };\r\n\r\n  const openReviewlModal = tutor => {\r\n    setSelected(tutor);\r\n    setShowReviewModal(true);\r\n  };\r\n\r\n  const searchTutors = value => {\r\n    setKeyword(value.toLowerCase());\r\n  };\r\n\r\n  return (\r\n    <div className={styles.tutorList}>\r\n      <TutorDetailModal selected={selected} showDetailModal={showDetailModal} setShowDetailModal={setShowDetailModal} />\r\n      <TutorReviewModal selected={selected} showReviewModal={showReviewModal} setShowReviewModal={setShowReviewModal} />\r\n      <div className={styles.searchTool}>\r\n        <div>\r\n          <span className={styles.remainingTimeTitle}>Remaining time: </span>\r\n          {getTimeFromMs(remainingTime)}\r\n        </div>\r\n        <div className={styles.searchBar}>\r\n          <Search placeholder=\"Search name, interests, subjects, ... \" enterButton onSearch={searchTutors} />\r\n        </div>\r\n      </div>\r\n      <Tabs defaultActiveKey=\"online\" type=\"card\">\r\n        <TabPane\r\n          tab={\r\n            <span>\r\n              <TeamOutlined />\r\n              Online\r\n            </span>\r\n          }\r\n          key=\"online\"\r\n          className={styles.tabPane}\r\n        >\r\n          <List\r\n            grid={{ gutter: 16, column: 3 }}\r\n            dataSource={tutors}\r\n            renderItem={item => (\r\n              <List.Item>\r\n                <TutorCard\r\n                  item={item}\r\n                  callWithVideo={callWithVideo}\r\n                  openDetailModal={openDetailModal}\r\n                  openReviewlModal={openReviewlModal}\r\n                />\r\n              </List.Item>\r\n            )}\r\n          />\r\n        </TabPane>\r\n        <TabPane\r\n          tab={\r\n            <span>\r\n              <LikeOutlined />\r\n              Favorite\r\n            </span>\r\n          }\r\n          key=\"favorite\"\r\n          className={styles.tabPane}\r\n        >\r\n          <List\r\n            grid={{ gutter: 16, column: 3 }}\r\n            dataSource={favorites}\r\n            renderItem={item => (\r\n              <List.Item>\r\n                <TutorCard\r\n                  item={item}\r\n                  callWithVideo={callWithVideo}\r\n                  openDetailModal={openDetailModal}\r\n                  openReviewlModal={openReviewlModal}\r\n                  getPreferences={getPreferences}\r\n                />\r\n              </List.Item>\r\n            )}\r\n          />\r\n        </TabPane>\r\n        <TabPane\r\n          tab={\r\n            <span>\r\n              <RiseOutlined />\r\n              Recommend\r\n            </span>\r\n          }\r\n          key=\"recommend\"\r\n          className={styles.tabPane}\r\n        >\r\n          <List\r\n            grid={{ gutter: 16, column: 3 }}\r\n            dataSource={recommend}\r\n            renderItem={item => (\r\n              <List.Item>\r\n                <TutorCard\r\n                  item={item}\r\n                  callWithVideo={callWithVideo}\r\n                  openDetailModal={openDetailModal}\r\n                  openReviewlModal={openReviewlModal}\r\n                />\r\n              </List.Item>\r\n            )}\r\n          />\r\n        </TabPane>\r\n      </Tabs>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useContext } from 'react';\r\nimport { Modal, Form, Rate, Input, Button, Alert } from 'antd';\r\nimport { AccountContext } from '../../context/AccountContext';\r\nimport axios from '../../lib/utils/axiosConfig';\r\n\r\nexport default function FeedbackModal({ showFeedback, setShowFeedBack, tutor }) {\r\n  const [loading, setLoading] = useState(false);\r\n  const [sucessAlert, setSuccessAlert] = useState(false);\r\n  const [errorAlert, setErrorAlert] = useState(false);\r\n  const { account } = useContext(AccountContext);\r\n\r\n  const layout = {\r\n    labelCol: { span: 4 },\r\n    wrapperCol: { span: 16 }\r\n  };\r\n\r\n  const tailLayout = {\r\n    wrapperCol: { offset: 4, span: 16 }\r\n  };\r\n\r\n  const onSubmit = async values => {\r\n    try {\r\n      setLoading(true);\r\n      const data = {\r\n        ...values,\r\n        studentId: account.student.id,\r\n        tutorId: tutor.id\r\n      };\r\n      await axios.post('/reviews/', data);\r\n      setLoading(false);\r\n      setSuccessAlert(true);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setErrorAlert(false);\r\n      alert(error.response.data.message);\r\n    }\r\n  };\r\n\r\n  const closeFeedback = () => {\r\n    setShowFeedBack(false);\r\n    setSuccessAlert(false);\r\n    setErrorAlert(false);\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      visible={showFeedback}\r\n      destroyOnClose\r\n      onCancel={closeFeedback}\r\n      footer={false}\r\n      title=\"Feedback about this tutor\"\r\n    >\r\n      {sucessAlert ? <Alert message=\"Review submitted\" type=\"success\" showIcon /> : null}\r\n      {errorAlert ? <Alert message=\"Fail to submit, please try again\" type=\"error\" showIcon /> : null}\r\n      <Form {...layout} onFinish={onSubmit}>\r\n        <Form.Item name=\"rating\" label=\"Rating\">\r\n          <Rate allowClear={true} defaultValue={0} />\r\n        </Form.Item>\r\n        <Form.Item\r\n          name=\"comment\"\r\n          label=\"Comment\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Please input your comment'\r\n            }\r\n          ]}\r\n        >\r\n          <Input.TextArea placeholder=\"Share your experience\" />\r\n        </Form.Item>\r\n        <Form.Item {...tailLayout}>\r\n          <Button type=\"primary\" htmlType=\"submit\" loading={loading}>\r\n            Submit\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport socket from '../lib/socket';\r\nimport { SOCKET_EVENTS, ROLES } from '../lib/constants';\r\nimport PeerConnection from '../lib/PeerConnection';\r\nimport _ from 'lodash';\r\nimport CallWindow from './CallWindow';\r\nimport CallModal from './CallModal';\r\nimport TutorList from '../pages/student/TutorList';\r\nimport styles from './VideoCall.module.css';\r\nimport { getTimeFromMs } from '../lib/utils/formatTime';\r\nimport endCallImg from '../assets/endcall.png';\r\nimport { Modal, Button, Popconfirm } from 'antd';\r\nimport { StarOutlined, LikeOutlined } from '@ant-design/icons';\r\nimport FeedbackModal from '../pages/student/FeedbackModal';\r\nimport axios from '../lib/utils/axiosConfig';\r\nimport { PREFERENCE_TYPES } from '../lib/constants';\r\n\r\nexport default function VideoCall({ account, remainingTime, getStudent }) {\r\n  // video call\r\n  const [callWindow, setCallWindow] = useState(false);\r\n  const [callModal, setCallModal] = useState(false);\r\n  const [callFrom, setCallFrom] = useState({});\r\n  const [localSrc, setLocalSrc] = useState(null);\r\n  const [peerSrc, setPeerSrc] = useState(null);\r\n  const pcRef = useRef({});\r\n  const configRef = useRef(null);\r\n  // record videos when calling\r\n  const peerRecorder = useRef(null);\r\n  const localRecorder = useRef(null);\r\n  // call timer\r\n  const start = useRef(0);\r\n  const end = useRef(0);\r\n  // tutor called with student\r\n  const [onlineTutors, setOnlineTutors] = useState([]);\r\n  const tutor = useRef(null);\r\n\r\n  // control after call modal like report, review, ...\r\n  const [afterCallModal, setAfterCallModal] = useState(false);\r\n  const [showFeedback, setShowFeedback] = useState(false);\r\n\r\n  useEffect(() => {\r\n    //TODO check time with student, refresh after each call to get new time\r\n    socket\r\n      .on(SOCKET_EVENTS.INIT, () => {})\r\n      .on(SOCKET_EVENTS.REQUEST, ({ from }) => {\r\n        setCallModal(true);\r\n        setCallFrom(from);\r\n      })\r\n      .on(SOCKET_EVENTS.CALL, data => {\r\n        if (data.sdp) {\r\n          pcRef.current.setRemoteDescription(data.sdp);\r\n          if (data.sdp.type === 'offer') pcRef.current.createAnswer();\r\n          if (account.role === ROLES.TUTOR) {\r\n            // record stream from tutor side\r\n            socket.emit(SOCKET_EVENTS.SAVE_VIDEOS);\r\n          }\r\n        } else pcRef.current.addIceCandidate(data.candidate);\r\n        start.current = Date.now();\r\n\r\n        // auto end call if student runs out of time\r\n        if (account.role === ROLES.STUDENT) {\r\n          setTimeout(() => endCall(true), remainingTime);\r\n        }\r\n      })\r\n      .on(SOCKET_EVENTS.END, () => endCall(false))\r\n      .on(SOCKET_EVENTS.GET_ONLINE_TUTORS, data => {\r\n        setOnlineTutors(data.online);\r\n      })\r\n      .emit(SOCKET_EVENTS.INIT, { account });\r\n    return () => {\r\n      rejectCall();\r\n      socket.emit(SOCKET_EVENTS.LEAVE);\r\n      socket\r\n        .off(SOCKET_EVENTS.INIT)\r\n        .off(SOCKET_EVENTS.REQUEST)\r\n        .off(SOCKET_EVENTS.CALL)\r\n        .off(SOCKET_EVENTS.END)\r\n        .off(SOCKET_EVENTS.GET_ONLINE_TUTORS);\r\n    };\r\n\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [account]);\r\n\r\n  useEffect(() => {\r\n    if (peerSrc && account.role === ROLES.TUTOR) {\r\n      peerRecorder.current = new MediaRecorder(peerSrc, { mimeType: 'video/webm; codecs=vp9' });\r\n      peerRecorder.current.ondataavailable = e => {\r\n        if (e.data && e.data.size > 0) {\r\n          socket.emit(SOCKET_EVENTS.RECORD_STUDENT, e.data);\r\n        }\r\n      };\r\n      peerRecorder.current.start(1000);\r\n    }\r\n  }, [peerSrc, account.role]);\r\n\r\n  useEffect(() => {\r\n    if (localSrc && account.role === ROLES.TUTOR) {\r\n      localRecorder.current = new MediaRecorder(localSrc, { mimeType: 'video/webm; codecs=vp9' });\r\n      localRecorder.current.ondataavailable = e => {\r\n        if (e.data && e.data.size > 0) {\r\n          socket.emit(SOCKET_EVENTS.RECORD_TUTOR, e.data);\r\n        }\r\n      };\r\n      localRecorder.current.start(1000);\r\n    }\r\n  }, [localSrc, account.role]);\r\n\r\n  const setTutor = tutorProfile => {\r\n    tutor.current = tutorProfile;\r\n  };\r\n\r\n  const startCall = (isCaller, friendID, config) => {\r\n    configRef.current = config;\r\n    pcRef.current = new PeerConnection(friendID)\r\n      .on('localStream', src => {\r\n        if (!isCaller) {\r\n          setCallModal(false);\r\n        }\r\n        setCallWindow(true);\r\n        setLocalSrc(src);\r\n      })\r\n      .on('peerStream', src => setPeerSrc(src))\r\n      .start(isCaller, config);\r\n  };\r\n\r\n  const rejectCall = () => {\r\n    socket.emit(SOCKET_EVENTS.END, { to: callFrom.username });\r\n    setCallModal(false);\r\n  };\r\n\r\n  const endCall = async isStarter => {\r\n    if (account.role === ROLES.TUTOR) {\r\n      socket.emit(SOCKET_EVENTS.CREATE_CALL_HISTORY, callFrom.student);\r\n    }\r\n    if (account.role === ROLES.STUDENT) {\r\n      socket.emit(SOCKET_EVENTS.CREATE_CALL_HISTORY, account.student);\r\n      // refresh remaining time\r\n      getStudent();\r\n    }\r\n    end.current = Date.now();\r\n    if (start.current > 0) {\r\n      setAfterCallModal(true);\r\n    }\r\n    if (_.isFunction(pcRef.current.stop)) {\r\n      pcRef.current.stop(isStarter);\r\n    }\r\n    await stopRecording();\r\n    pcRef.current = {};\r\n    configRef.current = null;\r\n    setCallModal(false);\r\n    setCallWindow(false);\r\n    setLocalSrc(null);\r\n    setPeerSrc(null);\r\n  };\r\n\r\n  const stopRecording = async e => {\r\n    if (account.role === ROLES.STUDENT) {\r\n      if (peerRecorder.current && peerSrc) {\r\n        peerRecorder.current.stop();\r\n      }\r\n      if (localRecorder.current && localSrc) {\r\n        localRecorder.current.stop();\r\n      }\r\n    }\r\n  };\r\n\r\n  const closeAfterCall = () => {\r\n    setAfterCallModal(false);\r\n    start.current = 0;\r\n    end.current = 0;\r\n  };\r\n\r\n  let renderCallFrom = null;\r\n  let btnHolder = null;\r\n  if (callFrom.student) {\r\n    renderCallFrom = callFrom.student.name;\r\n  } else if (tutor.current) {\r\n    renderCallFrom = tutor.current.name;\r\n    btnHolder = (\r\n      <div>\r\n        <Popconfirm title=\"Add this tutor to your favorites?\" okText=\"Yes\" cancelText=\"No\" onConfirm={() => addToFav()}>\r\n          <Button shape=\"round\" type=\"primary\" icon={<LikeOutlined />} size=\"small\">\r\n            Favorite\r\n          </Button>\r\n        </Popconfirm>\r\n\r\n        <Button shape=\"round\" icon={<StarOutlined />} size=\"small\" onClick={() => setShowFeedback(true)}>\r\n          Feedback\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const addToFav = async () => {\r\n    try {\r\n      await axios.post('/preferences', {\r\n        studentId: account.student.id,\r\n        tutorId: tutor.current.id,\r\n        type: PREFERENCE_TYPES.FAVORITE\r\n      });\r\n      alert('Tutor is added to your favorites');\r\n    } catch (error) {\r\n      alert(error.response.data.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.videoCall}>\r\n      <FeedbackModal tutor={tutor.current} showFeedback={showFeedback} setShowFeedBack={setShowFeedback} />\r\n      {account.role === ROLES.STUDENT && !callWindow && (\r\n        <TutorList\r\n          onlineTutors={onlineTutors}\r\n          startCall={startCall}\r\n          setTutor={setTutor}\r\n          remainingTime={remainingTime}\r\n        />\r\n      )}\r\n      {!_.isEmpty(configRef.current) && (\r\n        <CallWindow\r\n          callWindow={callWindow}\r\n          localSrc={localSrc}\r\n          peerSrc={peerSrc}\r\n          config={configRef.current}\r\n          mediaDevice={pcRef.current.mediaDevice}\r\n          endCall={endCall}\r\n        />\r\n      )}\r\n      <CallModal callModal={callModal} startCall={startCall} rejectCall={rejectCall} callFrom={callFrom} />\r\n      <Modal\r\n        visible={afterCallModal}\r\n        title=\"Call ended\"\r\n        onCancel={closeAfterCall}\r\n        destroyOnClose\r\n        footer={false}\r\n        width=\"600px\"\r\n      >\r\n        <div className={styles.afterCall}>\r\n          <img className={styles.endCallImg} src={endCallImg} draggable={false} alt=\"\" />\r\n          <div>\r\n            <div className={styles.endUser}>Call with {renderCallFrom}</div>\r\n            <div className={styles.endDuration}>Duration: {getTimeFromMs(end.current - start.current)}</div>\r\n            <div className={styles.btnHolder}>{btnHolder}</div>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useState, useEffect } from 'react';\r\nimport VideoCall from '../../components/VideoCall';\r\nimport { AccountContext } from '../../context/AccountContext';\r\nimport styles from './Study.module.css';\r\nimport Unverify from '../../assets/unverify.png';\r\nimport Timeout from '../../assets/timeout.png';\r\nimport axios from '../../lib/utils/axiosConfig';\r\n\r\nexport default function Study() {\r\n  const { account } = useContext(AccountContext);\r\n  const [student, setStudent] = useState(null);\r\n\r\n  useEffect(() => {\r\n    getStudent();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [account]);\r\n\r\n  const getStudent = async () => {\r\n    try {\r\n      const result = await axios.get('/students/' + account.student.id);\r\n      setStudent(result.data.student);\r\n    } catch (error) {\r\n      alert(error.response.data.message);\r\n    }\r\n  };\r\n\r\n  let renderStudy = null;\r\n  if (account && account.verification) {\r\n    if (student && student.remaining_time > 0) {\r\n      renderStudy = <VideoCall account={account} remainingTime={student.remaining_time} getStudent={getStudent} />;\r\n    } else {\r\n      renderStudy = (\r\n        <div className={styles.unverify}>\r\n          <img className={styles.timeoutImg} src={Timeout} alt=\"\" draggable=\"false\" />\r\n          <div className={styles.unverifyTxt}>\r\n            <p>Sorry, you have run out of study time!</p>\r\n            <p>Please subscribe to continue.</p>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  } else {\r\n    renderStudy = (\r\n      <div className={styles.unverify}>\r\n        <img className={styles.unverifyImg} src={Unverify} alt=\"\" draggable=\"false\" />\r\n        <div className={styles.unverifyTxt}>\r\n          <p>You are almost ready!</p>\r\n          <p>Verify your account to start now!</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return <div className={styles.study}>{renderStudy}</div>;\r\n}\r\n","import React, { useEffect, useRef } from 'react';\r\nimport 'video.js/dist/video-js.css';\r\nimport videojs from 'video.js';\r\n\r\nexport default function CallRecordPlayer({ url }) {\r\n  const player = useRef(null);\r\n  const videoNode = useRef(null);\r\n  const videoJsOptions = {\r\n    controls: true,\r\n    width: 513,\r\n    height: 360,\r\n    fluid: false,\r\n    sources: [{\r\n      src: url,\r\n      type: 'video/webm'\r\n    }],\r\n    autoplay: false\r\n  };\r\n  useEffect(() => {\r\n    player.current = videojs(videoNode.current, videoJsOptions, () => {\r\n      const version_info = 'Using video.js ' + videojs.VERSION\r\n      videojs.log(version_info);\r\n    });\r\n    return () => {\r\n      if (player.current) {\r\n        player.current.dispose();\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [url]);\r\n  return (\r\n    <div data-vjs-player>\r\n      <video id=\"myVideo\" ref={node => videoNode.current = node} className=\"video-js vjs-default-skin vjs-big-play-centered\" playsInline></video>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Modal } from 'antd';\r\nimport 'video.js/dist/video-js.css';\r\nimport { serverUrl } from '../../lib/constants';\r\nimport styles from './StudentCallDetailModal.module.css';\r\nimport moment from 'moment';\r\nimport CallRecordPlayer from '../../components/CallRecordPlayer';\r\n\r\nexport default function StudentCallDetailModal({ showCallDetail, selected, setShowCallDetail }) {\r\n  return selected ? (\r\n    <Modal\r\n      title={\"Tutor recorded video - \" + moment(selected.createdAt).format('MMMM Do YYYY, h:mm:ss a')}\r\n      visible={showCallDetail}\r\n      onCancel={() => setShowCallDetail(false)}\r\n      footer={null}\r\n      width=\"600px\"\r\n      destroyOnClose\r\n      bodyStyle={{ height: \"450px\", overflow: \"auto\" }}\r\n    >\r\n      <div className={styles.recordHolder}>\r\n        <CallRecordPlayer\r\n          url={`${serverUrl}api/call-histories/${selected.id}/tutorVideo`}\r\n        />\r\n      </div>\r\n    </Modal>\r\n  ) : null\r\n}","import React, { useState, useContext } from 'react';\r\nimport { Modal, Form, Button, Input, Select } from 'antd';\r\nimport { REPORT_REASONS, ROLES } from '../lib/constants';\r\nimport { AccountContext } from '../context/AccountContext';\r\nimport axios from '../lib/utils/axiosConfig';\r\n\r\nconst { Option } = Select;\r\n\r\nexport default function Report({ showReport, selected, setShowReport }) {\r\n  const [loading, setLoading] = useState(false);\r\n  const { account } = useContext(AccountContext);\r\n  const layout = {\r\n    labelCol: { span: 6 },\r\n    wrapperCol: { span: 16 }\r\n  };\r\n\r\n  const tailLayout = {\r\n    wrapperCol: { offset: 6, span: 16 }\r\n  };\r\n\r\n  const onSubmit = async values => {\r\n    let accountId = null;\r\n    if (account.role === ROLES.STUDENT) {\r\n      accountId = selected.tutor.account.id;\r\n    } else {\r\n      accountId = selected.student.account.id;\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      await axios.post('/reports', {\r\n        accountId,\r\n        callId: selected.id,\r\n        description: values.description,\r\n        reason: values.reason\r\n      });\r\n      setLoading(false);\r\n      alert('Report submitted');\r\n      setShowReport(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return selected ? (\r\n    <Modal\r\n      title=\"Report to Admin\"\r\n      visible={showReport}\r\n      onCancel={() => setShowReport(false)}\r\n      footer={null}\r\n      width=\"600px\"\r\n      destroyOnClose\r\n      bodyStyle={{ height: '300px', overflow: 'auto' }}\r\n    >\r\n      <Form {...layout} onFinish={onSubmit}>\r\n        <Form.Item name=\"reason\" label=\"Reason\" rules={[{ required: true, message: 'Please select a reason' }]}>\r\n          <Select placeholder=\"Select a reason\">\r\n            {REPORT_REASONS.map(reason => {\r\n              return (\r\n                <Option value={reason} key={reason}>\r\n                  {reason}\r\n                </Option>\r\n              );\r\n            })}\r\n          </Select>\r\n        </Form.Item>\r\n        <Form.Item name=\"description\" label=\"Description\">\r\n          <Input.TextArea\r\n            autoSize={{ minRows: 4 }}\r\n            placeholder=\"Please specify your reasons or provide extra information (E.g timestamp)\"\r\n          />\r\n        </Form.Item>\r\n        <Form.Item {...tailLayout}>\r\n          <Button type=\"primary\" danger htmlType=\"submit\" loading={loading}>\r\n            Submit\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n    </Modal>\r\n  ) : null;\r\n}\r\n","import React, { useEffect, useState, useContext } from 'react';\r\nimport styles from './StudentCallHistories.module.css';\r\nimport { Table, Spin, Button, Input } from 'antd';\r\nimport axios from '../../lib/utils/axiosConfig';\r\nimport { AccountContext } from '../../context/AccountContext';\r\nimport moment from 'moment';\r\nimport { getTimeFromMs } from '../../lib/utils/formatTime';\r\nimport StudentCallDetailModal from './StudentCallDetailModal';\r\nimport ReportModal from '../../components/ReportModal';\r\nconst { Search } = Input;\r\n\r\nexport default function StudentCallHistories() {\r\n  const { account } = useContext(AccountContext);\r\n  const [history, setHistory] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [showCallDetail, setShowCallDetail] = useState(false);\r\n  const [selected, setSelected] = useState(null);\r\n  const [searchKey, setSearchKey] = useState('');\r\n  const [showReport, setShowReport] = useState(false);\r\n\r\n  const getHistory = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await axios.get('/call-histories?studentId=' + account.student.id + '&search=' + searchKey);\r\n      setHistory(result.data.callHistories);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      alert(error.response.data.message);\r\n      setLoading(false);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    getHistory();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [searchKey]);\r\n  const onViewRecord = record => {\r\n    setSelected(record);\r\n    setShowCallDetail(true);\r\n  };\r\n\r\n  const onReportRecord = record => {\r\n    setSelected(record);\r\n    setShowReport(true);\r\n  };\r\n\r\n  const searchCall = value => {\r\n    setSearchKey(value);\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Date',\r\n      dataIndex: 'createdAt',\r\n      render: createdAt => {\r\n        return <div>{moment(createdAt).format('MMMM Do YYYY, h:mm:ss a')}</div>;\r\n      }\r\n    },\r\n    {\r\n      title: 'Tutor',\r\n      dataIndex: 'tutor',\r\n      render: tutor => {\r\n        return <div>{tutor.name}</div>;\r\n      }\r\n    },\r\n    {\r\n      title: 'Username',\r\n      dataIndex: 'tutor',\r\n      render: tutor => {\r\n        return <div>{tutor.account.username}</div>;\r\n      }\r\n    },\r\n    {\r\n      title: 'Duration',\r\n      dataIndex: 'duration',\r\n      render: duration => {\r\n        return <div>{getTimeFromMs(duration)}</div>;\r\n      }\r\n    },\r\n    {\r\n      title: 'Action',\r\n      render: (text, record) => {\r\n        return (\r\n          <div>\r\n            <Button className={styles.viewRecordBtn} onClick={() => onViewRecord(record)}>\r\n              View record\r\n            </Button>\r\n            <Button danger onClick={() => onReportRecord(record)}>\r\n              Report\r\n            </Button>\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <div className={styles.StudentCallHistories}>\r\n      <StudentCallDetailModal\r\n        setShowCallDetail={setShowCallDetail}\r\n        showCallDetail={showCallDetail}\r\n        selected={selected}\r\n      />\r\n      <ReportModal setShowReport={setShowReport} showReport={showReport} selected={selected} />\r\n      <div className={styles.searchBar}>\r\n        <Search placeholder=\"Search for username, name\" onSearch={searchCall} enterButton />\r\n      </div>\r\n      <Spin spinning={loading}>\r\n        <Table columns={columns} dataSource={history} pagination={false} rowKey=\"id\" />\r\n      </Spin>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useState } from 'react';\r\nimport { AccountContext } from '../../context/AccountContext';\r\nimport { Layout, Avatar, Dropdown, Menu } from 'antd';\r\nimport FooterContent from '../../components/FooterContent';\r\nimport styles from './Student.module.css';\r\nimport { UserOutlined, DownOutlined, KeyOutlined, LogoutOutlined, DollarCircleOutlined, ContactsOutlined, VideoCameraOutlined, HistoryOutlined } from '@ant-design/icons';\r\nimport ForgotPasswordModal from '../../components/ForgotPasswordModal';\r\nimport ChangePasswordModal from '../../components/ChangePasswordModal';\r\nimport { Switch, Route, Link } from 'react-router-dom';\r\nimport SideBarLogo from '../../components/SideBarLogo';\r\nimport Profile from './Profile';\r\nimport Subscriptions from './Subscriptions';\r\nimport Study from './Study';\r\nimport { serverUrl } from '../../lib/constants';\r\nimport StudentCallHistories from './StudentCallHistories';\r\n\r\nconst { Header, Content, Sider } = Layout;\r\n\r\nexport default function Student(props) {\r\n  const { account, onSignOut } = useContext(AccountContext);\r\n  const [isChangePass, setIsChangePass] = useState(false);\r\n  const [isForgotPass, setIsForgotPass] = useState(false);\r\n  const { location } = props;\r\n  const userAvatar = (account.student && account.student.avatar) ?\r\n    <Avatar style={{ margin: \"10px\" }} src={serverUrl + account.student.avatar} /> :\r\n    <Avatar style={{ margin: \"10px\" }} icon={<UserOutlined />} />\r\n  const userMenu = (\r\n    <Menu>\r\n      <Menu.Item onClick={() => setIsChangePass(true)}>\r\n        <KeyOutlined /><span>Change password</span>\r\n      </Menu.Item>\r\n      <Menu.Item onClick={onSignOut}>\r\n        <LogoutOutlined /><span>Sign out</span>\r\n      </Menu.Item>\r\n    </Menu>\r\n  );\r\n  return (\r\n    <Layout style={{ minHeight: '100vh' }}>\r\n      <ForgotPasswordModal isVisible={isForgotPass} onClose={() => setIsForgotPass(false)} />\r\n      <ChangePasswordModal\r\n        isVisible={isChangePass}\r\n        onClose={() => setIsChangePass(false)}\r\n        onForgot={() => setIsForgotPass(true)}\r\n      />\r\n      <Sider collapsible>\r\n        <SideBarLogo collapsed={false} />\r\n        <Menu theme=\"dark\" defaultSelectedKeys={[\"/student/video-call\"]} mode=\"inline\" selectedKeys={[location.pathname]}>\r\n          <Menu.Item key=\"/student/study\">\r\n            <VideoCameraOutlined /><Link to=\"/student/study\"><span>Study</span></Link>\r\n          </Menu.Item>\r\n          <Menu.Item key=\"/student\">\r\n            <ContactsOutlined /><Link to=\"/student\"><span>Profile</span></Link>\r\n          </Menu.Item>\r\n          <Menu.Item key=\"/student/subscriptions\">\r\n            <DollarCircleOutlined /><Link to=\"/student/subscriptions\"><span>Subscriptions</span></Link>\r\n          </Menu.Item>\r\n          <Menu.Item key=\"/student/call-histories\">\r\n            <HistoryOutlined /><Link to=\"/student/call-histories\"><span>Call histories</span></Link>\r\n          </Menu.Item>\r\n        </Menu>\r\n      </Sider>\r\n      <Layout>\r\n        <Header>\r\n          <div className={styles.userControl}>\r\n            Hello, {account.username}\r\n            <Dropdown overlay={userMenu} placement=\"bottomLeft\">\r\n              <div>\r\n                {userAvatar}<DownOutlined className={styles.dropDownIcon} />\r\n              </div>\r\n            </Dropdown>\r\n          </div>\r\n        </Header>\r\n        <Content>\r\n          <Switch>\r\n            <Route path=\"/student/subscriptions\" component={Subscriptions} />\r\n            <Route path=\"/student/study\" component={Study} />\r\n            <Route path=\"/student/call-histories\" component={StudentCallHistories} />\r\n            <Route path=\"/student\" component={Profile} exact />\r\n          </Switch>\r\n        </Content>\r\n        <FooterContent />\r\n      </Layout>\r\n    </Layout>\r\n  )\r\n}\r\n","import React, { useEffect, useRef, useState, useContext } from 'react';\r\nimport 'video.js/dist/video-js.css';\r\nimport videojs from 'video.js';\r\nimport 'webrtc-adapter';\r\nimport RecordRTC from 'recordrtc';\r\nimport 'videojs-record/dist/css/videojs.record.css';\r\nimport 'videojs-record/dist/videojs.record.js';\r\nimport { Button } from 'antd';\r\nimport axios from '../../lib/utils/axiosConfig';\r\nimport { AccountContext } from '../../context/AccountContext';\r\nimport styles from './VideoRecorder.module.css';\r\n\r\nconst videoJsOptions = {\r\n  controls: true,\r\n  width: 480,\r\n  height: 360,\r\n  fluid: false,\r\n  plugins: {\r\n    record: {\r\n      audio: true,\r\n      video: true,\r\n      maxLength: 120,\r\n      debug: true\r\n    }\r\n  }\r\n};\r\n\r\nexport default function VideoRecorder({ cancelRecord, existedVideo, refreshProfile }) {\r\n  const player = useRef(null);\r\n  const videoNode = useRef(null);\r\n  const [recorded, setRecorded] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const { account } = useContext(AccountContext);\r\n  const uploadVideo = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const formData = new FormData();\r\n      formData.append('video', recorded, 'introVideo.webm');\r\n      await axios('/tutors/video/' + account.username, {\r\n        data: formData,\r\n        method: 'POST'\r\n      });\r\n      cancelRecord();\r\n      refreshProfile();\r\n    } catch (error) {\r\n      alert(error.response.data.message);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    player.current = videojs(videoNode.current, videoJsOptions, () => {\r\n      const version_info =\r\n        'Using video.js ' +\r\n        videojs.VERSION +\r\n        ' with videojs-record ' +\r\n        videojs.getPluginVersion('record') +\r\n        ' and recordrtc ' +\r\n        RecordRTC.version;\r\n      videojs.log(version_info);\r\n    });\r\n    player.current.on('deviceReady', () => {\r\n      console.log('device is ready!');\r\n    });\r\n    player.current.on('startRecord', () => {\r\n      console.log('started recording!');\r\n    });\r\n\r\n    // user completed recording and stream is available\r\n    player.current.on('finishRecord', () => {\r\n      // recordedData is a blob object containing the recorded data that\r\n      // can be downloaded by the user, stored on server etc.\r\n      setRecorded(player.current.recordedData);\r\n    });\r\n\r\n    // error handling\r\n    player.current.on('error', (element, error) => {\r\n      console.warn(error);\r\n    });\r\n\r\n    player.current.on('deviceError', () => {\r\n      console.error('device error:', player.current.deviceErrorCode);\r\n    });\r\n    return () => {\r\n      if (player.current) {\r\n        player.current.dispose();\r\n      }\r\n    };\r\n  }, []);\r\n  return (\r\n    <div>\r\n      <div data-vjs-player>\r\n        <video\r\n          id=\"myVideoRecord\"\r\n          ref={node => (videoNode.current = node)}\r\n          className=\"video-js vjs-default-skin\"\r\n          playsInline\r\n        ></video>\r\n      </div>\r\n      {existedVideo ? (\r\n        <div className={styles.btnWrapper}>\r\n          <Button className={styles.videoBtn} onClick={uploadVideo} loading={loading}>\r\n            Upload\r\n          </Button>\r\n          <Button className={styles.videoBtn} type=\"danger\" onClick={cancelRecord}>\r\n            Cancel\r\n          </Button>\r\n        </div>\r\n      ) : (\r\n        <div className={styles.btnWrapperNoCancel}>\r\n          <Button className={styles.videoBtn} onClick={uploadVideo} loading={loading}>\r\n            Upload\r\n          </Button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useRef, useContext } from 'react';\r\nimport 'video.js/dist/video-js.css';\r\nimport videojs from 'video.js';\r\nimport { Button } from 'antd';\r\nimport { serverUrl } from '../../lib/constants';\r\nimport { AccountContext } from '../../context/AccountContext';\r\nimport styles from './VideoPlayer.module.css';\r\n\r\nexport default function VideoPlayer({ recordNew }) {\r\n  const player = useRef(null);\r\n  const videoNode = useRef(null);\r\n  const { account } = useContext(AccountContext);\r\n  const videoJsOptions = {\r\n    controls: true,\r\n    width: 480,\r\n    height: 360,\r\n    fluid: false,\r\n    sources: [{\r\n      src: serverUrl + 'api/tutors/video/' + account.username,\r\n      type: 'video/webm'\r\n    }],\r\n    autoplay: false\r\n  };\r\n  useEffect(() => {\r\n    player.current = videojs(videoNode.current, videoJsOptions, () => {\r\n      const version_info = 'Using video.js ' + videojs.VERSION\r\n      videojs.log(version_info);\r\n    });\r\n    return () => {\r\n      if (player.current) {\r\n        player.current.dispose();\r\n      }\r\n    }\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n  return (\r\n    <div>\r\n      <div data-vjs-player>\r\n        <video id=\"myVideo\" ref={node => videoNode.current = node} className=\"video-js vjs-default-skin vjs-big-play-centered\" playsInline></video>\r\n      </div>\r\n      <div className={styles.btnWrapper} >\r\n       <Button onClick={recordNew}>Record new video</Button>\r\n      </div>\r\n    </div >\r\n  );\r\n}\r\n","import React, { useEffect, useState, useContext } from 'react';\r\nimport styles from './Profile.module.css';\r\nimport axios from '../../lib/utils/axiosConfig';\r\nimport { AccountContext } from '../../context/AccountContext';\r\nimport { UserOutlined, UploadOutlined, FileTextOutlined, FileImageOutlined, FileDoneOutlined } from '@ant-design/icons';\r\nimport { Avatar, Collapse, Form, Input, DatePicker, Button, Select, Upload, Alert, Tag, Spin } from 'antd';\r\nimport preferences from '../../lib/preferences';\r\nimport moment from 'moment';\r\nimport { serverUrl } from '../../lib/constants';\r\nimport VideoRecorder from './VideoRecorder';\r\nimport VideoPlayer from './VideoPlayer';\r\nimport { PROFILE_STATUS } from '../../lib/constants';\r\nconst { Panel } = Collapse;\r\nconst { Option } = Select;\r\n\r\nexport default function Profile() {\r\n  const [loadingProfile, setLoadingProfile] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [profile, setProfile] = useState({ account: { email: null } });\r\n  const { account } = useContext(AccountContext);\r\n  const [fileList, setFileList] = useState([]);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [loadingAva, setLoadingAva] = useState(false);\r\n  const [avatar, setAvatar] = useState([]);\r\n  const [isRecord, setIsRecord] = useState(true);\r\n\r\n  const getTutorProfile = async () => {\r\n    try {\r\n      setLoadingProfile(true);\r\n      const result = await axios.get('/tutors/' + account.tutor.id);\r\n      setProfile(result.data.tutor);\r\n      if (result.data.tutor.video) {\r\n        setIsRecord(false);\r\n      }\r\n      setLoadingProfile(false);\r\n    } catch (error) {\r\n      setLoadingProfile(true);\r\n      alert(error.response.data.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getTutorProfile();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const avatarProfile =\r\n    profile && profile.avatar ? (\r\n      <Avatar src={serverUrl + profile.avatar} size={100} />\r\n    ) : (\r\n      <Avatar icon={<UserOutlined />} size={100} />\r\n    );\r\n\r\n  const formItemLayout = {\r\n    labelCol: {\r\n      xs: { span: 24 },\r\n      sm: { span: 5 }\r\n    },\r\n    wrapperCol: {\r\n      xs: { span: 24 },\r\n      sm: { span: 16 }\r\n    }\r\n  };\r\n  const uploadBtnLayout = {\r\n    wrapperCol: { offset: 5, span: 16 }\r\n  };\r\n  const onSubmit = async values => {\r\n    try {\r\n      setLoading(true);\r\n      await axios.put('/tutors/' + profile.id, values);\r\n      getTutorProfile();\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      alert(error.response.data.message);\r\n    }\r\n  };\r\n  const uploadProps = {\r\n    onRemove: file => {\r\n      const index = fileList.indexOf(file);\r\n      const newFileList = fileList.slice();\r\n      newFileList.splice(index, 1);\r\n      setFileList(newFileList);\r\n    },\r\n    beforeUpload: file => {\r\n      const isPdfOrWord =\r\n        file.type === 'application/pdf' ||\r\n        file.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document';\r\n      if (isPdfOrWord) {\r\n        setFileList([...fileList, file]);\r\n      }\r\n      return false;\r\n    },\r\n    fileList: fileList\r\n  };\r\n  const uploadAvaProps = {\r\n    onRemove: file => {\r\n      setAvatar([]);\r\n    },\r\n    beforeUpload: file => {\r\n      const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\r\n      if (isJpgOrPng) {\r\n        setAvatar([file]);\r\n      }\r\n      return false;\r\n    },\r\n    fileList: avatar\r\n  };\r\n  const handleUpload = async () => {\r\n    try {\r\n      setUploading(true);\r\n      const formData = new FormData();\r\n      fileList.forEach(file => {\r\n        formData.append('certificates', file);\r\n      });\r\n      await axios('/tutors/certificates/' + profile.account.username, {\r\n        method: 'POST',\r\n        data: formData\r\n      });\r\n      await getTutorProfile();\r\n      setUploading(false);\r\n    } catch (error) {\r\n      alert(error.response.data.message);\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  const uploadAvatar = async () => {\r\n    try {\r\n      setLoadingAva(true);\r\n      const formData = new FormData();\r\n      formData.append('avatar', avatar[0]);\r\n      await axios('/tutors/avatar/' + profile.account.username, {\r\n        method: 'POST',\r\n        data: formData\r\n      });\r\n      await getTutorProfile();\r\n      window.location.reload(false);\r\n      setLoadingAva(false);\r\n    } catch (error) {\r\n      setLoadingAva(false);\r\n      alert(error.response.data.message);\r\n    }\r\n  };\r\n\r\n  const resendConfirmation = async () => {\r\n    try {\r\n      await axios.post('/accounts/resend-verify', { email: profile.account.email });\r\n    } catch (error) {\r\n      alert(error.response.data.message);\r\n    }\r\n  };\r\n\r\n  let profileStatus;\r\n  if (profile.profileStatus === PROFILE_STATUS.ACCEPTED) {\r\n    profileStatus = <Alert message=\"Your tutor profile is ready\" type=\"success\" showIcon />;\r\n  } else if (profile.profileStatus === PROFILE_STATUS.PENDING) {\r\n    profileStatus = <Alert message=\"Your tutor profile is being reviewed by Admin\" type=\"info\" showIcon />;\r\n  } else if (profile.profileStatus === PROFILE_STATUS.REJECTED) {\r\n    profileStatus = <Alert message=\"Your tutor profile is rejected, edit now\" type=\"error\" showIcon />;\r\n  }\r\n  return (\r\n    <Spin spinning={loadingProfile}>\r\n      <div className={styles.profile}>\r\n        <div className={styles.accountInfoContainer}>\r\n          {avatarProfile}\r\n          <div className={styles.accountInfo}>\r\n            <p className={styles.name}>{profile.name}</p>\r\n            <p>Email: {profile.account.email}</p>\r\n            {account.verification ? (\r\n              <Tag color=\"success\">Verified</Tag>\r\n            ) : (\r\n              <span>\r\n                <Tag color=\"default\">Unverified</Tag>\r\n                <Button type=\"link\" onClick={resendConfirmation}>\r\n                  Resend confirmation email\r\n                </Button>\r\n              </span>\r\n            )}\r\n            <div className={styles.profileStatus}>{profileStatus}</div>\r\n          </div>\r\n        </div>\r\n        <div className={styles.collapse}>\r\n          {profile.name ? (\r\n            <Form\r\n              {...formItemLayout}\r\n              onFinish={onSubmit}\r\n              initialValues={{\r\n                name: profile.name,\r\n                phone: profile.phone,\r\n                birthdate: profile.birthdate ? moment(profile.birthdate) : undefined,\r\n                address: profile.address,\r\n                interests: profile.interests,\r\n                education: profile.education,\r\n                experience: profile.experience,\r\n                profession: profile.profession,\r\n                student_type: profile.student_type ? profile.student_type : undefined,\r\n                student_lvl: profile.student_lvl ? profile.student_lvl : undefined,\r\n                accent: profile.accent ? profile.accent : undefined,\r\n                fluency: profile.fluency ? profile.fluency : undefined,\r\n                reason: profile.reason,\r\n                specialities: profile.specialities ? JSON.parse(profile.specialities) : undefined,\r\n                introduction: profile.introduction,\r\n                teaching_styles: profile.teaching_styles ? JSON.parse(profile.teaching_styles) : undefined\r\n              }}\r\n            >\r\n              <Collapse defaultActiveKey={['1']}>\r\n                <Panel header=\"Basic info\" key=\"1\">\r\n                  <Form.Item label=\"Name\" name=\"name\" rules={[{ required: true, message: 'Please enter your name' }]}>\r\n                    <Input placeholder=\"Your fullname\" value={profile.name} />\r\n                  </Form.Item>\r\n                  <Form.Item name=\"phone\" label=\"Phone\">\r\n                    <Input placeholder=\"Your phone number (optional)\" />\r\n                  </Form.Item>\r\n                  <Form.Item name=\"birthdate\" label=\"Birthdate\">\r\n                    <DatePicker />\r\n                  </Form.Item>\r\n                  <Form.Item name=\"address\" label=\"Address\">\r\n                    <Input placeholder=\"Where do you from? E.g Hanoi, Vietnam\" />\r\n                  </Form.Item>\r\n                  <Form.Item name=\"avatar\" label=\"Upload avatar\">\r\n                    <Upload {...uploadAvaProps} listType=\"picture-card\">\r\n                      <Button icon={<FileImageOutlined />}>Change avatar</Button>\r\n                    </Upload>\r\n                  </Form.Item>\r\n                  <Form.Item {...uploadBtnLayout}>\r\n                    <Button\r\n                      disabled={avatar.length <= 0}\r\n                      onClick={uploadAvatar}\r\n                      loading={loadingAva}\r\n                      style={{ width: '159px' }}\r\n                      icon={<UploadOutlined />}\r\n                    >\r\n                      Upload avatar\r\n                    </Button>\r\n                  </Form.Item>\r\n                </Panel>\r\n                <Panel header=\"CV\" key=\"2\">\r\n                  <Form.Item name=\"interests\" label=\"Interests\">\r\n                    <Input.TextArea placeholder=\"Share with us everything you want such as interests, hobbies, life experiences\" />\r\n                  </Form.Item>\r\n                  <Form.Item name=\"education\" label=\"Education\">\r\n                    <Input.TextArea placeholder=\"E.g Bachelor of Information Technology\" />\r\n                  </Form.Item>\r\n                  <Form.Item name=\"experience\" label=\"Experience\">\r\n                    <Input.TextArea placeholder=\"Your working experience\" />\r\n                  </Form.Item>\r\n                  <Form.Item name=\"profession\" label=\"Profession\">\r\n                    <Input placeholder=\"Your current or previous jobs\" />\r\n                  </Form.Item>\r\n                  <Form.Item name=\"reason\" label=\"Reason\">\r\n                    <Input.TextArea placeholder=\"Why do you want to join Mirage?\" />\r\n                  </Form.Item>\r\n                </Panel>\r\n                <Panel header=\"Teaching preferences\" key=\"3\">\r\n                  <Form.Item name=\"student_type\" label=\"Target\">\r\n                    <Select placeholder=\"Who do you want to teach?\">\r\n                      {preferences.STUDENT_TYPE.map(type => {\r\n                        return (\r\n                          <Option value={type} key={type}>\r\n                            {type}\r\n                          </Option>\r\n                        );\r\n                      })}\r\n                    </Select>\r\n                  </Form.Item>\r\n                  <Form.Item name=\"student_lvl\" label=\"Student level\">\r\n                    <Select placeholder=\"You are good at teaching students who are\">\r\n                      {preferences.STUDENT_LVL.map(lvl => {\r\n                        return (\r\n                          <Option value={lvl} key={lvl}>\r\n                            {lvl}\r\n                          </Option>\r\n                        );\r\n                      })}\r\n                    </Select>\r\n                  </Form.Item>\r\n                  <Form.Item name=\"accent\" label=\"Accent\">\r\n                    <Select placeholder=\"Your English accent\">\r\n                      {preferences.ENG_ACCENT.map(accent => {\r\n                        return (\r\n                          <Option value={accent} key={accent}>\r\n                            {accent}\r\n                          </Option>\r\n                        );\r\n                      })}\r\n                    </Select>\r\n                  </Form.Item>\r\n                  <Form.Item name=\"fluency\" label=\"Fluency\">\r\n                    <Select placeholder=\"Your fluency\">\r\n                      {preferences.ENG_FLUENCY.map(fluency => {\r\n                        return (\r\n                          <Option value={fluency} key={fluency}>\r\n                            {fluency}\r\n                          </Option>\r\n                        );\r\n                      })}\r\n                    </Select>\r\n                  </Form.Item>\r\n                  <Form.Item name=\"specialities\" label=\"Specialities\">\r\n                    <Select mode=\"multiple\" placeholder=\"Select your specialities\">\r\n                      {preferences.SPECIALITIES.map(spec => {\r\n                        return (\r\n                          <Option value={spec} key={spec}>\r\n                            {spec}\r\n                          </Option>\r\n                        );\r\n                      })}\r\n                    </Select>\r\n                  </Form.Item>\r\n                  <Form.Item name=\"teaching_styles\" label=\"Teaching styles\">\r\n                    <Select mode=\"multiple\" placeholder=\"Your styles\">\r\n                      {preferences.TEACHING_STYLE.map(style => {\r\n                        return (\r\n                          <Option value={style} key={style}>\r\n                            {style}\r\n                          </Option>\r\n                        );\r\n                      })}\r\n                    </Select>\r\n                  </Form.Item>\r\n                </Panel>\r\n                <Panel header=\"Teaching certificates (optional)\" key=\"4\">\r\n                  {/* render uploaded files */}\r\n                  {profile.certificates && JSON.parse(profile.certificates).length > 0 ? (\r\n                    <Form.Item {...formItemLayout} label=\"Uploaded file(s)\">\r\n                      <div className={styles.uploadedCert}>\r\n                        {profile.certificates\r\n                          ? JSON.parse(profile.certificates).map((cert, index) => {\r\n                              return (\r\n                                <a key={index} href={serverUrl + cert.path}>\r\n                                  <FileDoneOutlined />\r\n                                  {cert.originalname}\r\n                                </a>\r\n                              );\r\n                            })\r\n                          : null}\r\n                      </div>\r\n                    </Form.Item>\r\n                  ) : null}\r\n                  <Form.Item name=\"files\" label=\"Upload certificate\">\r\n                    <Upload {...uploadProps} listType=\"picture-card\">\r\n                      <Button icon={<FileTextOutlined />}>Select File</Button>\r\n                    </Upload>\r\n                  </Form.Item>\r\n                  <Form.Item {...uploadBtnLayout}>\r\n                    <Button\r\n                      onClick={handleUpload}\r\n                      loading={uploading}\r\n                      style={{ width: '132px' }}\r\n                      icon={<UploadOutlined />}\r\n                    >\r\n                      Upload\r\n                    </Button>\r\n                  </Form.Item>\r\n                  <Alert\r\n                    message=\"Warning: All your previous upload will be removed when uploading new certificates\"\r\n                    type=\"warning\"\r\n                    showIcon\r\n                  />\r\n                </Panel>\r\n                <Panel header=\"Introduce yourself\" key=\"5\">\r\n                  <Form.Item name=\"introduction\" label=\"Introduction\">\r\n                    <Input.TextArea placeholder=\"Introduce yourself\" />\r\n                  </Form.Item>\r\n                  <div>\r\n                    <p className={styles.introInstruct}>\r\n                      Record a video to emphasize your teaching style, expertise and personality to help students\r\n                      overcome their nerve when speaking with foreigners. A friendly video will encourage the stundents\r\n                      to call you. A few helpful tips:\r\n                    </p>\r\n                    <div className={styles.introTips}>\r\n                      <p>1. Make sure your camera/webcam is working properly</p>\r\n                      <p>2. Find a clean and quiet room</p>\r\n                      <p>3. Look at the camera and smile</p>\r\n                      <p>4. Dress smart</p>\r\n                      <p>5. Speak for 1-2 minutes</p>\r\n                    </div>\r\n                  </div>\r\n                  <Form.Item label=\"Intro video\">\r\n                    {isRecord ? (\r\n                      <VideoRecorder\r\n                        cancelRecord={() => setIsRecord(false)}\r\n                        existedVideo={profile.video}\r\n                        refreshProfile={getTutorProfile}\r\n                      />\r\n                    ) : (\r\n                      <VideoPlayer recordNew={() => setIsRecord(true)} />\r\n                    )}\r\n                  </Form.Item>\r\n                </Panel>\r\n              </Collapse>\r\n              <div className={styles.submitWrapper}>\r\n                <Button type=\"primary\" htmlType=\"submit\" loading={loading}>\r\n                  Update profile\r\n                </Button>\r\n              </div>\r\n            </Form>\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n    </Spin>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useContext } from 'react';\r\nimport VideoCall from '../../components/VideoCall';\r\nimport { Spin, Steps } from 'antd';\r\nimport { AccountContext } from '../../context/AccountContext';\r\nimport { SolutionOutlined, ProfileOutlined, SmileOutlined } from '@ant-design/icons';\r\nimport axios from '../../lib/utils/axiosConfig';\r\nimport styles from './Teaching.module.css';\r\nimport { PROFILE_STATUS } from '../../lib/constants';\r\nimport WaitImg from '../../assets/tutor-wait.png';\r\nimport CompleteProfileImg from '../../assets/complete-profile.png';\r\n\r\nconst { Step } = Steps;\r\n\r\nexport default function Teaching() {\r\n  const { account } = useContext(AccountContext);\r\n  const [loading, setLoading] = useState(false);\r\n  const [profile, setProfile] = useState({});\r\n\r\n  const getProfile = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const result = await axios.get('/tutors/' + account.tutor.id);\r\n      account.tutor = result.data.tutor;\r\n      setProfile(result.data.tutor);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      alert(error.response.data.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getProfile();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  let profileStatus;\r\n  if (profile.profileStatus === PROFILE_STATUS.ACCEPTED) {\r\n    profileStatus = <Step status=\"finish\" title=\"Profile approval\" icon={<ProfileOutlined />} />;\r\n  } else if (profile.profileStatus === PROFILE_STATUS.PENDING) {\r\n    profileStatus = <Step status=\"wait\" title=\"Profile approval\" icon={<ProfileOutlined />} />;\r\n  } else if (profile.profileStatus === PROFILE_STATUS.REJECTED) {\r\n    profileStatus = <Step status=\"error\" title=\"Profile approval\" icon={<ProfileOutlined />} />;\r\n  }\r\n\r\n  return (\r\n    <div className={styles.teachingWrapper}>\r\n      <div className={styles.teaching}>\r\n        <Spin size=\"large\" spinning={loading}>\r\n          <Steps style={{ width: '100%' }}>\r\n            <Step\r\n              status={profile.account && profile.account.verification ? 'finish' : 'wait'}\r\n              title=\"Verification\"\r\n              icon={<SolutionOutlined />}\r\n            />\r\n            {profileStatus}\r\n            <Step\r\n              status={\r\n                profile.account && profile.account.verification && profile.profileStatus === PROFILE_STATUS.ACCEPTED\r\n                  ? 'finish'\r\n                  : 'wait'\r\n              }\r\n              title=\"Ready\"\r\n              icon={<SmileOutlined />}\r\n            />\r\n          </Steps>\r\n          {profile.account && profile.account.verification && profile.profileStatus === PROFILE_STATUS.ACCEPTED ? (\r\n            <div className={styles.wait}>\r\n              <img className={styles.waitImg} src={WaitImg} alt=\"\" draggable=\"false\" />\r\n              <div className={styles.waitTxt}>\r\n                <p>You are all set!</p>\r\n                <p>Be patient and stay here.</p>\r\n                <p>Students will start calling you soon.</p>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className={styles.wait}>\r\n              <img className={styles.waitImg} src={CompleteProfileImg} alt=\"\" draggable=\"false\" />\r\n              <div className={styles.waitTxt}>\r\n                <p>You are almost ready!</p>\r\n                <p>Complete your profile to start now!</p>\r\n                <p>Students are waiting to see you.</p>\r\n              </div>\r\n            </div>\r\n          )}\r\n          {loading ? null : <VideoCall account={account} />}\r\n        </Spin>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState, useContext } from 'react';\r\nimport styles from './TutorCallHistories.module.css';\r\nimport { Table, Spin, Button, Input, Tag } from 'antd';\r\nimport axios from '../../lib/utils/axiosConfig';\r\nimport { AccountContext } from '../../context/AccountContext';\r\nimport moment from 'moment';\r\nimport { getTimeFromMs } from '../../lib/utils/formatTime';\r\nimport ReportModal from '../../components/ReportModal';\r\n\r\nconst { Search } = Input;\r\n\r\nexport default function TutorCallHistories() {\r\n  const { account } = useContext(AccountContext);\r\n  const [history, setHistory] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [showReport, setShowReport] = useState(false);\r\n  const [selected, setSelected] = useState(null);\r\n  const [searchKey, setSearchKey] = useState('');\r\n  const [paymentLoading, setPaymentLoading] = useState(false);\r\n\r\n  const getHistory = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await axios.get('/call-histories?tutorId=' + account.tutor.id + '&search=' + searchKey);\r\n      setHistory(result.data.callHistories);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      alert(error.response.data.message);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const createPayment = async () => {\r\n    setPaymentLoading(true);\r\n    try {\r\n      await axios.post('/payments', {\r\n        tutorId: account.tutor.id\r\n      });\r\n      setPaymentLoading(false);\r\n      getHistory();\r\n    } catch (error) {\r\n      alert(error.response.data.message);\r\n      setPaymentLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getHistory();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [searchKey]);\r\n  const onReport = record => {\r\n    setSelected(record);\r\n    setShowReport(true);\r\n  };\r\n\r\n  const searchCall = value => {\r\n    setSearchKey(value);\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Date',\r\n      dataIndex: 'createdAt',\r\n      render: createdAt => {\r\n        return <div>{moment(createdAt).format('MMMM Do YYYY, h:mm:ss a')}</div>;\r\n      }\r\n    },\r\n    {\r\n      title: 'Student',\r\n      dataIndex: 'student',\r\n      render: student => {\r\n        return <div>{student.name}</div>;\r\n      }\r\n    },\r\n    {\r\n      title: 'Username',\r\n      dataIndex: 'student',\r\n      render: student => {\r\n        return <div>{student.account.username}</div>;\r\n      }\r\n    },\r\n    {\r\n      title: 'Duration',\r\n      dataIndex: 'duration',\r\n      render: duration => {\r\n        return <div>{getTimeFromMs(duration)}</div>;\r\n      }\r\n    },\r\n    {\r\n      title: 'Payment state',\r\n      dataIndex: 'counted',\r\n      render: counted => {\r\n        if (counted) {\r\n          return <Tag color=\"success\">Counted</Tag>;\r\n        } else {\r\n          return <Tag>Uncounted</Tag>;\r\n        }\r\n      }\r\n    },\r\n    {\r\n      title: 'Action',\r\n      render: (text, record) => {\r\n        return (\r\n          <div>\r\n            <Button danger onClick={() => onReport(record)}>\r\n              Report\r\n            </Button>\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <div className={styles.TutorCallHistories}>\r\n      <ReportModal setShowReport={setShowReport} showReport={showReport} selected={selected} />\r\n      <Button type=\"primary\" onClick={createPayment} loading={paymentLoading}>\r\n        Create payment request\r\n      </Button>\r\n      <div className={styles.searchBar}>\r\n        <Search placeholder=\"Search for username, name\" onSearch={searchCall} enterButton />\r\n      </div>\r\n      <Spin spinning={loading}>\r\n        <Table columns={columns} dataSource={history} pagination={false} rowKey=\"id\" />\r\n      </Spin>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useContext } from 'react';\r\nimport styles from './Payments.module.css';\r\nimport { Table, Spin, Tag } from 'antd';\r\nimport axios from '../../lib/utils/axiosConfig';\r\nimport { PAYMENT_STATE } from '../../lib/constants';\r\nimport moment from 'moment';\r\nimport { AccountContext } from '../../context/AccountContext';\r\n\r\nexport default function Payments() {\r\n  const [payments, setPayments] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const { account } = useContext(AccountContext);\r\n  const columns = [\r\n    {\r\n      title: 'Date',\r\n      dataIndex: 'createdAt',\r\n      render: createdAt => {\r\n        return <div>{moment(createdAt).format('MMMM Do YYYY, h:mm:ss a')}</div>;\r\n      }\r\n    },\r\n    {\r\n      title: 'Price',\r\n      dataIndex: 'price',\r\n      render: price => {\r\n        return <div>{price}$</div>;\r\n      }\r\n    },\r\n    {\r\n      title: 'State',\r\n      dataIndex: 'state',\r\n      render: state => {\r\n        if (state === PAYMENT_STATE.COMPLETED) {\r\n          return <Tag color=\"success\">Completed</Tag>;\r\n        } else if (state === PAYMENT_STATE.PENDING) {\r\n          return <Tag color=\"blue\">Pending</Tag>;\r\n        } else {\r\n          return <Tag color=\"error\">Cancelled</Tag>;\r\n        }\r\n      }\r\n    }\r\n  ];\r\n\r\n  const getPayments = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await axios.get('/payments/' + account.tutor.id);\r\n      setPayments(result.data.payments);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      alert(error.response.data.message);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getPayments();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n  return (\r\n    <div className={styles.payments}>\r\n      <Spin spinning={loading}>\r\n        <Table rowKey=\"id\" columns={columns} dataSource={payments} pagination={false} />\r\n      </Spin>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useState } from 'react';\r\nimport { AccountContext } from '../../context/AccountContext';\r\nimport ReviewSummary from '../../components/ReviewSummary';\r\nimport Review from '../../components/Review';\r\nimport { List } from 'antd';\r\nimport axios from '../../lib/utils/axiosConfig';\r\nimport { getReviewCount } from '../../lib/utils/getReviewCount';\r\nimport styles from './Reviews.module.css';\r\n\r\nexport default function Reviews() {\r\n  const { account } = useContext(AccountContext);\r\n  const [reviews, setReviews] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const getTutorReview = async () => {\r\n      try {\r\n        const result = await axios.get('/reviews/' + account.tutor.id);\r\n        const ratingCount = getReviewCount(result.data.reviews);\r\n        setReviews({ ...result.data, ratingCount });\r\n      } catch (error) {\r\n        alert(error.response.data.message);\r\n      }\r\n    };\r\n    getTutorReview();\r\n  }, [account.tutor.id]);\r\n  let reviewsRender = null;\r\n  if (reviews) {\r\n    reviewsRender = (\r\n      <div className={styles.reviews}>\r\n        <ReviewSummary reviews={reviews} />\r\n        <List\r\n          itemLayout=\"horizontal\"\r\n          dataSource={reviews.reviews}\r\n          renderItem={item => (\r\n            <List.Item>\r\n              <Review review={item} />\r\n            </List.Item>\r\n          )}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n  return reviewsRender;\r\n}\r\n","import React from 'react';\r\nimport styles from './Stats.module.css';\r\nimport Payments from './Payments';\r\nimport Reviews from './Reviews';\r\n\r\nexport default function Stats() {\r\n  return (\r\n    <div className={styles.stats}>\r\n      <Payments />\r\n      <Reviews />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useState } from 'react';\r\nimport { AccountContext } from '../../context/AccountContext';\r\nimport { Layout, Avatar, Dropdown, Menu } from 'antd';\r\nimport FooterContent from '../../components/FooterContent';\r\nimport styles from './Tutor.module.css';\r\nimport {\r\n  UserOutlined,\r\n  DownOutlined,\r\n  KeyOutlined,\r\n  LogoutOutlined,\r\n  ContactsOutlined,\r\n  VideoCameraOutlined,\r\n  HistoryOutlined,\r\n  BarChartOutlined\r\n} from '@ant-design/icons';\r\nimport ForgotPasswordModal from '../../components/ForgotPasswordModal';\r\nimport ChangePasswordModal from '../../components/ChangePasswordModal';\r\nimport Profile from './Profile';\r\nimport Teaching from './Teaching';\r\nimport TutorCallHistories from './TutorCallHistories';\r\nimport { Switch, Route, Link } from 'react-router-dom';\r\nimport SideBarLogo from '../../components/SideBarLogo';\r\nimport { serverUrl } from '../../lib/constants';\r\nimport Stats from './Stats';\r\n\r\nconst { Header, Content, Sider } = Layout;\r\n\r\nexport default function Tutor(props) {\r\n  const { account, onSignOut } = useContext(AccountContext);\r\n  const [isChangePass, setIsChangePass] = useState(false);\r\n  const [isForgotPass, setIsForgotPass] = useState(false);\r\n  const { location } = props;\r\n  const userAvatar =\r\n    account.tutor && account.tutor.avatar ? (\r\n      <Avatar style={{ margin: '10px' }} src={serverUrl + account.tutor.avatar} />\r\n    ) : (\r\n      <Avatar style={{ margin: '10px' }} icon={<UserOutlined />} />\r\n    );\r\n  const userMenu = (\r\n    <Menu>\r\n      <Menu.Item onClick={() => setIsChangePass(true)}>\r\n        <KeyOutlined />\r\n        <span>Change password</span>\r\n      </Menu.Item>\r\n      <Menu.Item onClick={onSignOut}>\r\n        <LogoutOutlined />\r\n        <span>Sign out</span>\r\n      </Menu.Item>\r\n    </Menu>\r\n  );\r\n  return (\r\n    <Layout style={{ minHeight: '100vh' }}>\r\n      <ForgotPasswordModal isVisible={isForgotPass} onClose={() => setIsForgotPass(false)} />\r\n      <ChangePasswordModal\r\n        isVisible={isChangePass}\r\n        onClose={() => setIsChangePass(false)}\r\n        onForgot={() => setIsForgotPass(true)}\r\n      />\r\n      <Sider collapsible>\r\n        <SideBarLogo collapsed={false} />\r\n        <Menu theme=\"dark\" defaultSelectedKeys={['/tutor']} mode=\"inline\" selectedKeys={[location.pathname]}>\r\n          <Menu.Item key=\"/tutor\">\r\n            <ContactsOutlined />\r\n            <Link to=\"/tutor\">\r\n              <span>Profile</span>\r\n            </Link>\r\n          </Menu.Item>\r\n          <Menu.Item key=\"/tutor/teaching\">\r\n            <VideoCameraOutlined />\r\n            <Link to=\"/tutor/teaching\">\r\n              <span>Teaching</span>\r\n            </Link>\r\n          </Menu.Item>\r\n          <Menu.Item key=\"/tutor/call-histories\">\r\n            <HistoryOutlined />\r\n            <Link to=\"/tutor/call-histories\">\r\n              <span>Call histories</span>\r\n            </Link>\r\n          </Menu.Item>\r\n          <Menu.Item key=\"/tutor/stats\">\r\n            <BarChartOutlined />\r\n            <Link to=\"/tutor/stats\">\r\n              <span>Stats</span>\r\n            </Link>\r\n          </Menu.Item>\r\n        </Menu>\r\n      </Sider>\r\n      <Layout>\r\n        <Header>\r\n          <div className={styles.userControl}>\r\n            Hello, {account.username}\r\n            <Dropdown overlay={userMenu} placement=\"bottomLeft\">\r\n              <div>\r\n                {userAvatar}\r\n                <DownOutlined className={styles.dropDownIcon} />\r\n              </div>\r\n            </Dropdown>\r\n          </div>\r\n        </Header>\r\n        <Content>\r\n          <Switch>\r\n            <Route path=\"/tutor/stats\" component={Stats} />\r\n            <Route path=\"/tutor/teaching\" component={Teaching} />\r\n            <Route path=\"/tutor/call-histories\" component={TutorCallHistories} />\r\n            <Route path=\"/tutor\" component={Profile} exact />\r\n          </Switch>\r\n        </Content>\r\n        <FooterContent />\r\n      </Layout>\r\n    </Layout>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport socket from '../../lib/socket';\r\nimport { SOCKET_EVENTS } from '../../lib/constants';\r\nimport styles from './OnlineUsers.module.css';\r\nimport { Doughnut } from 'react-chartjs-2';\r\n\r\nexport default function OnlineUsers() {\r\n  const [onlineTutors, setOnlineTutors] = useState([]);\r\n  const [onlineStudents, setOnlineStudents] = useState([]);\r\n\r\n  useEffect(() => {\r\n    socket\r\n      .on(SOCKET_EVENTS.GET_ONLINE_TUTORS, data => {\r\n        setOnlineTutors(data.online);\r\n      })\r\n      .on(SOCKET_EVENTS.GET_ONLINE_STUDENTS, data => {\r\n        setOnlineStudents(data.online);\r\n      });\r\n    return () => {\r\n      socket.off(SOCKET_EVENTS.GET_ONLINE_STUDENTS).off(SOCKET_EVENTS.GET_ONLINE_TUTORS);\r\n    };\r\n  }, []);\r\n\r\n  const data = {\r\n    datasets: [\r\n      {\r\n        data: [onlineStudents.length, onlineTutors.length],\r\n        backgroundColor: ['#FF6384', '#36A2EB'],\r\n        hoverBackgroundColor: ['#FF6384', '#36A2EB']\r\n      }\r\n    ],\r\n    labels: ['Students', 'Tutors']\r\n  };\r\n\r\n  return (\r\n    <div className={styles.onlineUsers}>\r\n      <p>Online users</p>\r\n      <Doughnut data={data} />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport axios from '../../lib/utils/axiosConfig';\r\nimport { Table } from 'antd';\r\nimport moment from 'moment';\r\nimport { getTimeFromMs } from '../../lib/utils/formatTime';\r\nimport styles from './RecentCalls.module.css';\r\n\r\nexport default function RecentCalls() {\r\n  const [calls, setCalls] = useState([]);\r\n  useEffect(() => {\r\n    const getRecentCalls = async () => {\r\n      try {\r\n        const result = await axios.get('/call-histories');\r\n        setCalls(result.data.callHistories.slice(0, 5));\r\n      } catch (error) {\r\n        alert(error.response.data.message);\r\n      }\r\n    };\r\n    getRecentCalls();\r\n  }, []);\r\n  const columns = [\r\n    {\r\n      title: 'Date',\r\n      dataIndex: 'createdAt',\r\n      render: createdAt => {\r\n        return <div>{moment(createdAt).format('MMMM Do YYYY, h:mm:ss a')}</div>;\r\n      }\r\n    },\r\n    {\r\n      title: 'Student',\r\n      dataIndex: 'student',\r\n      render: student => {\r\n        return <div>{student.name}</div>;\r\n      }\r\n    },\r\n    {\r\n      title: 'Tutor',\r\n      dataIndex: 'tutor',\r\n      render: tutor => {\r\n        return <div>{tutor.name}</div>;\r\n      }\r\n    },\r\n    {\r\n      title: 'Duration',\r\n      dataIndex: 'duration',\r\n      render: duration => {\r\n        return <div>{getTimeFromMs(duration)}</div>;\r\n      }\r\n    }\r\n  ];\r\n  return (\r\n    <div className={styles.recentCalls}>\r\n      <p className={styles.recentCallsTitle}>Recent calls</p>\r\n      <Table columns={columns} dataSource={calls} pagination={false} rowKey=\"id\" />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport styles from './MoneyStats.module.css';\r\nimport { Bar } from 'react-chartjs-2';\r\nimport axios from '../../lib/utils/axiosConfig';\r\n\r\nexport default function MoneyStats() {\r\n  const [stats, setStats] = useState({ earn: 0, pay: 0 });\r\n\r\n  useEffect(() => {\r\n    const getMoneyStats = async () => {\r\n      try {\r\n        const result = await axios.get('/stats/money');\r\n        setStats(result.data.stats);\r\n      } catch (error) {\r\n        alert(error.response.data.message);\r\n      }\r\n    };\r\n    getMoneyStats();\r\n  }, []);\r\n\r\n  const data = {\r\n    datasets: [\r\n      {\r\n        data: [stats.earn, stats.pay],\r\n        backgroundColor: ['#FF6384', '#36A2EB'],\r\n        label: `Profit: ${(stats.earn - stats.pay).toFixed(2)}$`\r\n      }\r\n    ],\r\n    labels: ['Earn', 'Pay']\r\n  };\r\n\r\n  return (\r\n    <div className={styles.moneyStats}>\r\n      <p>Money</p>\r\n      <Bar data={data} />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport axios from '../../lib/utils/axiosConfig';\r\nimport { Table } from 'antd';\r\nimport styles from './TopPaid.module.css';\r\n\r\nexport default function TopPaid() {\r\n  const [users, setUsers] = useState([]);\r\n  useEffect(() => {\r\n    const getTopPaid = async () => {\r\n      try {\r\n        const result = await axios.get('/stats/top-paid');\r\n        setUsers(result.data.topPaid);\r\n      } catch (error) {\r\n        alert(error.response.data.message);\r\n      }\r\n    };\r\n    getTopPaid();\r\n  }, []);\r\n  const columns = [\r\n    {\r\n      title: 'Rank',\r\n      key: 'index',\r\n      render: (text, record, index) => {\r\n        return index + 1;\r\n      }\r\n    },\r\n    {\r\n      title: 'Name',\r\n      dataIndex: 'student',\r\n      render: student => {\r\n        return <div>{student.name}</div>;\r\n      }\r\n    },\r\n    {\r\n      title: 'Amount',\r\n      dataIndex: 'total',\r\n      render: total => {\r\n        return <div>{total.toFixed(2)}$</div>;\r\n      }\r\n    }\r\n  ];\r\n  return (\r\n    <div className={styles.topPaid}>\r\n      <p className={styles.topPaidTitle}>Top paid student</p>\r\n      <Table columns={columns} dataSource={users} pagination={false} rowKey=\"studentId\" />\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport OnlineUsers from './OnlineUsers';\r\nimport styles from './Dashboard.module.css';\r\nimport RecentCalls from './RecentCalls';\r\nimport MoneyStats from './MoneyStats';\r\nimport TopPaid from './TopPaid';\r\n\r\nexport default function Dashboard() {\r\n  return (\r\n    <div className={styles.dashboard}>\r\n      <div className={styles.dashboardRow}>\r\n        <OnlineUsers />\r\n        <RecentCalls />\r\n      </div>\r\n      <div className={styles.dashboardRow}>\r\n        <MoneyStats />\r\n\r\n        <TopPaid />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Tag, Table } from 'antd';\r\nimport { SUB_STATE, SUB_TIER } from '../../lib/constants';\r\nimport moment from 'moment';\r\n\r\nexport default function StudentSub({ subscriptions }) {\r\n  const columns = [\r\n    {\r\n      title: 'Date',\r\n      dataIndex: 'createdAt',\r\n      render: createdAt => {\r\n        return <div>{moment(createdAt).format('MMMM Do YYYY, h:mm:ss a')}</div>;\r\n      }\r\n    },\r\n    {\r\n      title: 'Tier',\r\n      dataIndex: 'tier',\r\n      render: tier => {\r\n        if (tier === SUB_TIER.SILVER) {\r\n          return <Tag color=\"#C0C0C0\">Silver</Tag>;\r\n        } else if (tier === SUB_TIER.GOLD) {\r\n          return <Tag color=\"#DAA520\">Gold</Tag>;\r\n        } else if (tier === SUB_TIER.PLATIUM) {\r\n          return <Tag color=\"processing\">Platium</Tag>;\r\n        } else {\r\n          return <Tag>Normal</Tag>;\r\n        }\r\n      }\r\n    },\r\n    {\r\n      title: 'Duration',\r\n      dataIndex: 'duration',\r\n      render: duration => {\r\n        return <div>{duration / 60000} mins</div>;\r\n      }\r\n    },\r\n    {\r\n      title: 'Price',\r\n      dataIndex: 'price',\r\n      render: price => {\r\n        return <div>{price}$</div>;\r\n      }\r\n    },\r\n    {\r\n      title: 'State',\r\n      dataIndex: 'state',\r\n      render: state => {\r\n        if (state === SUB_STATE.COMPLETED) {\r\n          return <Tag color=\"success\">Completed</Tag>;\r\n        } else if (state === SUB_STATE.PENDING) {\r\n          return <Tag color=\"blue\">Pending</Tag>;\r\n        } else {\r\n          return <Tag color=\"error\">Cancelled</Tag>;\r\n        }\r\n      }\r\n    }\r\n  ];\r\n  return (\r\n    <div>\r\n      <Table columns={columns} dataSource={subscriptions} pagination={false} rowKey=\"id\" />\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Modal } from 'antd';\r\nimport 'video.js/dist/video-js.css';\r\nimport { serverUrl } from '../../lib/constants';\r\nimport CallRecordPlayer from '../../components/CallRecordPlayer';\r\nimport styles from './CallDetailModal.module.css';\r\nimport moment from 'moment';\r\n\r\nexport default function CallDetailModal({ showCallDetail, selected, setShowCallDetail }) {\r\n  return selected ? (\r\n    <Modal\r\n      title={\"Call - \" + moment(selected.createdAt).format('MMMM Do YYYY, h:mm:ss a')}\r\n      visible={showCallDetail}\r\n      onCancel={() => setShowCallDetail(false)}\r\n      footer={null}\r\n      width=\"600px\"\r\n      destroyOnClose\r\n      bodyStyle={{ height: \"600px\", overflow: \"auto\" }}\r\n    >\r\n      <div>\r\n        <div className={styles.recordTitle}>Student record:</div>\r\n        <CallRecordPlayer\r\n          url={`${serverUrl}api/call-histories/${selected.id}/studentVideo`}\r\n        />\r\n        <div className={styles.recordTitle}>Tutor record:</div>\r\n        <CallRecordPlayer\r\n          url={`${serverUrl}api/call-histories/${selected.id}/tutorVideo`}\r\n        />\r\n      </div>\r\n    </Modal>\r\n  ) : null\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Table } from 'antd';\r\nimport moment from 'moment';\r\nimport { getTimeFromMs } from '../../lib/utils/formatTime';\r\nimport CallDetailModal from './CallDetailModal';\r\n\r\nexport default function CallHistories({ callHistories }) {\r\n  const [showCallDetail, setShowCallDetail] = useState(false);\r\n  const [selected, setSelected] = useState(null);\r\n  const columns = [\r\n    {\r\n      title: 'Date',\r\n      dataIndex: 'createdAt',\r\n      render: createdAt => {\r\n        return <div>{moment(createdAt).format('MMMM Do YYYY, h:mm:ss a')}</div>\r\n      }\r\n    },\r\n    {\r\n      title: 'Student',\r\n      dataIndex: 'student',\r\n      render: student => {\r\n        return <div>{student.name}</div>\r\n      }\r\n    },\r\n    {\r\n      title: 'Tutor',\r\n      dataIndex: 'tutor',\r\n      render: tutor => {\r\n        return <div>{tutor.name}</div>\r\n      }\r\n    },\r\n    {\r\n      title: 'Duration',\r\n      dataIndex: 'duration',\r\n      render: duration => {\r\n        return <div>{getTimeFromMs(duration)}</div>\r\n      }\r\n    }\r\n  ];\r\n  const onSelectRow = (record, index) => {\r\n    return {\r\n      onClick: event => {\r\n        setSelected(record);\r\n        setShowCallDetail(true);\r\n      }\r\n    }\r\n  };\r\n  return (\r\n    <div>\r\n      <CallDetailModal\r\n        setShowCallDetail={setShowCallDetail}\r\n        showCallDetail={showCallDetail}\r\n        selected={selected}\r\n      />\r\n      <Table\r\n        columns={columns}\r\n        dataSource={callHistories}\r\n        pagination={false}\r\n        onRow={onSelectRow}\r\n        rowKey='id'\r\n      />\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react';\r\nimport { Tag, Table } from 'antd';\r\nimport { REPORT_STATE } from '../../lib/constants';\r\nimport moment from 'moment';\r\n\r\nexport default function AccountReport({ reports }) {\r\n  const columns = [\r\n    {\r\n      title: 'Date',\r\n      dataIndex: 'createdAt',\r\n      render: createdAt => {\r\n        return <div>{moment(createdAt).format('MMMM Do YYYY, h:mm:ss a')}</div>;\r\n      }\r\n    },\r\n    {\r\n      title: 'Reason',\r\n      dataIndex: 'reason'\r\n    },\r\n    {\r\n      title: 'State',\r\n      dataIndex: 'state',\r\n      render: state => {\r\n        if (state === REPORT_STATE.RESOLVED) {\r\n          return <Tag color=\"success\">Resolved</Tag>;\r\n        } else if (state === REPORT_STATE.PENDING) {\r\n          return <Tag color=\"blue\">Pending</Tag>;\r\n        } else {\r\n          return <Tag color=\"error\">Cancelled</Tag>;\r\n        }\r\n      }\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <div>\r\n      <Table rowKey=\"id\" columns={columns} dataSource={reports} pagination={false} />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport styles from './StudentProfile.module.css';\r\nimport axios from '../../lib/utils/axiosConfig';\r\nimport { Tag, Spin, Modal, Avatar, Tabs, Button, Descriptions } from 'antd';\r\nimport { serverUrl } from '../../lib/constants';\r\nimport { UserOutlined } from '@ant-design/icons';\r\nimport moment from 'moment';\r\nimport { STATES } from '../../lib/constants';\r\nimport { getTimeFromMs } from '../../lib/utils/formatTime';\r\nimport StudentSub from './StudentSub';\r\nimport CallHistories from './CallHistories';\r\nimport AccountReport from './AccountReport';\r\nconst { TabPane } = Tabs;\r\n\r\nexport default function StudentProfile({ selected, getStudentsData, setShowDetailModal, showDetailModal }) {\r\n  const [loadingDetail, setLoadingDetail] = useState(false);\r\n  const [detail, setDetail] = useState(null);\r\n  const [stateLoading, setStateLoading] = useState(false);\r\n\r\n  const updateStateUser = async state => {\r\n    try {\r\n      setStateLoading(true);\r\n      await axios.put('/accounts/' + selected.accountId, { state: state });\r\n      await getStudentsData();\r\n      setStateLoading(false);\r\n      setShowDetailModal(false);\r\n    } catch (error) {\r\n      setStateLoading(false);\r\n      alert(error.response.data.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const getStudentDetail = async () => {\r\n      try {\r\n        setLoadingDetail(true);\r\n        const result = await axios.get('/students/' + selected.id);\r\n        setDetail(result.data.student);\r\n        setLoadingDetail(false);\r\n      } catch (error) {\r\n        setLoadingDetail(false);\r\n      }\r\n    };\r\n    if (selected) {\r\n      getStudentDetail();\r\n    }\r\n  }, [selected]);\r\n\r\n  const renderDetail = detail ? (\r\n    <Tabs defaultActiveKey=\"profile\" type=\"card\">\r\n      <TabPane tab=\"Profile\" key=\"profile\">\r\n        <div className={styles.detail}>\r\n          <div className={styles.detailBasic}>\r\n            {detail.avatar ? (\r\n              <Avatar src={serverUrl + detail.avatar} size={100} />\r\n            ) : (\r\n              <Avatar icon={<UserOutlined />} size={100} />\r\n            )}\r\n            <div className={styles.detailBasicInfo}>\r\n              <Descriptions size=\"small\" column={1} title={detail.name} bordered>\r\n                <Descriptions.Item label=\"Username\">{selected.username}</Descriptions.Item>\r\n                <Descriptions.Item label=\"Email\">{selected.email}</Descriptions.Item>\r\n                <Descriptions.Item label=\"Birthdate\">\r\n                  {detail.birthdate ? moment(detail.birthdate).format('YYYY-MM-DD') : null}\r\n                </Descriptions.Item>\r\n                <Descriptions.Item label=\"Remaining time\">{getTimeFromMs(detail.remaining_time)}</Descriptions.Item>\r\n                <Descriptions.Item label=\"Status\">\r\n                  {selected.verification ? <Tag color=\"success\">Verified</Tag> : <Tag color=\"default\">Unverified</Tag>}\r\n                  {selected.state ? <Tag color=\"success\">Active</Tag> : <Tag color=\"error\">Inactive</Tag>}\r\n                </Descriptions.Item>\r\n              </Descriptions>\r\n            </div>\r\n          </div>\r\n          <div className={styles.banBtnHolder}>\r\n            {selected.state ? (\r\n              <Button\r\n                loading={stateLoading}\r\n                className={styles.changeStateBtn}\r\n                type=\"primary\"\r\n                danger\r\n                onClick={() => updateStateUser(STATES.INACTIVE)}\r\n              >\r\n                Ban\r\n              </Button>\r\n            ) : (\r\n              <Button\r\n                loading={stateLoading}\r\n                className={styles.changeStateBtn}\r\n                type=\"primary\"\r\n                onClick={() => updateStateUser(STATES.ACTIVE)}\r\n              >\r\n                Unban\r\n              </Button>\r\n            )}\r\n          </div>\r\n          <div className={styles.detailAdditional}>\r\n            <Descriptions bordered size=\"small\" column={1}>\r\n              <Descriptions.Item label=\"Phone\">{detail.phone}</Descriptions.Item>\r\n              <Descriptions.Item label=\"Birthdate\">\r\n                {detail.birthdate ? moment(detail.birthdate).format('YYYY-MM-DD') : null}\r\n              </Descriptions.Item>\r\n              <Descriptions.Item label=\"Student level\">{detail.student_lvl}</Descriptions.Item>\r\n              <Descriptions.Item label=\"Student type\">{detail.student_type}</Descriptions.Item>\r\n              <Descriptions.Item label=\"Favorite accent\">{detail.accent}</Descriptions.Item>\r\n              <Descriptions.Item label=\"Favorite tutor styles\">\r\n                {' '}\r\n                {detail.teaching_styles\r\n                  ? JSON.parse(detail.teaching_styles).map(style => {\r\n                      return <Tag key={style}>{style}</Tag>;\r\n                    })\r\n                  : null}\r\n              </Descriptions.Item>\r\n              <Descriptions.Item label=\"Interests\">\r\n                {detail.specialities\r\n                  ? JSON.parse(detail.specialities).map(speciality => {\r\n                      return <Tag key={speciality}>{speciality}</Tag>;\r\n                    })\r\n                  : null}\r\n              </Descriptions.Item>\r\n            </Descriptions>\r\n          </div>\r\n        </div>\r\n      </TabPane>\r\n      <TabPane tab=\"History\" key=\"history\">\r\n        <CallHistories callHistories={detail.call_histories} />\r\n      </TabPane>\r\n      <TabPane tab=\"Report\" key=\"report\">\r\n        <AccountReport reports={detail.account.reports} />\r\n      </TabPane>\r\n      <TabPane tab=\"Subscription\" key=\"subscription\">\r\n        <StudentSub subscriptions={detail.subscriptions} />\r\n      </TabPane>\r\n    </Tabs>\r\n  ) : null;\r\n\r\n  return (\r\n    <Modal\r\n      title={selected ? selected.name : null}\r\n      visible={showDetailModal}\r\n      onCancel={() => setShowDetailModal(false)}\r\n      footer={null}\r\n      width=\"600px\"\r\n      destroyOnClose\r\n      bodyStyle={{ height: '400px', overflow: 'auto' }}\r\n    >\r\n      <Spin spinning={loadingDetail}>{renderDetail}</Spin>\r\n    </Modal>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport axios from '../../lib/utils/axiosConfig';\r\nimport { Table, Tag, Pagination, Spin, Input } from 'antd';\r\nimport styles from './Students.module.css';\r\nimport StudentProfile from './StudentProfile';\r\nconst { Search } = Input;\r\n\r\nexport default function Students() {\r\n  const [pageSize, setPageSize] = useState(10);\r\n  const [students, setStudents] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n  const [searchKey, setSearchKey] = useState('');\r\n  const [total, setTotal] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const [showDetailModal, setShowDetailModal] = useState(false);\r\n  const [selected, setSelected] = useState(null);\r\n\r\n  const getStudentsData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const result = await axios.get(`/students?page=${page}&size=${pageSize}&search=` + searchKey);\r\n      const tableData = [];\r\n      result.data.students.forEach(student => {\r\n        tableData.push({\r\n          key: student.id,\r\n          id: student.id,\r\n          name: student.name,\r\n          username: student.account.username,\r\n          email: student.account.email,\r\n          state: student.account.state,\r\n          verification: student.account.verification,\r\n          accountId: student.account.id\r\n        });\r\n      });\r\n      setTotal(result.data.totalResults);\r\n      setStudents(tableData);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      alert(error.response.data.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getStudentsData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [page, pageSize, searchKey]);\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Name',\r\n      dataIndex: 'name'\r\n    },\r\n    {\r\n      title: 'Username',\r\n      dataIndex: 'username'\r\n    },\r\n    {\r\n      title: 'Email',\r\n      dataIndex: 'email'\r\n    },\r\n    {\r\n      title: 'State',\r\n      dataIndex: 'state',\r\n      render: state => (state ? <Tag color=\"success\">Active</Tag> : <Tag color=\"error\">Inactive</Tag>)\r\n    },\r\n    {\r\n      title: 'Verification',\r\n      dataIndex: 'verification',\r\n      render: verification =>\r\n        verification ? <Tag color=\"success\">Verified</Tag> : <Tag color=\"default\">Unverified</Tag>\r\n    }\r\n  ];\r\n\r\n  const showTotal = () => {\r\n    return `Total ${total} results`;\r\n  };\r\n\r\n  const changePageSize = (current, size) => {\r\n    setPageSize(size);\r\n    setPage(Math.ceil(total / size));\r\n  };\r\n\r\n  const changePage = (page, pageSize) => {\r\n    setPage(page);\r\n  };\r\n\r\n  const onSelectRow = (record, index) => {\r\n    return {\r\n      onClick: event => {\r\n        setSelected(record);\r\n        setShowDetailModal(true);\r\n      }\r\n    };\r\n  };\r\n\r\n  const searchUser = value => {\r\n    setSearchKey(value);\r\n  };\r\n\r\n  return (\r\n    <div className={styles.studentsLayout}>\r\n      <StudentProfile\r\n        setShowDetailModal={setShowDetailModal}\r\n        showDetailModal={showDetailModal}\r\n        getStudentsData={getStudentsData}\r\n        selected={selected}\r\n      />\r\n      <div className={styles.searchBar}>\r\n        <Search placeholder=\"Search for username, name or email\" onSearch={searchUser} enterButton />\r\n      </div>\r\n      <Spin spinning={loading}>\r\n        <Table columns={columns} dataSource={students} pagination={false} onRow={onSelectRow} />\r\n      </Spin>\r\n      <div className={styles.paginationWrapper}>\r\n        <Pagination\r\n          current={page}\r\n          defaultCurrent={page}\r\n          total={total}\r\n          pageSize={pageSize}\r\n          showSizeChanger\r\n          showTotal={showTotal}\r\n          onShowSizeChange={changePageSize}\r\n          onChange={changePage}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Tag, Table } from 'antd';\r\nimport { PAYMENT_STATE } from '../../lib/constants';\r\nimport moment from 'moment';\r\n\r\nexport default function TutorPayment({ payments }) {\r\n  const columns = [\r\n    {\r\n      title: 'Date',\r\n      dataIndex: 'createdAt',\r\n      render: createdAt => {\r\n        return <div>{moment(createdAt).format('MMMM Do YYYY, h:mm:ss a')}</div>;\r\n      }\r\n    },\r\n    {\r\n      title: 'Price',\r\n      dataIndex: 'price'\r\n    },\r\n    {\r\n      title: 'State',\r\n      dataIndex: 'state',\r\n      render: state => {\r\n        if (state === PAYMENT_STATE.COMPLETED) {\r\n          return <Tag color=\"success\">Completed</Tag>;\r\n        } else if (state === PAYMENT_STATE.PENDING) {\r\n          return <Tag color=\"blue\">Pending</Tag>;\r\n        } else {\r\n          return <Tag color=\"error\">Cancelled</Tag>;\r\n        }\r\n      }\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <div>\r\n      <Table rowKey=\"id\" columns={columns} dataSource={payments} pagination={false} />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport ReviewSummary from '../../components/ReviewSummary';\r\nimport Review from '../../components/Review';\r\nimport { List } from 'antd';\r\nimport axios from '../../lib/utils/axiosConfig';\r\nimport { getReviewCount } from '../../lib/utils/getReviewCount';\r\n\r\nexport default function TutorReviews({ selected }) {\r\n  const [reviews, setReviews] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (selected) {\r\n      const getTutorReview = async () => {\r\n        try {\r\n          const result = await axios.get('/reviews/' + selected.id);\r\n          const ratingCount = getReviewCount(result.data.reviews);\r\n          setReviews({ ...result.data, ratingCount });\r\n        } catch (error) {\r\n          alert(error.response.data.message);\r\n        }\r\n      };\r\n      getTutorReview();\r\n    }\r\n  }, [selected]);\r\n  const reload = async () => {\r\n    try {\r\n      const result = await axios.get('/reviews/' + selected.id);\r\n      const ratingCount = getReviewCount(result.data.reviews);\r\n      setReviews({ ...result.data, ratingCount });\r\n    } catch (error) {\r\n      alert(error.response.data.message);\r\n    }\r\n  };\r\n  let reviewsRender = null;\r\n  if (reviews) {\r\n    reviewsRender = (\r\n      <div>\r\n        <ReviewSummary reviews={reviews} />\r\n        <List\r\n          itemLayout=\"horizontal\"\r\n          dataSource={reviews.reviews}\r\n          renderItem={item => (\r\n            <List.Item>\r\n              <Review review={item} getTutorReview={reload} />\r\n            </List.Item>\r\n          )}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n  return reviewsRender;\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport styles from './TutorProfile.module.css';\r\nimport { Tag, Spin, Modal, Avatar, Tabs, Button, Alert, Descriptions } from 'antd';\r\nimport { serverUrl } from '../../lib/constants';\r\nimport { UserOutlined, FileDoneOutlined } from '@ant-design/icons';\r\nimport moment from 'moment';\r\nimport { STATES, PROFILE_STATUS } from '../../lib/constants';\r\nimport VideoPlayer from './VideoPlayer';\r\nimport axios from '../../lib/utils/axiosConfig';\r\nimport CallHistories from './CallHistories';\r\nimport AccountReport from './AccountReport';\r\nimport TutorPayment from './TutorPayment';\r\nimport TutorReviews from './TutorReviews';\r\n\r\nconst { TabPane } = Tabs;\r\n\r\nexport default function TutorProfile({ selected, setShowDetailModal, getTutorsData, showDetailModal }) {\r\n  const [loadingDetail, setLoadingDetail] = useState(false);\r\n  const [detail, setDetail] = useState(null);\r\n  const [updateStatusLoading, setUpdateStatusLoading] = useState(false);\r\n  const [stateLoading, setStateLoading] = useState(false);\r\n\r\n  const updateProfileStatus = async status => {\r\n    try {\r\n      setUpdateStatusLoading(true);\r\n      await axios.put('/tutors/' + selected.id, { profileStatus: status });\r\n      await getTutorsData();\r\n      setUpdateStatusLoading(false);\r\n      setShowDetailModal(false);\r\n    } catch (error) {\r\n      setUpdateStatusLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateStateUser = async state => {\r\n    try {\r\n      setStateLoading(true);\r\n      await axios.put('/accounts/' + selected.accountId, { state: state });\r\n      await getTutorsData();\r\n      setStateLoading(false);\r\n      setShowDetailModal(false);\r\n    } catch (error) {\r\n      setStateLoading(false);\r\n      alert(error.response.data.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const getTutorDetail = async () => {\r\n      try {\r\n        setLoadingDetail(true);\r\n        const result = await axios.get('/tutors/' + selected.id);\r\n        setDetail(result.data.tutor);\r\n        setLoadingDetail(false);\r\n      } catch (error) {\r\n        setLoadingDetail(false);\r\n      }\r\n    };\r\n    if (selected) {\r\n      getTutorDetail();\r\n    }\r\n  }, [selected]);\r\n\r\n  let statusControl = (\r\n    <div className={styles.statusControl}>\r\n      <Alert showIcon message=\"Rejected\" type=\"error\" />\r\n      <div className={styles.statusControlBtnWrapper}>\r\n        <Button\r\n          type=\"primary\"\r\n          style={{ backgroundColor: '#52c41a', color: 'white', borderColor: '#52c41a' }}\r\n          className={styles.statusControlBtn}\r\n          onClick={() => updateProfileStatus(PROFILE_STATUS.ACCEPTED)}\r\n        >\r\n          Accept\r\n        </Button>\r\n        <Button className={styles.statusControlBtn} onClick={() => updateProfileStatus(PROFILE_STATUS.PENDING)}>\r\n          Pending\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n  if (selected && selected.profileStatus === PROFILE_STATUS.ACCEPTED) {\r\n    statusControl = (\r\n      <div className={styles.statusControl}>\r\n        <Alert showIcon message=\"Accepted\" type=\"success\" />\r\n        <div className={styles.statusControlBtnWrapper}>\r\n          <Button className={styles.statusControlBtn} onClick={() => updateProfileStatus(PROFILE_STATUS.PENDING)}>\r\n            Pending\r\n          </Button>\r\n          <Button\r\n            type=\"primary\"\r\n            danger\r\n            className={styles.statusControlBtn}\r\n            onClick={() => updateProfileStatus(PROFILE_STATUS.REJECTED)}\r\n          >\r\n            Reject\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  if (selected && selected.profileStatus === PROFILE_STATUS.PENDING) {\r\n    statusControl = (\r\n      <div className={styles.statusControl}>\r\n        <Alert showIcon message=\"Pending\" type=\"info\" />\r\n        <div className={styles.statusControlBtnWrapper}>\r\n          <Button\r\n            className={styles.statusControlBtn}\r\n            style={{ backgroundColor: '#52c41a', color: 'white', borderColor: '#52c41a' }}\r\n            onClick={() => updateProfileStatus(PROFILE_STATUS.ACCEPTED)}\r\n          >\r\n            Accept\r\n          </Button>\r\n          <Button\r\n            type=\"primary\"\r\n            danger\r\n            className={styles.statusControlBtn}\r\n            onClick={() => updateProfileStatus(PROFILE_STATUS.REJECTED)}\r\n          >\r\n            Reject\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const tutorProfile = (\r\n    <div>\r\n      <Spin spinning={updateStatusLoading}>\r\n        {statusControl}\r\n        <div>\r\n          {detail ? (\r\n            <div>\r\n              <div className={styles.detailWrapper}>\r\n                <Descriptions bordered size=\"small\" column={1} title=\"Teaching preferences\">\r\n                  <Descriptions.Item label=\"Student level\">{detail.student_lvl}</Descriptions.Item>\r\n                  <Descriptions.Item label=\"Student type\">{detail.student_type}</Descriptions.Item>\r\n                  <Descriptions.Item label=\"Accent\">{detail.accent}</Descriptions.Item>\r\n                  <Descriptions.Item label=\"Fluency\">{detail.fluency}</Descriptions.Item>\r\n                  <Descriptions.Item label=\"Tutor styles\">\r\n                    {' '}\r\n                    {detail.teaching_styles\r\n                      ? JSON.parse(detail.teaching_styles).map(style => {\r\n                          return <Tag key={style}>{style}</Tag>;\r\n                        })\r\n                      : null}\r\n                  </Descriptions.Item>\r\n                  <Descriptions.Item label=\"Specialities\">\r\n                    {detail.specialities\r\n                      ? JSON.parse(detail.specialities).map(speciality => {\r\n                          return <Tag key={speciality}>{speciality}</Tag>;\r\n                        })\r\n                      : null}\r\n                  </Descriptions.Item>\r\n                </Descriptions>\r\n              </div>\r\n              <div className={styles.detailWrapper}>\r\n                <Descriptions bordered size=\"small\" column={1} title=\"CV\">\r\n                  <Descriptions.Item label=\"Interests\">{detail.interests}</Descriptions.Item>\r\n                  <Descriptions.Item label=\"Education\">{detail.education}</Descriptions.Item>\r\n                  <Descriptions.Item label=\"Experience\">{detail.experience}</Descriptions.Item>\r\n                  <Descriptions.Item label=\"Profession\">{detail.profession}</Descriptions.Item>\r\n                  <Descriptions.Item label=\"Reason\">{detail.reason}</Descriptions.Item>\r\n                </Descriptions>\r\n              </div>\r\n              <div className={styles.detailWrapper}>\r\n                <p className={styles.detailTitle}>Certificates</p>\r\n                <div className={styles.uploadedCert}>\r\n                  {detail.certificates\r\n                    ? JSON.parse(detail.certificates).map((cert, index) => {\r\n                        return (\r\n                          <a key={index} href={serverUrl + cert.path}>\r\n                            <FileDoneOutlined />\r\n                            {cert.originalname}\r\n                          </a>\r\n                        );\r\n                      })\r\n                    : null}\r\n                </div>\r\n              </div>\r\n              <div className={styles.detailWrapper}>\r\n                <Descriptions bordered size=\"small\" column={1} title=\"Introduction\">\r\n                  <Descriptions.Item label=\"Introduction\">{detail.introduction}</Descriptions.Item>\r\n                </Descriptions>\r\n                {detail.video ? (\r\n                  <div className={styles.videoWrapper}>\r\n                    <VideoPlayer username={selected.username} />\r\n                  </div>\r\n                ) : null}\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </Spin>\r\n    </div>\r\n  );\r\n\r\n  const renderDetail = detail ? (\r\n    <Tabs defaultActiveKey=\"info\" type=\"card\">\r\n      <TabPane tab=\"Info\" key=\"info\">\r\n        <div className={styles.detail}>\r\n          <div className={styles.detailBasic}>\r\n            {detail.avatar ? (\r\n              <Avatar src={serverUrl + detail.avatar} size={100} />\r\n            ) : (\r\n              <Avatar icon={<UserOutlined />} size={100} />\r\n            )}\r\n            <div className={styles.detailBasicInfo}>\r\n              <Descriptions size=\"small\" column={1} title={detail.name} bordered>\r\n                <Descriptions.Item label=\"Username\">{selected.username}</Descriptions.Item>\r\n                <Descriptions.Item label=\"Email\">{selected.email}</Descriptions.Item>\r\n                <Descriptions.Item label=\"Phone\">{detail.phone}</Descriptions.Item>\r\n                <Descriptions.Item label=\"Address\">{detail.address}</Descriptions.Item>\r\n                <Descriptions.Item label=\"Birthdate\">\r\n                  {detail.birthdate ? moment(detail.birthdate).format('YYYY-MM-DD') : null}\r\n                </Descriptions.Item>\r\n                <Descriptions.Item label=\"Status\">\r\n                  {selected.verification ? <Tag color=\"success\">Verified</Tag> : <Tag color=\"default\">Unverified</Tag>}\r\n                  {selected.state ? <Tag color=\"success\">Active</Tag> : <Tag color=\"error\">Inactive</Tag>}\r\n                </Descriptions.Item>\r\n              </Descriptions>\r\n            </div>\r\n          </div>\r\n          <div className={styles.banBtnHolder}>\r\n            {selected.state ? (\r\n              <Button\r\n                loading={stateLoading}\r\n                className={styles.changeStateBtn}\r\n                type=\"primary\"\r\n                danger\r\n                onClick={() => updateStateUser(STATES.INACTIVE)}\r\n              >\r\n                Ban\r\n              </Button>\r\n            ) : (\r\n              <Button\r\n                loading={stateLoading}\r\n                className={styles.changeStateBtn}\r\n                type=\"primary\"\r\n                onClick={() => updateStateUser(STATES.ACTIVE)}\r\n              >\r\n                Unban\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </TabPane>\r\n      <TabPane tab=\"Profile\" key=\"profile\">\r\n        {tutorProfile}\r\n      </TabPane>\r\n      <TabPane tab=\"History\" key=\"history\">\r\n        <CallHistories callHistories={detail.call_histories} />\r\n      </TabPane>\r\n      <TabPane tab=\"Report\" key=\"report\">\r\n        <AccountReport reports={detail.account.reports} />\r\n      </TabPane>\r\n      <TabPane tab=\"Payment\" key=\"payment\">\r\n        <TutorPayment payments={detail.payments} />\r\n      </TabPane>\r\n      <TabPane tab=\"Reviews\" key=\"reviews\">\r\n        <TutorReviews selected={detail} />\r\n      </TabPane>\r\n    </Tabs>\r\n  ) : null;\r\n\r\n  return (\r\n    <Modal\r\n      title={selected ? selected.name : null}\r\n      visible={showDetailModal}\r\n      onCancel={() => setShowDetailModal(false)}\r\n      footer={null}\r\n      width=\"600px\"\r\n      destroyOnClose\r\n      bodyStyle={{ height: '400px', overflow: 'auto' }}\r\n    >\r\n      <Spin spinning={loadingDetail}>{renderDetail}</Spin>\r\n    </Modal>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport axios from '../../lib/utils/axiosConfig';\r\nimport { Table, Tag, Pagination, Input, Spin } from 'antd';\r\nimport styles from './Tutors.module.css';\r\nimport { PROFILE_STATUS } from '../../lib/constants';\r\nimport TutorProfile from './TutorProfile';\r\nconst { Search } = Input;\r\n\r\nexport default function Tutors() {\r\n  const [pageSize, setPageSize] = useState(10);\r\n  const [tutors, setTutors] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n  const [searchKey, setSearchKey] = useState('');\r\n  const [total, setTotal] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const [showDetailModal, setShowDetailModal] = useState(false);\r\n  const [selected, setSelected] = useState(null);\r\n\r\n  const getTutorsData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const result = await axios.get(`/tutors?page=${page}&size=${pageSize}&search=` + searchKey);\r\n      const tableData = [];\r\n      result.data.tutors.forEach(tutor => {\r\n        tableData.push({\r\n          key: tutor.id,\r\n          id: tutor.id,\r\n          name: tutor.name,\r\n          username: tutor.account.username,\r\n          email: tutor.account.email,\r\n          state: tutor.account.state,\r\n          verification: tutor.account.verification,\r\n          accountId: tutor.account.id,\r\n          profileStatus: tutor.profileStatus\r\n        });\r\n      });\r\n      setTotal(result.data.totalResults);\r\n      setTutors(tableData);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      alert(error.response.data.message);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getTutorsData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [page, pageSize, searchKey]);\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Name',\r\n      dataIndex: 'name'\r\n    },\r\n    {\r\n      title: 'Username',\r\n      dataIndex: 'username'\r\n    },\r\n    {\r\n      title: 'Email',\r\n      dataIndex: 'email'\r\n    },\r\n    {\r\n      title: 'State',\r\n      dataIndex: 'state',\r\n      render: state => (state ? <Tag color=\"success\">Active</Tag> : <Tag color=\"error\">Inactive</Tag>)\r\n    },\r\n    {\r\n      title: 'Verification',\r\n      dataIndex: 'verification',\r\n      render: verification =>\r\n        verification ? <Tag color=\"success\">Verified</Tag> : <Tag color=\"default\">Unverified</Tag>\r\n    },\r\n    {\r\n      title: 'Profile status',\r\n      dataIndex: 'profileStatus',\r\n      render: profileStatus => {\r\n        if (profileStatus === PROFILE_STATUS.ACCEPTED) {\r\n          return <Tag color=\"success\">Accepted</Tag>;\r\n        } else if (profileStatus === PROFILE_STATUS.PENDING) {\r\n          return <Tag color=\"blue\">Pending</Tag>;\r\n        } else {\r\n          return <Tag color=\"error\">Rejected</Tag>;\r\n        }\r\n      }\r\n    }\r\n  ];\r\n\r\n  const showTotal = () => {\r\n    return `Total ${total} results`;\r\n  };\r\n\r\n  const changePageSize = (current, size) => {\r\n    setPageSize(size);\r\n    setPage(Math.ceil(total / size));\r\n  };\r\n\r\n  const changePage = (page, pageSize) => {\r\n    setPage(page);\r\n  };\r\n\r\n  const onSelectRow = (record, index) => {\r\n    return {\r\n      onClick: event => {\r\n        setSelected(record);\r\n        setShowDetailModal(true);\r\n      }\r\n    };\r\n  };\r\n\r\n  const searchUser = value => {\r\n    setSearchKey(value);\r\n  };\r\n\r\n  return (\r\n    <div className={styles.tutorsLayout}>\r\n      <TutorProfile\r\n        selected={selected}\r\n        setShowDetailModal={setShowDetailModal}\r\n        showDetailModal={showDetailModal}\r\n        getTutorsData={getTutorsData}\r\n      />\r\n      <div className={styles.searchBar}>\r\n        <Search placeholder=\"Search for username, name or email\" onSearch={searchUser} enterButton />\r\n      </div>\r\n      <Spin spinning={loading}>\r\n        <Table columns={columns} dataSource={tutors} pagination={false} onRow={onSelectRow} />\r\n      </Spin>\r\n      <div className={styles.paginationWrapper}>\r\n        <Pagination\r\n          current={page}\r\n          defaultCurrent={page}\r\n          total={total}\r\n          pageSize={pageSize}\r\n          showSizeChanger\r\n          showTotal={showTotal}\r\n          onShowSizeChange={changePageSize}\r\n          onChange={changePage}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Modal, Button } from 'antd';\r\nimport 'video.js/dist/video-js.css';\r\nimport { serverUrl } from '../../lib/constants';\r\nimport CallRecordPlayer from '../../components/CallRecordPlayer';\r\nimport styles from './ReportDetailModal.module.css';\r\nimport moment from 'moment';\r\nimport { REPORT_STATE, ROLES } from '../../lib/constants';\r\nimport axios from '../../lib/utils/axiosConfig';\r\n\r\nexport default function ReportDetailModal({ showReportDetail, selected, setShowReportDetail, getReports }) {\r\n  const updateReport = async state => {\r\n    try {\r\n      await axios.put('/reports/' + selected.id, {\r\n        state\r\n      });\r\n      getReports();\r\n      setShowReportDetail(false);\r\n    } catch (error) {\r\n      setShowReportDetail(false);\r\n    }\r\n  };\r\n  return selected ? (\r\n    <Modal\r\n      title={'Report - ' + moment(selected.createdAt).format('MMMM Do YYYY, h:mm:ss a')}\r\n      visible={showReportDetail}\r\n      onCancel={() => setShowReportDetail(false)}\r\n      footer={null}\r\n      width=\"600px\"\r\n      destroyOnClose\r\n      bodyStyle={{ height: '600px', overflow: 'auto' }}\r\n    >\r\n      <div className={styles.reportDetail}>\r\n        <div className={styles.reportDetailContent}>\r\n          <div className={styles.reportLabel}>\r\n            Call at:{' '}\r\n            <span className={styles.reportContent}>\r\n              {moment(selected.call_history.createdAt).format('MMMM Do YYYY, h:mm:ss a')}\r\n            </span>\r\n          </div>\r\n          <div className={styles.reportLabel}>\r\n            Reason: <span className={styles.reportContent}>{selected.reason}</span>\r\n          </div>\r\n          <div className={styles.reportLabel}>\r\n            Description: <span className={styles.reportContent}>{selected.description}</span>\r\n          </div>\r\n          {selected.account.role === ROLES.STUDENT ? (\r\n            <div>\r\n              <div className={styles.reportLabel}>\r\n                Name: <span className={styles.reportContent}>{selected.call_history.student.name}</span>\r\n              </div>\r\n              <CallRecordPlayer url={`${serverUrl}api/call-histories/${selected.call_history.id}/studentVideo`} />\r\n            </div>\r\n          ) : (\r\n            <div>\r\n              <div className={styles.reportLabel}>\r\n                Name: <span className={styles.reportContent}>{selected.call_history.tutor.name}</span>\r\n              </div>\r\n              <CallRecordPlayer url={`${serverUrl}api/call-histories/${selected.call_history.id}/tutorVideo`} />\r\n            </div>\r\n          )}\r\n        </div>\r\n        {selected.state === REPORT_STATE.PENDING ? (\r\n          <div className={styles.statusControlBtnWrapper}>\r\n            <Button\r\n              className={styles.statusControlBtn}\r\n              style={{ backgroundColor: '#52c41a', color: 'white', borderColor: '#52c41a' }}\r\n              onClick={() => updateReport(REPORT_STATE.RESOLVED)}\r\n            >\r\n              Resolve\r\n            </Button>\r\n            <Button\r\n              type=\"primary\"\r\n              danger\r\n              className={styles.statusControlBtn}\r\n              onClick={() => updateReport(REPORT_STATE.CANCELLED)}\r\n            >\r\n              Cancel\r\n            </Button>\r\n          </div>\r\n        ) : null}\r\n        {selected.state === REPORT_STATE.RESOLVED ? (\r\n          <div className={styles.statusControlBtnWrapper}>\r\n            <Button className={styles.statusControlBtn} onClick={() => updateReport(REPORT_STATE.PENDING)}>\r\n              Pending\r\n            </Button>\r\n            <Button\r\n              type=\"primary\"\r\n              danger\r\n              className={styles.statusControlBtn}\r\n              onClick={() => updateReport(REPORT_STATE.CANCELLED)}\r\n            >\r\n              Cancel\r\n            </Button>\r\n          </div>\r\n        ) : null}\r\n        {selected.state === REPORT_STATE.CANCELLED ? (\r\n          <div className={styles.statusControlBtnWrapper}>\r\n            <Button\r\n              className={styles.statusControlBtn}\r\n              style={{ backgroundColor: '#52c41a', color: 'white', borderColor: '#52c41a' }}\r\n              onClick={() => updateReport(REPORT_STATE.RESOLVED)}\r\n            >\r\n              Resolve\r\n            </Button>\r\n            <Button className={styles.statusControlBtn} onClick={() => updateReport(REPORT_STATE.PENDING)}>\r\n              Pending\r\n            </Button>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    </Modal>\r\n  ) : null;\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Table, Spin, Tag } from 'antd';\r\nimport axios from '../../lib/utils/axiosConfig';\r\nimport { REPORT_STATE, ROLES } from '../../lib/constants';\r\nimport moment from 'moment';\r\nimport styles from './Reports.module.css';\r\nimport ReportDetailModal from './ReportDetailModal';\r\n\r\nexport default function Report() {\r\n  const [reports, setReports] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [selected, setSelected] = useState(null);\r\n  const [showReportDetail, setShowReportDetail] = useState(false);\r\n\r\n  const getReports = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await axios.get('/reports');\r\n      setReports(result.data.reports);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      alert(error.response.data.message);\r\n      setLoading(false);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    getReports();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n  const columns = [\r\n    {\r\n      title: 'Date',\r\n      dataIndex: 'createdAt',\r\n      render: createdAt => {\r\n        return <div>{moment(createdAt).format('MMMM Do YYYY, h:mm:ss a')}</div>;\r\n      }\r\n    },\r\n    {\r\n      title: 'Username',\r\n      render: (text, record) => {\r\n        return <div>{record.account.username}</div>;\r\n      }\r\n    },\r\n    {\r\n      title: 'Role',\r\n      render: (text, record) => {\r\n        if (record.account.role === ROLES.STUDENT) {\r\n          return <div>Student</div>;\r\n        } else {\r\n          return <div>Tutor</div>;\r\n        }\r\n      }\r\n    },\r\n    {\r\n      title: 'Reason',\r\n      dataIndex: 'reason'\r\n    },\r\n    {\r\n      title: 'State',\r\n      dataIndex: 'state',\r\n      render: state => {\r\n        if (state === REPORT_STATE.RESOLVED) {\r\n          return <Tag color=\"success\">Resolved</Tag>;\r\n        } else if (state === REPORT_STATE.PENDING) {\r\n          return <Tag color=\"blue\">Pending</Tag>;\r\n        } else {\r\n          return <Tag color=\"error\">Cancelled</Tag>;\r\n        }\r\n      }\r\n    }\r\n  ];\r\n\r\n  const onSelectRow = (record, index) => {\r\n    return {\r\n      onClick: event => {\r\n        setSelected(record);\r\n        setShowReportDetail(true);\r\n      }\r\n    };\r\n  };\r\n\r\n  return (\r\n    <div className={styles.reports}>\r\n      <ReportDetailModal\r\n        setShowReportDetail={setShowReportDetail}\r\n        showReportDetail={showReportDetail}\r\n        selected={selected}\r\n        getReports={getReports}\r\n      />\r\n      <Spin spinning={loading}>\r\n        <Table columns={columns} dataSource={reports} pagination={false} rowKey=\"id\" onRow={onSelectRow} />\r\n      </Spin>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Table, Spin, Tag, Popconfirm, Button } from 'antd';\r\nimport axios from '../../lib/utils/axiosConfig';\r\nimport { SUB_STATE, SUB_TIER } from '../../lib/constants';\r\nimport moment from 'moment';\r\nimport styles from './Subscriptions.module.css';\r\nimport { ReloadOutlined } from '@ant-design/icons';\r\n\r\nexport default function Subscriptions() {\r\n  const [studentSub, setStudentSub] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const getStudentSub = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await axios.get('/subscriptions/');\r\n      const subs = [];\r\n      result.data.subscriptions.forEach(sub => {\r\n        sub.key = sub.id;\r\n        sub.username = sub.student.account.username;\r\n        sub.name = sub.student.name;\r\n        subs.push(sub);\r\n      });\r\n      setStudentSub(subs);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      alert(error.response.data.message);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const cancelSubscription = async id => {\r\n    setLoading(true);\r\n    try {\r\n      await axios.put('/subscriptions/' + id, {\r\n        state: SUB_STATE.CANCELED\r\n      });\r\n      getStudentSub();\r\n    } catch (error) {\r\n      alert(error.response.data.message);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const completeSubscription = async id => {\r\n    setLoading(true);\r\n    try {\r\n      await axios.put('/subscriptions/' + id, {\r\n        state: SUB_STATE.COMPLETED\r\n      });\r\n      getStudentSub();\r\n    } catch (error) {\r\n      alert(error.response.data.message);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Date',\r\n      dataIndex: 'createdAt',\r\n      render: createdAt => {\r\n        return <div>{moment(createdAt).format('MMMM Do YYYY, h:mm:ss a')}</div>;\r\n      }\r\n    },\r\n    {\r\n      title: 'Name',\r\n      dataIndex: 'name'\r\n    },\r\n    {\r\n      title: 'Username',\r\n      dataIndex: 'username'\r\n    },\r\n    {\r\n      title: 'Tier',\r\n      dataIndex: 'tier',\r\n      render: tier => {\r\n        if (tier === SUB_TIER.SILVER) {\r\n          return <Tag color=\"#C0C0C0\">Silver</Tag>;\r\n        } else if (tier === SUB_TIER.GOLD) {\r\n          return <Tag color=\"#DAA520\">Gold</Tag>;\r\n        } else if (tier === SUB_TIER.PLATIUM) {\r\n          return <Tag color=\"processing\">Platium</Tag>;\r\n        } else {\r\n          return <Tag>Normal</Tag>;\r\n        }\r\n      }\r\n    },\r\n    {\r\n      title: 'Duration',\r\n      dataIndex: 'duration',\r\n      render: duration => {\r\n        return <div>{duration / 60000} mins</div>;\r\n      }\r\n    },\r\n    {\r\n      title: 'Price',\r\n      dataIndex: 'price',\r\n      render: price => {\r\n        return <div>{price}$</div>;\r\n      }\r\n    },\r\n    {\r\n      title: 'State',\r\n      dataIndex: 'state',\r\n      render: state => {\r\n        if (state === SUB_STATE.COMPLETED) {\r\n          return <Tag color=\"success\">Completed</Tag>;\r\n        } else if (state === SUB_STATE.PENDING) {\r\n          return <Tag color=\"blue\">Pending</Tag>;\r\n        } else {\r\n          return <Tag color=\"error\">Cancelled</Tag>;\r\n        }\r\n      }\r\n    },\r\n    {\r\n      title: 'Action',\r\n      dataIndex: 'state',\r\n      render: (text, record) => {\r\n        if (record.state === SUB_STATE.PENDING) {\r\n          return (\r\n            <div>\r\n              <Popconfirm\r\n                title=\"Do you want to accept this request?\"\r\n                okText=\"Yes\"\r\n                cancelText=\"No\"\r\n                className={styles.acceptBtn}\r\n                onConfirm={() => completeSubscription(record.id)}\r\n              >\r\n                Complete\r\n              </Popconfirm>\r\n              <Popconfirm\r\n                title=\"Do you want to cancel this request?\"\r\n                okText=\"Yes\"\r\n                cancelText=\"No\"\r\n                className={styles.cancelBtn}\r\n                onConfirm={() => cancelSubscription(record.id)}\r\n              >\r\n                Cancel\r\n              </Popconfirm>\r\n            </div>\r\n          );\r\n        } else {\r\n          return <div>N/A</div>;\r\n        }\r\n      }\r\n    }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    getStudentSub();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n  return (\r\n    <div className={styles.subscriptions}>\r\n      <Spin spinning={loading}>\r\n        <Button className={styles.reload} onClick={getStudentSub} icon={<ReloadOutlined />}>\r\n          Reload\r\n        </Button>\r\n        <Table columns={columns} dataSource={studentSub} pagination={false} />\r\n      </Spin>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport styles from './Payment.module.css';\r\nimport { Table, Spin, Tag, Popconfirm, Button } from 'antd';\r\nimport axios from '../../lib/utils/axiosConfig';\r\nimport { PAYMENT_STATE } from '../../lib/constants';\r\nimport moment from 'moment';\r\nimport { ReloadOutlined } from '@ant-design/icons';\r\n\r\nexport default function Payment() {\r\n  const [payments, setPayments] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const getPayments = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await axios.get('/payments/');\r\n      setPayments(result.data.payments);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      alert(error.response.data.message);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updatePayment = async (id, state) => {\r\n    setLoading(true);\r\n    try {\r\n      await axios.put('/payments/' + id, {\r\n        state: state\r\n      });\r\n      getPayments();\r\n    } catch (error) {\r\n      alert(error.response.data.message);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Date',\r\n      dataIndex: 'createdAt',\r\n      render: createdAt => {\r\n        return <div>{moment(createdAt).format('MMMM Do YYYY, h:mm:ss a')}</div>;\r\n      }\r\n    },\r\n    {\r\n      title: 'Name',\r\n      render: (text, record) => {\r\n        return record.tutor.name;\r\n      }\r\n    },\r\n    {\r\n      title: 'Username',\r\n      render: (text, record) => {\r\n        return record.tutor.account.username;\r\n      }\r\n    },\r\n    {\r\n      title: 'Email',\r\n      dataIndex: 'state',\r\n      render: (text, record) => {\r\n        return record.tutor.account.email;\r\n      }\r\n    },\r\n    {\r\n      title: 'Price',\r\n      dataIndex: 'price',\r\n      render: price => {\r\n        return <div>{price}$</div>;\r\n      }\r\n    },\r\n    {\r\n      title: 'State',\r\n      dataIndex: 'state',\r\n      render: state => {\r\n        if (state === PAYMENT_STATE.COMPLETED) {\r\n          return <Tag color=\"success\">Completed</Tag>;\r\n        } else if (state === PAYMENT_STATE.PENDING) {\r\n          return <Tag color=\"blue\">Pending</Tag>;\r\n        } else {\r\n          return <Tag color=\"error\">Cancelled</Tag>;\r\n        }\r\n      }\r\n    },\r\n    {\r\n      title: 'Action',\r\n      render: (text, record) => {\r\n        if (record.state === PAYMENT_STATE.PENDING) {\r\n          return (\r\n            <div>\r\n              <Popconfirm\r\n                title=\"Do you want to perform this action?\"\r\n                okText=\"Yes\"\r\n                cancelText=\"No\"\r\n                className={styles.acceptBtn}\r\n                onConfirm={() => updatePayment(record.id, PAYMENT_STATE.COMPLETED)}\r\n              >\r\n                Complete\r\n              </Popconfirm>\r\n              <Popconfirm\r\n                title=\"Do you want to perform this action?\"\r\n                okText=\"Yes\"\r\n                cancelText=\"No\"\r\n                className={styles.cancelBtn}\r\n                onConfirm={() => updatePayment(record.id, PAYMENT_STATE.CANCELED)}\r\n              >\r\n                Cancel\r\n              </Popconfirm>\r\n            </div>\r\n          );\r\n        } else if (record.state === PAYMENT_STATE.COMPLETED) {\r\n          return (\r\n            <div>\r\n              <Popconfirm\r\n                title=\"Do you want to perform this action?\"\r\n                okText=\"Yes\"\r\n                cancelText=\"No\"\r\n                className={styles.pendingBtn}\r\n                onConfirm={() => updatePayment(record.id, PAYMENT_STATE.PENDING)}\r\n              >\r\n                Pending\r\n              </Popconfirm>\r\n              <Popconfirm\r\n                title=\"Do you want to perform this action?\"\r\n                okText=\"Yes\"\r\n                cancelText=\"No\"\r\n                className={styles.cancelBtn}\r\n                onConfirm={() => updatePayment(record.id, PAYMENT_STATE.CANCELED)}\r\n              >\r\n                Cancel\r\n              </Popconfirm>\r\n            </div>\r\n          );\r\n        } else {\r\n          return (\r\n            <div>\r\n              <Popconfirm\r\n                title=\"Do you want to perform this action?\"\r\n                okText=\"Yes\"\r\n                cancelText=\"No\"\r\n                className={styles.acceptBtn}\r\n                onConfirm={() => updatePayment(record.id, PAYMENT_STATE.COMPLETED)}\r\n              >\r\n                Complete\r\n              </Popconfirm>\r\n              <Popconfirm\r\n                title=\"Do you want to perform this action?\"\r\n                okText=\"Yes\"\r\n                cancelText=\"No\"\r\n                className={styles.pendingBtn}\r\n                onConfirm={() => updatePayment(record.id, PAYMENT_STATE.PENDING)}\r\n              >\r\n                Pending\r\n              </Popconfirm>\r\n            </div>\r\n          );\r\n        }\r\n      }\r\n    }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    getPayments();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n  return (\r\n    <div className={styles.payments}>\r\n      <Spin spinning={loading}>\r\n        <Button className={styles.reload} onClick={getPayments} icon={<ReloadOutlined />}>\r\n          Reload\r\n        </Button>\r\n        <Table rowKey=\"id\" columns={columns} dataSource={payments} pagination={false} />\r\n      </Spin>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useState } from 'react';\r\nimport { AccountContext } from '../../context/AccountContext';\r\nimport FooterContent from '../../components/FooterContent';\r\nimport { Layout, Menu, Dropdown, Avatar } from 'antd';\r\nimport { BarChartOutlined, IdcardOutlined, TeamOutlined, DownOutlined, ExceptionOutlined, MenuUnfoldOutlined, MenuFoldOutlined, KeyOutlined, LogoutOutlined, CreditCardOutlined, DollarCircleOutlined } from '@ant-design/icons';\r\nimport { Link, Route, Switch } from 'react-router-dom';\r\nimport styles from './Admin.module.css';\r\nimport Dashboard from './Dashboard';\r\nimport Students from './Students';\r\nimport Tutors from './Tutors';\r\nimport AvatarPic from '../../assets/admin-avatar.png';\r\nimport Reports from './Reports';\r\nimport ChangePasswordModal from '../../components/ChangePasswordModal';\r\nimport ForgotPasswordModal from '../../components/ForgotPasswordModal';\r\nimport SideBarLogo from '../../components/SideBarLogo';\r\nimport Subscriptions from './Subscriptions';\r\nimport Payment from './Payment';\r\n\r\nconst { Header, Content, Sider } = Layout;\r\n\r\nexport default function Admin(props) {\r\n  const [collapsed, setCollapsed] = useState(false);\r\n  const [isChangePass, setIsChangePass] = useState(false);\r\n  const [isForgotPass, setIsForgotPass] = useState(false);\r\n  const { onSignOut, account } = useContext(AccountContext);\r\n  const { location } = props;\r\n\r\n  const onCollapse = (collapsed) => {\r\n    setCollapsed(collapsed)\r\n  }\r\n\r\n  const userMenu = (\r\n    <Menu>\r\n      <Menu.Item onClick={() => setIsChangePass(true)}>\r\n        <KeyOutlined /><span>Change password</span>\r\n      </Menu.Item>\r\n      <Menu.Item onClick={onSignOut}>\r\n        <LogoutOutlined /><span>Sign out</span>\r\n      </Menu.Item>\r\n    </Menu>\r\n  );\r\n\r\n  return (\r\n    <Layout>\r\n      <ForgotPasswordModal isVisible={isForgotPass} onClose={() => setIsForgotPass(false)} />\r\n      <ChangePasswordModal\r\n        isVisible={isChangePass}\r\n        onClose={() => setIsChangePass(false)}\r\n        onForgot={() => setIsForgotPass(true)}\r\n      />\r\n      <Sider collapsible collapsed={collapsed} onCollapse={onCollapse} className={styles.adminMenu}>\r\n        <SideBarLogo collapsed={collapsed} />\r\n        <Menu theme=\"dark\" defaultSelectedKeys={[\"/admin\"]} mode=\"inline\" selectedKeys={[location.pathname]}>\r\n          <Menu.Item key=\"/admin\">\r\n            <BarChartOutlined /><Link to=\"/admin\"><span>Dashboard</span></Link>\r\n          </Menu.Item>\r\n          <Menu.Item key=\"/admin/students\">\r\n            <TeamOutlined /><Link to=\"/admin/students\"><span>Students</span></Link>\r\n          </Menu.Item>\r\n          <Menu.Item key=\"/admin/tutors\">\r\n            <IdcardOutlined /><Link to=\"/admin/tutors\"><span>Tutors</span></Link>\r\n          </Menu.Item>\r\n          <Menu.Item key=\"/admin/reports\">\r\n            <ExceptionOutlined /><Link to=\"/admin/reports\"><span>Reports</span></Link>\r\n          </Menu.Item>\r\n          <Menu.Item key=\"/admin/subscriptions\">\r\n            <CreditCardOutlined /><Link to=\"/admin/subscriptions\"><span>Subscriptions</span></Link>\r\n          </Menu.Item>\r\n          <Menu.Item key=\"/admin/payment\">\r\n            <DollarCircleOutlined /><Link to=\"/admin/payment\"><span>Payment</span></Link>\r\n          </Menu.Item>\r\n        </Menu>\r\n      </Sider>\r\n      <Layout>\r\n        <Header style={{ background: \"white\" }}>\r\n          {\r\n            collapsed ? <MenuUnfoldOutlined className={styles.menuIcon} onClick={() => setCollapsed(false)} /> : <MenuFoldOutlined className={styles.menuIcon} onClick={() => setCollapsed(true)} />\r\n          }\r\n          <div className={styles.userControl}>\r\n            Hello, {account.username}\r\n            <Dropdown overlay={userMenu} placement=\"bottomLeft\">\r\n              <div><Avatar src={AvatarPic} size=\"large\" draggable={false} /><DownOutlined className={styles.dropDownIcon} /></div>\r\n            </Dropdown>\r\n          </div>\r\n        </Header>\r\n        <Content>\r\n          <Switch>\r\n            <Route path=\"/admin/students\" component={Students} />\r\n            <Route path=\"/admin/tutors\" component={Tutors} />\r\n            <Route path=\"/admin/reports\" component={Reports} />\r\n            <Route path=\"/admin/subscriptions\" component={Subscriptions} />\r\n            <Route path=\"/admin/payment\" component={Payment} />\r\n            <Route path=\"/admin\" component={Dashboard} exact />\r\n          </Switch>\r\n        </Content>\r\n        <FooterContent />\r\n      </Layout>\r\n    </Layout>\r\n\r\n  );\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { removeAccountInfo } from '../lib/utils/getAccountInfo';\r\n\r\nexport default function SignOut() {\r\n  useEffect(() => {\r\n    removeAccountInfo();\r\n  }, []);\r\n  return <Redirect to=\"/\" />\r\n}\r\n","import React, { useContext } from 'react';\r\nimport { Route, Switch, Redirect } from 'react-router-dom';\r\nimport { AccountContext } from '../context/AccountContext';\r\nimport Default from '../pages/default/Default';\r\nimport Student from '../pages/student/Student';\r\nimport Tutor from '../pages/tutor/Tutor';\r\nimport Admin from '../pages/admin/Admin';\r\nimport { ROLES } from '../lib/constants';\r\nimport SignOut from './SignOut';\r\n\r\nexport default function Router() {\r\n  const { account } = useContext(AccountContext);\r\n  if (account && account.role === ROLES.STUDENT) {\r\n    return (\r\n      <Switch>\r\n        <Route path=\"/student\" component={Student} />\r\n        <Redirect to=\"/student\" />\r\n      </Switch>\r\n    );\r\n  } else if (account && account.role === ROLES.TUTOR) {\r\n    return (\r\n      <Switch>\r\n        <Route path=\"/tutor\" component={Tutor} />\r\n        <Redirect to=\"/tutor\" />\r\n      </Switch>\r\n    );\r\n  } else if (account && account.role === ROLES.ADMIN) {\r\n    return (\r\n      <Switch>\r\n        <Route path=\"/admin\" component={Admin} />\r\n        <Redirect to=\"/admin\" />\r\n      </Switch>\r\n    );\r\n  } else {\r\n    return (\r\n      <Switch>\r\n        <Route path=\"/\" exact component={Default} />\r\n        <Route path=\"/sign-out\" component={SignOut} />\r\n        <Redirect to=\"/\" />\r\n      </Switch>\r\n    )\r\n  }\r\n}\r\n","import React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport AccountContextProvider from './context/AccountContext';\r\nimport Router from './components/Router';\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <AccountContextProvider>\r\n        <Router />\r\n      </AccountContextProvider>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(App);\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport './index.css';\nimport 'antd/dist/antd.css'\n\nconst app = (\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>\n);\n\nReactDOM.render(app, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tutorInfo\":\"TutorCard_tutorInfo__CAOr7\",\"tutorInfoDetail\":\"TutorCard_tutorInfoDetail__1eiGT\",\"tutorCard\":\"TutorCard_tutorCard__1UNnv\",\"status\":\"TutorCard_status__3YZHo\",\"tutorName\":\"TutorCard_tutorName__2-f_B\",\"reviewCount\":\"TutorCard_reviewCount__1XOXA\",\"reviewWrapper\":\"TutorCard_reviewWrapper__Vicqo\",\"viewReviews\":\"TutorCard_viewReviews__17v4K\",\"removeFav\":\"TutorCard_removeFav__jhJln\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"teaching\":\"Teaching_teaching__Y0Cv4\",\"waitImg\":\"Teaching_waitImg__Yf0ni\",\"wait\":\"Teaching_wait__2odn_\",\"waitTxt\":\"Teaching_waitTxt__forEC\",\"teachingWrapper\":\"Teaching_teachingWrapper__CP6F6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"payments\":\"Payment_payments__Op5f0\",\"acceptBtn\":\"Payment_acceptBtn__3zchY\",\"cancelBtn\":\"Payment_cancelBtn__3C-u6\",\"pendingBtn\":\"Payment_pendingBtn__1YiPK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"callWindow\":\"CallWindow_callWindow__n8XLW\",\"videoScreenContainer\":\"CallWindow_videoScreenContainer__gOrhc\",\"videoScreen\":\"CallWindow_videoScreen__1p3lS\",\"videoControl\":\"CallWindow_videoControl__FV-OE\",\"callWindowWrapper\":\"CallWindow_callWindowWrapper__2wlA7\",\"callTime\":\"CallWindow_callTime__29Edb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tutorList\":\"TutorList_tutorList__ehXmh\",\"tabPane\":\"TutorList_tabPane__IrfbB\",\"searchBar\":\"TutorList_searchBar__2GQWJ\",\"remainingTimeTitle\":\"TutorList_remainingTimeTitle__1A9YP\",\"searchTool\":\"TutorList_searchTool__3s80a\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"detailWrapper\":\"TutorDetailModal_detailWrapper__2jORT\",\"detailTitle\":\"TutorDetailModal_detailTitle__2aV2I\",\"uploadedCert\":\"TutorDetailModal_uploadedCert__pY1kn\",\"videoWrapper\":\"TutorDetailModal_videoWrapper__3DwCj\"};"],"sourceRoot":""}