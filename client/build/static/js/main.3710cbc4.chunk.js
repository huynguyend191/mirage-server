(this["webpackJsonpmirage-client"]=this["webpackJsonpmirage-client"]||[]).push([[0],{103:function(e,t,a){e.exports={footer:"FooterContent_footer__2LUe0",contactIcon:"FooterContent_contactIcon__3hiC-",contactInfoContainer:"FooterContent_contactInfoContainer__1g1QB"}},104:function(e,t,a){e.exports={profile:"Profile_profile__ek5d7",accountInfoContainer:"Profile_accountInfoContainer__1mcfy",accountInfo:"Profile_accountInfo__3D6LT",name:"Profile_name__S2sO7",collapse:"Profile_collapse__OS-E9",submitWrapper:"Profile_submitWrapper__128sb"}},105:function(e,t,a){e.exports={tutorInfo:"TutorCard_tutorInfo__1fb1s",tutorInfoDetail:"TutorCard_tutorInfoDetail__4Geg_",tutorCard:"TutorCard_tutorCard__1OIY_",status:"TutorCard_status__1a__i",tutorName:"TutorCard_tutorName__2Doqi",reviewCount:"TutorCard_reviewCount__3Aqdy",reviewWrapper:"TutorCard_reviewWrapper__2GRfr"}},106:function(e,t,a){e.exports={videoCall:"VideoCall_videoCall__hjCwP",endCallImg:"VideoCall_endCallImg__QZCEi",afterCall:"VideoCall_afterCall__1W8XM",endUser:"VideoCall_endUser__2X3QB",endDuration:"VideoCall_endDuration__C9Gi6"}},128:function(e,t,a){e.exports={callModal:"CallModal_callModal__1nue_",controlBtns:"CallModal_controlBtns__yj0LT",caller:"CallModal_caller__mWoN_",callerTxt:"CallModal_callerTxt__3NxOV",callModalWrapper:"CallModal_callModalWrapper__2LdYr"}},129:function(e,t,a){e.exports={btnWrapper:"VideoRecorder_btnWrapper__2n7aZ",btnWrapperNoCancel:"VideoRecorder_btnWrapperNoCancel__21x6-",videoBtn:"VideoRecorder_videoBtn__1YqIx"}},130:function(e,t,a){e.exports={logoContainer:"Admin_logoContainer__3WKz2",logo:"Admin_logo__2jN07",logoText:"Admin_logoText__1zzSJ",userControl:"Admin_userControl__1C-I4",dropDownIcon:"Admin_dropDownIcon__bHsT0",adminMenu:"Admin_adminMenu__3FXGL",menuIcon:"Admin_menuIcon__1bvYm"}},142:function(e,t,a){e.exports={signInForm:"SignInModal_signInForm__6dOkt",signInForgot:"SignInModal_signInForgot__YZfZh",signInButton:"SignInModal_signInButton__1e1-r",registerNow:"SignInModal_registerNow__1-qv7"}},144:function(e,t,a){e.exports={study:"Study_study__8o9iI",unverify:"Study_unverify__3F6hb",unverifyImg:"Study_unverifyImg__YMaAt",unverifyTxt:"Study_unverifyTxt__31BQW"}},177:function(e,t,a){e.exports=a.p+"static/media/app-logo.05772604.png"},186:function(e,t,a){e.exports={headerWrapper:"AppLogo_headerWrapper__3QEjT",headerTitle:"AppLogo_headerTitle__SJet6",headerIcon:"AppLogo_headerIcon___aj3L"}},187:function(e,t,a){e.exports={logoContainer:"SideBarLogo_logoContainer__1kC8O",logo:"SideBarLogo_logo__2VbQH",logoText:"SideBarLogo_logoText__38Mpu"}},189:function(e,t,a){e.exports={studentsLayout:"Students_studentsLayout__3whC3",paginationWrapper:"Students_paginationWrapper__3pBWi",searchBar:"Students_searchBar__2Xj53"}},190:function(e,t,a){e.exports={tutorsLayout:"Tutors_tutorsLayout__3m6oR",paginationWrapper:"Tutors_paginationWrapper__qJHen",searchBar:"Tutors_searchBar__1ccNS"}},230:function(e,t,a){e.exports={userControl:"Student_userControl__3SGc9",sideMenu:"Student_sideMenu__2ePph",logoContainer:"Student_logoContainer__1pULu",logo:"Student_logo__2Al0V",logoText:"Student_logoText__1017M"}},231:function(e,t,a){e.exports={forgotPass:"ChangePasswordModal_forgotPass__2PaV8"}},235:function(e,t,a){e.exports={tutorList:"TutorList_tutorList__3lD64",tabPane:"TutorList_tabPane__1Gv0s"}},241:function(e,t,a){e.exports={userControl:"Tutor_userControl__xq5ig",sideMenu:"Tutor_sideMenu__16b7O",logoContainer:"Tutor_logoContainer__1Wyv3",logo:"Tutor_logo__aG4W8",logoText:"Tutor_logoText__3bVip"}},26:function(e,t,a){e.exports={detail:"TutorProfile_detail__26DHV",detailBasic:"TutorProfile_detailBasic__3S1rd",detailName:"TutorProfile_detailName__3RN5s",detailBasicInfo:"TutorProfile_detailBasicInfo__TbTNG",banBtnHolder:"TutorProfile_banBtnHolder__3lFnJ",detailAdditional:"TutorProfile_detailAdditional__31ZIX",detailAdditionalRow:"TutorProfile_detailAdditionalRow__3kWYX",statusControl:"TutorProfile_statusControl__WzUbx",statusControlBtnWrapper:"TutorProfile_statusControlBtnWrapper__3wpvv",statusControlBtn:"TutorProfile_statusControlBtn__kclui",changeStateBtn:"TutorProfile_changeStateBtn__1aC_X",detailWrapper:"TutorProfile_detailWrapper__3K5ya",detailTitle:"TutorProfile_detailTitle__3E2gZ",uploadedCert:"TutorProfile_uploadedCert__2fDK6",videoWrapper:"TutorProfile_videoWrapper__3ZbM5"}},314:function(e,t,a){e.exports=a.p+"static/media/flame-welcome.2b090893.png"},315:function(e,t,a){e.exports=a.p+"static/media/welcome-student.0c7630e5.png"},316:function(e,t,a){e.exports=a.p+"static/media/welcome-tutor.66b32adc.png"},32:function(e,t,a){e.exports={reviewSummary:"ReviewSummary_reviewSummary__kf7Ub",ratingCount:"ReviewSummary_ratingCount__22gqq",ratingCountList:"ReviewSummary_ratingCountList__19gG1",rating:"ReviewSummary_rating__1AeF9",reviewAvg:"ReviewSummary_reviewAvg__3ca9p",reviewOverall:"ReviewSummary_reviewOverall__2zb4q",reviewNumber:"ReviewSummary_reviewNumber__2L6lI"}},325:function(e,t,a){e.exports={submitBtn:"ForgotPasswordModal_submitBtn__3TcfT"}},344:function(e,t,a){e.exports=a.p+"static/media/endcall.6812f833.png"},345:function(e,t,a){e.exports=a.p+"static/media/unverify.e737cc3d.png"},351:function(e,t,a){e.exports={btnWrapper:"VideoPlayer_btnWrapper__3W9-y"}},352:function(e,t,a){e.exports=a.p+"static/media/tutor-wait.a732bc74.png"},353:function(e,t,a){e.exports=a.p+"static/media/complete-profile.5dfe81ca.png"},357:function(e,t,a){e.exports=a.p+"static/media/admin-avatar.4fc32273.png"},363:function(e,t,a){e.exports=a(671)},37:function(e,t,a){e.exports={registerContent:"RegisterModal_registerContent__80mK1",registerWelcome:"RegisterModal_registerWelcome__19TFP",registerForm:"RegisterModal_registerForm__10uvC",registerButton:"RegisterModal_registerButton__2svL6",formWrapper:"RegisterModal_formWrapper__sEKbp",switchMode:"RegisterModal_switchMode__27SKS",switchModeWrapper:"RegisterModal_switchModeWrapper__2HPSb",welcomeImg:"RegisterModal_welcomeImg__OQ1qZ",registerWelcomeContent:"RegisterModal_registerWelcomeContent__3vQbH"}},48:function(e,t){t.PREFERENCE_TYPE=Object.freeze({ENG_ACCENT:"eng_accent",ENG_FLUENCY:"eng_fluency",TEACHING_STYLE:"teaching_style",STUDENT_TYPE:"student_type",STUDENT_LVL:"student_lvl",SPECIALITY:"speciality"}),t.ENG_ACCENT=["North America","North America - Canada","North America - USA","North America - Southern USA","North America - Other","British Isles","British Isles - Received Pronunciation","British Isle - Ireland","British Isles - Scotland","British Isles - Other","South Africa","Australia / New Zealand","Australia","New Zealand","Other"],t.ENG_FLUENCY=["Native","Fluent","Conversational","Basic"],t.TEACHING_STYLE=["Kind & patient","Fun & gregarious","Scholarly & knowledgeable"],t.STUDENT_TYPE=["Adult","Child"],t.STUDENT_LVL=["Beginner","Intermeditate","Advanced"],t.SPECIALITIES=["Friendly conversation","Business English","Public speaking","Test prep (IELTS, TOEFL, etc.)","Grammar instruction, Accent coaching","Correcting speech","Discussing current events","Vocational lessons","Culture (i.e. manners, customs)","Teaching idioms and slang"]},49:function(e,t,a){e.exports={headerContent:"Default_headerContent__3ZlIu",userButton:"Default_userButton__3RtJ9",registerButton:"Default_registerButton__2NXqe",userButtonContainer:"Default_userButtonContainer__hqXNR",defaultBody:"Default_defaultBody__20Ojr",introContainer:"Default_introContainer__2Y07C",welcomeText:"Default_welcomeText__1QUl0",welcomeDescription:"Default_welcomeDescription__1QYFE",introContent:"Default_introContent__16UXl",introImg:"Default_introImg__2XQ5a",becomeTutor:"Default_becomeTutor__1xiNf"}},62:function(e,t,a){e.exports={profile:"Profile_profile__29iwE",accountInfoContainer:"Profile_accountInfoContainer__2PNVq",accountInfo:"Profile_accountInfo__2V7Fk",name:"Profile_name__qbwV3",collapse:"Profile_collapse__2mJ6d",submitWrapper:"Profile_submitWrapper__2SO9c",profileStatus:"Profile_profileStatus__2b2JV",uploadedCert:"Profile_uploadedCert__378RX",introTips:"Profile_introTips__12reB",introInstruct:"Profile_introInstruct__3UBqU"}},624:function(e,t){},637:function(e,t){},649:function(e,t,a){},669:function(e,t,a){},671:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(11),c=a.n(l),o=a(31),i=a(87),s=a(4),u=a(183),m=a(311),d=a.n(m),p=new u.a,f=function(){p.remove("access_token")},E=Object(n.createContext)(null),v=function(e){var t=Object(n.useState)(null),a=Object(s.a)(t,2),l=a[0],c=a[1];Object(n.useEffect)((function(){if(JSON.parse(localStorage.getItem("remember"))){var e=function(){var e=null,t=p.get("access_token");return t&&(e=d()(t)),e}();e&&c(e)}}),[]);return r.a.createElement(E.Provider,Object.assign({value:{account:l,onSignIn:function(e){c(e)},onSignOut:function(){f(),localStorage.clear(),c(null)}}},e))},b=a(49),h=a.n(b),g=a(673),_=a(35),y=a(674),w=a(103),C=a.n(w),O=a(722),S=a(690),I=a(712),N=g.a.Footer;function j(){return r.a.createElement(N,{className:C.a.footer},r.a.createElement("div",{className:C.a.contactIconContainer},r.a.createElement(O.a,{className:C.a.contactIcon,onClick:function(){return window.open("https://github.com/huynguyend191")}}),r.a.createElement(S.a,{className:C.a.contactIcon,onClick:function(){return window.open("https://www.facebook.com/sneezingcat191")}}),r.a.createElement(I.a,{className:C.a.contactIcon,onClick:function(){return window.open("https://www.instagram.com/sneezingcat191/")}})),r.a.createElement("div",{className:C.a.contactInfoContainer},"Mirage 2020 - English Video Call Platform ",r.a.createElement("br",null),"Contact: huynguyend191@gmail.com"))}var T=a(314),x=a.n(T),k=a(6),P=a.n(k),D=a(10),R=a(678),A=a(679),B=a(689),W=a(682),M=a(37),V=a.n(M),F=a(315),U=a.n(F),L=a(316),z=a.n(L),Y=a(317),G=a.n(Y).a.create({baseURL:"https://mirage-video-call.herokuapp.com/api",withCredentials:!0});function q(e){var t=Object(n.useState)(e.isStudent),a=Object(s.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(!1),i=Object(s.a)(o,2),u=i[0],m=i[1],d=Object(n.useState)(null),p=Object(s.a)(d,2),f=p[0],v=p[1],b=R.a.useForm(),h=Object(s.a)(b,1)[0],g=Object(n.useContext)(E).onSignIn;Object(n.useEffect)((function(){c(e.isStudent)}),[e.isStudent]);var y=function(){var e=Object(D.a)(P.a.mark((function e(t){var a,n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),a=l?"/students":"/tutors",n={username:t.username,password:t.password,email:t.email,name:t.name},e.next=6,G.post(a+"/register",n);case 6:r=e.sent,m(!1),g(r.data.account),localStorage.setItem("remember",!0),window.location.reload(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),m(!1),v(e.t0.response.data.message);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),w=r.a.createElement("div",{className:V.a.registerWelcomeContent},r.a.createElement("img",{className:V.a.welcomeImg,draggable:!1,src:U.a,alt:""}),r.a.createElement("h3",null,"Experience new way of studying English"),r.a.createElement("h4",null,"Improve your English anywhere anytime"),r.a.createElement("h4",null,"Learn from interesting people around the world")),C=r.a.createElement("div",{className:V.a.registerWelcomeContent},r.a.createElement("img",{className:V.a.welcomeImg,draggable:!1,src:z.a,alt:""}),r.a.createElement("h3",null,"Tutoring with Mirage is fun & rewarding"),r.a.createElement("h4",null,"No experience necessary"),r.a.createElement("h4",null,"Share your knowledge with people and get paid"));return r.a.createElement(A.a,{visible:e.isVisible,footer:null,title:l?"Register as student":"Register as tutor",onCancel:function(){h.resetFields(),e.onClose()},width:"800px"},r.a.createElement("div",{className:V.a.registerContent},r.a.createElement("div",{className:V.a.registerWelcome},l?r.a.createElement("div",null,w):r.a.createElement("div",null,C)),r.a.createElement("div",{className:V.a.formWrapper},f?r.a.createElement(B.a,{style:{marginBottom:"15px"},message:f,type:"error",showIcon:!0,banner:!0,closable:!0,afterClose:function(){return v(null)}}):null,r.a.createElement(R.a,Object.assign({name:"register",onFinish:y,scrollToFirstError:!0,className:V.a.registerForm,form:h},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}}),r.a.createElement(R.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]},r.a.createElement(W.a,null)),r.a.createElement(R.a.Item,{name:"username",label:"Username",rules:[{required:!0,message:"Please input your username!",whitespace:!1}]},r.a.createElement(W.a,null)),r.a.createElement(R.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please input your password!"}],hasFeedback:!0},r.a.createElement(W.a.Password,null)),r.a.createElement(R.a.Item,{name:"confirm",label:"Confirm Password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject("The two passwords that you entered do not match!"):Promise.resolve()}}}]},r.a.createElement(W.a.Password,null)),r.a.createElement(R.a.Item,{name:"name",label:"Full name",rules:[{required:!0,message:"Please input your fullname!",whitespace:!0}]},r.a.createElement(W.a,null)),r.a.createElement(R.a.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},r.a.createElement(_.a,{type:"primary",htmlType:"submit",className:V.a.registerButton,shape:"round",loading:u},"Register"),r.a.createElement("p",{className:V.a.switchModeWrapper},"Or",r.a.createElement("span",{onClick:function(){c(!l)},className:V.a.switchMode}," become a ",l?"tutor":"student"," instead")),r.a.createElement("p",{className:V.a.switchModeWrapper},"Already have an account? ",r.a.createElement("span",{onClick:function(){e.onClose(),e.onSwitchSignIn()},className:V.a.switchMode}," Sign in")))))))}var H=a(141),J=a(700),K=a(701),Q=a(142),Z=a.n(Q);function X(e){var t=e.isVisible,a=e.onClose,l=e.onSwitchRegister,c=e.onSwitchForgotPass,o=R.a.useForm(),i=Object(s.a)(o,1)[0],u=Object(n.useState)(!1),m=Object(s.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(null),v=Object(s.a)(f,2),b=v[0],h=v[1],g=Object(n.useContext)(E).onSignIn,y=function(){var e=Object(D.a)(P.a.mark((function e(t){var a,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),a={user:t.user,password:t.password},localStorage.setItem("remember",t.remember),e.next=6,G.post("/accounts/sign-in",a);case 6:n=e.sent,p(!1),g(n.data.account),window.location.reload(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),p(!1),h(e.t0.response.data.message);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(A.a,{visible:t,footer:null,onCancel:function(){i.resetFields(),a()},title:"Sign in",width:"400px"},b?r.a.createElement(B.a,{style:{marginBottom:"15px"},message:b,type:"error",showIcon:!0,banner:!0,closable:!0,afterClose:function(){return h(null)}}):null,r.a.createElement(R.a,{name:"normal_sign_in",className:Z.a.signInForm,initialValues:{remember:!0},onFinish:y,form:i},r.a.createElement(R.a.Item,{name:"user",rules:[{required:!0,message:"Please input your username or email!"}]},r.a.createElement(W.a,{prefix:r.a.createElement(J.a,{className:"site-form-item-icon"}),placeholder:"Username or email"})),r.a.createElement(R.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}]},r.a.createElement(W.a,{prefix:r.a.createElement(K.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})),r.a.createElement(R.a.Item,null,r.a.createElement(R.a.Item,{name:"remember",valuePropName:"checked",noStyle:!0},r.a.createElement(H.a,null,"Remember me")),r.a.createElement("p",{onClick:function(){a(),c()},className:Z.a.signInForgot},"Forgot password?")),r.a.createElement(R.a.Item,null,r.a.createElement(_.a,{type:"primary",htmlType:"submit",className:Z.a.signInButton,shape:"round",loading:d},"Sign in"),"Don't have an account? ",r.a.createElement("span",{className:Z.a.registerNow,onClick:function(){a(),l(!0)}},"Register now!"))))}var $=a(325),ee=a.n($);function te(e){var t=e.isVisible,a=e.onClose,l=R.a.useForm(),c=Object(s.a)(l,1)[0],o=Object(n.useState)(!1),i=Object(s.a)(o,2),u=i[0],m=i[1],d=Object(n.useContext)(E).account,p=function(){var e=Object(D.a)(P.a.mark((function e(t){var a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),e.next=4,G.post("/accounts/reset-password",{user:t.user});case 4:a=e.sent,console.log(a.data),m(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),m(!1),console.log(e.t0.response);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),f=d?d.email:null;return r.a.createElement(A.a,{visible:t,footer:null,title:"Reset your password",width:"350px",onCancel:function(){c.resetFields(),a()}},r.a.createElement(R.a,{name:"forgot_password",form:c,onFinish:p,initialValues:{user:f}},r.a.createElement(R.a.Item,{name:"user",rules:[{required:!0,message:"Please input your username or email!"}]},r.a.createElement(W.a,{prefix:r.a.createElement(J.a,{className:"site-form-item-icon"}),placeholder:"Enter your username or email"})),r.a.createElement(R.a.Item,null,r.a.createElement(_.a,{type:"primary",htmlType:"submit",shape:"round",loading:u,className:ee.a.submitBtn},"Submit"))))}var ae=a(186),ne=a.n(ae),re=a(177),le=a.n(re);function ce(){return r.a.createElement("div",{className:ne.a.headerWrapper},r.a.createElement("img",{className:ne.a.headerIcon,src:le.a,draggable:!1,alt:""}),r.a.createElement("h1",{className:ne.a.headerTitle},"MIRAGE"))}var oe=g.a.Header,ie=g.a.Content;function se(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),o=Object(s.a)(c,2),i=o[0],u=o[1],m=Object(n.useState)(!1),d=Object(s.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!0),v=Object(s.a)(E,2),b=v[0],w=v[1],C=function(e){w(e),l(!0)};return r.a.createElement(g.a,null,r.a.createElement(X,{isVisible:i,onClose:function(){return u(!1)},onSwitchRegister:C,onSwitchForgotPass:function(){return f(!0)}}),r.a.createElement(q,{isVisible:a,onClose:function(){l(!1)},isStudent:b,onSwitchSignIn:function(){return u(!0)}}),r.a.createElement(te,{isVisible:p,onClose:function(){return f(!1)}}),r.a.createElement(oe,null,r.a.createElement("div",{className:h.a.headerContent},r.a.createElement(ce,null),r.a.createElement("div",{className:h.a.userButtonContainer},r.a.createElement(_.a,{className:h.a.userButton,type:"secondary",shape:"round",onClick:function(){return u(!0)}},"Sign in"),r.a.createElement(_.a,{className:h.a.userButton,type:"primary",shape:"round",onClick:function(){return C(!0)}},"Register")))),r.a.createElement(ie,null,r.a.createElement("div",{className:h.a.defaultBody},r.a.createElement("div",{className:h.a.introContainer},r.a.createElement("img",{className:h.a.introImg,draggable:!1,src:x.a,alt:""}),r.a.createElement("div",{className:h.a.introContent},r.a.createElement("p",{className:h.a.welcomeText},"Welcome to Mirage!"),r.a.createElement("p",{className:h.a.welcomeDescription},"\u201cGo on, say something in English!\u201d"),r.a.createElement(_.a,{className:h.a.registerButton,type:"primary",shape:"round",onClick:function(){return C(!0)}},"STUDY NOW"),r.a.createElement(y.a,{style:{width:"300px"}},"OR"),r.a.createElement(_.a,{className:h.a.registerButton,type:"secondary",shape:"round",onClick:function(){return C(!1)}},"BECOME TUTOR"))))),r.a.createElement(j,null))}var ue=a(675),me=a(102),de=a(182),pe=a(230),fe=a.n(pe),Ee=a(704),ve=a(723),be=a(702),he=a(699),ge=a(698),_e=a(696),ye=a(231),we=a.n(ye),Ce=Object.freeze({ADMIN:1,TUTOR:2,STUDENT:3}),Oe=Object.freeze({ACTIVE:1,INACTIVE:0}),Se=Object.freeze({ACCEPTED:1,PENDING:2,REJECTED:3}),Ie="https://mirage-video-call.herokuapp.com/",Ne=Object.freeze({INIT:"init",REQUEST:"request",CALL:"call",END:"end",DISCONNECT:"disconnect",GET_ONLINE_TUTORS:"get_online_tutors",LEAVE:"leave",RECORD_STUDENT:"record_student",RECORD_TUTOR:"record_tutor",SAVE_VIDEOS:"save_videos"}),je=Object.freeze({AVAILABLE:1,BUSY:0});function Te(e){var t=e.isVisible,a=e.onForgot,l=e.onClose,c=R.a.useForm(),o=Object(s.a)(c,1)[0],i=Object(n.useState)(!1),u=Object(s.a)(i,2),m=u[0],d=u[1],p=Object(n.useContext)(E).account,f=function(){var e=Object(D.a)(P.a.mark((function e(t){var a,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!0),a={oldPassword:t.oldpassword,newPassword:t.password},e.next=5,G.post("/accounts/"+p.id+"/change-password",a);case 5:n=e.sent,console.log(n),d(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),d(!1),console.log(e.t0.response);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){o.resetFields(),l()};return r.a.createElement(A.a,{visible:t,footer:null,title:"Change your password",onCancel:v,width:"500px"},r.a.createElement(R.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:16}},{name:"change-password",onFinish:f,form:o}),r.a.createElement(R.a.Item,{name:"oldpassword",label:"Current password",rules:[{required:!0,message:"Please input your current password!"}]},r.a.createElement(W.a.Password,null)),r.a.createElement(R.a.Item,{name:"password",label:"New password",rules:[{required:!0,message:"Please input your new password!"}],hasFeedback:!0},r.a.createElement(W.a.Password,null)),r.a.createElement(R.a.Item,{name:"confirm",label:"Retype password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject("The two passwords that you entered do not match!"):Promise.resolve()}}}]},r.a.createElement(W.a.Password,null)),r.a.createElement(R.a.Item,{wrapperCol:{offset:8,span:16}},r.a.createElement(_.a,{type:"primary",htmlType:"submit",className:we.a.registerButton,loading:m},"Update password"),p.role===Ce.ADMIN?null:r.a.createElement("span",{className:we.a.forgotPass,onClick:function(){v(),a()}},"Forgot password?"))))}var xe=a(187),ke=a.n(xe);function Pe(e){var t=e.collapsed;return r.a.createElement("div",{className:ke.a.logoContainer},r.a.createElement("img",{src:le.a,alt:"",className:ke.a.logo,draggable:!1}),t?null:r.a.createElement("p",{className:ke.a.logoText},"MIRAGE"))}var De=a(104),Re=a.n(De),Ae=a(140),Be=a(681),We=a(178),Me=a(362),Ve=a(685),Fe=a(680),Ue=a(713),Le=a(714),ze=a(48),Ye=a.n(ze),Ge=a(51),qe=a.n(Ge),He=Ae.a.Option,Je=Be.a.Panel;function Ke(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),o=Object(s.a)(c,2),i=o[0],u=o[1],m=Object(n.useState)({account:{email:null}}),d=Object(s.a)(m,2),p=d[0],f=d[1],v=Object(n.useContext)(E).account,b=Object(n.useState)(!1),h=Object(s.a)(b,2),g=h[0],y=h[1],w=Object(n.useState)([]),C=Object(s.a)(w,2),O=C[0],S=C[1],I=function(){var e=Object(D.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(!0),e.next=4,G.get("/students/"+v.student.id);case 4:t=e.sent,f(t.data.student),l(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),l(!1),console.log(e.t0.response);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){I()}),[]);var N=p&&p.avatar?r.a.createElement(ue.a,{src:Ie+p.avatar,size:100}):r.a.createElement(ue.a,{icon:r.a.createElement(J.a,null),size:100}),j=function(){var e=Object(D.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!0),e.next=4,G.put("/students/"+p.id,t);case 4:I(),u(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),u(!1),console.log(e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),T={onRemove:function(e){S([])},beforeUpload:function(e){return("image/jpeg"===e.type||"image/png"===e.type)&&S([e]),!1},fileList:O},x=function(){var e=Object(D.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),(t=new FormData).append("avatar",O[0]),e.next=6,G("/students/avatar/"+p.account.username,{method:"POST",data:t});case 6:return e.next=8,I();case 8:window.location.reload(!1),y(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),y(!1),console.log(e.t0.response);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(D.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.post("/accounts/resend-verify",{email:v.email});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0.response);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(We.a,{spinning:a},r.a.createElement("div",{className:Re.a.profile},r.a.createElement("div",{className:Re.a.accountInfoContainer},N,r.a.createElement("div",{className:Re.a.accountInfo},r.a.createElement("p",{className:Re.a.name},p.name),r.a.createElement("p",null,"Email: ",p.account.email),v.verification?r.a.createElement(Me.a,{color:"success"},"Verified"):r.a.createElement("span",null,r.a.createElement(Me.a,{color:"default"},"Unverified"),r.a.createElement(_.a,{type:"link",onClick:k},"Resend confirmation email")))),r.a.createElement("div",{className:Re.a.collapse},p.name?r.a.createElement(R.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}}},{onFinish:j,initialValues:{name:p.name,phone:p.phone,birthdate:p.birthdate?qe()(p.birthdate):void 0,address:p.address,student_type:p.student_type?p.student_type:void 0,student_lvl:p.student_lvl?p.student_lvl:void 0,accent:p.accent?p.accent:void 0,specialities:p.specialities?JSON.parse(p.specialities):void 0,teaching_styles:p.teaching_styles?JSON.parse(p.teaching_styles):void 0}}),r.a.createElement(Be.a,{defaultActiveKey:["1","2"]},r.a.createElement(Je,{header:"Basic info",key:"1"},r.a.createElement(R.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please enter your name"}]},r.a.createElement(W.a,{placeholder:"Your fullname",value:p.name})),r.a.createElement(R.a.Item,{name:"phone",label:"Phone"},r.a.createElement(W.a,{placeholder:"Your phone number (optional)"})),r.a.createElement(R.a.Item,{name:"birthdate",label:"Birthdate"},r.a.createElement(Ve.a,null)),r.a.createElement(R.a.Item,{name:"avatar",label:"Upload avatar"},r.a.createElement(Fe.a,Object.assign({},T,{listType:"picture-card"}),r.a.createElement(_.a,{icon:r.a.createElement(Ue.a,null)},"Change avatar"))),r.a.createElement(R.a.Item,{wrapperCol:{offset:5,span:16}},r.a.createElement(_.a,{disabled:O.length<=0,onClick:x,loading:g,style:{width:"159px"}},r.a.createElement(Le.a,null)," Upload avatar"))),r.a.createElement(Je,{header:"Study preferences",key:"2"},r.a.createElement(B.a,{style:{marginBottom:"15px"},message:"Complete your profile to help finding appropriate tutors easier",type:"info",showIcon:!0}),r.a.createElement(R.a.Item,{name:"student_type",label:"Type"},r.a.createElement(Ae.a,{placeholder:"What type of student are you?"},Ye.a.STUDENT_TYPE.map((function(e){return r.a.createElement(He,{value:e,key:e},e)})))),r.a.createElement(R.a.Item,{name:"student_lvl",label:"Your level"},r.a.createElement(Ae.a,{placeholder:"Your English level"},Ye.a.STUDENT_LVL.map((function(e){return r.a.createElement(He,{value:e,key:e},e)})))),r.a.createElement(R.a.Item,{name:"accent",label:"Favorite accent"},r.a.createElement(Ae.a,{placeholder:"What is your favorite English accent?"},Ye.a.ENG_ACCENT.map((function(e){return r.a.createElement(He,{value:e,key:e},e)})))),r.a.createElement(R.a.Item,{name:"specialities",label:"Interests"},r.a.createElement(Ae.a,{mode:"multiple",placeholder:"What do you want to study?"},Ye.a.SPECIALITIES.map((function(e){return r.a.createElement(He,{value:e,key:e},e)})))),r.a.createElement(R.a.Item,{name:"teaching_styles",label:"Teaching styles"},r.a.createElement(Ae.a,{mode:"multiple",placeholder:"Which styles of teaching do you prefer?"},Ye.a.TEACHING_STYLE.map((function(e){return r.a.createElement(He,{value:e,key:e},e)})))))),r.a.createElement("div",{className:Re.a.submitWrapper},r.a.createElement(_.a,{type:"primary",htmlType:"submit",loading:i},"Update profile"))):null)))}function Qe(){return r.a.createElement("div",null,"Stats")}var Ze=a(335),Xe=a.n(Ze),$e=(new u.a).get("access_token"),et=Xe()("".concat("https://mirage-video-call.herokuapp.com","?token=").concat($e)),tt=a(50),at=a(65),nt=a(123),rt=a(115),lt=a(124),ct=a(100),ot=a.n(ct),it=function(){function e(){Object(tt.a)(this,e),this.events={}}return Object(at.a)(e,[{key:"emit",value:function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return this.events[e]&&this.events[e].forEach((function(e){return e.apply(void 0,a)})),this}},{key:"on",value:function(e,t){return this.events[e]?this.events[e].push(t):this.events[e]=[t],this}},{key:"off",value:function(e,t){if(e&&ot.a.isFunction(t)){var a=this.events[e],n=a.findIndex((function(e){return e===t}));a.splice(n,1)}else this.events[e]=[];return this}}]),e}(),st=function(e){function t(){return Object(tt.a)(this,t),Object(nt.a)(this,Object(rt.a)(t).apply(this,arguments))}return Object(lt.a)(t,e),Object(at.a)(t,[{key:"start",value:function(){var e=this;return navigator.mediaDevices.getUserMedia({video:{facingMode:"user",height:{min:360,ideal:720,max:1080}},audio:{echoCancellation:!1}}).then((function(t){e.stream=t,e.emit("stream",t)})).catch((function(e){e instanceof DOMException?(console.log(e),alert("Cannot open webcam and/or microphone")):console.log(e)})),this}},{key:"toggle",value:function(e,t){var a=arguments.length;return this.stream&&this.stream["get".concat(e,"Tracks")]().forEach((function(e){var n=2===a?t:!e.enabled;ot.a.set(e,"enabled",n)})),this}},{key:"stop",value:function(){return this.stream&&this.stream.getTracks().forEach((function(e){return e.stop()})),this}}]),t}(it),ut={iceServers:[{urls:["stun:stun.l.google.com:19302"]}]},mt=function(e){function t(e){var a;return Object(tt.a)(this,t),(a=Object(nt.a)(this,Object(rt.a)(t).call(this))).pc=new RTCPeerConnection(ut),a.pc.onicecandidate=function(e){return et.emit("call",{to:a.friendID,candidate:e.candidate})},a.pc.ontrack=function(e){return a.emit("peerStream",e.streams[0])},a.mediaDevice=new st,a.friendID=e,a}return Object(lt.a)(t,e),Object(at.a)(t,[{key:"start",value:function(e,t){var a=this;return this.mediaDevice.on("stream",(function(t){t.getTracks().forEach((function(e){a.pc.addTrack(e,t)})),a.emit("localStream",t),e?et.emit("request",{to:a.friendID}):a.createOffer()})).start(t),this}},{key:"stop",value:function(e){return e&&et.emit("end",{to:this.friendID}),this.mediaDevice.stop(),this.pc&&this.pc.close(),this.pc=null,this.off(),this}},{key:"createOffer",value:function(){return this.pc.createOffer().then(this.getDescription.bind(this)).catch((function(e){return console.log(e)})),this}},{key:"createAnswer",value:function(){return this.pc.createAnswer().then(this.getDescription.bind(this)).catch((function(e){return console.log(e)})),this}},{key:"getDescription",value:function(e){return this.pc.setLocalDescription(e),et.emit("call",{to:this.friendID,sdp:e}),this}},{key:"setRemoteDescription",value:function(e){var t=new RTCSessionDescription(e);return this.pc.setRemoteDescription(t),this}},{key:"addIceCandidate",value:function(e){if(e){var t=new RTCIceCandidate(e);this.pc.addIceCandidate(t)}return this}}]),t}(it),dt=a(179),pt=a(715),ft=a(716),Et=a(717),vt=a(718),bt=a(719),ht=a(88),gt=a.n(ht),_t=a(143),yt=a.n(_t);function wt(e){var t=e.peerSrc,a=e.localSrc,l=e.config,c=e.mediaDevice,o=e.endCall,i=Object(n.useRef)(null),u=Object(n.useRef)(null),m=Object(n.useState)(l.video),d=Object(s.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(l.audio),v=Object(s.a)(E,2),b=v[0],h=v[1];Object(dt.useBeforeunload)((function(e){e.preventDefault(),o(!0)})),Object(n.useEffect)((function(){i.current&&t&&(i.current.srcObject=t),u.current&&a&&(u.current.srcObject=a)}),[a,t]),Object(n.useEffect)((function(){c&&(c.toggle("Video",p),c.toggle("Audio",b))}));var g=function(e){"video"===e&&(f(!p),c.toggle("Video")),"audio"===e&&(h(!b),c.toggle("Audio"))};return r.a.createElement("div",{className:gt.a.callWindowWrapper},r.a.createElement("div",{className:gt.a.callWindow},r.a.createElement("div",{className:gt.a.videoScreenContainer},r.a.createElement("video",{className:gt.a.videoScreen,ref:u,autoPlay:!0,muted:!0}),t&&r.a.createElement("video",{className:gt.a.videoScreen,ref:i,autoPlay:!0})),t&&r.a.createElement("div",null,r.a.createElement(yt.a,{formatValue:function(e){return"".concat(e<10?"0".concat(e):e)},lastUnit:"h",className:gt.a.callTime},r.a.createElement(yt.a.Hours,null),":",r.a.createElement(yt.a.Minutes,null),":",r.a.createElement(yt.a.Seconds,null))),r.a.createElement("div",{className:gt.a.videoControl},r.a.createElement(_.a,{shape:"circle",type:p?"primary":"danger",icon:p?r.a.createElement(pt.a,null):r.a.createElement(ft.a,null),onClick:function(){return g("video")},size:"large"}),r.a.createElement(_.a,{shape:"circle",type:b?"primary":"danger",icon:b?r.a.createElement(Et.a,null):r.a.createElement(vt.a,null),onClick:function(){return g("audio")},size:"large"}),r.a.createElement(_.a,{shape:"circle",type:"danger",onClick:function(){return o(!0)},icon:r.a.createElement(bt.a,null),size:"large"}))))}var Ct=a(128),Ot=a.n(Ct);function St(e){var t=e.callModal,a=e.callFrom,n=e.startCall,l=e.rejectCall;Object(dt.useBeforeunload)((function(e){l()}));var c=function(e){var t={audio:!0,video:e};return function(){return n(!1,a.username,t)}};return t?r.a.createElement("div",{className:Ot.a.callModalWrapper},r.a.createElement("div",{className:Ot.a.callModal},r.a.createElement("div",{className:Ot.a.caller},a.student&&a.student.avatar?r.a.createElement(ue.a,{src:Ie+a.student.avatar,size:50}):r.a.createElement(ue.a,{icon:r.a.createElement(J.a,null),size:50}),a.student&&r.a.createElement("span",{className:Ot.a.callerTxt},"".concat(a.student.name," is calling..."))),r.a.createElement("div",{className:Ot.a.controlBtns},r.a.createElement(_.a,{shape:"round",type:"primary",icon:r.a.createElement(pt.a,null),onClick:c(!0),size:"large"},"Video call"),r.a.createElement(_.a,{shape:"round",type:"primary",icon:r.a.createElement(Et.a,null),onClick:c(!1),size:"large"},"Audio call"),r.a.createElement(_.a,{shape:"round",type:"danger",onClick:l,icon:r.a.createElement(bt.a,null),size:"large"},"Reject call")))):null}var It=a(242),Nt=a(688),jt=a(710),Tt=a(709),xt=a(708),kt=a(235),Pt=a.n(kt),Dt=a(105),Rt=a.n(Dt),At=a(683),Bt=a(122),Wt=a(684),Mt=a(721),Vt=a(720);function Ft(e){var t=e.callWithVideo,a=e.openDetailModal,n=e.item,l=e.openReviewlModal;return r.a.createElement(At.a,{actions:[r.a.createElement(Bt.a,{title:"Video call"},r.a.createElement(pt.a,{onClick:function(){return t(!0,n)}})),r.a.createElement(Bt.a,{title:"Audio call"},r.a.createElement(Et.a,{onClick:function(){return t(!1,n)}})),r.a.createElement(Bt.a,{title:"Profile"},r.a.createElement(J.a,{onClick:function(){return a(n)}}))]},r.a.createElement("div",{className:Rt.a.tutorCard},r.a.createElement("div",{className:Rt.a.tutorInfo},r.a.createElement("div",null,n.profile.avatar?r.a.createElement(ue.a,{src:Ie+n.profile.avatar,size:80}):r.a.createElement(ue.a,{icon:r.a.createElement(J.a,null),size:80})),r.a.createElement("div",{className:Rt.a.tutorInfoDetail},r.a.createElement("div",{className:Rt.a.tutorName},n.profile.name,n.status===je.AVAILABLE?r.a.createElement(Mt.a,{style:{color:"#52c41a",fontSize:"12px",marginLeft:"3px"}}):r.a.createElement(Bt.a,{title:"User is busy"},r.a.createElement(Vt.a,{style:{color:"red",fontSize:"12px",marginLeft:"3px"}}))),r.a.createElement("div",null,n.profile.certificates&&JSON.parse(n.profile.certificates.length)>0?r.a.createElement(Me.a,null,"Teaching certificates"):null),n.profile.review?r.a.createElement(Bt.a,{placement:"bottomRight",title:"Click to show reviews"},r.a.createElement("div",{onClick:function(){return l(n)},className:Rt.a.reviewWrapper},r.a.createElement(Wt.a,{disabled:!0,defaultValue:Number((Math.round(2*n.profile.review.avg)/2).toFixed(1)),allowHalf:!0}),r.a.createElement("span",{className:Rt.a.reviewCount},"/ ",n.profile.review.count," review(s)"))):null)),r.a.createElement("p",null,n.profile.introduction)))}var Ut=a(89),Lt=a.n(Ut),zt=(a(225),a(36));function Yt(e){var t=e.username,a=Object(n.useRef)(null),l=Object(n.useRef)(null),c={controls:!0,width:513,height:360,fluid:!1,sources:[{src:Ie+"api/tutors/video/"+t,type:"video/webm"}],autoplay:!1};return Object(n.useEffect)((function(){return a.current=Object(zt.default)(l.current,c,(function(){var e="Using video.js "+zt.default.VERSION;zt.default.log(e)})),function(){a.current&&a.current.dispose()}}),[]),r.a.createElement("div",{"data-vjs-player":!0},r.a.createElement("video",{id:"myVideo",ref:function(e){return l.current=e},className:"video-js vjs-default-skin vjs-big-play-centered",playsInline:!0}))}var Gt=a(711),qt=a(687);function Ht(e){var t=e.selected,a=e.showDetailModal,n=e.setShowDetailModal;return r.a.createElement(A.a,{title:t?t.profile.name:null,visible:a,onCancel:function(){return n(!1)},footer:null,width:"600px",destroyOnClose:!0,bodyStyle:{height:"600px",overflow:"auto"}},r.a.createElement("div",null,r.a.createElement("div",null,t?r.a.createElement("div",null,r.a.createElement("div",{className:Lt.a.detailWrapper},t.profile.video?r.a.createElement("div",{className:Lt.a.videoWrapper},r.a.createElement(Yt,{username:t.username})):null,t.profile.introduction),r.a.createElement("div",{className:Lt.a.detailWrapper},r.a.createElement(qt.a,{bordered:!0,size:"small",column:1,title:"Teaching preferences"},r.a.createElement(qt.a.Item,{label:"Student level"},t.profile.student_lvl),r.a.createElement(qt.a.Item,{label:"Student type"},t.profile.student_type),r.a.createElement(qt.a.Item,{label:"Accent"},t.profile.accent),r.a.createElement(qt.a.Item,{label:"Fluency"},t.profile.fluency),r.a.createElement(qt.a.Item,{label:"Tutor styles"}," ",t.profile.teaching_styles?JSON.parse(t.profile.teaching_styles).map((function(e){return r.a.createElement(Me.a,{key:e},e)})):null),r.a.createElement(qt.a.Item,{label:"Specialities"},t.profile.specialities?JSON.parse(t.profile.specialities).map((function(e){return r.a.createElement(Me.a,{key:e},e)})):null))),r.a.createElement("div",{className:Lt.a.detailWrapper},r.a.createElement(qt.a,{bordered:!0,size:"small",column:1,title:"CV"},r.a.createElement(qt.a.Item,{label:"Interests"},t.profile.interests),r.a.createElement(qt.a.Item,{label:"Education"},t.profile.education),r.a.createElement(qt.a.Item,{label:"Experience"},t.profile.experience),r.a.createElement(qt.a.Item,{label:"Profession"},t.profile.profession),r.a.createElement(qt.a.Item,{label:"Reason"},t.profile.reason))),r.a.createElement("div",{className:Lt.a.detailWrapper},r.a.createElement("p",{className:Lt.a.detailTitle},"Certificates"),r.a.createElement("div",{className:Lt.a.uploadedCert},t.profile.certificates?JSON.parse(t.profile.certificates).map((function(e,t){return r.a.createElement("a",{key:t,href:Ie+e.path},r.a.createElement(Gt.a,null),e.originalname)})):null))):null)))}var Jt=a(180),Kt=(a(649),function(e){var t=0,a=0,n=0,r=0,l=0,c=0,o=e.length;return e.forEach((function(e){switch(e.rating){case 0:t++;break;case 1:a++;break;case 2:n++;break;case 3:r++;break;case 4:l++;break;case 5:c++}})),{rating0:t/o*100,rating1:a/o*100,rating2:n/o*100,rating3:r/o*100,rating4:l/o*100,rating5:c/o*100}}),Qt=a(32),Zt=a.n(Qt),Xt=a(359);function $t(e){var t=e.reviews;return r.a.createElement("div",{className:Zt.a.reviewSummary},r.a.createElement("div",{className:Zt.a.reviewOverall},r.a.createElement("div",{className:Zt.a.reviewAvg},Number(t.avg).toFixed(1)),r.a.createElement(Wt.a,{disabled:!0,defaultValue:Number((Math.round(2*t.avg)/2).toFixed(1)),allowHalf:!0,style:{fontSize:"15px"}}),r.a.createElement("div",{className:Zt.a.reviewNumber},r.a.createElement(J.a,{style:{marginRight:"3px"}}),t.count)),r.a.createElement("div",{className:Zt.a.ratingCountList},r.a.createElement("div",{className:Zt.a.ratingCount},r.a.createElement("span",{className:Zt.a.rating},"5"),r.a.createElement(Xt.a,{showInfo:!1,percent:t.ratingCount.rating5})),r.a.createElement("div",{className:Zt.a.ratingCount},r.a.createElement("span",{className:Zt.a.rating},"4"),r.a.createElement(Xt.a,{showInfo:!1,percent:t.ratingCount.rating4})),r.a.createElement("div",{className:Zt.a.ratingCount},r.a.createElement("span",{className:Zt.a.rating},"3"),r.a.createElement(Xt.a,{showInfo:!1,percent:t.ratingCount.rating3})),r.a.createElement("div",{className:Zt.a.ratingCount},r.a.createElement("span",{className:Zt.a.rating},"2"),r.a.createElement(Xt.a,{showInfo:!1,percent:t.ratingCount.rating2})),r.a.createElement("div",{className:Zt.a.ratingCount},r.a.createElement("span",{className:Zt.a.rating},"1"),r.a.createElement(Xt.a,{showInfo:!1,percent:t.ratingCount.rating1})),r.a.createElement("div",{className:Zt.a.ratingCount},r.a.createElement("span",{className:Zt.a.rating},"0"),r.a.createElement(Xt.a,{showInfo:!1,percent:t.ratingCount.rating0}))))}var ea=a(676);function ta(e){var t=e.review,a=e.getTutorReview,l=Object(n.useContext)(E).account,c=function(){var e=Object(D.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.delete("/reviews/"+t);case 3:a(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),o=null;return(l.role===Ce.ADMIN||l.role===Ce.STUDENT&&l.student.id===t.studentId)&&(o=r.a.createElement(_.a,{type:"link",danger:!0,onClick:function(){return c(t.id)}},"Delete")),r.a.createElement(ea.a,{author:t.student.name,avatar:t.student.avatar?r.a.createElement(ue.a,{src:Ie+t.student.avatar}):r.a.createElement(ue.a,{icon:r.a.createElement(J.a,null)}),content:r.a.createElement("p",null,t.comment),datetime:qe()(t.createdAt).fromNow(),actions:[r.a.createElement(Wt.a,{disabled:!0,defaultValue:t.rating,style:{fontSize:"12px"}}),o]})}function aa(e){var t=e.selected,a=e.showReviewModal,l=e.setShowReviewModal,c=Object(n.useState)(null),o=Object(s.a)(c,2),i=o[0],u=o[1],m=function(){var e=Object(D.a)(P.a.mark((function e(){var a,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.get("/reviews/"+t.profile.id);case 3:a=e.sent,n=Kt(a.data.reviews),u(Object(Jt.a)({},a.data,{ratingCount:n})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){t&&m()}),[t]),r.a.createElement(A.a,{title:t?t.profile.name:null,visible:a,onCancel:function(){return l(!1)},footer:null,width:"600px",destroyOnClose:!0,bodyStyle:{maxHeight:"600px",overflow:"auto"}},i?r.a.createElement("div",null,r.a.createElement($t,{reviews:i}),r.a.createElement(Nt.a,{itemLayout:"horizontal",dataSource:i.reviews,renderItem:function(e){return r.a.createElement(Nt.a.Item,null,r.a.createElement(ta,{review:e,getTutorReview:m}))}}),","):null)}var na=It.a.TabPane;function ra(e){var t=e.startCall,a=e.onlineTutors,l=e.setTutor,c=Object(n.useState)(!1),o=Object(s.a)(c,2),i=o[0],u=o[1],m=Object(n.useState)(null),d=Object(s.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!1),v=Object(s.a)(E,2),b=v[0],h=v[1],g=function(e,a){l(a.profile);var n={audio:!0,video:e};t(!0,a.username,n)},_=function(e){f(e),u(!0)},y=function(e){f(e),h(!0)};return r.a.createElement("div",{className:Pt.a.tutorList},r.a.createElement(Ht,{selected:p,showDetailModal:i,setShowDetailModal:u}),r.a.createElement(aa,{selected:p,showReviewModal:b,setShowReviewModal:h}),r.a.createElement(It.a,{defaultActiveKey:"online",type:"card"},r.a.createElement(na,{tab:r.a.createElement("span",null,r.a.createElement(jt.a,null),"Online"),key:"online",className:Pt.a.tabPane},r.a.createElement(Nt.a,{grid:{gutter:16,column:3},dataSource:a,renderItem:function(e){return r.a.createElement(Nt.a.Item,null,r.a.createElement(Ft,{item:e,callWithVideo:g,openDetailModal:_,openReviewlModal:y}))}})),r.a.createElement(na,{tab:r.a.createElement("span",null,r.a.createElement(Tt.a,null),"Favorite"),key:"favorite"},"Favorite"),r.a.createElement(na,{tab:r.a.createElement("span",null,r.a.createElement(xt.a,null),"Recommend"),key:"recommend"},"Recommend")))}var la=a(106),ca=a.n(la),oa=a(344),ia=a.n(oa),sa=a(707),ua=a(706);function ma(e){var t=e.showFeedback,a=e.setShowFeedBack,l=e.tutor,c=Object(n.useState)(!1),o=Object(s.a)(c,2),i=o[0],u=o[1],m=Object(n.useState)(!1),d=Object(s.a)(m,2),p=d[0],f=d[1],v=Object(n.useState)(!1),b=Object(s.a)(v,2),h=b[0],g=b[1],y=Object(n.useContext)(E).account,w=function(){var e=Object(D.a)(P.a.mark((function e(t){var a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!0),a=Object(Jt.a)({},t,{studentId:y.student.id,tutorId:l.id}),e.next=5,G.post("/reviews/",a);case 5:u(!1),f(!0),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),u(!1),g(!1),console.log(e.t0.response);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(A.a,{visible:t,destroyOnClose:!0,onCancel:function(){a(!1),f(!1),g(!1)},footer:!1,title:"Feedback about this tutor"},p?r.a.createElement(B.a,{message:"Review submitted",type:"success",showIcon:!0}):null,h?r.a.createElement(B.a,{message:"Fail to submit, please try again",type:"error",showIcon:!0}):null,r.a.createElement(R.a,Object.assign({},{labelCol:{span:4},wrapperCol:{span:16}},{onFinish:w}),r.a.createElement(R.a.Item,{name:"rating",label:"Rating"},r.a.createElement(Wt.a,{allowClear:!0,defaultValue:0})),r.a.createElement(R.a.Item,{name:"comment",label:"Comment",rules:[{required:!0,message:"Please input your comment"}]},r.a.createElement(W.a.TextArea,{placeholder:"Share your experience"})),r.a.createElement(R.a.Item,{wrapperCol:{offset:4,span:16}},r.a.createElement(_.a,{type:"primary",htmlType:"submit",loading:i},"Submit"))))}function da(e){var t=e.account,a=Object(n.useState)(!1),l=Object(s.a)(a,2),c=l[0],o=l[1],i=Object(n.useState)(!1),u=Object(s.a)(i,2),m=u[0],d=u[1],p=Object(n.useState)({}),f=Object(s.a)(p,2),E=f[0],v=f[1],b=Object(n.useState)(null),h=Object(s.a)(b,2),g=h[0],y=h[1],w=Object(n.useState)(null),C=Object(s.a)(w,2),O=C[0],S=C[1],I=Object(n.useRef)({}),N=Object(n.useRef)(null),j=Object(n.useRef)(null),T=Object(n.useRef)(null),x=Object(n.useRef)(0),k=Object(n.useRef)(0),R=Object(n.useState)([]),B=Object(s.a)(R,2),W=B[0],M=B[1],V=Object(n.useRef)(null),F=Object(n.useState)(!1),U=Object(s.a)(F,2),L=U[0],z=U[1],Y=Object(n.useState)(!1),G=Object(s.a)(Y,2),q=G[0],H=G[1];Object(n.useEffect)((function(){return et.on(Ne.INIT,(function(e){})).on(Ne.REQUEST,(function(e){var t=e.from;d(!0),v(t)})).on(Ne.CALL,(function(e){e.sdp?(I.current.setRemoteDescription(e.sdp),"offer"===e.sdp.type&&I.current.createAnswer()):I.current.addIceCandidate(e.candidate),x.current=Date.now(),t.role,Ce.STUDENT})).on(Ne.END,(function(){return Q(!1)})).on(Ne.GET_ONLINE_TUTORS,(function(e){M(e.online)})).emit(Ne.INIT,{account:t}),function(){K(),et.emit(Ne.LEAVE),et.off(Ne.INIT).off(Ne.REQUEST).off(Ne.CALL).off(Ne.END).off(Ne.GET_ONLINE_TUTORS)}}),[t]),Object(n.useEffect)((function(){O&&t.role===Ce.TUTOR&&(j.current=new MediaRecorder(O,{mimeType:"video/webm; codecs=vp9"}),j.current.ondataavailable=function(e){e.data&&e.data.size>0&&et.emit(Ne.RECORD_STUDENT,e.data)},j.current.start(1e3))}),[O,t.role]),Object(n.useEffect)((function(){g&&t.role===Ce.TUTOR&&(T.current=new MediaRecorder(g,{mimeType:"video/webm; codecs=vp9"}),T.current.ondataavailable=function(e){e.data&&e.data.size>0&&et.emit(Ne.RECORD_TUTOR,e.data)},T.current.start(1e3))}),[g,t.role]);var J=function(e,t,a){N.current=a,I.current=new mt(t).on("localStream",(function(t){o(!0),y(t),e||d(!1)})).on("peerStream",(function(e){return S(e)})).start(e,a)},K=function(){et.emit(Ne.END,{to:E.username}),d(!1)},Q=function(){var e=Object(D.a)(P.a.mark((function e(a){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.role===Ce.TUTOR&&et.emit(Ne.SAVE_VIDEOS,E.student),k.current=Date.now(),x.current>0&&z(!0),ot.a.isFunction(I.current.stop)&&I.current.stop(a),e.next=6,Z();case 6:I.current={},N.current=null,d(!1),o(!1),y(null),S(null);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(D.a)(P.a.mark((function e(a){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.role===Ce.STUDENT&&(j.current&&O&&j.current.stop(),T.current&&g&&T.current.stop());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=null,$=null;return E.student?(X=E.student.name,$=r.a.createElement("div",null,r.a.createElement(_.a,{shape:"round",type:"danger",icon:r.a.createElement(sa.a,null),size:"small"},"Report"))):V.current&&(X=V.current.name,$=r.a.createElement("div",null,r.a.createElement(_.a,{shape:"round",type:"primary",icon:r.a.createElement(Tt.a,null),size:"small"},"Favorite"),r.a.createElement(_.a,{shape:"round",icon:r.a.createElement(ua.a,null),size:"small",onClick:function(){return H(!0)}},"Feedback"),r.a.createElement(_.a,{shape:"round",type:"danger",icon:r.a.createElement(sa.a,null),size:"small"},"Report"))),r.a.createElement("div",{className:ca.a.videoCall},r.a.createElement(ma,{tutor:V.current,showFeedback:q,setShowFeedBack:H}),t.role===Ce.STUDENT&&!c&&r.a.createElement(ra,{onlineTutors:W,startCall:J,setTutor:function(e){V.current=e}}),!ot.a.isEmpty(N.current)&&r.a.createElement(wt,{callWindow:c,localSrc:g,peerSrc:O,config:N.current,mediaDevice:I.current.mediaDevice,endCall:Q}),r.a.createElement(St,{callModal:m,startCall:J,rejectCall:K,callFrom:E}),r.a.createElement(A.a,{visible:L,title:"Call ended",onCancel:function(){z(!1),x.current=0,k.current=0},destroyOnClose:!0,footer:!1,width:"600px"},r.a.createElement("div",{className:ca.a.afterCall},r.a.createElement("img",{className:ca.a.endCallImg,src:ia.a,draggable:!1,alt:""}),r.a.createElement("div",null,r.a.createElement("div",{className:ca.a.endUser},"Call with ",X),r.a.createElement("div",{className:ca.a.endDuration},"Duration: ",function(e){var t=(e/1e3).toFixed(0),a=Math.floor(t/60),n="";return a>59&&(a=(a-=60*(n=(n=Math.floor(a/60))>=10?n:"0"+n))>=10?a:"0"+a),t=(t=Math.floor(t%60))>=10?t:"0"+t,""!==n?n+":"+a+":"+t:a+":"+t}(k.current-x.current)),r.a.createElement("div",{className:ca.a.btnHolder},$)))))}var pa=a(144),fa=a.n(pa),Ea=a(345),va=a.n(Ea);function ba(){var e=Object(n.useContext)(E).account;return r.a.createElement("div",{className:fa.a.study},e&&e.verification?r.a.createElement(da,{account:e}):r.a.createElement("div",{className:fa.a.unverify},r.a.createElement("img",{className:fa.a.unverifyImg,src:va.a,alt:"",draggable:"false"}),r.a.createElement("div",{className:fa.a.unverifyTxt},r.a.createElement("p",null,"You are almost ready!"),r.a.createElement("p",null,"Verify your account to start now!"))))}var ha=g.a.Header,ga=g.a.Content,_a=g.a.Sider;function ya(e){var t=Object(n.useContext)(E),a=t.account,l=t.onSignOut,c=Object(n.useState)(!1),u=Object(s.a)(c,2),m=u[0],d=u[1],p=Object(n.useState)(!1),f=Object(s.a)(p,2),v=f[0],b=f[1],h=e.location,_=a.student&&a.student.avatar?r.a.createElement(ue.a,{style:{margin:"10px"},src:Ie+a.student.avatar}):r.a.createElement(ue.a,{style:{margin:"10px"},icon:r.a.createElement(J.a,null)});Object(n.useEffect)((function(){}),[]);var y=r.a.createElement(me.a,null,r.a.createElement(me.a.Item,{onClick:function(){return d(!0)}},r.a.createElement(Ee.a,null),r.a.createElement("span",null,"Change password")),r.a.createElement(me.a.Item,{onClick:l},r.a.createElement(ve.a,null),r.a.createElement("span",null,"Sign out")));return r.a.createElement(g.a,{style:{minHeight:"100vh"}},r.a.createElement(te,{isVisible:v,onClose:function(){return b(!1)}}),r.a.createElement(Te,{isVisible:m,onClose:function(){return d(!1)},onForgot:function(){return b(!0)}}),r.a.createElement(_a,null,r.a.createElement(Pe,{collapsed:!1}),r.a.createElement(me.a,{theme:"dark",defaultSelectedKeys:["/student/video-call"],mode:"inline",selectedKeys:[h.pathname]},r.a.createElement(me.a.Item,{key:"/student/study"},r.a.createElement(be.a,null),r.a.createElement(o.b,{to:"/student/study"},r.a.createElement("span",null,"Study"))),r.a.createElement(me.a.Item,{key:"/student"},r.a.createElement(he.a,null),r.a.createElement(o.b,{to:"/student"},r.a.createElement("span",null,"Profile"))),r.a.createElement(me.a.Item,{key:"/student/stats"},r.a.createElement(ge.a,null),r.a.createElement(o.b,{to:"/student/stats"},r.a.createElement("span",null,"Stats"))))),r.a.createElement(g.a,null,r.a.createElement(ha,null,r.a.createElement("div",{className:fe.a.userControl},"Hello, ",a.username,r.a.createElement(de.a,{overlay:y,placement:"bottomLeft"},r.a.createElement("div",null,_,r.a.createElement(_e.a,{className:fe.a.dropDownIcon}))))),r.a.createElement(ga,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/student/stats",component:Qe}),r.a.createElement(i.b,{path:"/student/Study",component:ba}),r.a.createElement(i.b,{path:"/student",component:Ke,exact:!0}))),r.a.createElement(j,null)))}var wa=a(241),Ca=a.n(wa),Oa=a(23),Sa=a(62),Ia=a.n(Sa),Na=a(694),ja=(a(672),a(229)),Ta=a.n(ja),xa=(a(661),a(662),a(129)),ka=a.n(xa),Pa={controls:!0,width:480,height:360,fluid:!1,plugins:{record:{audio:!0,video:!0,maxLength:120,debug:!0}}};function Da(e){var t=e.cancelRecord,a=e.existedVideo,l=e.refreshProfile,c=Object(n.useRef)(null),o=Object(n.useRef)(null),i=Object(n.useState)(null),u=Object(s.a)(i,2),m=u[0],d=u[1],p=Object(n.useState)(!1),f=Object(s.a)(p,2),v=f[0],b=f[1],h=Object(n.useContext)(E).account,g=function(){var e=Object(D.a)(P.a.mark((function e(){var a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(!0),(a=new FormData).append("video",m,"introVideo.webm"),e.next=6,G("/tutors/video/"+h.username,{data:a,method:"POST"});case 6:t(),l(),b(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0.response),b(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return c.current=Object(zt.default)(o.current,Pa,(function(){var e="Using video.js "+zt.default.VERSION+" with videojs-record "+zt.default.getPluginVersion("record")+" and recordrtc "+Ta.a.version;zt.default.log(e)})),c.current.on("deviceReady",(function(){console.log("device is ready!")})),c.current.on("startRecord",(function(){console.log("started recording!")})),c.current.on("finishRecord",(function(){console.log("finished recording: ",c.current.recordedData),d(c.current.recordedData)})),c.current.on("error",(function(e,t){console.warn(t)})),c.current.on("deviceError",(function(){console.error("device error:",c.current.deviceErrorCode)})),function(){c.current&&c.current.dispose()}}),[]),r.a.createElement("div",null,r.a.createElement("div",{"data-vjs-player":!0},r.a.createElement("video",{id:"myVideoRecord",ref:function(e){return o.current=e},className:"video-js vjs-default-skin",playsInline:!0})),a?r.a.createElement("div",{className:ka.a.btnWrapper},r.a.createElement(_.a,{className:ka.a.videoBtn,onClick:g,loading:v},"Upload"),r.a.createElement(_.a,{className:ka.a.videoBtn,type:"danger",onClick:t},"Cancel")):r.a.createElement("div",{className:ka.a.btnWrapperNoCancel},r.a.createElement(_.a,{className:ka.a.videoBtn,onClick:g,loading:v},"Upload")))}var Ra=a(351),Aa=a.n(Ra);function Ba(e){var t=e.recordNew,a=Object(n.useRef)(null),l=Object(n.useRef)(null),c=Object(n.useContext)(E).account,o={controls:!0,width:480,height:360,fluid:!1,sources:[{src:Ie+"api/tutors/video/"+c.username,type:"video/webm"}],autoplay:!1};return Object(n.useEffect)((function(){return a.current=Object(zt.default)(l.current,o,(function(){var e="Using video.js "+zt.default.VERSION;zt.default.log(e)})),function(){a.current&&a.current.dispose()}}),[]),r.a.createElement("div",null,r.a.createElement("div",{"data-vjs-player":!0},r.a.createElement("video",{id:"myVideo",ref:function(e){return l.current=e},className:"video-js vjs-default-skin vjs-big-play-centered",playsInline:!0})),r.a.createElement("div",{className:Aa.a.btnWrapper},r.a.createElement(_.a,{onClick:t},"Record new video")))}var Wa=Be.a.Panel,Ma=Ae.a.Option;function Va(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),o=Object(s.a)(c,2),i=o[0],u=o[1],m=Object(n.useState)({account:{email:null}}),d=Object(s.a)(m,2),p=d[0],f=d[1],v=Object(n.useContext)(E).account,b=Object(n.useState)([]),h=Object(s.a)(b,2),g=h[0],y=h[1],w=Object(n.useState)(!1),C=Object(s.a)(w,2),O=C[0],S=C[1],I=Object(n.useState)(!1),N=Object(s.a)(I,2),j=N[0],T=N[1],x=Object(n.useState)([]),k=Object(s.a)(x,2),A=k[0],M=k[1],V=Object(n.useState)(!0),F=Object(s.a)(V,2),U=F[0],L=F[1],z=function(){var e=Object(D.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(!0),e.next=4,G.get("/tutors/"+v.tutor.id);case 4:t=e.sent,f(t.data.tutor),t.data.tutor.video&&L(!1),l(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),l(!0),console.log(e.t0.response);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){z()}),[]);var Y,q=p&&p.avatar?r.a.createElement(ue.a,{src:Ie+p.avatar,size:100}):r.a.createElement(ue.a,{icon:r.a.createElement(J.a,null),size:100}),H={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}}},K={wrapperCol:{offset:5,span:16}},Q=function(){var e=Object(D.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!0),e.next=4,G.put("/tutors/"+p.id,t);case 4:z(),u(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),u(!1),console.log(e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Z={onRemove:function(e){var t=g.indexOf(e),a=g.slice();a.splice(t,1),y(a)},beforeUpload:function(e){return("application/pdf"===e.type||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===e.type)&&y([].concat(Object(Oa.a)(g),[e])),!1},fileList:g},X={onRemove:function(e){M([])},beforeUpload:function(e){return("image/jpeg"===e.type||"image/png"===e.type)&&M([e]),!1},fileList:A},$=function(){var e=Object(D.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(!0),t=new FormData,g.forEach((function(e){t.append("certificates",e)})),e.next=6,G("/tutors/certificates/"+p.account.username,{method:"POST",data:t});case 6:return e.next=8,z();case 8:S(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0.response),S(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(D.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,T(!0),(t=new FormData).append("avatar",A[0]),e.next=6,G("/tutors/avatar/"+p.account.username,{method:"POST",data:t});case 6:return e.next=8,z();case 8:window.location.reload(!1),T(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),T(!1),console.log(e.t0.response);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(D.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.post("/accounts/resend-verify",{email:v.email});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0.response);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return p.profileStatus===Se.ACCEPTED?Y=r.a.createElement(B.a,{message:"Your tutor profile is ready",type:"success",showIcon:!0}):p.profileStatus===Se.PENDING?Y=r.a.createElement(B.a,{message:"Your tutor profile is being reviewed by Admin",type:"info",showIcon:!0}):p.profileStatus===Se.REJECTED&&(Y=r.a.createElement(B.a,{message:"Your tutor profile is rejected, edit now",type:"error",showIcon:!0})),r.a.createElement(We.a,{spinning:a},r.a.createElement("div",{className:Ia.a.profile},r.a.createElement("div",{className:Ia.a.accountInfoContainer},q,r.a.createElement("div",{className:Ia.a.accountInfo},r.a.createElement("p",{className:Ia.a.name},p.name),r.a.createElement("p",null,"Email: ",p.account.email),v.verification?r.a.createElement(Me.a,{color:"success"},"Verified"):r.a.createElement("span",null,r.a.createElement(Me.a,{color:"default"},"Unverified"),r.a.createElement(_.a,{type:"link",onClick:te},"Resend confirmation email")),r.a.createElement("div",{className:Ia.a.profileStatus},Y))),r.a.createElement("div",{className:Ia.a.collapse},p.name?r.a.createElement(R.a,Object.assign({},H,{onFinish:Q,initialValues:{name:p.name,phone:p.phone,birthdate:p.birthdate?qe()(p.birthdate):void 0,address:p.address,interests:p.interests,education:p.education,experience:p.experience,profession:p.profession,student_type:p.student_type?p.student_type:void 0,student_lvl:p.student_lvl?p.student_lvl:void 0,accent:p.accent?p.accent:void 0,fluency:p.fluency?p.fluency:void 0,reason:p.reason,specialities:p.specialities?JSON.parse(p.specialities):void 0,introduction:p.introduction,teaching_styles:p.teaching_styles?JSON.parse(p.teaching_styles):void 0}}),r.a.createElement(Be.a,{defaultActiveKey:["1"]},r.a.createElement(Wa,{header:"Basic info",key:"1"},r.a.createElement(R.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please enter your name"}]},r.a.createElement(W.a,{placeholder:"Your fullname",value:p.name})),r.a.createElement(R.a.Item,{name:"phone",label:"Phone"},r.a.createElement(W.a,{placeholder:"Your phone number (optional)"})),r.a.createElement(R.a.Item,{name:"birthdate",label:"Birthdate"},r.a.createElement(Ve.a,null)),r.a.createElement(R.a.Item,{name:"address",label:"Address"},r.a.createElement(W.a,{placeholder:"Where do you from? E.g Hanoi, Vietnam"})),r.a.createElement(R.a.Item,{name:"avatar",label:"Upload avatar"},r.a.createElement(Fe.a,Object.assign({},X,{listType:"picture-card"}),r.a.createElement(_.a,{icon:r.a.createElement(Ue.a,null)},"Change avatar"))),r.a.createElement(R.a.Item,K,r.a.createElement(_.a,{disabled:A.length<=0,onClick:ee,loading:j,style:{width:"159px"},icon:r.a.createElement(Le.a,null)},"Upload avatar"))),r.a.createElement(Wa,{header:"CV",key:"2"},r.a.createElement(R.a.Item,{name:"interests",label:"Interests"},r.a.createElement(W.a.TextArea,{placeholder:"Share with us everything you want such as interests, hobbies, life experiences"})),r.a.createElement(R.a.Item,{name:"education",label:"Education"},r.a.createElement(W.a.TextArea,{placeholder:"E.g Bachelor of Information Technology"})),r.a.createElement(R.a.Item,{name:"experience",label:"Experience"},r.a.createElement(W.a.TextArea,{placeholder:"Your working experience"})),r.a.createElement(R.a.Item,{name:"profession",label:"Profession"},r.a.createElement(W.a,{placeholder:"Your current or previous jobs"})),r.a.createElement(R.a.Item,{name:"reason",label:"Reason"},r.a.createElement(W.a.TextArea,{placeholder:"Why do you want to join Mirage?"}))),r.a.createElement(Wa,{header:"Teaching preferences",key:"3"},r.a.createElement(R.a.Item,{name:"student_type",label:"Target"},r.a.createElement(Ae.a,{placeholder:"Who do you want to teach?"},Ye.a.STUDENT_TYPE.map((function(e){return r.a.createElement(Ma,{value:e,key:e},e)})))),r.a.createElement(R.a.Item,{name:"student_lvl",label:"Student level"},r.a.createElement(Ae.a,{placeholder:"You are good at teaching students who are"},Ye.a.STUDENT_LVL.map((function(e){return r.a.createElement(Ma,{value:e,key:e},e)})))),r.a.createElement(R.a.Item,{name:"accent",label:"Accent"},r.a.createElement(Ae.a,{placeholder:"Your English accent"},Ye.a.ENG_ACCENT.map((function(e){return r.a.createElement(Ma,{value:e,key:e},e)})))),r.a.createElement(R.a.Item,{name:"fluency",label:"Fluency"},r.a.createElement(Ae.a,{placeholder:"Your fluency"},Ye.a.ENG_FLUENCY.map((function(e){return r.a.createElement(Ma,{value:e,key:e},e)})))),r.a.createElement(R.a.Item,{name:"specialities",label:"Specialities"},r.a.createElement(Ae.a,{mode:"multiple",placeholder:"Select your specialities"},Ye.a.SPECIALITIES.map((function(e){return r.a.createElement(Ma,{value:e,key:e},e)})))),r.a.createElement(R.a.Item,{name:"teaching_styles",label:"Teaching styles"},r.a.createElement(Ae.a,{mode:"multiple",placeholder:"Your styles"},Ye.a.TEACHING_STYLE.map((function(e){return r.a.createElement(Ma,{value:e,key:e},e)}))))),r.a.createElement(Wa,{header:"Teaching certificates (optional)",key:"4"},p.certificates&&JSON.parse(p.certificates).length>0?r.a.createElement(R.a.Item,Object.assign({},H,{label:"Uploaded file(s)"}),r.a.createElement("div",{className:Ia.a.uploadedCert},p.certificates?JSON.parse(p.certificates).map((function(e,t){return r.a.createElement("a",{key:t,href:Ie+e.path},r.a.createElement(Gt.a,null),e.originalname)})):null)):null,r.a.createElement(R.a.Item,{name:"files",label:"Upload certificate"},r.a.createElement(Fe.a,Object.assign({},Z,{listType:"picture-card"}),r.a.createElement(_.a,{icon:r.a.createElement(Na.a,null)},"Select File"))),r.a.createElement(R.a.Item,K,r.a.createElement(_.a,{onClick:$,loading:O,style:{width:"132px"},icon:r.a.createElement(Le.a,null)},"Upload")),r.a.createElement(B.a,{message:"Warning: All your previous upload will be removed when uploading new certificates",type:"warning",showIcon:!0})),r.a.createElement(Wa,{header:"Introduce yourself",key:"5"},r.a.createElement(R.a.Item,{name:"introduction",label:"Introduction"},r.a.createElement(W.a.TextArea,{placeholder:"Introduce yourself"})),r.a.createElement("div",null,r.a.createElement("p",{className:Ia.a.introInstruct},"Record a video to emphasize your teaching style, expertise and personality to help students overcome their nerve when speaking with foreigners. A friendly video will encourage the stundents to call you. A few helpful tips:"),r.a.createElement("div",{className:Ia.a.introTips},r.a.createElement("p",null,"1. Make sure your camera/webcam is working properly"),r.a.createElement("p",null,"2. Find a clean and quiet room"),r.a.createElement("p",null,"3. Look at the camera and smile"),r.a.createElement("p",null,"4. Dress smart"),r.a.createElement("p",null,"5. Speak for 1-2 minutes"))),r.a.createElement(R.a.Item,{label:"Intro video"},U?r.a.createElement(Da,{cancelRecord:function(){return L(!1)},existedVideo:p.video,refreshProfile:z}):r.a.createElement(Ba,{recordNew:function(){return L(!0)}})))),r.a.createElement("div",{className:Ia.a.submitWrapper},r.a.createElement(_.a,{type:"primary",htmlType:"submit",loading:i},"Update profile"))):null)))}function Fa(){return r.a.createElement("div",null,"Stats")}var Ua=a(686),La=a(693),za=a(692),Ya=a(691),Ga=a(90),qa=a.n(Ga),Ha=a(352),Ja=a.n(Ha),Ka=a(353),Qa=a.n(Ka),Za=Ua.a.Step;function Xa(){var e,t=Object(n.useContext)(E).account,a=Object(n.useState)(!1),l=Object(s.a)(a,2),c=l[0],o=l[1],i=Object(n.useState)({}),u=Object(s.a)(i,2),m=u[0],d=u[1],p=function(){var e=Object(D.a)(P.a.mark((function e(){var a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(!0),e.next=4,G.get("/tutors/"+t.tutor.id);case 4:a=e.sent,t.tutor=a.data.tutor,d(a.data.tutor),o(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),o(!1),console.log(e.t0.response);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){p()}),[]),m.profileStatus===Se.ACCEPTED?e=r.a.createElement(Za,{status:"finish",title:"Profile approval",icon:r.a.createElement(La.a,null)}):m.profileStatus===Se.PENDING?e=r.a.createElement(Za,{status:"wait",title:"Profile approval",icon:r.a.createElement(La.a,null)}):m.profileStatus===Se.REJECTED&&(e=r.a.createElement(Za,{status:"error",title:"Profile approval",icon:r.a.createElement(La.a,null)})),r.a.createElement("div",{className:qa.a.teaching},r.a.createElement(We.a,{size:"large",spinning:c},r.a.createElement(Ua.a,{style:{width:"100%"}},r.a.createElement(Za,{status:m.account&&m.account.verification?"finish":"wait",title:"Verification",icon:r.a.createElement(za.a,null)}),e,r.a.createElement(Za,{status:m.account&&m.account.verification&&m.profileStatus===Se.ACCEPTED?"finish":"wait",title:"Ready",icon:r.a.createElement(Ya.a,null)})),m.account&&m.account.verification&&m.profileStatus===Se.ACCEPTED?r.a.createElement("div",{className:qa.a.wait},r.a.createElement("img",{className:qa.a.waitImg,src:Ja.a,alt:"",draggable:"false"}),r.a.createElement("div",{className:qa.a.waitTxt},r.a.createElement("p",null,"You are all set!"),r.a.createElement("p",null,"Be patient and stay here."),r.a.createElement("p",null,"Students will start calling you soon."))):r.a.createElement("div",{className:qa.a.wait},r.a.createElement("img",{className:qa.a.waitImg,src:Qa.a,alt:"",draggable:"false"}),r.a.createElement("div",{className:qa.a.waitTxt},r.a.createElement("p",null,"You are almost ready!"),r.a.createElement("p",null,"Complete your profile to start now!"),r.a.createElement("p",null,"Students are waiting to see you."))),c?null:r.a.createElement(da,{account:t})))}var $a=g.a.Header,en=g.a.Content,tn=g.a.Sider;function an(e){var t=Object(n.useContext)(E),a=t.account,l=t.onSignOut,c=Object(n.useState)(!1),u=Object(s.a)(c,2),m=u[0],d=u[1],p=Object(n.useState)(!1),f=Object(s.a)(p,2),v=f[0],b=f[1],h=e.location,_=a.tutor&&a.tutor.avatar?r.a.createElement(ue.a,{style:{margin:"10px"},src:Ie+a.tutor.avatar}):r.a.createElement(ue.a,{style:{margin:"10px"},icon:r.a.createElement(J.a,null)}),y=r.a.createElement(me.a,null,r.a.createElement(me.a.Item,{onClick:function(){return d(!0)}},r.a.createElement(Ee.a,null),r.a.createElement("span",null,"Change password")),r.a.createElement(me.a.Item,{onClick:l},r.a.createElement(ve.a,null),r.a.createElement("span",null,"Sign out")));return r.a.createElement(g.a,{style:{minHeight:"100vh"}},r.a.createElement(te,{isVisible:v,onClose:function(){return b(!1)}}),r.a.createElement(Te,{isVisible:m,onClose:function(){return d(!1)},onForgot:function(){return b(!0)}}),r.a.createElement(tn,null,r.a.createElement(Pe,{collapsed:!1}),r.a.createElement(me.a,{theme:"dark",defaultSelectedKeys:["/tutor"],mode:"inline",selectedKeys:[h.pathname]},r.a.createElement(me.a.Item,{key:"/tutor"},r.a.createElement(he.a,null),r.a.createElement(o.b,{to:"/tutor"},r.a.createElement("span",null,"Profile"))),r.a.createElement(me.a.Item,{key:"/tutor/teaching"},r.a.createElement(be.a,null),r.a.createElement(o.b,{to:"/tutor/teaching"},r.a.createElement("span",null,"Teaching"))),r.a.createElement(me.a.Item,{key:"/tutor/stats"},r.a.createElement(ge.a,null),r.a.createElement(o.b,{to:"/tutor/stats"},r.a.createElement("span",null,"Stats"))))),r.a.createElement(g.a,null,r.a.createElement($a,null,r.a.createElement("div",{className:Ca.a.userControl},"Hello, ",a.username,r.a.createElement(de.a,{overlay:y,placement:"bottomLeft"},r.a.createElement("div",null,_,r.a.createElement(_e.a,{className:Ca.a.dropDownIcon}))))),r.a.createElement(en,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/tutor/stats",component:Fa}),r.a.createElement(i.b,{path:"/tutor/teaching",component:Xa}),r.a.createElement(i.b,{path:"/tutor",component:Va,exact:!0}))),r.a.createElement(j,null)))}var nn=a(705),rn=a(703),ln=a(697),cn=a(695),on=a(130),sn=a.n(on);function un(){return r.a.createElement("div",null,"Dashboard")}var mn=a(677),dn=a(181),pn=a(189),fn=a.n(pn),En=a(91),vn=a.n(En),bn=It.a.TabPane;function hn(e){var t=e.selected,a=e.getStudentsData,l=e.setShowDetailModal,c=e.showDetailModal,o=Object(n.useState)(!1),i=Object(s.a)(o,2),u=i[0],m=i[1],d=Object(n.useState)(null),p=Object(s.a)(d,2),f=p[0],E=p[1],v=Object(n.useState)(!1),b=Object(s.a)(v,2),h=b[0],g=b[1],y=function(){var e=Object(D.a)(P.a.mark((function e(n){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),e.next=4,G.put("/accounts/"+t.accountId,{state:n});case 4:return e.next=6,a();case 6:g(!1),l(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),g(!1),console.log(e.t0.response);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){t&&function(){var e=Object(D.a)(P.a.mark((function e(){var a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),e.next=4,G.get("/students/"+t.id);case 4:a=e.sent,E(a.data.student),m(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),m(!1);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}()()}),[t]);var w=f?r.a.createElement(It.a,{defaultActiveKey:"profile",type:"card"},r.a.createElement(bn,{tab:"Profile",key:"profile"},r.a.createElement("div",{className:vn.a.detail},r.a.createElement("div",{className:vn.a.detailBasic},f.avatar?r.a.createElement(ue.a,{src:Ie+f.avatar,size:100}):r.a.createElement(ue.a,{icon:r.a.createElement(J.a,null),size:100}),r.a.createElement("div",{className:vn.a.detailBasicInfo},r.a.createElement(qt.a,{size:"small",column:1,title:f.name,bordered:!0},r.a.createElement(qt.a.Item,{label:"Username"},t.username),r.a.createElement(qt.a.Item,{label:"Email"},t.email),r.a.createElement(qt.a.Item,{label:"Birthdate"},f.birthdate?qe()(f.birthdate).format("YYYY-MM-DD"):null),r.a.createElement(qt.a.Item,{label:"Status"},t.verification?r.a.createElement(Me.a,{color:"success"},"Verified"):r.a.createElement(Me.a,{color:"default"},"Unverified"),t.state?r.a.createElement(Me.a,{color:"success"},"Active"):r.a.createElement(Me.a,{color:"error"},"Inactive"))))),r.a.createElement("div",{className:vn.a.banBtnHolder},t.state?r.a.createElement(_.a,{loading:h,className:vn.a.changeStateBtn,type:"primary",danger:!0,onClick:function(){return y(Oe.INACTIVE)}},"Ban"):r.a.createElement(_.a,{loading:h,className:vn.a.changeStateBtn,type:"primary",onClick:function(){return y(Oe.ACTIVE)}},"Unban")),r.a.createElement("div",{className:vn.a.detailAdditional},r.a.createElement(qt.a,{bordered:!0,size:"small",column:1},r.a.createElement(qt.a.Item,{label:"Phone"},f.phone),r.a.createElement(qt.a.Item,{label:"Birthdate"},f.birthdate?qe()(f.birthdate).format("YYYY-MM-DD"):null),r.a.createElement(qt.a.Item,{label:"Student level"},f.student_lvl),r.a.createElement(qt.a.Item,{label:"Student type"},f.student_type),r.a.createElement(qt.a.Item,{label:"Favorite accent"},f.accent),r.a.createElement(qt.a.Item,{label:"Favorite tutor styles"}," ",f.teaching_styles?JSON.parse(f.teaching_styles).map((function(e){return r.a.createElement(Me.a,{key:e},e)})):null),r.a.createElement(qt.a.Item,{label:"Interests"},f.specialities?JSON.parse(f.specialities).map((function(e){return r.a.createElement(Me.a,{key:e},e)})):null))))),r.a.createElement(bn,{tab:"History",key:"history"},"Call history"),r.a.createElement(bn,{tab:"Report",key:"report"},"Report"),r.a.createElement(bn,{tab:"Subscription",key:"subscription"},"Subscription")):null;return r.a.createElement(A.a,{title:t?t.name:null,visible:c,onCancel:function(){return l(!1)},footer:null,width:"600px",destroyOnClose:!0,bodyStyle:{height:"400px",overflow:"auto"}},r.a.createElement(We.a,{spinning:u},w))}var gn=W.a.Search;function _n(){var e=Object(n.useState)(10),t=Object(s.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)([]),o=Object(s.a)(c,2),i=o[0],u=o[1],m=Object(n.useState)(1),d=Object(s.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(""),v=Object(s.a)(E,2),b=v[0],h=v[1],g=Object(n.useState)(0),_=Object(s.a)(g,2),y=_[0],w=_[1],C=Object(n.useState)(!1),O=Object(s.a)(C,2),S=O[0],I=O[1],N=Object(n.useState)(!1),j=Object(s.a)(N,2),T=j[0],x=j[1],k=Object(n.useState)(null),R=Object(s.a)(k,2),A=R[0],B=R[1],W=function(){var e=Object(D.a)(P.a.mark((function e(){var t,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I(!0),e.next=4,G.get("/students?page=".concat(p,"&size=").concat(a,"&search=")+b);case 4:t=e.sent,n=[],t.data.students.forEach((function(e){n.push({key:e.id,id:e.id,name:e.name,username:e.account.username,email:e.account.email,state:e.account.state,verification:e.account.verification,accountId:e.account.id})})),w(t.data.totalResults),u(n),I(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),I(!1),console.log(e.t0.response);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){W()}),[p,a,b]);var M=[{title:"Name",dataIndex:"name"},{title:"Username",dataIndex:"username"},{title:"Email",dataIndex:"email"},{title:"State",dataIndex:"state",render:function(e){return e?r.a.createElement(Me.a,{color:"success"},"Active"):r.a.createElement(Me.a,{color:"error"},"Inactive")}},{title:"Verification",dataIndex:"verification",render:function(e){return e?r.a.createElement(Me.a,{color:"success"},"Verified"):r.a.createElement(Me.a,{color:"default"},"Unverified")}}];return r.a.createElement("div",{className:fn.a.studentsLayout},r.a.createElement(hn,{setShowDetailModal:x,showDetailModal:T,getStudentsData:W,selected:A}),r.a.createElement("div",{className:fn.a.searchBar},r.a.createElement(gn,{placeholder:"Search for username, name or email",onSearch:function(e){h(e)},enterButton:!0})),r.a.createElement(We.a,{spinning:S},r.a.createElement(mn.a,{columns:M,dataSource:i,pagination:!1,onRow:function(e,t){return{onClick:function(t){B(e),x(!0)}}}})),r.a.createElement("div",{className:fn.a.paginationWrapper},r.a.createElement(dn.a,{current:p,defaultCurrent:p,total:y,pageSize:a,showSizeChanger:!0,showTotal:function(){return"Total ".concat(y," results")},onShowSizeChange:function(e,t){l(t),f(Math.ceil(y/t))},onChange:function(e,t){f(e)}})))}var yn=a(190),wn=a.n(yn),Cn=a(26),On=a.n(Cn),Sn=It.a.TabPane;function In(e){var t=e.selected,a=e.setShowDetailModal,l=e.getTutorsData,c=e.showDetailModal,o=Object(n.useState)(!1),i=Object(s.a)(o,2),u=i[0],m=i[1],d=Object(n.useState)(null),p=Object(s.a)(d,2),f=p[0],E=p[1],v=Object(n.useState)(!1),b=Object(s.a)(v,2),h=b[0],g=b[1],y=Object(n.useState)(!1),w=Object(s.a)(y,2),C=w[0],O=w[1],S=function(){var e=Object(D.a)(P.a.mark((function e(n){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),e.next=4,G.put("/tutors/"+t.id,{profileStatus:n});case 4:return e.next=6,l();case 6:g(!1),a(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),g(!1);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(D.a)(P.a.mark((function e(n){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(!0),e.next=4,G.put("/accounts/"+t.accountId,{state:n});case 4:return e.next=6,l();case 6:O(!1),a(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),O(!1),console.log(e.t0.response);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){t&&function(){var e=Object(D.a)(P.a.mark((function e(){var a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),e.next=4,G.get("/tutors/"+t.id);case 4:a=e.sent,E(a.data.tutor),m(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),m(!1);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}()()}),[t]);var N=r.a.createElement("div",{className:On.a.statusControl},r.a.createElement(B.a,{showIcon:!0,message:"Rejected",type:"error"}),r.a.createElement("div",{className:On.a.statusControlBtnWrapper},r.a.createElement(_.a,{type:"primary",style:{backgroundColor:"#52c41a",color:"white",borderColor:"#52c41a"},className:On.a.statusControlBtn,onClick:function(){return S(Se.ACCEPTED)}},"Accept"),r.a.createElement(_.a,{className:On.a.statusControlBtn,onClick:function(){return S(Se.PENDING)}},"Pending")));t&&t.profileStatus===Se.ACCEPTED&&(N=r.a.createElement("div",{className:On.a.statusControl},r.a.createElement(B.a,{showIcon:!0,message:"Accepted",type:"success"}),r.a.createElement("div",{className:On.a.statusControlBtnWrapper},r.a.createElement(_.a,{className:On.a.statusControlBtn,onClick:function(){return S(Se.PENDING)}},"Pending"),r.a.createElement(_.a,{type:"primary",danger:!0,className:On.a.statusControlBtn,onClick:function(){return S(Se.REJECTED)}},"Reject")))),t&&t.profileStatus===Se.PENDING&&(N=r.a.createElement("div",{className:On.a.statusControl},r.a.createElement(B.a,{showIcon:!0,message:"Pending",type:"info"}),r.a.createElement("div",{className:On.a.statusControlBtnWrapper},r.a.createElement(_.a,{className:On.a.statusControlBtn,style:{backgroundColor:"#52c41a",color:"white",borderColor:"#52c41a"},onClick:function(){return S(Se.ACCEPTED)}},"Accept"),r.a.createElement(_.a,{type:"primary",danger:!0,className:On.a.statusControlBtn,onClick:function(){return S(Se.REJECTED)}},"Reject"))));var j=r.a.createElement("div",null,r.a.createElement(We.a,{spinning:h},N,r.a.createElement("div",null,f?r.a.createElement("div",null,r.a.createElement("div",{className:On.a.detailWrapper},r.a.createElement(qt.a,{bordered:!0,size:"small",column:1,title:"Teaching preferences"},r.a.createElement(qt.a.Item,{label:"Student level"},f.student_lvl),r.a.createElement(qt.a.Item,{label:"Student type"},f.student_type),r.a.createElement(qt.a.Item,{label:"Accent"},f.accent),r.a.createElement(qt.a.Item,{label:"Fluency"},f.fluency),r.a.createElement(qt.a.Item,{label:"Tutor styles"}," ",f.teaching_styles?JSON.parse(f.teaching_styles).map((function(e){return r.a.createElement(Me.a,{key:e},e)})):null),r.a.createElement(qt.a.Item,{label:"Specialities"},f.specialities?JSON.parse(f.specialities).map((function(e){return r.a.createElement(Me.a,{key:e},e)})):null))),r.a.createElement("div",{className:On.a.detailWrapper},r.a.createElement(qt.a,{bordered:!0,size:"small",column:1,title:"CV"},r.a.createElement(qt.a.Item,{label:"Interests"},f.interests),r.a.createElement(qt.a.Item,{label:"Education"},f.education),r.a.createElement(qt.a.Item,{label:"Experience"},f.experience),r.a.createElement(qt.a.Item,{label:"Profession"},f.profession),r.a.createElement(qt.a.Item,{label:"Reason"},f.reason))),r.a.createElement("div",{className:On.a.detailWrapper},r.a.createElement("p",{className:On.a.detailTitle},"Certificates"),r.a.createElement("div",{className:On.a.uploadedCert},f.certificates?JSON.parse(f.certificates).map((function(e,t){return r.a.createElement("a",{key:t,href:Ie+e.path},r.a.createElement(Gt.a,null),e.originalname)})):null)),r.a.createElement("div",{className:On.a.detailWrapper},r.a.createElement(qt.a,{bordered:!0,size:"small",column:1,title:"Introduction"},r.a.createElement(qt.a.Item,{label:"Introduction"},f.introduction)),f.video?r.a.createElement("div",{className:On.a.videoWrapper},r.a.createElement(Yt,{username:t.username})):null)):null))),T=f?r.a.createElement(It.a,{defaultActiveKey:"info",type:"card"},r.a.createElement(Sn,{tab:"Info",key:"info"},r.a.createElement("div",{className:On.a.detail},r.a.createElement("div",{className:On.a.detailBasic},f.avatar?r.a.createElement(ue.a,{src:Ie+f.avatar,size:100}):r.a.createElement(ue.a,{icon:r.a.createElement(J.a,null),size:100}),r.a.createElement("div",{className:On.a.detailBasicInfo},r.a.createElement(qt.a,{size:"small",column:1,title:f.name,bordered:!0},r.a.createElement(qt.a.Item,{label:"Username"},t.username),r.a.createElement(qt.a.Item,{label:"Email"},t.email),r.a.createElement(qt.a.Item,{label:"Phone"},f.phone),r.a.createElement(qt.a.Item,{label:"Address"},f.address),r.a.createElement(qt.a.Item,{label:"Birthdate"},f.birthdate?qe()(f.birthdate).format("YYYY-MM-DD"):null),r.a.createElement(qt.a.Item,{label:"Status"},t.verification?r.a.createElement(Me.a,{color:"success"},"Verified"):r.a.createElement(Me.a,{color:"default"},"Unverified"),t.state?r.a.createElement(Me.a,{color:"success"},"Active"):r.a.createElement(Me.a,{color:"error"},"Inactive"))))),r.a.createElement("div",{className:On.a.banBtnHolder},t.state?r.a.createElement(_.a,{loading:C,className:On.a.changeStateBtn,type:"primary",danger:!0,onClick:function(){return I(Oe.INACTIVE)}},"Ban"):r.a.createElement(_.a,{loading:C,className:On.a.changeStateBtn,type:"primary",onClick:function(){return I(Oe.ACTIVE)}},"Unban")))),r.a.createElement(Sn,{tab:"Profile",key:"profile"},j),r.a.createElement(Sn,{tab:"History",key:"history"},"Call history"),r.a.createElement(Sn,{tab:"Report",key:"report"},"Report"),r.a.createElement(Sn,{tab:"Payment",key:"payment"},"Payment")):null;return r.a.createElement(A.a,{title:t?t.name:null,visible:c,onCancel:function(){return a(!1)},footer:null,width:"600px",destroyOnClose:!0,bodyStyle:{height:"400px",overflow:"auto"}},r.a.createElement(We.a,{spinning:u},T))}var Nn=W.a.Search;function jn(){var e=Object(n.useState)(10),t=Object(s.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)([]),o=Object(s.a)(c,2),i=o[0],u=o[1],m=Object(n.useState)(1),d=Object(s.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(""),v=Object(s.a)(E,2),b=v[0],h=v[1],g=Object(n.useState)(0),_=Object(s.a)(g,2),y=_[0],w=_[1],C=Object(n.useState)(!1),O=Object(s.a)(C,2),S=O[0],I=O[1],N=Object(n.useState)(!1),j=Object(s.a)(N,2),T=j[0],x=j[1],k=Object(n.useState)(null),R=Object(s.a)(k,2),A=R[0],B=R[1],W=function(){var e=Object(D.a)(P.a.mark((function e(){var t,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I(!0),e.next=4,G.get("/tutors?page=".concat(p,"&size=").concat(a,"&search=")+b);case 4:t=e.sent,n=[],t.data.tutors.forEach((function(e){n.push({key:e.id,id:e.id,name:e.name,username:e.account.username,email:e.account.email,state:e.account.state,verification:e.account.verification,accountId:e.account.id,profileStatus:e.profileStatus})})),w(t.data.totalResults),u(n),I(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0.response),I(!1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){W()}),[p,a,b]);var M=[{title:"Name",dataIndex:"name"},{title:"Username",dataIndex:"username"},{title:"Email",dataIndex:"email"},{title:"State",dataIndex:"state",render:function(e){return e?r.a.createElement(Me.a,{color:"success"},"Active"):r.a.createElement(Me.a,{color:"error"},"Inactive")}},{title:"Verification",dataIndex:"verification",render:function(e){return e?r.a.createElement(Me.a,{color:"success"},"Verified"):r.a.createElement(Me.a,{color:"default"},"Unverified")}},{title:"Profile status",dataIndex:"profileStatus",render:function(e){return e===Se.ACCEPTED?r.a.createElement(Me.a,{color:"success"},"Accepted"):e===Se.PENDING?r.a.createElement(Me.a,{color:"blue"},"Pending"):r.a.createElement(Me.a,{color:"error"},"Rejected")}}];return r.a.createElement("div",{className:wn.a.tutorsLayout},r.a.createElement(In,{selected:A,setShowDetailModal:x,showDetailModal:T,getTutorsData:W}),r.a.createElement("div",{className:wn.a.searchBar},r.a.createElement(Nn,{placeholder:"Search for username, name or email",onSearch:function(e){h(e)},enterButton:!0})),r.a.createElement(We.a,{spinning:S},r.a.createElement(mn.a,{columns:M,dataSource:i,pagination:!1,onRow:function(e,t){return{onClick:function(t){B(e),x(!0)}}}})),r.a.createElement("div",{className:wn.a.paginationWrapper},r.a.createElement(dn.a,{current:p,defaultCurrent:p,total:y,pageSize:a,showSizeChanger:!0,showTotal:function(){return"Total ".concat(y," results")},onShowSizeChange:function(e,t){l(t),f(Math.ceil(y/t))},onChange:function(e,t){f(e)}})))}var Tn=a(357),xn=a.n(Tn);function kn(){return r.a.createElement("div",null,"Report")}var Pn=g.a.Header,Dn=g.a.Content,Rn=g.a.Sider;function An(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),l=a[0],c=a[1],u=Object(n.useState)(!1),m=Object(s.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(!1),v=Object(s.a)(f,2),b=v[0],h=v[1],_=Object(n.useContext)(E),y=_.onSignOut,w=_.account,C=e.location,O=r.a.createElement(me.a,null,r.a.createElement(me.a.Item,{onClick:function(){return p(!0)}},r.a.createElement(Ee.a,null),r.a.createElement("span",null,"Change password")),r.a.createElement(me.a.Item,{onClick:y},r.a.createElement(ve.a,null),r.a.createElement("span",null,"Sign out")));return r.a.createElement(g.a,null,r.a.createElement(te,{isVisible:b,onClose:function(){return h(!1)}}),r.a.createElement(Te,{isVisible:d,onClose:function(){return p(!1)},onForgot:function(){return h(!0)}}),r.a.createElement(Rn,{collapsible:!0,collapsed:l,onCollapse:function(e){c(e)},className:sn.a.adminMenu},r.a.createElement(Pe,{collapsed:l}),r.a.createElement(me.a,{theme:"dark",defaultSelectedKeys:["/admin"],mode:"inline",selectedKeys:[C.pathname]},r.a.createElement(me.a.Item,{key:"/admin"},r.a.createElement(ge.a,null),r.a.createElement(o.b,{to:"/admin"},r.a.createElement("span",null,"Dashboard"))),r.a.createElement(me.a.Item,{key:"/admin/students"},r.a.createElement(jt.a,null),r.a.createElement(o.b,{to:"/admin/students"},r.a.createElement("span",null,"Students"))),r.a.createElement(me.a.Item,{key:"/admin/tutors"},r.a.createElement(nn.a,null),r.a.createElement(o.b,{to:"/admin/tutors"},r.a.createElement("span",null,"Tutors"))),r.a.createElement(me.a.Item,{key:"/admin/reports"},r.a.createElement(rn.a,null),r.a.createElement(o.b,{to:"/admin/reports"},r.a.createElement("span",null,"Reports"))))),r.a.createElement(g.a,null,r.a.createElement(Pn,{style:{background:"white"}},l?r.a.createElement(ln.a,{className:sn.a.menuIcon,onClick:function(){return c(!1)}}):r.a.createElement(cn.a,{className:sn.a.menuIcon,onClick:function(){return c(!0)}}),r.a.createElement("div",{className:sn.a.userControl},"Hello, ",w.username,r.a.createElement(de.a,{overlay:O,placement:"bottomLeft"},r.a.createElement("div",null,r.a.createElement(ue.a,{src:xn.a,size:"large",draggable:!1}),r.a.createElement(_e.a,{className:sn.a.dropDownIcon}))))),r.a.createElement(Dn,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/admin/students",component:_n}),r.a.createElement(i.b,{path:"/admin/tutors",component:jn}),r.a.createElement(i.b,{path:"/admin/reports",component:kn}),r.a.createElement(i.b,{path:"/admin",component:un,exact:!0}))),r.a.createElement(j,null)))}function Bn(){return Object(n.useEffect)((function(){f()}),[]),r.a.createElement(i.a,{to:"/"})}function Wn(){var e=Object(n.useContext)(E).account;return e&&e.role===Ce.STUDENT?r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/student",component:ya}),r.a.createElement(i.a,{to:"/student"})):e&&e.role===Ce.TUTOR?r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/tutor",component:an}),r.a.createElement(i.a,{to:"/tutor"})):e&&e.role===Ce.ADMIN?r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/admin",component:An}),r.a.createElement(i.a,{to:"/admin"})):r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/",exact:!0,component:se}),r.a.createElement(i.b,{path:"/sign-out",component:Bn}),r.a.createElement(i.a,{to:"/"}))}var Mn=Object(i.g)((function(){return r.a.createElement("div",{className:"App"},r.a.createElement(v,null,r.a.createElement(Wn,null)))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(669),a(670);var Vn=r.a.createElement(o.a,null,r.a.createElement(Mn,null));c.a.render(Vn,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},88:function(e,t,a){e.exports={callWindow:"CallWindow_callWindow__1Hsc3",videoScreenContainer:"CallWindow_videoScreenContainer__c9bra",videoScreen:"CallWindow_videoScreen__UnvZD",videoControl:"CallWindow_videoControl__3gwCd",callWindowWrapper:"CallWindow_callWindowWrapper__pZ405",callTime:"CallWindow_callTime__3lQGc"}},89:function(e,t,a){e.exports={detailWrapper:"TutorDetailModal_detailWrapper__189TQ",detailTitle:"TutorDetailModal_detailTitle__aq2pw",uploadedCert:"TutorDetailModal_uploadedCert__olsIL",videoWrapper:"TutorDetailModal_videoWrapper__2Agis"}},90:function(e,t,a){e.exports={teaching:"Teaching_teaching__2xiG7",waitImg:"Teaching_waitImg__2exBm",wait:"Teaching_wait__1hDhS",waitTxt:"Teaching_waitTxt__2q0ja"}},91:function(e,t,a){e.exports={detail:"StudentProfile_detail__3qbFC",detailBasic:"StudentProfile_detailBasic__3ZYMT",detailName:"StudentProfile_detailName__1UuOE",detailBasicInfo:"StudentProfile_detailBasicInfo__31Y_K",banBtnHolder:"StudentProfile_banBtnHolder__20xV7",detailAdditional:"StudentProfile_detailAdditional__2YP-U",detailAdditionalRow:"StudentProfile_detailAdditionalRow__3Qx5o",changeStateBtn:"StudentProfile_changeStateBtn__1vRuN"}}},[[363,1,2]]]);
//# sourceMappingURL=main.3710cbc4.chunk.js.map