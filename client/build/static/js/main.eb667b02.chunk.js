(this["webpackJsonpmirage-client"]=this["webpackJsonpmirage-client"]||[]).push([[0],{100:function(e,t,a){e.exports={detailWrapper:"TutorDetailModal_detailWrapper__2jORT",detailTitle:"TutorDetailModal_detailTitle__2aV2I",uploadedCert:"TutorDetailModal_uploadedCert__pY1kn",videoWrapper:"TutorDetailModal_videoWrapper__3DwCj"}},101:function(e,t,a){e.exports={study:"Study_study__3yzrl",unverify:"Study_unverify__Mf_4V",unverifyImg:"Study_unverifyImg__3kHB3",timeoutImg:"Study_timeoutImg___XQ0t",unverifyTxt:"Study_unverifyTxt__1ftai"}},102:function(e,t,a){e.exports={detail:"StudentProfile_detail__3arUr",detailBasic:"StudentProfile_detailBasic__11ALf",detailName:"StudentProfile_detailName__B97Z6",detailBasicInfo:"StudentProfile_detailBasicInfo__1yVRN",banBtnHolder:"StudentProfile_banBtnHolder__cs3lC",detailAdditional:"StudentProfile_detailAdditional__3SjAt",detailAdditionalRow:"StudentProfile_detailAdditionalRow__1BK_6",changeStateBtn:"StudentProfile_changeStateBtn__1J4lj"}},103:function(e,t,a){e.exports={settings:"Settings_settings__2TSqE",settingsContent:"Settings_settingsContent__A4T8H",settingTitle:"Settings_settingTitle__BOpkH",settingImg:"Settings_settingImg__1xsqp"}},118:function(e,t,a){e.exports={footer:"FooterContent_footer__1Ftu8",contactIcon:"FooterContent_contactIcon__3BLxb",contactInfoContainer:"FooterContent_contactInfoContainer__5Bz7Z"}},119:function(e,t,a){e.exports={profile:"Profile_profile__3fURR",accountInfoContainer:"Profile_accountInfoContainer__12z_A",accountInfo:"Profile_accountInfo__2HZIj",name:"Profile_name__2JrBD",collapse:"Profile_collapse__16CjJ",submitWrapper:"Profile_submitWrapper__3HxsU"}},120:function(e,t,a){e.exports={videoCall:"VideoCall_videoCall__3AYzp",endCallImg:"VideoCall_endCallImg__1XDrs",afterCall:"VideoCall_afterCall__2irdi",endUser:"VideoCall_endUser__2jBko",endDuration:"VideoCall_endDuration__14hqw"}},141:function(e,t,a){e.exports={callModal:"CallModal_callModal__c1fk0",controlBtns:"CallModal_controlBtns__97SxF",caller:"CallModal_caller__Dz1q0",callerTxt:"CallModal_callerTxt__1yRH8",callModalWrapper:"CallModal_callModalWrapper__393GQ"}},142:function(e,t,a){e.exports={btnWrapper:"VideoRecorder_btnWrapper__1N2-J",btnWrapperNoCancel:"VideoRecorder_btnWrapperNoCancel__3RkaW",videoBtn:"VideoRecorder_videoBtn__368GH"}},143:function(e,t,a){e.exports={logoContainer:"Admin_logoContainer__STuZW",logo:"Admin_logo__BcI4N",logoText:"Admin_logoText__OIkA9",userControl:"Admin_userControl__3Z4Vh",dropDownIcon:"Admin_dropDownIcon__3sTud",adminMenu:"Admin_adminMenu__2BAC4",menuIcon:"Admin_menuIcon__L4lgP"}},156:function(e,t,a){e.exports={signInForm:"SignInModal_signInForm__2iJoj",signInForgot:"SignInModal_signInForgot__1ryjr",signInButton:"SignInModal_signInButton__2Q5nw",registerNow:"SignInModal_registerNow__Ht0vT"}},158:function(e,t,a){e.exports={cancelBtn:"Subscriptions_cancelBtn__1Zgpp",reload:"Subscriptions_reload__3mKNz",subscriptions:"Subscriptions_subscriptions__1Sjt8",acceptBtn:"Subscriptions_acceptBtn__2PoNS"}},189:function(e,t,a){e.exports=a.p+"static/media/app-logo.05772604.png"},199:function(e,t,a){e.exports={headerWrapper:"AppLogo_headerWrapper__2hMe_",headerTitle:"AppLogo_headerTitle__2Yd0-",headerIcon:"AppLogo_headerIcon__QWZw2"}},200:function(e,t,a){e.exports={logoContainer:"SideBarLogo_logoContainer__3jLC4",logo:"SideBarLogo_logo__3nDhW",logoText:"SideBarLogo_logoText__2NfcE"}},202:function(e,t,a){e.exports={StudentCallHistories:"StudentCallHistories_StudentCallHistories__rse8R",searchBar:"StudentCallHistories_searchBar__2h0tP",viewRecordBtn:"StudentCallHistories_viewRecordBtn__1xRTt"}},203:function(e,t,a){e.exports={TutorCallHistories:"TutorCallHistories_TutorCallHistories__1ayj3",searchBar:"TutorCallHistories_searchBar__32FTn",payRate:"TutorCallHistories_payRate__3Qvj6"}},204:function(e,t,a){e.exports={dashboard:"Dashboard_dashboard__TgW6w",dashboardRow:"Dashboard_dashboardRow__ZOvya"}},205:function(e,t,a){e.exports={studentsLayout:"Students_studentsLayout__1IzW1",paginationWrapper:"Students_paginationWrapper__3mWPG",searchBar:"Students_searchBar__cXPN7"}},206:function(e,t,a){e.exports={tutorsLayout:"Tutors_tutorsLayout__3r6D2",paginationWrapper:"Tutors_paginationWrapper__74mgI",searchBar:"Tutors_searchBar__w_FW1"}},248:function(e,t,a){e.exports={userControl:"Student_userControl__2OhXJ",sideMenu:"Student_sideMenu__32xS1",logoContainer:"Student_logoContainer__2-lbe",logo:"Student_logo__oQ2Xq",logoText:"Student_logoText__13Abr"}},249:function(e,t,a){e.exports={forgotPass:"ChangePasswordModal_forgotPass__CGDsg"}},253:function(e,t,a){e.exports={subscriptions:"Subscriptions_subscriptions__1PV4U",tabPaneHistory:"Subscriptions_tabPaneHistory__22fxc"}},254:function(e,t,a){e.exports={cancelBtn:"SubscriptionHistory_cancelBtn__CyXyF",reload:"SubscriptionHistory_reload__B1WGO"}},260:function(e,t,a){e.exports={userControl:"Tutor_userControl__VXq1k",sideMenu:"Tutor_sideMenu__1Rtxn",logoContainer:"Tutor_logoContainer__MzlJP",logo:"Tutor_logo__aL0MZ",logoText:"Tutor_logoText__DQNfE"}},261:function(e,t,a){e.exports={recentCalls:"RecentCalls_recentCalls__10_XS",recentCallsTitle:"RecentCalls_recentCallsTitle__3TF7C"}},262:function(e,t,a){e.exports={topPaid:"TopPaid_topPaid__3Vg1U",topPaidTitle:"TopPaid_topPaidTitle__1pDmY"}},263:function(e,t,a){e.exports={recordTitle:"CallDetailModal_recordTitle__2oYlc"}},27:function(e,t,a){e.exports={detail:"TutorProfile_detail__24lf1",detailBasic:"TutorProfile_detailBasic__TCuPe",detailName:"TutorProfile_detailName__jTOsH",detailBasicInfo:"TutorProfile_detailBasicInfo__lLIgi",banBtnHolder:"TutorProfile_banBtnHolder__3ur7_",detailAdditional:"TutorProfile_detailAdditional__3_LCi",detailAdditionalRow:"TutorProfile_detailAdditionalRow__1xr0F",statusControl:"TutorProfile_statusControl__2ep4s",statusControlBtnWrapper:"TutorProfile_statusControlBtnWrapper__3pk0T",statusControlBtn:"TutorProfile_statusControlBtn__32_JF",changeStateBtn:"TutorProfile_changeStateBtn__3sTHI",detailWrapper:"TutorProfile_detailWrapper__2ZjVk",detailTitle:"TutorProfile_detailTitle__WNYO8",uploadedCert:"TutorProfile_uploadedCert__TM4qr",videoWrapper:"TutorProfile_videoWrapper__39zQw"}},28:function(e,t,a){e.exports={extendSub:"ExtendSubscription_extendSub__19Cxs",extendSubContent:"ExtendSubscription_extendSubContent__1D7fN",extendDuration:"ExtendSubscription_extendDuration__29NHk",extendPrice:"ExtendSubscription_extendPrice__2eU60",extendSave:"ExtendSubscription_extendSave__N1dp-",tierImage:"ExtendSubscription_tierImage__2Qj_h",subTier:"ExtendSubscription_subTier__2VYGM"}},32:function(e,t,a){e.exports={reportDetail:"ReportDetailModal_reportDetail__1Qr07",reportLabel:"ReportDetailModal_reportLabel__kquXK",reportContent:"ReportDetailModal_reportContent__2i_sF",banBtnHolder:"ReportDetailModal_banBtnHolder__eNKtc",statusControl:"ReportDetailModal_statusControl__1fnb7",statusControlBtnWrapper:"ReportDetailModal_statusControlBtnWrapper__3SIIC",statusControlBtn:"ReportDetailModal_statusControlBtn__2zo3n"}},335:function(e,t,a){e.exports=a.p+"static/media/flame-welcome.2b090893.png"},336:function(e,t,a){e.exports=a.p+"static/media/welcome-student.0c7630e5.png"},337:function(e,t,a){e.exports=a.p+"static/media/welcome-tutor.66b32adc.png"},344:function(e,t,a){e.exports={submitBtn:"ForgotPasswordModal_submitBtn__19bj8"}},361:function(e,t,a){e.exports=a.p+"static/media/normal.e7bbb1c5.png"},362:function(e,t,a){e.exports=a.p+"static/media/silver.f90e93f6.png"},363:function(e,t,a){e.exports=a.p+"static/media/gold.5aac3e94.png"},364:function(e,t,a){e.exports=a.p+"static/media/platium.d927c89d.png"},37:function(e,t,a){e.exports={reviewSummary:"ReviewSummary_reviewSummary__Jwt72",ratingCount:"ReviewSummary_ratingCount__1JQhM",ratingCountList:"ReviewSummary_ratingCountList__ZBfIa",rating:"ReviewSummary_rating__2MEhz",reviewAvg:"ReviewSummary_reviewAvg__2fNIu",reviewOverall:"ReviewSummary_reviewOverall__354ys",reviewNumber:"ReviewSummary_reviewNumber__gEB8z"}},371:function(e,t,a){e.exports=a.p+"static/media/endcall.6812f833.png"},372:function(e,t,a){e.exports=a.p+"static/media/unverify.e737cc3d.png"},373:function(e,t,a){e.exports=a.p+"static/media/timeout.5eb4aa73.png"},374:function(e,t,a){e.exports={recordHolder:"StudentCallDetailModal_recordHolder__2_CP9"}},378:function(e,t,a){e.exports={btnWrapper:"VideoPlayer_btnWrapper__36NBd"}},379:function(e,t,a){e.exports=a.p+"static/media/tutor-wait.a732bc74.png"},380:function(e,t,a){e.exports=a.p+"static/media/complete-profile.5dfe81ca.png"},381:function(e,t,a){e.exports={stats:"Stats_stats__17STS"}},382:function(e,t,a){e.exports={payments:"Payments_payments__3NcjE"}},383:function(e,t,a){e.exports={reviews:"Reviews_reviews__LggTJ"}},384:function(e,t,a){e.exports={onlineUsers:"OnlineUsers_onlineUsers__13xP_"}},386:function(e,t,a){e.exports={moneyStats:"MoneyStats_moneyStats__3dC_u"}},387:function(e,t,a){e.exports=a.p+"static/media/admin-avatar.4fc32273.png"},388:function(e,t,a){e.exports={reports:"Reports_reports__n4zJa"}},389:function(e,t,a){e.exports=a.p+"static/media/settings.b69cd3a3.png"},395:function(e,t,a){e.exports=a(711)},42:function(e,t,a){e.exports={registerContent:"RegisterModal_registerContent__1IyVz",registerWelcome:"RegisterModal_registerWelcome__FbIzJ",registerForm:"RegisterModal_registerForm__2CZRj",registerButton:"RegisterModal_registerButton__z1ulB",formWrapper:"RegisterModal_formWrapper__4GBIy",switchMode:"RegisterModal_switchMode__2h5aY",switchModeWrapper:"RegisterModal_switchModeWrapper__2XhUs",welcomeImg:"RegisterModal_welcomeImg__Ktazu",registerWelcomeContent:"RegisterModal_registerWelcomeContent__2mKlf"}},52:function(e,t){t.PREFERENCE_TYPE=Object.freeze({ENG_ACCENT:"eng_accent",ENG_FLUENCY:"eng_fluency",TEACHING_STYLE:"teaching_style",STUDENT_TYPE:"student_type",STUDENT_LVL:"student_lvl",SPECIALITY:"speciality"}),t.ENG_ACCENT=["North America","North America - Canada","North America - USA","North America - Southern USA","North America - Other","British Isles","British Isles - Received Pronunciation","British Isle - Ireland","British Isles - Scotland","British Isles - Other","South Africa","Australia / New Zealand","Australia","New Zealand","Other"],t.ENG_FLUENCY=["Native","Fluent","Conversational","Basic"],t.TEACHING_STYLE=["Kind & patient","Fun & gregarious","Scholarly & knowledgeable"],t.STUDENT_TYPE=["Adult","Child"],t.STUDENT_LVL=["Beginner","Intermeditate","Advanced"],t.SPECIALITIES=["Friendly conversation","Business English","Public speaking","Test prep (IELTS, TOEFL, etc.)","Grammar instruction, Accent coaching","Correcting speech","Discussing current events","Vocational lessons","Culture (i.e. manners, customs)","Teaching idioms and slang"]},53:function(e,t,a){e.exports={headerContent:"Default_headerContent__3c_AR",userButton:"Default_userButton__fph_C",registerButton:"Default_registerButton__2UbXV",userButtonContainer:"Default_userButtonContainer__85zRo",defaultBody:"Default_defaultBody__1ZuJT",introContainer:"Default_introContainer__U5vQA",welcomeText:"Default_welcomeText__JSskc",welcomeDescription:"Default_welcomeDescription__WsJCP",introContent:"Default_introContent__2U9ZG",introImg:"Default_introImg__34kCu",becomeTutor:"Default_becomeTutor__3Ev_x"}},65:function(e,t,a){e.exports={profile:"Profile_profile__19UaV",accountInfoContainer:"Profile_accountInfoContainer__1KEpp",accountInfo:"Profile_accountInfo__1IP5V",name:"Profile_name__2R_BL",collapse:"Profile_collapse__dQhU3",submitWrapper:"Profile_submitWrapper__18lTv",profileStatus:"Profile_profileStatus__9eVFK",uploadedCert:"Profile_uploadedCert__1yD_I",introTips:"Profile_introTips__3p6sY",introInstruct:"Profile_introInstruct__7aU6W"}},675:function(e,t){},684:function(e,t){},709:function(e,t,a){},711:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),l=a.n(c),o=a(30),s=a(96),i=a(4),u=a(196),m=a(332),d=a.n(m),p=new u.a,f=function(){p.remove("access_token")},E=Object(n.createContext)(null),v=function(e){var t=Object(n.useState)(null),a=Object(i.a)(t,2),c=a[0],l=a[1];Object(n.useEffect)((function(){var e=function(){var e=null,t=p.get("access_token");return t&&(e=d()(t)),e}();e&&l(e)}),[]);return r.a.createElement(E.Provider,Object.assign({value:{account:c,onSignIn:function(e){l(e)},onSignOut:function(){f(),localStorage.clear(),l(null)}}},e))},b=a(53),h=a.n(b),g=a(713),_=a(39),y=a(714),C=a(118),O=a.n(C),w=a(732),S=a(733),N=a(734),x=g.a.Footer;function j(){return r.a.createElement(x,{className:O.a.footer},r.a.createElement("div",{className:O.a.contactIconContainer},r.a.createElement(w.a,{className:O.a.contactIcon,onClick:function(){return window.open("https://github.com/huynguyend191")}}),r.a.createElement(S.a,{className:O.a.contactIcon,onClick:function(){return window.open("https://www.facebook.com/sneezingcat191")}}),r.a.createElement(N.a,{className:O.a.contactIcon,onClick:function(){return window.open("https://www.instagram.com/sneezingcat191/")}})),r.a.createElement("div",{className:O.a.contactInfoContainer},"Mirage 2020 - English Video Call Platform ",r.a.createElement("br",null),"Contact: huynguyend191@gmail.com"))}var I=a(335),T=a.n(I),k=a(5),D=a.n(k),P=a(6),R=a(719),M=a(720),A=a(729),B=a(722),L=a(42),Y=a.n(L),V=a(336),F=a.n(V),U=a(337),W=a.n(U),z=a(338),G=a.n(z).a.create({baseURL:"https://mirage-video-call.herokuapp.com/api",withCredentials:!0});function H(e){var t=Object(n.useState)(e.isStudent),a=Object(i.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(!1),s=Object(i.a)(o,2),u=s[0],m=s[1],d=Object(n.useState)(null),p=Object(i.a)(d,2),f=p[0],v=p[1],b=R.a.useForm(),h=Object(i.a)(b,1)[0],g=Object(n.useContext)(E).onSignIn;Object(n.useEffect)((function(){l(e.isStudent)}),[e.isStudent]);var y=function(){var e=Object(P.a)(D.a.mark((function e(t){var a,n,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),a=c?"/students":"/tutors",n={username:t.username,password:t.password,email:t.email,name:t.name},e.next=6,G.post(a+"/register",n);case 6:r=e.sent,m(!1),g(r.data.account),localStorage.setItem("remember",!0),window.location.reload(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),m(!1),v(e.t0.response.data.message);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),C=r.a.createElement("div",{className:Y.a.registerWelcomeContent},r.a.createElement("img",{className:Y.a.welcomeImg,draggable:!1,src:F.a,alt:""}),r.a.createElement("h3",null,"Experience new way of studying English"),r.a.createElement("h4",null,"Improve your English anywhere anytime"),r.a.createElement("h4",null,"Learn from interesting people around the world")),O=r.a.createElement("div",{className:Y.a.registerWelcomeContent},r.a.createElement("img",{className:Y.a.welcomeImg,draggable:!1,src:W.a,alt:""}),r.a.createElement("h3",null,"Tutoring with Mirage is fun & rewarding"),r.a.createElement("h4",null,"No experience necessary"),r.a.createElement("h4",null,"Share your knowledge with people and get paid"));return r.a.createElement(M.a,{visible:e.isVisible,footer:null,title:c?"Register as student":"Register as tutor",onCancel:function(){h.resetFields(),e.onClose()},width:"800px"},r.a.createElement("div",{className:Y.a.registerContent},r.a.createElement("div",{className:Y.a.registerWelcome},c?r.a.createElement("div",null,C):r.a.createElement("div",null,O)),r.a.createElement("div",{className:Y.a.formWrapper},f?r.a.createElement(A.a,{style:{marginBottom:"15px"},message:f,type:"error",showIcon:!0,banner:!0,closable:!0,afterClose:function(){return v(null)}}):null,r.a.createElement(R.a,Object.assign({name:"register",onFinish:y,scrollToFirstError:!0,className:Y.a.registerForm,form:h},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}}),r.a.createElement(R.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]},r.a.createElement(B.a,null)),r.a.createElement(R.a.Item,{name:"username",label:"Username",rules:[{required:!0,message:"Please input your username!",whitespace:!1}]},r.a.createElement(B.a,null)),r.a.createElement(R.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please input your password!"}],hasFeedback:!0},r.a.createElement(B.a.Password,null)),r.a.createElement(R.a.Item,{name:"confirm",label:"Confirm Password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject("The two passwords that you entered do not match!"):Promise.resolve()}}}]},r.a.createElement(B.a.Password,null)),r.a.createElement(R.a.Item,{name:"name",label:"Full name",rules:[{required:!0,message:"Please input your fullname!",whitespace:!0}]},r.a.createElement(B.a,null)),r.a.createElement(R.a.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},r.a.createElement(_.a,{type:"primary",htmlType:"submit",className:Y.a.registerButton,shape:"round",loading:u},"Register"),r.a.createElement("p",{className:Y.a.switchModeWrapper},"Or",r.a.createElement("span",{onClick:function(){l(!c)},className:Y.a.switchMode}," become a ",c?"tutor":"student"," instead")),r.a.createElement("p",{className:Y.a.switchModeWrapper},"Already have an account? ",r.a.createElement("span",{onClick:function(){e.onClose(),e.onSwitchSignIn()},className:Y.a.switchMode}," Sign in")))))))}var J=a(155),q=a(735),K=a(736),Q=a(156),Z=a.n(Q);function $(e){var t=e.isVisible,a=e.onClose,c=e.onSwitchRegister,l=e.onSwitchForgotPass,o=R.a.useForm(),s=Object(i.a)(o,1)[0],u=Object(n.useState)(!1),m=Object(i.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(null),v=Object(i.a)(f,2),b=v[0],h=v[1],g=Object(n.useContext)(E).onSignIn,y=function(){var e=Object(P.a)(D.a.mark((function e(t){var a,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),a={user:t.user,password:t.password,remember:t.remember},e.next=5,G.post("/accounts/sign-in",a);case 5:n=e.sent,p(!1),g(n.data.account),window.location.reload(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),p(!1),h(e.t0.response.data.message);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(M.a,{visible:t,footer:null,onCancel:function(){s.resetFields(),a()},title:"Sign in",width:"400px"},b?r.a.createElement(A.a,{style:{marginBottom:"15px"},message:b,type:"error",showIcon:!0,banner:!0,closable:!0,afterClose:function(){return h(null)}}):null,r.a.createElement(R.a,{name:"normal_sign_in",className:Z.a.signInForm,initialValues:{remember:!0},onFinish:y,form:s},r.a.createElement(R.a.Item,{name:"user",rules:[{required:!0,message:"Please input your username or email!"}]},r.a.createElement(B.a,{prefix:r.a.createElement(q.a,{className:"site-form-item-icon"}),placeholder:"Username or email"})),r.a.createElement(R.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}]},r.a.createElement(B.a,{prefix:r.a.createElement(K.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})),r.a.createElement(R.a.Item,null,r.a.createElement(R.a.Item,{name:"remember",valuePropName:"checked",noStyle:!0},r.a.createElement(J.a,null,"Remember me")),r.a.createElement("p",{onClick:function(){a(),l()},className:Z.a.signInForgot},"Forgot password?")),r.a.createElement(R.a.Item,null,r.a.createElement(_.a,{type:"primary",htmlType:"submit",className:Z.a.signInButton,shape:"round",loading:d},"Sign in"),"Don't have an account? ",r.a.createElement("span",{className:Z.a.registerNow,onClick:function(){a(),c(!0)}},"Register!"))))}var X=a(344),ee=a.n(X);function te(e){var t=e.isVisible,a=e.onClose,c=R.a.useForm(),l=Object(i.a)(c,1)[0],o=Object(n.useState)(!1),s=Object(i.a)(o,2),u=s[0],m=s[1],d=Object(n.useContext)(E).account,p=function(){var e=Object(P.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),e.next=4,G.post("/accounts/reset-password",{user:t.user});case 4:m(!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),m(!1),alert(e.t0.response.data.message);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),f=d?d.email:null;return r.a.createElement(M.a,{visible:t,footer:null,title:"Reset your password",width:"350px",onCancel:function(){l.resetFields(),a()}},r.a.createElement(R.a,{name:"forgot_password",form:l,onFinish:p,initialValues:{user:f}},r.a.createElement(R.a.Item,{name:"user",rules:[{required:!0,message:"Please input your username or email!"}]},r.a.createElement(B.a,{prefix:r.a.createElement(q.a,{className:"site-form-item-icon"}),placeholder:"Enter your username or email"})),r.a.createElement(R.a.Item,null,r.a.createElement(_.a,{type:"primary",htmlType:"submit",shape:"round",loading:u,className:ee.a.submitBtn},"Submit"))))}var ae=a(199),ne=a.n(ae),re=a(189),ce=a.n(re);function le(){return r.a.createElement("div",{className:ne.a.headerWrapper},r.a.createElement("img",{className:ne.a.headerIcon,src:ce.a,draggable:!1,alt:""}),r.a.createElement("h1",{className:ne.a.headerTitle},"MIRAGE"))}var oe=g.a.Header,se=g.a.Content;function ie(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(i.a)(l,2),s=o[0],u=o[1],m=Object(n.useState)(!1),d=Object(i.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!0),v=Object(i.a)(E,2),b=v[0],C=v[1],O=function(e){C(e),c(!0)};return r.a.createElement(g.a,null,r.a.createElement($,{isVisible:s,onClose:function(){return u(!1)},onSwitchRegister:O,onSwitchForgotPass:function(){return f(!0)}}),r.a.createElement(H,{isVisible:a,onClose:function(){c(!1)},isStudent:b,onSwitchSignIn:function(){return u(!0)}}),r.a.createElement(te,{isVisible:p,onClose:function(){return f(!1)}}),r.a.createElement(oe,null,r.a.createElement("div",{className:h.a.headerContent},r.a.createElement(le,null),r.a.createElement("div",{className:h.a.userButtonContainer},r.a.createElement(_.a,{className:h.a.userButton,type:"secondary",shape:"round",onClick:function(){return u(!0)}},"Sign in"),r.a.createElement(_.a,{className:h.a.userButton,type:"primary",shape:"round",onClick:function(){return O(!0)}},"Register")))),r.a.createElement(se,null,r.a.createElement("div",{className:h.a.defaultBody},r.a.createElement("div",{className:h.a.introContainer},r.a.createElement("img",{className:h.a.introImg,draggable:!1,src:T.a,alt:""}),r.a.createElement("div",{className:h.a.introContent},r.a.createElement("p",{className:h.a.welcomeText},"Welcome to Mirage!"),r.a.createElement("p",{className:h.a.welcomeDescription},"\u201cGo on, say something in English!\u201d"),r.a.createElement(_.a,{className:h.a.registerButton,type:"primary",shape:"round",onClick:function(){return O(!0)}},"STUDY NOW"),r.a.createElement(y.a,{style:{width:"300px"}},"OR"),r.a.createElement(_.a,{className:h.a.registerButton,type:"secondary",shape:"round",onClick:function(){return O(!1)}},"BECOME TUTOR"))))),r.a.createElement(j,null))}var ue=a(715),me=a(117),de=a(195),pe=a(248),fe=a.n(pe),Ee=a(754),ve=a(755),be=a(756),he=a(757),ge=a(758),_e=a(741),ye=a(759),Ce=a(249),Oe=a.n(Ce),we=Object.freeze({ADMIN:1,TUTOR:2,STUDENT:3}),Se=Object.freeze({ACTIVE:1,INACTIVE:0}),Ne=Object.freeze({ACCEPTED:1,PENDING:2,REJECTED:3}),xe="https://mirage-video-call.herokuapp.com/",je=Object.freeze({INIT:"init",REQUEST:"request",CALL:"call",END:"end",DISCONNECT:"disconnect",GET_ONLINE_TUTORS:"get_online_tutors",LEAVE:"leave",RECORD_STUDENT:"record_student",RECORD_TUTOR:"record_tutor",SAVE_VIDEOS:"save_videos",CREATE_CALL_HISTORY:"create_call_history",GET_ONLINE_STUDENTS:"get_online_students"}),Ie=Object.freeze({AVAILABLE:1,BUSY:0,OFFLINE:2}),Te=Object.freeze({COMPLETED:1,PENDING:2,CANCELED:3}),ke=Object.freeze({NORMAL:1,SILVER:2,GOLD:3,PLATIUM:4}),De=["Nudity","Harassment","Spam","Hate speech","Something else"],Pe=Object.freeze({RESOLVED:1,PENDING:2,CANCELLED:3}),Re=(Object.freeze({COUNTED:1,UNCOUNTED:0}),Object.freeze({COMPLETED:1,PENDING:2,CANCELED:3})),Me=Object.freeze({FAVORITE:1,RECOMMEND:2});function Ae(e){var t=e.isVisible,a=e.onForgot,c=e.onClose,l=R.a.useForm(),o=Object(i.a)(l,1)[0],s=Object(n.useState)(!1),u=Object(i.a)(s,2),m=u[0],d=u[1],p=Object(n.useContext)(E).account,f=function(){var e=Object(P.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!0),a={oldPassword:t.oldpassword,newPassword:t.password},e.next=5,G.post("/accounts/"+p.id+"/change-password",a);case 5:d(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),d(!1),alert(e.t0.response.data.message);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){o.resetFields(),c()};return r.a.createElement(M.a,{visible:t,footer:null,title:"Change your password",onCancel:v,width:"500px"},r.a.createElement(R.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:16}},{name:"change-password",onFinish:f,form:o}),r.a.createElement(R.a.Item,{name:"oldpassword",label:"Current password",rules:[{required:!0,message:"Please input your current password!"}]},r.a.createElement(B.a.Password,null)),r.a.createElement(R.a.Item,{name:"password",label:"New password",rules:[{required:!0,message:"Please input your new password!"}],hasFeedback:!0},r.a.createElement(B.a.Password,null)),r.a.createElement(R.a.Item,{name:"confirm",label:"Retype password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject("The two passwords that you entered do not match!"):Promise.resolve()}}}]},r.a.createElement(B.a.Password,null)),r.a.createElement(R.a.Item,{wrapperCol:{offset:8,span:16}},r.a.createElement(_.a,{type:"primary",htmlType:"submit",className:Oe.a.registerButton,loading:m},"Update password"),p.role===we.ADMIN?null:r.a.createElement("span",{className:Oe.a.forgotPass,onClick:function(){v(),a()}},"Forgot password?"))))}var Be=a(200),Le=a.n(Be);function Ye(e){var t=e.collapsed;return r.a.createElement("div",{className:Le.a.logoContainer},r.a.createElement("img",{src:ce.a,alt:"",className:Le.a.logo,draggable:!1}),t?null:r.a.createElement("p",{className:Le.a.logoText},"MIRAGE"))}var Ve=a(119),Fe=a.n(Ve),Ue=a(154),We=a(723),ze=a(190),Ge=a(394),He=a(724),Je=a(721),qe=a(737),Ke=a(738),Qe=a(52),Ze=a.n(Qe),$e=a(17),Xe=a.n($e),et=function(e){var t=(e/1e3).toFixed(0),a=Math.floor(t/60),n="";return a>59&&(a=(a-=60*(n=(n=Math.floor(a/60))>=10?n:"0"+n))>=10?a:"0"+a),t=(t=Math.floor(t%60))>=10?t:"0"+t,""!==n?n+":"+a+":"+t:a+":"+t},tt=Ue.a.Option,at=We.a.Panel;function nt(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(i.a)(l,2),s=o[0],u=o[1],m=Object(n.useState)({account:{email:null}}),d=Object(i.a)(m,2),p=d[0],f=d[1],v=Object(n.useContext)(E).account,b=Object(n.useState)(!1),h=Object(i.a)(b,2),g=h[0],y=h[1],C=Object(n.useState)([]),O=Object(i.a)(C,2),w=O[0],S=O[1],N=function(){var e=Object(P.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(!0),e.next=4,G.get("/students/"+v.student.id);case 4:t=e.sent,f(t.data.student),c(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),c(!1),alert(e.t0.response.data.message);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){N()}),[]);var x=p&&p.avatar?r.a.createElement(ue.a,{src:xe+p.avatar,size:100}):r.a.createElement(ue.a,{icon:r.a.createElement(q.a,null),size:100}),j=function(){var e=Object(P.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!0),e.next=4,G.put("/students/"+p.id,t);case 4:N(),u(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),u(!1),alert(e.t0.response.data.message);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),I={onRemove:function(e){S([])},beforeUpload:function(e){return("image/jpeg"===e.type||"image/png"===e.type)&&S([e]),!1},fileList:w},T=function(){var e=Object(P.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),(t=new FormData).append("avatar",w[0]),e.next=6,G("/students/avatar/"+p.account.username,{method:"POST",data:t});case 6:return e.next=8,N();case 8:window.location.reload(!1),y(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),y(!1),alert(e.t0.response.data.message);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(P.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.post("/accounts/resend-verify",{email:p.account.email});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert(e.t0.response.data.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(ze.a,{spinning:a},r.a.createElement("div",{className:Fe.a.profile},r.a.createElement("div",{className:Fe.a.accountInfoContainer},x,r.a.createElement("div",{className:Fe.a.accountInfo},r.a.createElement("p",{className:Fe.a.name},p.name),r.a.createElement("p",null,"Email: ",p.account.email),r.a.createElement("p",null,"Remaining time: ",et(p.remaining_time)),v.verification?r.a.createElement(Ge.a,{color:"success"},"Verified"):r.a.createElement("span",null,r.a.createElement(Ge.a,{color:"default"},"Unverified"),r.a.createElement(_.a,{type:"link",onClick:k},"Resend confirmation email")))),r.a.createElement("div",{className:Fe.a.collapse},p.name?r.a.createElement(R.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}}},{onFinish:j,initialValues:{name:p.name,phone:p.phone,birthdate:p.birthdate?Xe()(p.birthdate):void 0,address:p.address,student_type:p.student_type?p.student_type:void 0,student_lvl:p.student_lvl?p.student_lvl:void 0,accent:p.accent?p.accent:void 0,specialities:p.specialities?JSON.parse(p.specialities):void 0,teaching_styles:p.teaching_styles?JSON.parse(p.teaching_styles):void 0}}),r.a.createElement(We.a,{defaultActiveKey:["1","2"]},r.a.createElement(at,{header:"Basic info",key:"1"},r.a.createElement(R.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please enter your name"}]},r.a.createElement(B.a,{placeholder:"Your fullname",value:p.name})),r.a.createElement(R.a.Item,{name:"phone",label:"Phone"},r.a.createElement(B.a,{placeholder:"Your phone number (optional)"})),r.a.createElement(R.a.Item,{name:"birthdate",label:"Birthdate"},r.a.createElement(He.a,null)),r.a.createElement(R.a.Item,{name:"avatar",label:"Upload avatar"},r.a.createElement(Je.a,Object.assign({},I,{listType:"picture-card"}),r.a.createElement(_.a,{icon:r.a.createElement(qe.a,null)},"Change avatar"))),r.a.createElement(R.a.Item,{wrapperCol:{offset:5,span:16}},r.a.createElement(_.a,{disabled:w.length<=0,onClick:T,loading:g,style:{width:"159px"}},r.a.createElement(Ke.a,null)," Upload avatar"))),r.a.createElement(at,{header:"Study preferences",key:"2"},r.a.createElement(A.a,{style:{marginBottom:"15px"},message:"Complete your profile to help finding appropriate tutors easier",type:"info",showIcon:!0}),r.a.createElement(R.a.Item,{name:"student_type",label:"Type"},r.a.createElement(Ue.a,{placeholder:"What type of student are you?"},Ze.a.STUDENT_TYPE.map((function(e){return r.a.createElement(tt,{value:e,key:e},e)})))),r.a.createElement(R.a.Item,{name:"student_lvl",label:"Your level"},r.a.createElement(Ue.a,{placeholder:"Your English level"},Ze.a.STUDENT_LVL.map((function(e){return r.a.createElement(tt,{value:e,key:e},e)})))),r.a.createElement(R.a.Item,{name:"accent",label:"Favorite accent"},r.a.createElement(Ue.a,{placeholder:"What is your favorite English accent?"},Ze.a.ENG_ACCENT.map((function(e){return r.a.createElement(tt,{value:e,key:e},e)})))),r.a.createElement(R.a.Item,{name:"specialities",label:"Interests"},r.a.createElement(Ue.a,{mode:"multiple",placeholder:"What do you want to study?"},Ze.a.SPECIALITIES.map((function(e){return r.a.createElement(tt,{value:e,key:e},e)})))),r.a.createElement(R.a.Item,{name:"teaching_styles",label:"Teaching styles"},r.a.createElement(Ue.a,{mode:"multiple",placeholder:"Which styles of teaching do you prefer?"},Ze.a.TEACHING_STYLE.map((function(e){return r.a.createElement(tt,{value:e,key:e},e)})))))),r.a.createElement("div",{className:Fe.a.submitWrapper},r.a.createElement(_.a,{type:"primary",htmlType:"submit",loading:s},"Update profile"))):null)))}var rt=a(253),ct=a.n(rt),lt=a(740),ot=a(264),st=a(716),it=a(718),ut=a(254),mt=a.n(ut),dt=a(739);function pt(){var e=Object(n.useContext)(E).account,t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(!1),s=Object(i.a)(o,2),u=s[0],m=s[1],d=function(){var t=Object(P.a)(D.a.mark((function t(){var a;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m(!0),t.prev=1,t.next=4,G.get("/subscriptions/"+e.student.id);case 4:a=t.sent,l(a.data.subscriptions),m(!1),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),alert(t.t0.response.data.message),m(!1);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}(),p=function(){var e=Object(P.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,G.put("/subscriptions/"+t,{state:Te.CANCELED});case 4:d(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),alert(e.t0.response.data.message),m(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),f=[{title:"Date",dataIndex:"createdAt",render:function(e){return r.a.createElement("div",null,Xe()(e).format("MMMM Do YYYY, h:mm:ss a"))}},{title:"Tier",dataIndex:"tier",render:function(e){return e===ke.SILVER?r.a.createElement(Ge.a,{color:"#C0C0C0"},"Silver"):e===ke.GOLD?r.a.createElement(Ge.a,{color:"#DAA520"},"Gold"):e===ke.PLATIUM?r.a.createElement(Ge.a,{color:"processing"},"Platium"):r.a.createElement(Ge.a,null,"Normal")}},{title:"Duration",dataIndex:"duration",render:function(e){return r.a.createElement("div",null,e/6e4," mins")}},{title:"Price",dataIndex:"price",render:function(e){return r.a.createElement("div",null,e,"$")}},{title:"State",dataIndex:"state",render:function(e){return e===Te.COMPLETED?r.a.createElement(Ge.a,{color:"success"},"Completed"):e===Te.PENDING?r.a.createElement(Ge.a,{color:"blue"},"Pending"):r.a.createElement(Ge.a,{color:"error"},"Cancelled")}},{title:"Action",dataIndex:"state",render:function(e,t){return t.state===Te.PENDING?r.a.createElement(st.a,{title:"Do you want to cancel this request?",okText:"Yes",cancelText:"No",className:mt.a.cancelBtn,onConfirm:function(){return p(t.id)}},"Cancel"):r.a.createElement("div",null,"N/A")}}];return Object(n.useEffect)((function(){d()}),[]),r.a.createElement(ze.a,{spinning:u},r.a.createElement(_.a,{className:mt.a.reload,onClick:d,icon:r.a.createElement(dt.a,null)},"Reload"),r.a.createElement(it.a,{columns:f,dataSource:c,pagination:!1,rowKey:"id"}))}var ft=a(28),Et=a.n(ft),vt=a(140),bt=a(64),ht=a(730),gt=a(361),_t=a.n(gt),yt=a(362),Ct=a.n(yt),Ot=a(363),wt=a.n(Ot),St=a(364),Nt=a.n(St);function xt(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(i.a)(l,2),s=o[0],u=o[1],m=Object(n.useState)(null),d=Object(i.a)(m,2),p=d[0],f=d[1],v=Object(n.useState)(null),b=Object(i.a)(v,2),h=b[0],g=b[1],C=Object(n.useContext)(E).account,O=function(){var e=Object(P.a)(D.a.mark((function e(t,a){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.prev=1,e.next=4,G.post("/subscriptions",{duration:60*t*1e3,studentId:C.student.id,tier:a});case 4:c(!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),c(!1),alert(e.t0.response.data.message);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){(function(){var e=Object(P.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,G.get("/settings");case 4:e.sent.data.settings.forEach((function(e){"discount rate"===e.type&&f(JSON.parse(e.content)),"student price"===e.type&&g(Number(e.content))})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.response.data.message);case 11:u(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement("div",{className:Et.a.extendSub},r.a.createElement(ze.a,{spinning:s},p&&h?r.a.createElement(vt.a,{gutter:24},r.a.createElement(bt.a,{span:6},r.a.createElement(ht.a,null,r.a.createElement("div",{className:Et.a.extendSubContent},r.a.createElement("div",{className:Et.a.subTier},"Normal"),r.a.createElement("div",{className:Et.a.extendDuration},"60 minutes"),r.a.createElement(y.a,null),r.a.createElement("img",{className:Et.a.tierImage,src:_t.a,alt:"",draggable:"false"}),r.a.createElement("div",{className:Et.a.extendPrice},Number(60*h*p.NORMAL).toFixed(2),"$"),r.a.createElement(st.a,{placement:"top",title:"Do you want to create purchase request?",onConfirm:function(){return O(60,ke.NORMAL)},okText:"Yes",cancelText:"No"},r.a.createElement(_.a,{type:"primary",shape:"round",loading:a},"Purchase"))))),r.a.createElement(bt.a,{span:6},r.a.createElement(ht.a,null,r.a.createElement("div",{className:Et.a.extendSubContent},r.a.createElement("div",{className:Et.a.subTier},"Silver"),r.a.createElement("div",{className:Et.a.extendDuration},"120 minutes"),r.a.createElement(y.a,null),r.a.createElement("img",{className:Et.a.tierImage,src:Ct.a,alt:"",draggable:"false"}),r.a.createElement("div",{className:Et.a.extendPrice},Number(120*h*p.SILVER).toFixed(2),"$"," ",r.a.createElement("span",{className:Et.a.extendSave},"(Save ",100-100*p.SILVER,"%)")),r.a.createElement(st.a,{placement:"top",title:"Do you want to create purchase request?",onConfirm:function(){return O(120,ke.SILVER)},okText:"Yes",cancelText:"No"},r.a.createElement(_.a,{type:"primary",shape:"round",loading:a},"Purchase"))))),r.a.createElement(bt.a,{span:6},r.a.createElement(ht.a,null,r.a.createElement("div",{className:Et.a.extendSubContent},r.a.createElement("div",{className:Et.a.subTier},"Gold"),r.a.createElement("div",{className:Et.a.extendDuration},"480 minutes"),r.a.createElement(y.a,null),r.a.createElement("img",{className:Et.a.tierImage,src:wt.a,alt:"",draggable:"false"}),r.a.createElement("div",{className:Et.a.extendPrice},Number(480*h*p.GOLD).toFixed(2),"$"," ",r.a.createElement("span",{className:Et.a.extendSave},"(Save ",100-100*p.GOLD,"%)")),r.a.createElement(st.a,{placement:"top",title:"Do you want to create purchase request?",onConfirm:function(){return O(480,ke.GOLD)},okText:"Yes",cancelText:"No"},r.a.createElement(_.a,{type:"primary",shape:"round",loading:a},"Purchase"))))),r.a.createElement(bt.a,{span:6},r.a.createElement(ht.a,null,r.a.createElement("div",{className:Et.a.extendSubContent},r.a.createElement("div",{className:Et.a.subTier},"Platium"),r.a.createElement("div",{className:Et.a.extendDuration},"720 minutes"),r.a.createElement(y.a,null),r.a.createElement("img",{className:Et.a.tierImage,src:Nt.a,alt:"",draggable:"false"}),r.a.createElement("div",{className:Et.a.extendPrice},Number(720*h*p.PLATIUM).toFixed(2),"$"," ",r.a.createElement("span",{className:Et.a.extendSave},"(Save ",100-100*p.PLATIUM,"%)")),r.a.createElement(st.a,{placement:"top",title:"Do you want to create purchase request?",onConfirm:function(){return O(720,ke.PLATIUM)},okText:"Yes",cancelText:"No"},r.a.createElement(_.a,{type:"primary",shape:"round",loading:a},"Purchase")))))):null))}var jt=ot.a.TabPane;function It(){return r.a.createElement("div",{className:ct.a.subscriptions},r.a.createElement(ot.a,{defaultActiveKey:"extend",type:"card"},r.a.createElement(jt,{tab:r.a.createElement("span",null,r.a.createElement(lt.a,null),"Extend subscriptions"),key:"extend"},r.a.createElement(xt,null)),r.a.createElement(jt,{tab:r.a.createElement("span",null,r.a.createElement(_e.a,null),"Subscriptions history"),key:"history",className:ct.a.tabPaneHistory},r.a.createElement(pt,null))))}var Tt=a(366),kt=a.n(Tt),Dt=(new u.a).get("access_token"),Pt=kt()("".concat("https://mirage-video-call.herokuapp.com","?token=").concat(Dt)),Rt=a(55),Mt=a(68),At=a(135),Bt=a(127),Lt=a(136),Yt=a(115),Vt=a.n(Yt),Ft=function(){function e(){Object(Rt.a)(this,e),this.events={}}return Object(Mt.a)(e,[{key:"emit",value:function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return this.events[e]&&this.events[e].forEach((function(e){return e.apply(void 0,a)})),this}},{key:"on",value:function(e,t){return this.events[e]?this.events[e].push(t):this.events[e]=[t],this}},{key:"off",value:function(e,t){if(e&&Vt.a.isFunction(t)){var a=this.events[e],n=a.findIndex((function(e){return e===t}));a.splice(n,1)}else this.events[e]=[];return this}}]),e}(),Ut=function(e){function t(){return Object(Rt.a)(this,t),Object(At.a)(this,Object(Bt.a)(t).apply(this,arguments))}return Object(Lt.a)(t,e),Object(Mt.a)(t,[{key:"start",value:function(){var e=this;return navigator.mediaDevices.getUserMedia({video:{facingMode:"user",height:{min:360,ideal:720,max:1080}},audio:{echoCancellation:!1}}).then((function(t){e.stream=t,e.emit("stream",t)})).catch((function(e){e instanceof DOMException?alert("Cannot open webcam and/or microphone"):alert(e)})),this}},{key:"toggle",value:function(e,t){var a=arguments.length;return this.stream&&this.stream["get".concat(e,"Tracks")]().forEach((function(e){var n=2===a?t:!e.enabled;Vt.a.set(e,"enabled",n)})),this}},{key:"stop",value:function(){return this.stream&&this.stream.getTracks().forEach((function(e){return e.stop()})),this}}]),t}(Ft),Wt={iceServers:[{urls:["stun:stun.l.google.com:19302"]}]},zt=function(e){function t(e){var a;return Object(Rt.a)(this,t),(a=Object(At.a)(this,Object(Bt.a)(t).call(this))).pc=new RTCPeerConnection(Wt),a.pc.onicecandidate=function(e){return Pt.emit("call",{to:a.friendID,candidate:e.candidate})},a.pc.ontrack=function(e){return a.emit("peerStream",e.streams[0])},a.mediaDevice=new Ut,a.friendID=e,a}return Object(Lt.a)(t,e),Object(Mt.a)(t,[{key:"start",value:function(e,t){var a=this;return this.mediaDevice.on("stream",(function(t){t.getTracks().forEach((function(e){a.pc.addTrack(e,t)})),a.emit("localStream",t),e?Pt.emit("request",{to:a.friendID}):a.createOffer()})).start(t),this}},{key:"stop",value:function(e){return e&&Pt.emit("end",{to:this.friendID}),this.mediaDevice.stop(),this.pc&&this.pc.close(),this.pc=null,this.off(),this}},{key:"createOffer",value:function(){return this.pc.createOffer().then(this.getDescription.bind(this)).catch((function(e){return alert(e)})),this}},{key:"createAnswer",value:function(){return this.pc.createAnswer().then(this.getDescription.bind(this)).catch((function(e){return alert(e)})),this}},{key:"getDescription",value:function(e){return this.pc.setLocalDescription(e),Pt.emit("call",{to:this.friendID,sdp:e}),this}},{key:"setRemoteDescription",value:function(e){var t=new RTCSessionDescription(e);return this.pc.setRemoteDescription(t),this}},{key:"addIceCandidate",value:function(e){if(e){var t=new RTCIceCandidate(e);this.pc.addIceCandidate(t)}return this}}]),t}(Ft),Gt=a(192),Ht=a(742),Jt=a(743),qt=a(744),Kt=a(745),Qt=a(746),Zt=a(98),$t=a.n(Zt),Xt=a(157),ea=a.n(Xt);function ta(e){var t=e.peerSrc,a=e.localSrc,c=e.config,l=e.mediaDevice,o=e.endCall,s=e.callWindow,u=Object(n.useRef)(null),m=Object(n.useRef)(null),d=Object(n.useState)(c.video),p=Object(i.a)(d,2),f=p[0],E=p[1],v=Object(n.useState)(c.audio),b=Object(i.a)(v,2),h=b[0],g=b[1];Object(Gt.useBeforeunload)((function(e){e.preventDefault(),o(!0)})),Object(n.useEffect)((function(){u.current&&t&&(u.current.srcObject=t),m.current&&a&&(m.current.srcObject=a)}),[a,t]),Object(n.useEffect)((function(){l&&(l.toggle("Video",f),l.toggle("Audio",h))}));var y=function(e){"video"===e&&(E(!f),l.toggle("Video")),"audio"===e&&(g(!h),l.toggle("Audio"))};return s?r.a.createElement("div",{className:$t.a.callWindowWrapper},r.a.createElement("div",{className:$t.a.callWindow},r.a.createElement("div",{className:$t.a.videoScreenContainer},r.a.createElement("video",{className:$t.a.videoScreen,ref:m,autoPlay:!0,muted:!0}),t&&r.a.createElement("video",{className:$t.a.videoScreen,ref:u,autoPlay:!0})),t&&r.a.createElement("div",null,r.a.createElement(ea.a,{formatValue:function(e){return"".concat(e<10?"0".concat(e):e)},lastUnit:"h",className:$t.a.callTime},r.a.createElement(ea.a.Hours,null),":",r.a.createElement(ea.a.Minutes,null),":",r.a.createElement(ea.a.Seconds,null))),r.a.createElement("div",{className:$t.a.videoControl},r.a.createElement(_.a,{shape:"circle",type:f?"primary":"danger",icon:f?r.a.createElement(Ht.a,null):r.a.createElement(Jt.a,null),onClick:function(){return y("video")},size:"large"}),r.a.createElement(_.a,{shape:"circle",type:h?"primary":"danger",icon:h?r.a.createElement(qt.a,null):r.a.createElement(Kt.a,null),onClick:function(){return y("audio")},size:"large"}),r.a.createElement(_.a,{shape:"circle",type:"danger",onClick:function(){return o(!0)},icon:r.a.createElement(Qt.a,null),size:"large"})))):null}var aa=a(141),na=a.n(aa);function ra(e){var t=e.callModal,a=e.callFrom,n=e.startCall,c=e.rejectCall;Object(Gt.useBeforeunload)((function(e){c()}));var l=function(e){var t={audio:!0,video:e};return function(){return n(!1,a.username,t)}};return t?r.a.createElement("div",{className:na.a.callModalWrapper},r.a.createElement("div",{className:na.a.callModal},r.a.createElement("div",{className:na.a.caller},a.student&&a.student.avatar?r.a.createElement(ue.a,{src:xe+a.student.avatar,size:50}):r.a.createElement(ue.a,{icon:r.a.createElement(q.a,null),size:50}),a.student&&r.a.createElement("span",{className:na.a.callerTxt},"".concat(a.student.name," is calling..."))),r.a.createElement("div",{className:na.a.controlBtns},r.a.createElement(_.a,{shape:"round",type:"primary",icon:r.a.createElement(Ht.a,null),onClick:l(!0),size:"large"},"Video call"),r.a.createElement(_.a,{shape:"round",type:"primary",icon:r.a.createElement(qt.a,null),onClick:l(!1),size:"large"},"Audio call"),r.a.createElement(_.a,{shape:"round",type:"danger",onClick:c,icon:r.a.createElement(Qt.a,null),size:"large"},"Reject call")))):null}var ca=a(731),la=a(750),oa=a(751),sa=a(752),ia=a(99),ua=a.n(ia),ma=a(82),da=a.n(ma),pa=a(91),fa=a(725),Ea=a(747),va=a(748);function ba(e){var t=e.callWithVideo,a=e.openDetailModal,n=e.item,c=e.openReviewlModal,l=e.getPreferences,o=function(){var e=Object(P.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.delete("/preferences/"+n.preId);case 3:l(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0.response);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(ht.a,{actions:[r.a.createElement(pa.a,{title:"Video call"},r.a.createElement(Ht.a,{onClick:function(){return t(!0,n)}})),r.a.createElement(pa.a,{title:"Audio call"},r.a.createElement(qt.a,{onClick:function(){return t(!1,n)}})),r.a.createElement(pa.a,{title:"Profile"},r.a.createElement(q.a,{onClick:function(){return a(n)}}))]},r.a.createElement("div",{className:da.a.tutorCard},r.a.createElement("div",{className:da.a.tutorInfo},r.a.createElement("div",null,n.profile.avatar?r.a.createElement(ue.a,{src:xe+n.profile.avatar,size:80}):r.a.createElement(ue.a,{icon:r.a.createElement(q.a,null),size:80})),r.a.createElement("div",{className:da.a.tutorInfoDetail},r.a.createElement("div",{className:da.a.tutorName},n.profile.name,n.status===Ie.AVAILABLE?r.a.createElement(pa.a,{title:"Online"},r.a.createElement(Ea.a,{style:{color:"#52c41a",fontSize:"12px",marginLeft:"3px"}})):null,n.status===Ie.BUSY?r.a.createElement(pa.a,{title:"Busy"},r.a.createElement(va.a,{style:{color:"red",fontSize:"12px",marginLeft:"3px"}})):null,n.status===Ie.OFFLINE?r.a.createElement(pa.a,{title:"Offline"},r.a.createElement(va.a,{style:{color:"gray",fontSize:"12px",marginLeft:"3px"}})):null),r.a.createElement("div",null,n.profile.certificates&&JSON.parse(n.profile.certificates.length)>0?r.a.createElement(Ge.a,null,"Teaching certificates"):null),n.profile.review?r.a.createElement(pa.a,{placement:"bottomRight",title:"Click to show reviews"},r.a.createElement("div",{onClick:function(){return c(n)},className:da.a.reviewWrapper},r.a.createElement(fa.a,{disabled:!0,defaultValue:Number((Math.round(2*n.profile.review.avg)/2).toFixed(1)),allowHalf:!0}),r.a.createElement("span",{className:da.a.reviewCount},"/ ",n.profile.review.count," review(s)"))):r.a.createElement("p",{className:da.a.viewReviews,onClick:function(){return c(n)}},"View reviews"),n.isFav?r.a.createElement("div",{className:da.a.removeFav,onClick:function(){return o()}},"Remove"):null)),r.a.createElement("p",null,n.profile.introduction)))}var ha=a(100),ga=a.n(ha),_a=(a(110),a(36));function ya(e){var t=e.username,a=Object(n.useRef)(null),c=Object(n.useRef)(null),l={controls:!0,width:513,height:360,fluid:!1,sources:[{src:xe+"api/tutors/video/"+t,type:"video/webm"}],autoplay:!1};return Object(n.useEffect)((function(){return a.current=Object(_a.default)(c.current,l,(function(){var e="Using video.js "+_a.default.VERSION;_a.default.log(e)})),function(){a.current&&a.current.dispose()}}),[]),r.a.createElement("div",{"data-vjs-player":!0},r.a.createElement("video",{id:"myVideo",ref:function(e){return c.current=e},className:"video-js vjs-default-skin vjs-big-play-centered",playsInline:!0}))}var Ca=a(749),Oa=a(728);function wa(e){var t=e.selected,a=e.showDetailModal,n=e.setShowDetailModal;return r.a.createElement(M.a,{title:t?t.profile.name:null,visible:a,onCancel:function(){return n(!1)},footer:null,width:"600px",destroyOnClose:!0,bodyStyle:{height:"600px",overflow:"auto"}},r.a.createElement("div",null,r.a.createElement("div",null,t?r.a.createElement("div",null,r.a.createElement("div",{className:ga.a.detailWrapper},t.profile.video?r.a.createElement("div",{className:ga.a.videoWrapper},r.a.createElement(ya,{username:t.username})):null,t.profile.introduction),r.a.createElement("div",{className:ga.a.detailWrapper},r.a.createElement(Oa.a,{bordered:!0,size:"small",column:1,title:"Teaching preferences"},r.a.createElement(Oa.a.Item,{label:"Student level"},t.profile.student_lvl),r.a.createElement(Oa.a.Item,{label:"Student type"},t.profile.student_type),r.a.createElement(Oa.a.Item,{label:"Accent"},t.profile.accent),r.a.createElement(Oa.a.Item,{label:"Fluency"},t.profile.fluency),r.a.createElement(Oa.a.Item,{label:"Tutor styles"}," ",t.profile.teaching_styles?JSON.parse(t.profile.teaching_styles).map((function(e){return r.a.createElement(Ge.a,{key:e},e)})):null),r.a.createElement(Oa.a.Item,{label:"Specialities"},t.profile.specialities?JSON.parse(t.profile.specialities).map((function(e){return r.a.createElement(Ge.a,{key:e},e)})):null))),r.a.createElement("div",{className:ga.a.detailWrapper},r.a.createElement(Oa.a,{bordered:!0,size:"small",column:1,title:"CV"},r.a.createElement(Oa.a.Item,{label:"Interests"},t.profile.interests),r.a.createElement(Oa.a.Item,{label:"Education"},t.profile.education),r.a.createElement(Oa.a.Item,{label:"Experience"},t.profile.experience),r.a.createElement(Oa.a.Item,{label:"Profession"},t.profile.profession),r.a.createElement(Oa.a.Item,{label:"Reason"},t.profile.reason))),r.a.createElement("div",{className:ga.a.detailWrapper},r.a.createElement("p",{className:ga.a.detailTitle},"Certificates"),r.a.createElement("div",{className:ga.a.uploadedCert},t.profile.certificates?JSON.parse(t.profile.certificates).map((function(e,t){return r.a.createElement("a",{key:t,href:xe+e.path},r.a.createElement(Ca.a,null),e.originalname)})):null))):null)))}var Sa=a(78),Na=function(e){var t=0,a=0,n=0,r=0,c=0,l=0,o=e.length;return e.forEach((function(e){switch(e.rating){case 0:t++;break;case 1:a++;break;case 2:n++;break;case 3:r++;break;case 4:c++;break;case 5:l++}})),{rating0:t/o*100,rating1:a/o*100,rating2:n/o*100,rating3:r/o*100,rating4:c/o*100,rating5:l/o*100}},xa=a(37),ja=a.n(xa),Ia=a(391);function Ta(e){var t=e.reviews;return r.a.createElement("div",{className:ja.a.reviewSummary},r.a.createElement("div",{className:ja.a.reviewOverall},r.a.createElement("div",{className:ja.a.reviewAvg},Number(t.avg).toFixed(1)),r.a.createElement(fa.a,{disabled:!0,defaultValue:Number((Math.round(2*t.avg)/2).toFixed(1)),allowHalf:!0,style:{fontSize:"15px"}}),r.a.createElement("div",{className:ja.a.reviewNumber},r.a.createElement(q.a,{style:{marginRight:"3px"}}),t.count)),r.a.createElement("div",{className:ja.a.ratingCountList},r.a.createElement("div",{className:ja.a.ratingCount},r.a.createElement("span",{className:ja.a.rating},"5"),r.a.createElement(Ia.a,{showInfo:!1,percent:t.ratingCount.rating5})),r.a.createElement("div",{className:ja.a.ratingCount},r.a.createElement("span",{className:ja.a.rating},"4"),r.a.createElement(Ia.a,{showInfo:!1,percent:t.ratingCount.rating4})),r.a.createElement("div",{className:ja.a.ratingCount},r.a.createElement("span",{className:ja.a.rating},"3"),r.a.createElement(Ia.a,{showInfo:!1,percent:t.ratingCount.rating3})),r.a.createElement("div",{className:ja.a.ratingCount},r.a.createElement("span",{className:ja.a.rating},"2"),r.a.createElement(Ia.a,{showInfo:!1,percent:t.ratingCount.rating2})),r.a.createElement("div",{className:ja.a.ratingCount},r.a.createElement("span",{className:ja.a.rating},"1"),r.a.createElement(Ia.a,{showInfo:!1,percent:t.ratingCount.rating1})),r.a.createElement("div",{className:ja.a.ratingCount},r.a.createElement("span",{className:ja.a.rating},"0"),r.a.createElement(Ia.a,{showInfo:!1,percent:t.ratingCount.rating0}))))}var ka=a(717);function Da(e){var t=e.review,a=e.getTutorReview,c=Object(n.useContext)(E).account,l=function(){var e=Object(P.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.delete("/reviews/"+t);case 3:a(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.response.data.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),o=null;return(c.role===we.ADMIN||c.role===we.STUDENT&&c.student.id===t.studentId)&&(o=r.a.createElement(_.a,{type:"link",danger:!0,onClick:function(){return l(t.id)}},"Delete")),r.a.createElement(ka.a,{author:t.student.name,avatar:t.student.avatar?r.a.createElement(ue.a,{src:xe+t.student.avatar}):r.a.createElement(ue.a,{icon:r.a.createElement(q.a,null)}),content:r.a.createElement("p",null,t.comment),datetime:Xe()(t.createdAt).fromNow(),actions:[r.a.createElement(fa.a,{disabled:!0,defaultValue:t.rating,style:{fontSize:"12px"}}),o]})}function Pa(e){var t=e.selected,a=e.showReviewModal,c=e.setShowReviewModal,l=Object(n.useState)(null),o=Object(i.a)(l,2),s=o[0],u=o[1],m=function(){var e=Object(P.a)(D.a.mark((function e(){var a,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.get("/reviews/"+t.profile.id);case 3:a=e.sent,n=Na(a.data.reviews),u(Object(Sa.a)({},a.data,{ratingCount:n})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0.response.data.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){t&&m()}),[t]),r.a.createElement(M.a,{title:t?t.profile.name:null,visible:a,onCancel:function(){return c(!1)},footer:null,width:"600px",destroyOnClose:!0,bodyStyle:{maxHeight:"600px",overflow:"auto"}},s?r.a.createElement("div",null,r.a.createElement(Ta,{reviews:s}),r.a.createElement(ca.a,{itemLayout:"horizontal",dataSource:s.reviews,renderItem:function(e){return r.a.createElement(ca.a.Item,null,r.a.createElement(Da,{review:e,getTutorReview:m}))}})):null)}var Ra=ot.a.TabPane,Ma=B.a.Search;function Aa(e){var t=e.startCall,a=e.onlineTutors,c=e.setTutor,l=e.remainingTime,o=Object(n.useState)(!1),s=Object(i.a)(o,2),u=s[0],m=s[1],d=Object(n.useState)(null),p=Object(i.a)(d,2),f=p[0],v=p[1],b=Object(n.useState)(!1),h=Object(i.a)(b,2),g=h[0],_=h[1],y=Object(n.useState)([]),C=Object(i.a)(y,2),O=C[0],w=C[1],S=Object(n.useState)(""),N=Object(i.a)(S,2),x=N[0],j=N[1],I=Object(n.useState)([]),T=Object(i.a)(I,2),k=T[0],R=T[1],M=Object(n.useContext)(E).account,A=Object(n.useState)([]),B=Object(i.a)(A,2),L=B[0],Y=B[1],V=Object(n.useState)([]),F=Object(i.a)(V,2),U=F[0],W=F[1];Object(n.useEffect)((function(){var e=!1;w(function(t){if(""!==x){var a=[];return t.forEach((function(t){e=!1,t.profile.name.toLowerCase().includes(x)&&(e=!0),t.profile.specialities.toLowerCase().includes(x)&&(e=!0),t.profile.teaching_styles.toLowerCase().includes(x)&&(e=!0),t.profile.accent.toLowerCase().includes(x)&&(e=!0),t.profile.student_lvl.toLowerCase().includes(x)&&(e=!0),t.profile.student_type.toLowerCase().includes(x)&&(e=!0),t.profile.interests.toLowerCase().includes(x)&&(e=!0),t.profile.fluency.toLowerCase().includes(x)&&(e=!0),e&&a.push(t)})),a}return t}(a))}),[a,x]),Object(n.useEffect)((function(){z()}),[]),Object(n.useEffect)((function(){var e=[];k.forEach((function(t){if(t.type===Me.FAVORITE){var n={preId:t.id,profile:t.tutor,status:Ie.OFFLINE,username:t.tutor.account.username,isFav:!0};a.forEach((function(e){e.profile.id===t.tutorId&&(n.status=e.status)})),e.push(n)}})),Y(e)}),[a,k]),Object(n.useEffect)((function(){var e=[];k.forEach((function(t){if(t.type===Me.RECOMMEND){var n={profile:t.tutor,status:Ie.OFFLINE,username:t.tutor.account.username};a.forEach((function(e){e.profile.id===t.tutorId&&(n.status=e.status)})),e.push(n)}})),W(e)}),[a,k]);var z=function(){var e=Object(P.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.get("/preferences?studentId="+M.student.id);case 3:t=e.sent,R(t.data.preferences),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.response.data.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),H=function(e,a){if(a.status===Ie.AVAILABLE){c(a.profile);var n={audio:!0,video:e};t(!0,a.username,n)}else alert("This tutor is not available at the moment!")},J=function(e){v(e),m(!0)},q=function(e){v(e),_(!0)};return r.a.createElement("div",{className:ua.a.tutorList},r.a.createElement(wa,{selected:f,showDetailModal:u,setShowDetailModal:m}),r.a.createElement(Pa,{selected:f,showReviewModal:g,setShowReviewModal:_}),r.a.createElement("div",{className:ua.a.searchTool},r.a.createElement("div",null,r.a.createElement("span",{className:ua.a.remainingTimeTitle},"Remaining time: "),et(l)),r.a.createElement("div",{className:ua.a.searchBar},r.a.createElement(Ma,{placeholder:"Search name, interests, subjects, ... ",enterButton:!0,onSearch:function(e){j(e.toLowerCase())}}))),r.a.createElement(ot.a,{defaultActiveKey:"online",type:"card"},r.a.createElement(Ra,{tab:r.a.createElement("span",null,r.a.createElement(la.a,null),"Online"),key:"online",className:ua.a.tabPane},r.a.createElement(ca.a,{grid:{gutter:16,column:3},dataSource:O,renderItem:function(e){return r.a.createElement(ca.a.Item,null,r.a.createElement(ba,{item:e,callWithVideo:H,openDetailModal:J,openReviewlModal:q}))}})),r.a.createElement(Ra,{tab:r.a.createElement("span",null,r.a.createElement(oa.a,null),"Favorite"),key:"favorite",className:ua.a.tabPane},r.a.createElement(ca.a,{grid:{gutter:16,column:3},dataSource:L,renderItem:function(e){return r.a.createElement(ca.a.Item,null,r.a.createElement(ba,{item:e,callWithVideo:H,openDetailModal:J,openReviewlModal:q,getPreferences:z}))}})),r.a.createElement(Ra,{tab:r.a.createElement("span",null,r.a.createElement(sa.a,null),"Recommend"),key:"recommend",className:ua.a.tabPane},r.a.createElement(ca.a,{grid:{gutter:16,column:3},dataSource:U,renderItem:function(e){return r.a.createElement(ca.a.Item,null,r.a.createElement(ba,{item:e,callWithVideo:H,openDetailModal:J,openReviewlModal:q}))}}))))}var Ba=a(120),La=a.n(Ba),Ya=a(371),Va=a.n(Ya),Fa=a(753);function Ua(e){var t=e.showFeedback,a=e.setShowFeedBack,c=e.tutor,l=Object(n.useState)(!1),o=Object(i.a)(l,2),s=o[0],u=o[1],m=Object(n.useState)(!1),d=Object(i.a)(m,2),p=d[0],f=d[1],v=Object(n.useState)(!1),b=Object(i.a)(v,2),h=b[0],g=b[1],y=Object(n.useContext)(E).account,C=function(){var e=Object(P.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!0),a=Object(Sa.a)({},t,{studentId:y.student.id,tutorId:c.id}),e.next=5,G.post("/reviews/",a);case 5:u(!1),f(!0),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),u(!1),g(!1),alert(e.t0.response.data.message);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(M.a,{visible:t,destroyOnClose:!0,onCancel:function(){a(!1),f(!1),g(!1)},footer:!1,title:"Feedback about this tutor"},p?r.a.createElement(A.a,{message:"Review submitted",type:"success",showIcon:!0}):null,h?r.a.createElement(A.a,{message:"Fail to submit, please try again",type:"error",showIcon:!0}):null,r.a.createElement(R.a,Object.assign({},{labelCol:{span:4},wrapperCol:{span:16}},{onFinish:C}),r.a.createElement(R.a.Item,{name:"rating",label:"Rating"},r.a.createElement(fa.a,{allowClear:!0,defaultValue:0})),r.a.createElement(R.a.Item,{name:"comment",label:"Comment",rules:[{required:!0,message:"Please input your comment"}]},r.a.createElement(B.a.TextArea,{placeholder:"Share your experience"})),r.a.createElement(R.a.Item,{wrapperCol:{offset:4,span:16}},r.a.createElement(_.a,{type:"primary",htmlType:"submit",loading:s},"Submit"))))}function Wa(e){var t=e.account,a=e.remainingTime,c=e.getStudent,l=Object(n.useState)(!1),o=Object(i.a)(l,2),s=o[0],u=o[1],m=Object(n.useState)(!1),d=Object(i.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)({}),v=Object(i.a)(E,2),b=v[0],h=v[1],g=Object(n.useState)(null),y=Object(i.a)(g,2),C=y[0],O=y[1],w=Object(n.useState)(null),S=Object(i.a)(w,2),N=S[0],x=S[1],j=Object(n.useRef)({}),I=Object(n.useRef)(null),T=Object(n.useRef)(null),k=Object(n.useRef)(null),R=Object(n.useRef)(0),A=Object(n.useRef)(0),B=Object(n.useState)([]),L=Object(i.a)(B,2),Y=L[0],V=L[1],F=Object(n.useRef)(null),U=Object(n.useState)(!1),W=Object(i.a)(U,2),z=W[0],H=W[1],J=Object(n.useState)(!1),q=Object(i.a)(J,2),K=q[0],Q=q[1];Object(n.useEffect)((function(){return Pt.on(je.INIT,(function(){})).on(je.REQUEST,(function(e){var t=e.from;f(!0),h(t)})).on(je.CALL,(function(e){e.sdp?(j.current.setRemoteDescription(e.sdp),"offer"===e.sdp.type&&j.current.createAnswer(),t.role===we.TUTOR&&Pt.emit(je.SAVE_VIDEOS)):j.current.addIceCandidate(e.candidate),R.current=Date.now(),t.role===we.STUDENT&&setTimeout((function(){return X(!0)}),a)})).on(je.END,(function(){return X(!1)})).on(je.GET_ONLINE_TUTORS,(function(e){V(e.online)})).emit(je.INIT,{account:t}),function(){$(),Pt.emit(je.LEAVE),Pt.off(je.INIT).off(je.REQUEST).off(je.CALL).off(je.END).off(je.GET_ONLINE_TUTORS)}}),[t]),Object(n.useEffect)((function(){N&&t.role===we.TUTOR&&(T.current=new MediaRecorder(N,{mimeType:"video/webm; codecs=vp9"}),T.current.ondataavailable=function(e){e.data&&e.data.size>0&&Pt.emit(je.RECORD_STUDENT,e.data)},T.current.start(1e3))}),[N,t.role]),Object(n.useEffect)((function(){C&&t.role===we.TUTOR&&(k.current=new MediaRecorder(C,{mimeType:"video/webm; codecs=vp9"}),k.current.ondataavailable=function(e){e.data&&e.data.size>0&&Pt.emit(je.RECORD_TUTOR,e.data)},k.current.start(1e3))}),[C,t.role]);var Z=function(e,t,a){I.current=a,j.current=new zt(t).on("localStream",(function(t){e||f(!1),u(!0),O(t)})).on("peerStream",(function(e){return x(e)})).start(e,a)},$=function(){Pt.emit(je.END,{to:b.username}),f(!1)},X=function(){var e=Object(P.a)(D.a.mark((function e(a){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.role===we.TUTOR&&Pt.emit(je.CREATE_CALL_HISTORY,b.student),t.role===we.STUDENT&&(Pt.emit(je.CREATE_CALL_HISTORY,t.student),c()),A.current=Date.now(),R.current>0&&H(!0),Vt.a.isFunction(j.current.stop)&&j.current.stop(a),e.next=7,ee();case 7:j.current={},I.current=null,f(!1),u(!1),O(null),x(null);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(P.a)(D.a.mark((function e(a){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.role===we.STUDENT&&(T.current&&N&&T.current.stop(),k.current&&C&&k.current.stop());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=null,ae=null;b.student?te=b.student.name:F.current&&(te=F.current.name,ae=r.a.createElement("div",null,r.a.createElement(st.a,{title:"Add this tutor to your favorites?",okText:"Yes",cancelText:"No",onConfirm:function(){return ne()}},r.a.createElement(_.a,{shape:"round",type:"primary",icon:r.a.createElement(oa.a,null),size:"small"},"Favorite")),r.a.createElement(_.a,{shape:"round",icon:r.a.createElement(Fa.a,null),size:"small",onClick:function(){return Q(!0)}},"Feedback")));var ne=function(){var e=Object(P.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.post("/preferences",{studentId:t.student.id,tutorId:F.current.id,type:Me.FAVORITE});case 3:alert("Tutor is added to your favorites"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.response.data.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:La.a.videoCall},r.a.createElement(Ua,{tutor:F.current,showFeedback:K,setShowFeedBack:Q}),t.role===we.STUDENT&&!s&&r.a.createElement(Aa,{onlineTutors:Y,startCall:Z,setTutor:function(e){F.current=e},remainingTime:a}),!Vt.a.isEmpty(I.current)&&r.a.createElement(ta,{callWindow:s,localSrc:C,peerSrc:N,config:I.current,mediaDevice:j.current.mediaDevice,endCall:X}),r.a.createElement(ra,{callModal:p,startCall:Z,rejectCall:$,callFrom:b}),r.a.createElement(M.a,{visible:z,title:"Call ended",onCancel:function(){H(!1),R.current=0,A.current=0},destroyOnClose:!0,footer:!1,width:"600px"},r.a.createElement("div",{className:La.a.afterCall},r.a.createElement("img",{className:La.a.endCallImg,src:Va.a,draggable:!1,alt:""}),r.a.createElement("div",null,r.a.createElement("div",{className:La.a.endUser},"Call with ",te),r.a.createElement("div",{className:La.a.endDuration},"Duration: ",et(A.current-R.current)),r.a.createElement("div",{className:La.a.btnHolder},ae)))))}var za=a(101),Ga=a.n(za),Ha=a(372),Ja=a.n(Ha),qa=a(373),Ka=a.n(qa);function Qa(){var e=Object(n.useContext)(E).account,t=Object(n.useState)(null),a=Object(i.a)(t,2),c=a[0],l=a[1];Object(n.useEffect)((function(){o()}),[e]);var o=function(){var t=Object(P.a)(D.a.mark((function t(){var a;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,G.get("/students/"+e.student.id);case 3:a=t.sent,l(a.data.student),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),alert(t.t0.response.data.message);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),s=null;return s=e&&e.verification?c&&c.remaining_time>0?r.a.createElement(Wa,{account:e,remainingTime:c.remaining_time,getStudent:o}):r.a.createElement("div",{className:Ga.a.unverify},r.a.createElement("img",{className:Ga.a.timeoutImg,src:Ka.a,alt:"",draggable:"false"}),r.a.createElement("div",{className:Ga.a.unverifyTxt},r.a.createElement("p",null,"Sorry, you have run out of study time!"),r.a.createElement("p",null,"Please subscribe to continue."))):r.a.createElement("div",{className:Ga.a.unverify},r.a.createElement("img",{className:Ga.a.unverifyImg,src:Ja.a,alt:"",draggable:"false"}),r.a.createElement("div",{className:Ga.a.unverifyTxt},r.a.createElement("p",null,"You are almost ready!"),r.a.createElement("p",null,"Verify your account to start now!"))),r.a.createElement("div",{className:Ga.a.study},s)}var Za=a(202),$a=a.n(Za),Xa=a(374),en=a.n(Xa);function tn(e){var t=e.url,a=Object(n.useRef)(null),c=Object(n.useRef)(null),l={controls:!0,width:513,height:360,fluid:!1,sources:[{src:t,type:"video/webm"}],autoplay:!1};return Object(n.useEffect)((function(){return a.current=Object(_a.default)(c.current,l,(function(){var e="Using video.js "+_a.default.VERSION;_a.default.log(e)})),function(){a.current&&a.current.dispose()}}),[t]),r.a.createElement("div",{"data-vjs-player":!0},r.a.createElement("video",{id:"myVideo",ref:function(e){return c.current=e},className:"video-js vjs-default-skin vjs-big-play-centered",playsInline:!0}))}function an(e){var t=e.showCallDetail,a=e.selected,n=e.setShowCallDetail;return a?r.a.createElement(M.a,{title:"Tutor recorded video - "+Xe()(a.createdAt).format("MMMM Do YYYY, h:mm:ss a"),visible:t,onCancel:function(){return n(!1)},footer:null,width:"600px",destroyOnClose:!0,bodyStyle:{height:"450px",overflow:"auto"}},r.a.createElement("div",{className:en.a.recordHolder},r.a.createElement(tn,{url:"".concat(xe,"api/call-histories/").concat(a.id,"/tutorVideo")}))):null}var nn=Ue.a.Option;function rn(e){var t=e.showReport,a=e.selected,c=e.setShowReport,l=Object(n.useState)(!1),o=Object(i.a)(l,2),s=o[0],u=o[1],m=Object(n.useContext)(E).account,d=function(){var e=Object(P.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,n=m.role===we.STUDENT?a.tutor.account.id:a.student.account.id,u(!0),e.prev=3,e.next=6,G.post("/reports",{accountId:n,callId:a.id,description:t.description,reason:t.reason});case 6:u(!1),alert("Report submitted"),c(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),u(!1);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();return a?r.a.createElement(M.a,{title:"Report to Admin",visible:t,onCancel:function(){return c(!1)},footer:null,width:"600px",destroyOnClose:!0,bodyStyle:{height:"300px",overflow:"auto"}},r.a.createElement(R.a,Object.assign({},{labelCol:{span:6},wrapperCol:{span:16}},{onFinish:d}),r.a.createElement(R.a.Item,{name:"reason",label:"Reason",rules:[{required:!0,message:"Please select a reason"}]},r.a.createElement(Ue.a,{placeholder:"Select a reason"},De.map((function(e){return r.a.createElement(nn,{value:e,key:e},e)})))),r.a.createElement(R.a.Item,{name:"description",label:"Description"},r.a.createElement(B.a.TextArea,{autoSize:{minRows:4},placeholder:"Please specify your reasons or provide extra information (E.g timestamp)"})),r.a.createElement(R.a.Item,{wrapperCol:{offset:6,span:16}},r.a.createElement(_.a,{type:"primary",danger:!0,htmlType:"submit",loading:s},"Submit")))):null}var cn=B.a.Search;function ln(){var e=Object(n.useContext)(E).account,t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(!1),s=Object(i.a)(o,2),u=s[0],m=s[1],d=Object(n.useState)(!1),p=Object(i.a)(d,2),f=p[0],v=p[1],b=Object(n.useState)(null),h=Object(i.a)(b,2),g=h[0],y=h[1],C=Object(n.useState)(""),O=Object(i.a)(C,2),w=O[0],S=O[1],N=Object(n.useState)(!1),x=Object(i.a)(N,2),j=x[0],I=x[1],T=function(){var t=Object(P.a)(D.a.mark((function t(){var a;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m(!0),t.prev=1,t.next=4,G.get("/call-histories?studentId="+e.student.id+"&search="+w);case 4:a=t.sent,l(a.data.callHistories),m(!1),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),alert(t.t0.response.data.message),m(!1);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){T()}),[w]);var k=[{title:"Date",dataIndex:"createdAt",render:function(e){return r.a.createElement("div",null,Xe()(e).format("MMMM Do YYYY, h:mm:ss a"))}},{title:"Tutor",dataIndex:"tutor",render:function(e){return r.a.createElement("div",null,e.name)}},{title:"Username",dataIndex:"tutor",render:function(e){return r.a.createElement("div",null,e.account.username)}},{title:"Duration",dataIndex:"duration",render:function(e){return r.a.createElement("div",null,et(e))}},{title:"Action",render:function(e,t){return r.a.createElement("div",null,r.a.createElement(_.a,{className:$a.a.viewRecordBtn,onClick:function(){return function(e){y(e),v(!0)}(t)}},"View record"),r.a.createElement(_.a,{danger:!0,onClick:function(){return function(e){y(e),I(!0)}(t)}},"Report"))}}];return r.a.createElement("div",{className:$a.a.StudentCallHistories},r.a.createElement(an,{setShowCallDetail:v,showCallDetail:f,selected:g}),r.a.createElement(rn,{setShowReport:I,showReport:j,selected:g}),r.a.createElement("div",{className:$a.a.searchBar},r.a.createElement(cn,{placeholder:"Search for username, name",onSearch:function(e){S(e)},enterButton:!0})),r.a.createElement(ze.a,{spinning:u},r.a.createElement(it.a,{columns:k,dataSource:c,pagination:!1,rowKey:"id"})))}var on=g.a.Header,sn=g.a.Content,un=g.a.Sider;function mn(e){var t=Object(n.useContext)(E),a=t.account,c=t.onSignOut,l=Object(n.useState)(!1),u=Object(i.a)(l,2),m=u[0],d=u[1],p=Object(n.useState)(!1),f=Object(i.a)(p,2),v=f[0],b=f[1],h=e.location,_=a.student&&a.student.avatar?r.a.createElement(ue.a,{style:{margin:"10px"},src:xe+a.student.avatar}):r.a.createElement(ue.a,{style:{margin:"10px"},icon:r.a.createElement(q.a,null)}),y=r.a.createElement(me.a,null,r.a.createElement(me.a.Item,{onClick:function(){return d(!0)}},r.a.createElement(Ee.a,null),r.a.createElement("span",null,"Change password")),r.a.createElement(me.a.Item,{onClick:c},r.a.createElement(ve.a,null),r.a.createElement("span",null,"Sign out")));return r.a.createElement(g.a,{style:{minHeight:"100vh"}},r.a.createElement(te,{isVisible:v,onClose:function(){return b(!1)}}),r.a.createElement(Ae,{isVisible:m,onClose:function(){return d(!1)},onForgot:function(){return b(!0)}}),r.a.createElement(un,{collapsible:!0},r.a.createElement(Ye,{collapsed:!1}),r.a.createElement(me.a,{theme:"dark",defaultSelectedKeys:["/student/video-call"],mode:"inline",selectedKeys:[h.pathname]},r.a.createElement(me.a.Item,{key:"/student/study"},r.a.createElement(be.a,null),r.a.createElement(o.b,{to:"/student/study"},r.a.createElement("span",null,"Study"))),r.a.createElement(me.a.Item,{key:"/student"},r.a.createElement(he.a,null),r.a.createElement(o.b,{to:"/student"},r.a.createElement("span",null,"Profile"))),r.a.createElement(me.a.Item,{key:"/student/subscriptions"},r.a.createElement(ge.a,null),r.a.createElement(o.b,{to:"/student/subscriptions"},r.a.createElement("span",null,"Subscriptions"))),r.a.createElement(me.a.Item,{key:"/student/call-histories"},r.a.createElement(_e.a,null),r.a.createElement(o.b,{to:"/student/call-histories"},r.a.createElement("span",null,"Call histories"))))),r.a.createElement(g.a,null,r.a.createElement(on,null,r.a.createElement("div",{className:fe.a.userControl},"Hello, ",a.username,r.a.createElement(de.a,{overlay:y,placement:"bottomLeft"},r.a.createElement("div",null,_,r.a.createElement(ye.a,{className:fe.a.dropDownIcon}))))),r.a.createElement(sn,null,r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/student/subscriptions",component:It}),r.a.createElement(s.b,{path:"/student/study",component:Qa}),r.a.createElement(s.b,{path:"/student/call-histories",component:ln}),r.a.createElement(s.b,{path:"/student",component:nt,exact:!0}))),r.a.createElement(j,null)))}var dn=a(260),pn=a.n(dn),fn=a(764),En=a(25),vn=a(65),bn=a.n(vn),hn=a(760),gn=(a(712),a(246)),_n=a.n(gn),yn=(a(697),a(698),a(142)),Cn=a.n(yn),On={controls:!0,width:480,height:360,fluid:!1,plugins:{record:{audio:!0,video:!0,maxLength:120,debug:!0}}};function wn(e){var t=e.cancelRecord,a=e.existedVideo,c=e.refreshProfile,l=Object(n.useRef)(null),o=Object(n.useRef)(null),s=Object(n.useState)(null),u=Object(i.a)(s,2),m=u[0],d=u[1],p=Object(n.useState)(!1),f=Object(i.a)(p,2),v=f[0],b=f[1],h=Object(n.useContext)(E).account,g=function(){var e=Object(P.a)(D.a.mark((function e(){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(!0),(a=new FormData).append("video",m,"introVideo.webm"),e.next=6,G("/tutors/video/"+h.username,{data:a,method:"POST"});case 6:t(),c(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),alert(e.t0.response.data.message),b(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return l.current=Object(_a.default)(o.current,On,(function(){var e="Using video.js "+_a.default.VERSION+" with videojs-record "+_a.default.getPluginVersion("record")+" and recordrtc "+_n.a.version;_a.default.log(e)})),l.current.on("deviceReady",(function(){console.log("device is ready!")})),l.current.on("startRecord",(function(){console.log("started recording!")})),l.current.on("finishRecord",(function(){d(l.current.recordedData)})),l.current.on("error",(function(e,t){console.warn(t)})),l.current.on("deviceError",(function(){console.error("device error:",l.current.deviceErrorCode)})),function(){l.current&&l.current.dispose()}}),[]),r.a.createElement("div",null,r.a.createElement("div",{"data-vjs-player":!0},r.a.createElement("video",{id:"myVideoRecord",ref:function(e){return o.current=e},className:"video-js vjs-default-skin",playsInline:!0})),a?r.a.createElement("div",{className:Cn.a.btnWrapper},r.a.createElement(_.a,{className:Cn.a.videoBtn,onClick:g,loading:v},"Upload"),r.a.createElement(_.a,{className:Cn.a.videoBtn,type:"danger",onClick:t},"Cancel")):r.a.createElement("div",{className:Cn.a.btnWrapperNoCancel},r.a.createElement(_.a,{className:Cn.a.videoBtn,onClick:g,loading:v},"Upload")))}var Sn=a(378),Nn=a.n(Sn);function xn(e){var t=e.recordNew,a=Object(n.useRef)(null),c=Object(n.useRef)(null),l=Object(n.useContext)(E).account,o={controls:!0,width:480,height:360,fluid:!1,sources:[{src:xe+"api/tutors/video/"+l.username,type:"video/webm"}],autoplay:!1};return Object(n.useEffect)((function(){return a.current=Object(_a.default)(c.current,o,(function(){var e="Using video.js "+_a.default.VERSION;_a.default.log(e)})),function(){a.current&&a.current.dispose()}}),[]),r.a.createElement("div",null,r.a.createElement("div",{"data-vjs-player":!0},r.a.createElement("video",{id:"myVideo",ref:function(e){return c.current=e},className:"video-js vjs-default-skin vjs-big-play-centered",playsInline:!0})),r.a.createElement("div",{className:Nn.a.btnWrapper},r.a.createElement(_.a,{onClick:t},"Record new video")))}var jn=We.a.Panel,In=Ue.a.Option;function Tn(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(i.a)(l,2),s=o[0],u=o[1],m=Object(n.useState)({account:{email:null}}),d=Object(i.a)(m,2),p=d[0],f=d[1],v=Object(n.useContext)(E).account,b=Object(n.useState)([]),h=Object(i.a)(b,2),g=h[0],y=h[1],C=Object(n.useState)(!1),O=Object(i.a)(C,2),w=O[0],S=O[1],N=Object(n.useState)(!1),x=Object(i.a)(N,2),j=x[0],I=x[1],T=Object(n.useState)([]),k=Object(i.a)(T,2),M=k[0],L=k[1],Y=Object(n.useState)(!0),V=Object(i.a)(Y,2),F=V[0],U=V[1],W=function(){var e=Object(P.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(!0),e.next=4,G.get("/tutors/"+v.tutor.id);case 4:t=e.sent,f(t.data.tutor),t.data.tutor.video&&U(!1),c(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),c(!0),alert(e.t0.response.data.message);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){W()}),[]);var z,H=p&&p.avatar?r.a.createElement(ue.a,{src:xe+p.avatar,size:100}):r.a.createElement(ue.a,{icon:r.a.createElement(q.a,null),size:100}),J={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}}},K={wrapperCol:{offset:5,span:16}},Q=function(){var e=Object(P.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!0),e.next=4,G.put("/tutors/"+p.id,t);case 4:W(),u(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),u(!1),alert(e.t0.response.data.message);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Z={onRemove:function(e){var t=g.indexOf(e),a=g.slice();a.splice(t,1),y(a)},beforeUpload:function(e){return("application/pdf"===e.type||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===e.type)&&y([].concat(Object(En.a)(g),[e])),!1},fileList:g},$={onRemove:function(e){L([])},beforeUpload:function(e){return("image/jpeg"===e.type||"image/png"===e.type)&&L([e]),!1},fileList:M},X=function(){var e=Object(P.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(!0),t=new FormData,g.forEach((function(e){t.append("certificates",e)})),e.next=6,G("/tutors/certificates/"+p.account.username,{method:"POST",data:t});case 6:return e.next=8,W();case 8:S(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),alert(e.t0.response.data.message),S(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(P.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I(!0),(t=new FormData).append("avatar",M[0]),e.next=6,G("/tutors/avatar/"+p.account.username,{method:"POST",data:t});case 6:return e.next=8,W();case 8:window.location.reload(!1),I(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),I(!1),alert(e.t0.response.data.message);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(P.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.post("/accounts/resend-verify",{email:p.account.email});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert(e.t0.response.data.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return p.profileStatus===Ne.ACCEPTED?z=r.a.createElement(A.a,{message:"Your tutor profile is ready",type:"success",showIcon:!0}):p.profileStatus===Ne.PENDING?z=r.a.createElement(A.a,{message:"Your tutor profile is being reviewed by Admin",type:"info",showIcon:!0}):p.profileStatus===Ne.REJECTED&&(z=r.a.createElement(A.a,{message:"Your tutor profile is rejected, edit now",type:"error",showIcon:!0})),r.a.createElement(ze.a,{spinning:a},r.a.createElement("div",{className:bn.a.profile},r.a.createElement("div",{className:bn.a.accountInfoContainer},H,r.a.createElement("div",{className:bn.a.accountInfo},r.a.createElement("p",{className:bn.a.name},p.name),r.a.createElement("p",null,"Email: ",p.account.email),v.verification?r.a.createElement(Ge.a,{color:"success"},"Verified"):r.a.createElement("span",null,r.a.createElement(Ge.a,{color:"default"},"Unverified"),r.a.createElement(_.a,{type:"link",onClick:te},"Resend confirmation email")),r.a.createElement("div",{className:bn.a.profileStatus},z))),r.a.createElement("div",{className:bn.a.collapse},p.name?r.a.createElement(R.a,Object.assign({},J,{onFinish:Q,initialValues:{name:p.name,phone:p.phone,birthdate:p.birthdate?Xe()(p.birthdate):void 0,address:p.address,interests:p.interests,education:p.education,experience:p.experience,profession:p.profession,student_type:p.student_type?p.student_type:void 0,student_lvl:p.student_lvl?p.student_lvl:void 0,accent:p.accent?p.accent:void 0,fluency:p.fluency?p.fluency:void 0,reason:p.reason,specialities:p.specialities?JSON.parse(p.specialities):void 0,introduction:p.introduction,teaching_styles:p.teaching_styles?JSON.parse(p.teaching_styles):void 0}}),r.a.createElement(We.a,{defaultActiveKey:["1"]},r.a.createElement(jn,{header:"Basic info",key:"1"},r.a.createElement(R.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please enter your name"}]},r.a.createElement(B.a,{placeholder:"Your fullname",value:p.name})),r.a.createElement(R.a.Item,{name:"phone",label:"Phone"},r.a.createElement(B.a,{placeholder:"Your phone number (optional)"})),r.a.createElement(R.a.Item,{name:"birthdate",label:"Birthdate"},r.a.createElement(He.a,null)),r.a.createElement(R.a.Item,{name:"address",label:"Address"},r.a.createElement(B.a,{placeholder:"Where do you from? E.g Hanoi, Vietnam"})),r.a.createElement(R.a.Item,{name:"avatar",label:"Upload avatar"},r.a.createElement(Je.a,Object.assign({},$,{listType:"picture-card"}),r.a.createElement(_.a,{icon:r.a.createElement(qe.a,null)},"Change avatar"))),r.a.createElement(R.a.Item,K,r.a.createElement(_.a,{disabled:M.length<=0,onClick:ee,loading:j,style:{width:"159px"},icon:r.a.createElement(Ke.a,null)},"Upload avatar"))),r.a.createElement(jn,{header:"CV",key:"2"},r.a.createElement(R.a.Item,{name:"interests",label:"Interests"},r.a.createElement(B.a.TextArea,{placeholder:"Share with us everything you want such as interests, hobbies, life experiences"})),r.a.createElement(R.a.Item,{name:"education",label:"Education"},r.a.createElement(B.a.TextArea,{placeholder:"E.g Bachelor of Information Technology"})),r.a.createElement(R.a.Item,{name:"experience",label:"Experience"},r.a.createElement(B.a.TextArea,{placeholder:"Your working experience"})),r.a.createElement(R.a.Item,{name:"profession",label:"Profession"},r.a.createElement(B.a,{placeholder:"Your current or previous jobs"})),r.a.createElement(R.a.Item,{name:"reason",label:"Reason"},r.a.createElement(B.a.TextArea,{placeholder:"Why do you want to join Mirage?"}))),r.a.createElement(jn,{header:"Teaching preferences",key:"3"},r.a.createElement(R.a.Item,{name:"student_type",label:"Target"},r.a.createElement(Ue.a,{placeholder:"Who do you want to teach?"},Ze.a.STUDENT_TYPE.map((function(e){return r.a.createElement(In,{value:e,key:e},e)})))),r.a.createElement(R.a.Item,{name:"student_lvl",label:"Student level"},r.a.createElement(Ue.a,{placeholder:"You are good at teaching students who are"},Ze.a.STUDENT_LVL.map((function(e){return r.a.createElement(In,{value:e,key:e},e)})))),r.a.createElement(R.a.Item,{name:"accent",label:"Accent"},r.a.createElement(Ue.a,{placeholder:"Your English accent"},Ze.a.ENG_ACCENT.map((function(e){return r.a.createElement(In,{value:e,key:e},e)})))),r.a.createElement(R.a.Item,{name:"fluency",label:"Fluency"},r.a.createElement(Ue.a,{placeholder:"Your fluency"},Ze.a.ENG_FLUENCY.map((function(e){return r.a.createElement(In,{value:e,key:e},e)})))),r.a.createElement(R.a.Item,{name:"specialities",label:"Specialities"},r.a.createElement(Ue.a,{mode:"multiple",placeholder:"Select your specialities"},Ze.a.SPECIALITIES.map((function(e){return r.a.createElement(In,{value:e,key:e},e)})))),r.a.createElement(R.a.Item,{name:"teaching_styles",label:"Teaching styles"},r.a.createElement(Ue.a,{mode:"multiple",placeholder:"Your styles"},Ze.a.TEACHING_STYLE.map((function(e){return r.a.createElement(In,{value:e,key:e},e)}))))),r.a.createElement(jn,{header:"Teaching certificates (optional)",key:"4"},p.certificates&&JSON.parse(p.certificates).length>0?r.a.createElement(R.a.Item,Object.assign({},J,{label:"Uploaded file(s)"}),r.a.createElement("div",{className:bn.a.uploadedCert},p.certificates?JSON.parse(p.certificates).map((function(e,t){return r.a.createElement("a",{key:t,href:xe+e.path},r.a.createElement(Ca.a,null),e.originalname)})):null)):null,r.a.createElement(R.a.Item,{name:"files",label:"Upload certificate"},r.a.createElement(Je.a,Object.assign({},Z,{listType:"picture-card"}),r.a.createElement(_.a,{icon:r.a.createElement(hn.a,null)},"Select File"))),r.a.createElement(R.a.Item,K,r.a.createElement(_.a,{onClick:X,loading:w,style:{width:"132px"},icon:r.a.createElement(Ke.a,null)},"Upload")),r.a.createElement(A.a,{message:"Warning: All your previous upload will be removed when uploading new certificates",type:"warning",showIcon:!0})),r.a.createElement(jn,{header:"Introduce yourself",key:"5"},r.a.createElement(R.a.Item,{name:"introduction",label:"Introduction"},r.a.createElement(B.a.TextArea,{placeholder:"Introduce yourself"})),r.a.createElement("div",null,r.a.createElement("p",{className:bn.a.introInstruct},"Record a video to emphasize your teaching style, expertise and personality to help students overcome their nerve when speaking with foreigners. A friendly video will encourage the stundents to call you. A few helpful tips:"),r.a.createElement("div",{className:bn.a.introTips},r.a.createElement("p",null,"1. Make sure your camera/webcam is working properly"),r.a.createElement("p",null,"2. Find a clean and quiet room"),r.a.createElement("p",null,"3. Look at the camera and smile"),r.a.createElement("p",null,"4. Dress smart"),r.a.createElement("p",null,"5. Speak for 1-2 minutes"))),r.a.createElement(R.a.Item,{label:"Intro video"},F?r.a.createElement(wn,{cancelRecord:function(){return U(!1)},existedVideo:p.video,refreshProfile:W}):r.a.createElement(xn,{recordNew:function(){return U(!0)}})))),r.a.createElement("div",{className:bn.a.submitWrapper},r.a.createElement(_.a,{type:"primary",htmlType:"submit",loading:s},"Update profile"))):null)))}var kn=a(726),Dn=a(761),Pn=a(762),Rn=a(763),Mn=a(83),An=a.n(Mn),Bn=a(379),Ln=a.n(Bn),Yn=a(380),Vn=a.n(Yn),Fn=kn.a.Step;function Un(){var e,t=Object(n.useContext)(E).account,a=Object(n.useState)(!1),c=Object(i.a)(a,2),l=c[0],o=c[1],s=Object(n.useState)({}),u=Object(i.a)(s,2),m=u[0],d=u[1],p=function(){var e=Object(P.a)(D.a.mark((function e(){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(!0),e.next=4,G.get("/tutors/"+t.tutor.id);case 4:a=e.sent,t.tutor=a.data.tutor,d(a.data.tutor),o(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),o(!1),alert(e.t0.response.data.message);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){p()}),[]),m.profileStatus===Ne.ACCEPTED?e=r.a.createElement(Fn,{status:"finish",title:"Profile approval",icon:r.a.createElement(Dn.a,null)}):m.profileStatus===Ne.PENDING?e=r.a.createElement(Fn,{status:"wait",title:"Profile approval",icon:r.a.createElement(Dn.a,null)}):m.profileStatus===Ne.REJECTED&&(e=r.a.createElement(Fn,{status:"error",title:"Profile approval",icon:r.a.createElement(Dn.a,null)})),r.a.createElement("div",{className:An.a.teachingWrapper},r.a.createElement("div",{className:An.a.teaching},r.a.createElement(ze.a,{size:"large",spinning:l},r.a.createElement(kn.a,{style:{width:"100%"}},r.a.createElement(Fn,{status:m.account&&m.account.verification?"finish":"wait",title:"Verification",icon:r.a.createElement(Pn.a,null)}),e,r.a.createElement(Fn,{status:m.account&&m.account.verification&&m.profileStatus===Ne.ACCEPTED?"finish":"wait",title:"Ready",icon:r.a.createElement(Rn.a,null)})),m.account&&m.account.verification&&m.profileStatus===Ne.ACCEPTED?r.a.createElement("div",{className:An.a.wait},r.a.createElement("img",{className:An.a.waitImg,src:Ln.a,alt:"",draggable:"false"}),r.a.createElement("div",{className:An.a.waitTxt},r.a.createElement("p",null,"You are all set!"),r.a.createElement("p",null,"Be patient and stay here."),r.a.createElement("p",null,"Students will start calling you soon."))):r.a.createElement("div",{className:An.a.wait},r.a.createElement("img",{className:An.a.waitImg,src:Vn.a,alt:"",draggable:"false"}),r.a.createElement("div",{className:An.a.waitTxt},r.a.createElement("p",null,"You are almost ready!"),r.a.createElement("p",null,"Complete your profile to start now!"),r.a.createElement("p",null,"Students are waiting to see you."))),l?null:r.a.createElement(Wa,{account:t}))))}var Wn=a(203),zn=a.n(Wn),Gn=B.a.Search;function Hn(){var e=Object(n.useContext)(E).account,t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(!1),s=Object(i.a)(o,2),u=s[0],m=s[1],d=Object(n.useState)(!1),p=Object(i.a)(d,2),f=p[0],v=p[1],b=Object(n.useState)(null),h=Object(i.a)(b,2),g=h[0],y=h[1],C=Object(n.useState)(""),O=Object(i.a)(C,2),w=O[0],S=O[1],N=Object(n.useState)(!1),x=Object(i.a)(N,2),j=x[0],I=x[1],T=Object(n.useState)(0),k=Object(i.a)(T,2),R=k[0],M=k[1],A=function(){var t=Object(P.a)(D.a.mark((function t(){var a;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m(!0),t.prev=1,t.next=4,G.get("/call-histories?tutorId="+e.tutor.id+"&search="+w);case 4:a=t.sent,l(a.data.callHistories),m(!1),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),alert(t.t0.response.data.message),m(!1);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}(),B=function(){var t=Object(P.a)(D.a.mark((function t(){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return I(!0),t.prev=1,t.next=4,G.post("/payments",{tutorId:e.tutor.id});case 4:I(!1),A(),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),alert(t.t0.response.data.message),I(!1);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=function(){var e=Object(P.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.get("/settings");case 3:e.sent.data.settings.forEach((function(e){"tutor price"===e.type&&M(Number(e.content))})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.response.data.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();A(),e()}),[w]);var L=[{title:"Date",dataIndex:"createdAt",render:function(e){return r.a.createElement("div",null,Xe()(e).format("MMMM Do YYYY, h:mm:ss a"))}},{title:"Student",dataIndex:"student",render:function(e){return r.a.createElement("div",null,e.name)}},{title:"Username",dataIndex:"student",render:function(e){return r.a.createElement("div",null,e.account.username)}},{title:"Duration",dataIndex:"duration",render:function(e){return r.a.createElement("div",null,et(e))}},{title:"Payment state",dataIndex:"counted",render:function(e){return e?r.a.createElement(Ge.a,{color:"success"},"Counted"):r.a.createElement(Ge.a,null,"Uncounted")}},{title:"Action",render:function(e,t){return r.a.createElement("div",null,r.a.createElement(_.a,{danger:!0,onClick:function(){return function(e){y(e),v(!0)}(t)}},"Report"))}}];return r.a.createElement("div",{className:zn.a.TutorCallHistories},r.a.createElement(rn,{setShowReport:v,showReport:f,selected:g}),r.a.createElement(_.a,{type:"primary",onClick:B,loading:j},"Create payment request"),r.a.createElement("span",{className:zn.a.payRate},"*Payment rate: ",R,"$/min"),r.a.createElement("div",{className:zn.a.searchBar},r.a.createElement(Gn,{placeholder:"Search for username, name",onSearch:function(e){S(e)},enterButton:!0})),r.a.createElement(ze.a,{spinning:u},r.a.createElement(it.a,{columns:L,dataSource:c,pagination:!1,rowKey:"id"})))}var Jn=a(381),qn=a.n(Jn),Kn=a(382),Qn=a.n(Kn);function Zn(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(i.a)(l,2),s=o[0],u=o[1],m=Object(n.useContext)(E).account,d=[{title:"Date",dataIndex:"createdAt",render:function(e){return r.a.createElement("div",null,Xe()(e).format("MMMM Do YYYY, h:mm:ss a"))}},{title:"Price",dataIndex:"price",render:function(e){return r.a.createElement("div",null,e,"$")}},{title:"State",dataIndex:"state",render:function(e){return e===Re.COMPLETED?r.a.createElement(Ge.a,{color:"success"},"Completed"):e===Re.PENDING?r.a.createElement(Ge.a,{color:"blue"},"Pending"):r.a.createElement(Ge.a,{color:"error"},"Cancelled")}}],p=function(){var e=Object(P.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,G.get("/payments/"+m.tutor.id);case 4:t=e.sent,c(t.data.payments),u(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),alert(e.t0.response.data.message),u(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){p()}),[]),r.a.createElement("div",{className:Qn.a.payments},r.a.createElement(ze.a,{spinning:s},r.a.createElement(it.a,{rowKey:"id",columns:d,dataSource:a,pagination:!1})))}var $n=a(383),Xn=a.n($n);function er(){var e=Object(n.useContext)(E).account,t=Object(n.useState)(null),a=Object(i.a)(t,2),c=a[0],l=a[1];Object(n.useEffect)((function(){(function(){var t=Object(P.a)(D.a.mark((function t(){var a,n;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,G.get("/reviews/"+e.tutor.id);case 3:a=t.sent,n=Na(a.data.reviews),l(Object(Sa.a)({},a.data,{ratingCount:n})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),alert(t.t0.response.data.message);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}})()()}),[e.tutor.id]);var o=null;return c&&(o=r.a.createElement("div",{className:Xn.a.reviews},r.a.createElement(Ta,{reviews:c}),r.a.createElement(ca.a,{itemLayout:"horizontal",dataSource:c.reviews,renderItem:function(e){return r.a.createElement(ca.a.Item,null,r.a.createElement(Da,{review:e}))}}))),o}function tr(){return r.a.createElement("div",{className:qn.a.stats},r.a.createElement(Zn,null),r.a.createElement(er,null))}var ar=g.a.Header,nr=g.a.Content,rr=g.a.Sider;function cr(e){var t=Object(n.useContext)(E),a=t.account,c=t.onSignOut,l=Object(n.useState)(!1),u=Object(i.a)(l,2),m=u[0],d=u[1],p=Object(n.useState)(!1),f=Object(i.a)(p,2),v=f[0],b=f[1],h=e.location,_=a.tutor&&a.tutor.avatar?r.a.createElement(ue.a,{style:{margin:"10px"},src:xe+a.tutor.avatar}):r.a.createElement(ue.a,{style:{margin:"10px"},icon:r.a.createElement(q.a,null)}),y=r.a.createElement(me.a,null,r.a.createElement(me.a.Item,{onClick:function(){return d(!0)}},r.a.createElement(Ee.a,null),r.a.createElement("span",null,"Change password")),r.a.createElement(me.a.Item,{onClick:c},r.a.createElement(ve.a,null),r.a.createElement("span",null,"Sign out")));return r.a.createElement(g.a,{style:{minHeight:"100vh"}},r.a.createElement(te,{isVisible:v,onClose:function(){return b(!1)}}),r.a.createElement(Ae,{isVisible:m,onClose:function(){return d(!1)},onForgot:function(){return b(!0)}}),r.a.createElement(rr,{collapsible:!0},r.a.createElement(Ye,{collapsed:!1}),r.a.createElement(me.a,{theme:"dark",defaultSelectedKeys:["/tutor"],mode:"inline",selectedKeys:[h.pathname]},r.a.createElement(me.a.Item,{key:"/tutor"},r.a.createElement(he.a,null),r.a.createElement(o.b,{to:"/tutor"},r.a.createElement("span",null,"Profile"))),r.a.createElement(me.a.Item,{key:"/tutor/teaching"},r.a.createElement(be.a,null),r.a.createElement(o.b,{to:"/tutor/teaching"},r.a.createElement("span",null,"Teaching"))),r.a.createElement(me.a.Item,{key:"/tutor/call-histories"},r.a.createElement(_e.a,null),r.a.createElement(o.b,{to:"/tutor/call-histories"},r.a.createElement("span",null,"Call histories"))),r.a.createElement(me.a.Item,{key:"/tutor/stats"},r.a.createElement(fn.a,null),r.a.createElement(o.b,{to:"/tutor/stats"},r.a.createElement("span",null,"Stats"))))),r.a.createElement(g.a,null,r.a.createElement(ar,null,r.a.createElement("div",{className:pn.a.userControl},"Hello, ",a.username,r.a.createElement(de.a,{overlay:y,placement:"bottomLeft"},r.a.createElement("div",null,_,r.a.createElement(ye.a,{className:pn.a.dropDownIcon}))))),r.a.createElement(nr,null,r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/tutor/stats",component:tr}),r.a.createElement(s.b,{path:"/tutor/teaching",component:Un}),r.a.createElement(s.b,{path:"/tutor/call-histories",component:Hn}),r.a.createElement(s.b,{path:"/tutor",component:Tn,exact:!0}))),r.a.createElement(j,null)))}var lr=a(765),or=a(766),sr=a(767),ir=a(768),ur=a(769),mr=a(143),dr=a.n(mr),pr=a(384),fr=a.n(pr),Er=a(193);function vr(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),o=Object(i.a)(l,2),s=o[0],u=o[1];Object(n.useEffect)((function(){return Pt.on(je.GET_ONLINE_TUTORS,(function(e){c(e.online)})).on(je.GET_ONLINE_STUDENTS,(function(e){u(e.online)})),function(){Pt.off(je.GET_ONLINE_STUDENTS).off(je.GET_ONLINE_TUTORS)}}),[]);var m={datasets:[{data:[s.length,a.length],backgroundColor:["#FF6384","#36A2EB"],hoverBackgroundColor:["#FF6384","#36A2EB"]}],labels:["Students","Tutors"]};return r.a.createElement("div",{className:fr.a.onlineUsers},r.a.createElement("p",null,"Online users"),r.a.createElement(Er.b,{data:m}))}var br=a(204),hr=a.n(br),gr=a(261),_r=a.n(gr);function yr(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){(function(){var e=Object(P.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.get("/call-histories");case 3:t=e.sent,c(t.data.callHistories.slice(0,5)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.response.data.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var l=[{title:"Date",dataIndex:"createdAt",render:function(e){return r.a.createElement("div",null,Xe()(e).format("MMMM Do YYYY, h:mm:ss a"))}},{title:"Student",dataIndex:"student",render:function(e){return r.a.createElement("div",null,e.name)}},{title:"Tutor",dataIndex:"tutor",render:function(e){return r.a.createElement("div",null,e.name)}},{title:"Duration",dataIndex:"duration",render:function(e){return r.a.createElement("div",null,et(e))}}];return r.a.createElement("div",{className:_r.a.recentCalls},r.a.createElement("p",{className:_r.a.recentCallsTitle},"Recent calls"),r.a.createElement(it.a,{columns:l,dataSource:a,pagination:!1,rowKey:"id"}))}var Cr=a(386),Or=a.n(Cr);function wr(){var e=Object(n.useState)({earn:0,pay:0}),t=Object(i.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){(function(){var e=Object(P.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.get("/stats/money");case 3:t=e.sent,c(t.data.stats),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.response.data.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var l={datasets:[{data:[a.earn,a.pay],backgroundColor:["#FF6384","#36A2EB"],label:"Profit: ".concat((a.earn-a.pay).toFixed(2),"$")}],labels:["Earn","Pay"]};return r.a.createElement("div",{className:Or.a.moneyStats},r.a.createElement("p",null,"Money"),r.a.createElement(Er.a,{data:l}))}var Sr=a(262),Nr=a.n(Sr);function xr(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){(function(){var e=Object(P.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.get("/stats/top-paid");case 3:t=e.sent,c(t.data.topPaid),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.response.data.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var l=[{title:"Rank",key:"index",render:function(e,t,a){return a+1}},{title:"Name",dataIndex:"student",render:function(e){return r.a.createElement("div",null,e.name)}},{title:"Amount",dataIndex:"total",render:function(e){return r.a.createElement("div",null,e.toFixed(2),"$")}}];return r.a.createElement("div",{className:Nr.a.topPaid},r.a.createElement("p",{className:Nr.a.topPaidTitle},"Top paid student"),r.a.createElement(it.a,{columns:l,dataSource:a,pagination:!1,rowKey:"studentId"}))}function jr(){return r.a.createElement("div",{className:hr.a.dashboard},r.a.createElement("div",{className:hr.a.dashboardRow},r.a.createElement(vr,null),r.a.createElement(yr,null)),r.a.createElement("div",{className:hr.a.dashboardRow},r.a.createElement(wr,null),r.a.createElement(xr,null)))}var Ir=a(194),Tr=a(205),kr=a.n(Tr),Dr=a(102),Pr=a.n(Dr);function Rr(e){var t=e.subscriptions,a=[{title:"Date",dataIndex:"createdAt",render:function(e){return r.a.createElement("div",null,Xe()(e).format("MMMM Do YYYY, h:mm:ss a"))}},{title:"Tier",dataIndex:"tier",render:function(e){return e===ke.SILVER?r.a.createElement(Ge.a,{color:"#C0C0C0"},"Silver"):e===ke.GOLD?r.a.createElement(Ge.a,{color:"#DAA520"},"Gold"):e===ke.PLATIUM?r.a.createElement(Ge.a,{color:"processing"},"Platium"):r.a.createElement(Ge.a,null,"Normal")}},{title:"Duration",dataIndex:"duration",render:function(e){return r.a.createElement("div",null,e/6e4," mins")}},{title:"Price",dataIndex:"price",render:function(e){return r.a.createElement("div",null,e,"$")}},{title:"State",dataIndex:"state",render:function(e){return e===Te.COMPLETED?r.a.createElement(Ge.a,{color:"success"},"Completed"):e===Te.PENDING?r.a.createElement(Ge.a,{color:"blue"},"Pending"):r.a.createElement(Ge.a,{color:"error"},"Cancelled")}}];return r.a.createElement("div",null,r.a.createElement(it.a,{columns:a,dataSource:t,pagination:!1,rowKey:"id"}))}var Mr=a(263),Ar=a.n(Mr);function Br(e){var t=e.showCallDetail,a=e.selected,n=e.setShowCallDetail;return a?r.a.createElement(M.a,{title:"Call - "+Xe()(a.createdAt).format("MMMM Do YYYY, h:mm:ss a"),visible:t,onCancel:function(){return n(!1)},footer:null,width:"600px",destroyOnClose:!0,bodyStyle:{height:"600px",overflow:"auto"}},r.a.createElement("div",null,r.a.createElement("div",{className:Ar.a.recordTitle},"Student record:"),r.a.createElement(tn,{url:"".concat(xe,"api/call-histories/").concat(a.id,"/studentVideo")}),r.a.createElement("div",{className:Ar.a.recordTitle},"Tutor record:"),r.a.createElement(tn,{url:"".concat(xe,"api/call-histories/").concat(a.id,"/tutorVideo")}))):null}function Lr(e){var t=e.callHistories,a=Object(n.useState)(!1),c=Object(i.a)(a,2),l=c[0],o=c[1],s=Object(n.useState)(null),u=Object(i.a)(s,2),m=u[0],d=u[1],p=[{title:"Date",dataIndex:"createdAt",render:function(e){return r.a.createElement("div",null,Xe()(e).format("MMMM Do YYYY, h:mm:ss a"))}},{title:"Student",dataIndex:"student",render:function(e){return r.a.createElement("div",null,e.name)}},{title:"Tutor",dataIndex:"tutor",render:function(e){return r.a.createElement("div",null,e.name)}},{title:"Duration",dataIndex:"duration",render:function(e){return r.a.createElement("div",null,et(e))}}];return r.a.createElement("div",null,r.a.createElement(Br,{setShowCallDetail:o,showCallDetail:l,selected:m}),r.a.createElement(it.a,{columns:p,dataSource:t,pagination:!1,onRow:function(e,t){return{onClick:function(t){d(e),o(!0)}}},rowKey:"id"}))}function Yr(e){var t=e.reports,a=[{title:"Date",dataIndex:"createdAt",render:function(e){return r.a.createElement("div",null,Xe()(e).format("MMMM Do YYYY, h:mm:ss a"))}},{title:"Reason",dataIndex:"reason"},{title:"State",dataIndex:"state",render:function(e){return e===Pe.RESOLVED?r.a.createElement(Ge.a,{color:"success"},"Resolved"):e===Pe.PENDING?r.a.createElement(Ge.a,{color:"blue"},"Pending"):r.a.createElement(Ge.a,{color:"error"},"Cancelled")}}];return r.a.createElement("div",null,r.a.createElement(it.a,{rowKey:"id",columns:a,dataSource:t,pagination:!1}))}var Vr=ot.a.TabPane;function Fr(e){var t=e.selected,a=e.getStudentsData,c=e.setShowDetailModal,l=e.showDetailModal,o=Object(n.useState)(!1),s=Object(i.a)(o,2),u=s[0],m=s[1],d=Object(n.useState)(null),p=Object(i.a)(d,2),f=p[0],E=p[1],v=Object(n.useState)(!1),b=Object(i.a)(v,2),h=b[0],g=b[1],y=function(){var e=Object(P.a)(D.a.mark((function e(n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),e.next=4,G.put("/accounts/"+t.accountId,{state:n});case 4:return e.next=6,a();case 6:g(!1),c(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),g(!1),alert(e.t0.response.data.message);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){t&&function(){var e=Object(P.a)(D.a.mark((function e(){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),e.next=4,G.get("/students/"+t.id);case 4:a=e.sent,E(a.data.student),m(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),m(!1);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}()()}),[t]);var C=f?r.a.createElement(ot.a,{defaultActiveKey:"profile",type:"card"},r.a.createElement(Vr,{tab:"Profile",key:"profile"},r.a.createElement("div",{className:Pr.a.detail},r.a.createElement("div",{className:Pr.a.detailBasic},f.avatar?r.a.createElement(ue.a,{src:xe+f.avatar,size:100}):r.a.createElement(ue.a,{icon:r.a.createElement(q.a,null),size:100}),r.a.createElement("div",{className:Pr.a.detailBasicInfo},r.a.createElement(Oa.a,{size:"small",column:1,title:f.name,bordered:!0},r.a.createElement(Oa.a.Item,{label:"Username"},t.username),r.a.createElement(Oa.a.Item,{label:"Email"},t.email),r.a.createElement(Oa.a.Item,{label:"Birthdate"},f.birthdate?Xe()(f.birthdate).format("YYYY-MM-DD"):null),r.a.createElement(Oa.a.Item,{label:"Remaining time"},et(f.remaining_time)),r.a.createElement(Oa.a.Item,{label:"Status"},t.verification?r.a.createElement(Ge.a,{color:"success"},"Verified"):r.a.createElement(Ge.a,{color:"default"},"Unverified"),t.state?r.a.createElement(Ge.a,{color:"success"},"Active"):r.a.createElement(Ge.a,{color:"error"},"Inactive"))))),r.a.createElement("div",{className:Pr.a.banBtnHolder},t.state?r.a.createElement(_.a,{loading:h,className:Pr.a.changeStateBtn,type:"primary",danger:!0,onClick:function(){return y(Se.INACTIVE)}},"Ban"):r.a.createElement(_.a,{loading:h,className:Pr.a.changeStateBtn,type:"primary",onClick:function(){return y(Se.ACTIVE)}},"Unban")),r.a.createElement("div",{className:Pr.a.detailAdditional},r.a.createElement(Oa.a,{bordered:!0,size:"small",column:1},r.a.createElement(Oa.a.Item,{label:"Phone"},f.phone),r.a.createElement(Oa.a.Item,{label:"Birthdate"},f.birthdate?Xe()(f.birthdate).format("YYYY-MM-DD"):null),r.a.createElement(Oa.a.Item,{label:"Student level"},f.student_lvl),r.a.createElement(Oa.a.Item,{label:"Student type"},f.student_type),r.a.createElement(Oa.a.Item,{label:"Favorite accent"},f.accent),r.a.createElement(Oa.a.Item,{label:"Favorite tutor styles"}," ",f.teaching_styles?JSON.parse(f.teaching_styles).map((function(e){return r.a.createElement(Ge.a,{key:e},e)})):null),r.a.createElement(Oa.a.Item,{label:"Interests"},f.specialities?JSON.parse(f.specialities).map((function(e){return r.a.createElement(Ge.a,{key:e},e)})):null))))),r.a.createElement(Vr,{tab:"History",key:"history"},r.a.createElement(Lr,{callHistories:f.call_histories})),r.a.createElement(Vr,{tab:"Report",key:"report"},r.a.createElement(Yr,{reports:f.account.reports})),r.a.createElement(Vr,{tab:"Subscription",key:"subscription"},r.a.createElement(Rr,{subscriptions:f.subscriptions}))):null;return r.a.createElement(M.a,{title:t?t.name:null,visible:l,onCancel:function(){return c(!1)},footer:null,width:"600px",destroyOnClose:!0,bodyStyle:{height:"400px",overflow:"auto"}},r.a.createElement(ze.a,{spinning:u},C))}var Ur=B.a.Search;function Wr(){var e=Object(n.useState)(10),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),o=Object(i.a)(l,2),s=o[0],u=o[1],m=Object(n.useState)(1),d=Object(i.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(""),v=Object(i.a)(E,2),b=v[0],h=v[1],g=Object(n.useState)(0),_=Object(i.a)(g,2),y=_[0],C=_[1],O=Object(n.useState)(!1),w=Object(i.a)(O,2),S=w[0],N=w[1],x=Object(n.useState)(!1),j=Object(i.a)(x,2),I=j[0],T=j[1],k=Object(n.useState)(null),R=Object(i.a)(k,2),M=R[0],A=R[1],B=function(){var e=Object(P.a)(D.a.mark((function e(){var t,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N(!0),e.next=4,G.get("/students?page=".concat(p,"&size=").concat(a,"&search=")+b);case 4:t=e.sent,n=[],t.data.students.forEach((function(e){n.push({key:e.id,id:e.id,name:e.name,username:e.account.username,email:e.account.email,state:e.account.state,verification:e.account.verification,accountId:e.account.id})})),C(t.data.totalResults),u(n),N(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),N(!1),alert(e.t0.response.data.message);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){B()}),[p,a,b]);var L=[{title:"Name",dataIndex:"name"},{title:"Username",dataIndex:"username"},{title:"Email",dataIndex:"email"},{title:"State",dataIndex:"state",render:function(e){return e?r.a.createElement(Ge.a,{color:"success"},"Active"):r.a.createElement(Ge.a,{color:"error"},"Inactive")}},{title:"Verification",dataIndex:"verification",render:function(e){return e?r.a.createElement(Ge.a,{color:"success"},"Verified"):r.a.createElement(Ge.a,{color:"default"},"Unverified")}}];return r.a.createElement("div",{className:kr.a.studentsLayout},r.a.createElement(Fr,{setShowDetailModal:T,showDetailModal:I,getStudentsData:B,selected:M}),r.a.createElement("div",{className:kr.a.searchBar},r.a.createElement(Ur,{placeholder:"Search for username, name or email",onSearch:function(e){h(e)},enterButton:!0})),r.a.createElement(ze.a,{spinning:S},r.a.createElement(it.a,{columns:L,dataSource:s,pagination:!1,onRow:function(e,t){return{onClick:function(t){A(e),T(!0)}}}})),r.a.createElement("div",{className:kr.a.paginationWrapper},r.a.createElement(Ir.a,{current:p,defaultCurrent:p,total:y,pageSize:a,showSizeChanger:!0,showTotal:function(){return"Total ".concat(y," results")},onShowSizeChange:function(e,t){c(t),f(Math.ceil(y/t))},onChange:function(e,t){f(e)}})))}var zr=a(206),Gr=a.n(zr),Hr=a(27),Jr=a.n(Hr);function qr(e){var t=e.payments,a=[{title:"Date",dataIndex:"createdAt",render:function(e){return r.a.createElement("div",null,Xe()(e).format("MMMM Do YYYY, h:mm:ss a"))}},{title:"Price",dataIndex:"price"},{title:"State",dataIndex:"state",render:function(e){return e===Re.COMPLETED?r.a.createElement(Ge.a,{color:"success"},"Completed"):e===Re.PENDING?r.a.createElement(Ge.a,{color:"blue"},"Pending"):r.a.createElement(Ge.a,{color:"error"},"Cancelled")}}];return r.a.createElement("div",null,r.a.createElement(it.a,{rowKey:"id",columns:a,dataSource:t,pagination:!1}))}function Kr(e){var t=e.selected,a=Object(n.useState)(null),c=Object(i.a)(a,2),l=c[0],o=c[1];Object(n.useEffect)((function(){t&&function(){var e=Object(P.a)(D.a.mark((function e(){var a,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.get("/reviews/"+t.id);case 3:a=e.sent,n=Na(a.data.reviews),o(Object(Sa.a)({},a.data,{ratingCount:n})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0.response.data.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()}),[t]);var s=function(){var e=Object(P.a)(D.a.mark((function e(){var a,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.get("/reviews/"+t.id);case 3:a=e.sent,n=Na(a.data.reviews),o(Object(Sa.a)({},a.data,{ratingCount:n})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0.response.data.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),u=null;return l&&(u=r.a.createElement("div",null,r.a.createElement(Ta,{reviews:l}),r.a.createElement(ca.a,{itemLayout:"horizontal",dataSource:l.reviews,renderItem:function(e){return r.a.createElement(ca.a.Item,null,r.a.createElement(Da,{review:e,getTutorReview:s}))}}))),u}var Qr=ot.a.TabPane;function Zr(e){var t=e.selected,a=e.setShowDetailModal,c=e.getTutorsData,l=e.showDetailModal,o=Object(n.useState)(!1),s=Object(i.a)(o,2),u=s[0],m=s[1],d=Object(n.useState)(null),p=Object(i.a)(d,2),f=p[0],E=p[1],v=Object(n.useState)(!1),b=Object(i.a)(v,2),h=b[0],g=b[1],y=Object(n.useState)(!1),C=Object(i.a)(y,2),O=C[0],w=C[1],S=function(){var e=Object(P.a)(D.a.mark((function e(n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),e.next=4,G.put("/tutors/"+t.id,{profileStatus:n});case 4:return e.next=6,c();case 6:g(!1),a(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),g(!1);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(P.a)(D.a.mark((function e(n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(!0),e.next=4,G.put("/accounts/"+t.accountId,{state:n});case 4:return e.next=6,c();case 6:w(!1),a(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),w(!1),alert(e.t0.response.data.message);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){t&&function(){var e=Object(P.a)(D.a.mark((function e(){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),e.next=4,G.get("/tutors/"+t.id);case 4:a=e.sent,E(a.data.tutor),m(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),m(!1);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}()()}),[t]);var x=r.a.createElement("div",{className:Jr.a.statusControl},r.a.createElement(A.a,{showIcon:!0,message:"Rejected",type:"error"}),r.a.createElement("div",{className:Jr.a.statusControlBtnWrapper},r.a.createElement(_.a,{type:"primary",style:{backgroundColor:"#52c41a",color:"white",borderColor:"#52c41a"},className:Jr.a.statusControlBtn,onClick:function(){return S(Ne.ACCEPTED)}},"Accept"),r.a.createElement(_.a,{className:Jr.a.statusControlBtn,onClick:function(){return S(Ne.PENDING)}},"Pending")));t&&t.profileStatus===Ne.ACCEPTED&&(x=r.a.createElement("div",{className:Jr.a.statusControl},r.a.createElement(A.a,{showIcon:!0,message:"Accepted",type:"success"}),r.a.createElement("div",{className:Jr.a.statusControlBtnWrapper},r.a.createElement(_.a,{className:Jr.a.statusControlBtn,onClick:function(){return S(Ne.PENDING)}},"Pending"),r.a.createElement(_.a,{type:"primary",danger:!0,className:Jr.a.statusControlBtn,onClick:function(){return S(Ne.REJECTED)}},"Reject")))),t&&t.profileStatus===Ne.PENDING&&(x=r.a.createElement("div",{className:Jr.a.statusControl},r.a.createElement(A.a,{showIcon:!0,message:"Pending",type:"info"}),r.a.createElement("div",{className:Jr.a.statusControlBtnWrapper},r.a.createElement(_.a,{className:Jr.a.statusControlBtn,style:{backgroundColor:"#52c41a",color:"white",borderColor:"#52c41a"},onClick:function(){return S(Ne.ACCEPTED)}},"Accept"),r.a.createElement(_.a,{type:"primary",danger:!0,className:Jr.a.statusControlBtn,onClick:function(){return S(Ne.REJECTED)}},"Reject"))));var j=r.a.createElement("div",null,r.a.createElement(ze.a,{spinning:h},x,r.a.createElement("div",null,f?r.a.createElement("div",null,r.a.createElement("div",{className:Jr.a.detailWrapper},r.a.createElement(Oa.a,{bordered:!0,size:"small",column:1,title:"Teaching preferences"},r.a.createElement(Oa.a.Item,{label:"Student level"},f.student_lvl),r.a.createElement(Oa.a.Item,{label:"Student type"},f.student_type),r.a.createElement(Oa.a.Item,{label:"Accent"},f.accent),r.a.createElement(Oa.a.Item,{label:"Fluency"},f.fluency),r.a.createElement(Oa.a.Item,{label:"Tutor styles"}," ",f.teaching_styles?JSON.parse(f.teaching_styles).map((function(e){return r.a.createElement(Ge.a,{key:e},e)})):null),r.a.createElement(Oa.a.Item,{label:"Specialities"},f.specialities?JSON.parse(f.specialities).map((function(e){return r.a.createElement(Ge.a,{key:e},e)})):null))),r.a.createElement("div",{className:Jr.a.detailWrapper},r.a.createElement(Oa.a,{bordered:!0,size:"small",column:1,title:"CV"},r.a.createElement(Oa.a.Item,{label:"Interests"},f.interests),r.a.createElement(Oa.a.Item,{label:"Education"},f.education),r.a.createElement(Oa.a.Item,{label:"Experience"},f.experience),r.a.createElement(Oa.a.Item,{label:"Profession"},f.profession),r.a.createElement(Oa.a.Item,{label:"Reason"},f.reason))),r.a.createElement("div",{className:Jr.a.detailWrapper},r.a.createElement("p",{className:Jr.a.detailTitle},"Certificates"),r.a.createElement("div",{className:Jr.a.uploadedCert},f.certificates?JSON.parse(f.certificates).map((function(e,t){return r.a.createElement("a",{key:t,href:xe+e.path},r.a.createElement(Ca.a,null),e.originalname)})):null)),r.a.createElement("div",{className:Jr.a.detailWrapper},r.a.createElement(Oa.a,{bordered:!0,size:"small",column:1,title:"Introduction"},r.a.createElement(Oa.a.Item,{label:"Introduction"},f.introduction)),f.video?r.a.createElement("div",{className:Jr.a.videoWrapper},r.a.createElement(ya,{username:t.username})):null)):null))),I=f?r.a.createElement(ot.a,{defaultActiveKey:"info",type:"card"},r.a.createElement(Qr,{tab:"Info",key:"info"},r.a.createElement("div",{className:Jr.a.detail},r.a.createElement("div",{className:Jr.a.detailBasic},f.avatar?r.a.createElement(ue.a,{src:xe+f.avatar,size:100}):r.a.createElement(ue.a,{icon:r.a.createElement(q.a,null),size:100}),r.a.createElement("div",{className:Jr.a.detailBasicInfo},r.a.createElement(Oa.a,{size:"small",column:1,title:f.name,bordered:!0},r.a.createElement(Oa.a.Item,{label:"Username"},t.username),r.a.createElement(Oa.a.Item,{label:"Email"},t.email),r.a.createElement(Oa.a.Item,{label:"Phone"},f.phone),r.a.createElement(Oa.a.Item,{label:"Address"},f.address),r.a.createElement(Oa.a.Item,{label:"Birthdate"},f.birthdate?Xe()(f.birthdate).format("YYYY-MM-DD"):null),r.a.createElement(Oa.a.Item,{label:"Status"},t.verification?r.a.createElement(Ge.a,{color:"success"},"Verified"):r.a.createElement(Ge.a,{color:"default"},"Unverified"),t.state?r.a.createElement(Ge.a,{color:"success"},"Active"):r.a.createElement(Ge.a,{color:"error"},"Inactive"))))),r.a.createElement("div",{className:Jr.a.banBtnHolder},t.state?r.a.createElement(_.a,{loading:O,className:Jr.a.changeStateBtn,type:"primary",danger:!0,onClick:function(){return N(Se.INACTIVE)}},"Ban"):r.a.createElement(_.a,{loading:O,className:Jr.a.changeStateBtn,type:"primary",onClick:function(){return N(Se.ACTIVE)}},"Unban")))),r.a.createElement(Qr,{tab:"Profile",key:"profile"},j),r.a.createElement(Qr,{tab:"History",key:"history"},r.a.createElement(Lr,{callHistories:f.call_histories})),r.a.createElement(Qr,{tab:"Report",key:"report"},r.a.createElement(Yr,{reports:f.account.reports})),r.a.createElement(Qr,{tab:"Payment",key:"payment"},r.a.createElement(qr,{payments:f.payments})),r.a.createElement(Qr,{tab:"Reviews",key:"reviews"},r.a.createElement(Kr,{selected:f}))):null;return r.a.createElement(M.a,{title:t?t.name:null,visible:l,onCancel:function(){return a(!1)},footer:null,width:"600px",destroyOnClose:!0,bodyStyle:{height:"400px",overflow:"auto"}},r.a.createElement(ze.a,{spinning:u},I))}var $r=B.a.Search;function Xr(){var e=Object(n.useState)(10),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),o=Object(i.a)(l,2),s=o[0],u=o[1],m=Object(n.useState)(1),d=Object(i.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(""),v=Object(i.a)(E,2),b=v[0],h=v[1],g=Object(n.useState)(0),_=Object(i.a)(g,2),y=_[0],C=_[1],O=Object(n.useState)(!1),w=Object(i.a)(O,2),S=w[0],N=w[1],x=Object(n.useState)(!1),j=Object(i.a)(x,2),I=j[0],T=j[1],k=Object(n.useState)(null),R=Object(i.a)(k,2),M=R[0],A=R[1],B=function(){var e=Object(P.a)(D.a.mark((function e(){var t,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N(!0),e.next=4,G.get("/tutors?page=".concat(p,"&size=").concat(a,"&search=")+b);case 4:t=e.sent,n=[],t.data.tutors.forEach((function(e){n.push({key:e.id,id:e.id,name:e.name,username:e.account.username,email:e.account.email,state:e.account.state,verification:e.account.verification,accountId:e.account.id,profileStatus:e.profileStatus})})),C(t.data.totalResults),u(n),N(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),alert(e.t0.response.data.message),N(!1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){B()}),[p,a,b]);var L=[{title:"Name",dataIndex:"name"},{title:"Username",dataIndex:"username"},{title:"Email",dataIndex:"email"},{title:"State",dataIndex:"state",render:function(e){return e?r.a.createElement(Ge.a,{color:"success"},"Active"):r.a.createElement(Ge.a,{color:"error"},"Inactive")}},{title:"Verification",dataIndex:"verification",render:function(e){return e?r.a.createElement(Ge.a,{color:"success"},"Verified"):r.a.createElement(Ge.a,{color:"default"},"Unverified")}},{title:"Profile status",dataIndex:"profileStatus",render:function(e){return e===Ne.ACCEPTED?r.a.createElement(Ge.a,{color:"success"},"Accepted"):e===Ne.PENDING?r.a.createElement(Ge.a,{color:"blue"},"Pending"):r.a.createElement(Ge.a,{color:"error"},"Rejected")}}];return r.a.createElement("div",{className:Gr.a.tutorsLayout},r.a.createElement(Zr,{selected:M,setShowDetailModal:T,showDetailModal:I,getTutorsData:B}),r.a.createElement("div",{className:Gr.a.searchBar},r.a.createElement($r,{placeholder:"Search for username, name or email",onSearch:function(e){h(e)},enterButton:!0})),r.a.createElement(ze.a,{spinning:S},r.a.createElement(it.a,{columns:L,dataSource:s,pagination:!1,onRow:function(e,t){return{onClick:function(t){A(e),T(!0)}}}})),r.a.createElement("div",{className:Gr.a.paginationWrapper},r.a.createElement(Ir.a,{current:p,defaultCurrent:p,total:y,pageSize:a,showSizeChanger:!0,showTotal:function(){return"Total ".concat(y," results")},onShowSizeChange:function(e,t){c(t),f(Math.ceil(y/t))},onChange:function(e,t){f(e)}})))}var ec=a(387),tc=a.n(ec),ac=a(388),nc=a.n(ac),rc=a(32),cc=a.n(rc);function lc(e){var t=e.showReportDetail,a=e.selected,n=e.setShowReportDetail,c=e.getReports,l=function(){var e=Object(P.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.put("/reports/"+a.id,{state:t});case 3:c(),n(!1),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return a?r.a.createElement(M.a,{title:"Report - "+Xe()(a.createdAt).format("MMMM Do YYYY, h:mm:ss a"),visible:t,onCancel:function(){return n(!1)},footer:null,width:"600px",destroyOnClose:!0,bodyStyle:{height:"600px",overflow:"auto"}},r.a.createElement("div",{className:cc.a.reportDetail},r.a.createElement("div",{className:cc.a.reportDetailContent},r.a.createElement("div",{className:cc.a.reportLabel},"Call at:"," ",r.a.createElement("span",{className:cc.a.reportContent},Xe()(a.call_history.createdAt).format("MMMM Do YYYY, h:mm:ss a"))),r.a.createElement("div",{className:cc.a.reportLabel},"Reason: ",r.a.createElement("span",{className:cc.a.reportContent},a.reason)),r.a.createElement("div",{className:cc.a.reportLabel},"Description: ",r.a.createElement("span",{className:cc.a.reportContent},a.description)),a.account.role===we.STUDENT?r.a.createElement("div",null,r.a.createElement("div",{className:cc.a.reportLabel},"Name: ",r.a.createElement("span",{className:cc.a.reportContent},a.call_history.student.name)),r.a.createElement(tn,{url:"".concat(xe,"api/call-histories/").concat(a.call_history.id,"/studentVideo")})):r.a.createElement("div",null,r.a.createElement("div",{className:cc.a.reportLabel},"Name: ",r.a.createElement("span",{className:cc.a.reportContent},a.call_history.tutor.name)),r.a.createElement(tn,{url:"".concat(xe,"api/call-histories/").concat(a.call_history.id,"/tutorVideo")}))),a.state===Pe.PENDING?r.a.createElement("div",{className:cc.a.statusControlBtnWrapper},r.a.createElement(_.a,{className:cc.a.statusControlBtn,style:{backgroundColor:"#52c41a",color:"white",borderColor:"#52c41a"},onClick:function(){return l(Pe.RESOLVED)}},"Resolve"),r.a.createElement(_.a,{type:"primary",danger:!0,className:cc.a.statusControlBtn,onClick:function(){return l(Pe.CANCELLED)}},"Cancel")):null,a.state===Pe.RESOLVED?r.a.createElement("div",{className:cc.a.statusControlBtnWrapper},r.a.createElement(_.a,{className:cc.a.statusControlBtn,onClick:function(){return l(Pe.PENDING)}},"Pending"),r.a.createElement(_.a,{type:"primary",danger:!0,className:cc.a.statusControlBtn,onClick:function(){return l(Pe.CANCELLED)}},"Cancel")):null,a.state===Pe.CANCELLED?r.a.createElement("div",{className:cc.a.statusControlBtnWrapper},r.a.createElement(_.a,{className:cc.a.statusControlBtn,style:{backgroundColor:"#52c41a",color:"white",borderColor:"#52c41a"},onClick:function(){return l(Pe.RESOLVED)}},"Resolve"),r.a.createElement(_.a,{className:cc.a.statusControlBtn,onClick:function(){return l(Pe.PENDING)}},"Pending")):null)):null}function oc(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(i.a)(l,2),s=o[0],u=o[1],m=Object(n.useState)(null),d=Object(i.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!1),v=Object(i.a)(E,2),b=v[0],h=v[1],g=function(){var e=Object(P.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,G.get("/reports");case 4:t=e.sent,c(t.data.reports),u(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),alert(e.t0.response.data.message),u(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){g()}),[]);var _=[{title:"Date",dataIndex:"createdAt",render:function(e){return r.a.createElement("div",null,Xe()(e).format("MMMM Do YYYY, h:mm:ss a"))}},{title:"Username",render:function(e,t){return r.a.createElement("div",null,t.account.username)}},{title:"Role",render:function(e,t){return t.account.role===we.STUDENT?r.a.createElement("div",null,"Student"):r.a.createElement("div",null,"Tutor")}},{title:"Reason",dataIndex:"reason"},{title:"State",dataIndex:"state",render:function(e){return e===Pe.RESOLVED?r.a.createElement(Ge.a,{color:"success"},"Resolved"):e===Pe.PENDING?r.a.createElement(Ge.a,{color:"blue"},"Pending"):r.a.createElement(Ge.a,{color:"error"},"Cancelled")}}];return r.a.createElement("div",{className:nc.a.reports},r.a.createElement(lc,{setShowReportDetail:h,showReportDetail:b,selected:p,getReports:g}),r.a.createElement(ze.a,{spinning:s},r.a.createElement(it.a,{columns:_,dataSource:a,pagination:!1,rowKey:"id",onRow:function(e,t){return{onClick:function(t){f(e),h(!0)}}}})))}var sc=a(158),ic=a.n(sc);function uc(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(i.a)(l,2),s=o[0],u=o[1],m=function(){var e=Object(P.a)(D.a.mark((function e(){var t,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,G.get("/subscriptions/");case 4:t=e.sent,a=[],t.data.subscriptions.forEach((function(e){e.key=e.id,e.username=e.student.account.username,e.name=e.student.name,a.push(e)})),c(a),u(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),alert(e.t0.response.data.message),u(!1);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(P.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,G.put("/subscriptions/"+t,{state:Te.CANCELED});case 4:m(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),alert(e.t0.response.data.message),u(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(P.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,G.put("/subscriptions/"+t,{state:Te.COMPLETED});case 4:m(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),alert(e.t0.response.data.message),u(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),f=[{title:"Date",dataIndex:"createdAt",render:function(e){return r.a.createElement("div",null,Xe()(e).format("MMMM Do YYYY, h:mm:ss a"))}},{title:"Name",dataIndex:"name"},{title:"Username",dataIndex:"username"},{title:"Tier",dataIndex:"tier",render:function(e){return e===ke.SILVER?r.a.createElement(Ge.a,{color:"#C0C0C0"},"Silver"):e===ke.GOLD?r.a.createElement(Ge.a,{color:"#DAA520"},"Gold"):e===ke.PLATIUM?r.a.createElement(Ge.a,{color:"processing"},"Platium"):r.a.createElement(Ge.a,null,"Normal")}},{title:"Duration",dataIndex:"duration",render:function(e){return r.a.createElement("div",null,e/6e4," mins")}},{title:"Price",dataIndex:"price",render:function(e){return r.a.createElement("div",null,e,"$")}},{title:"State",dataIndex:"state",render:function(e){return e===Te.COMPLETED?r.a.createElement(Ge.a,{color:"success"},"Completed"):e===Te.PENDING?r.a.createElement(Ge.a,{color:"blue"},"Pending"):r.a.createElement(Ge.a,{color:"error"},"Cancelled")}},{title:"Action",dataIndex:"state",render:function(e,t){return t.state===Te.PENDING?r.a.createElement("div",null,r.a.createElement(st.a,{title:"Do you want to accept this request?",okText:"Yes",cancelText:"No",className:ic.a.acceptBtn,onConfirm:function(){return p(t.id)}},"Complete"),r.a.createElement(st.a,{title:"Do you want to cancel this request?",okText:"Yes",cancelText:"No",className:ic.a.cancelBtn,onConfirm:function(){return d(t.id)}},"Cancel")):r.a.createElement("div",null,"N/A")}}];return Object(n.useEffect)((function(){m()}),[]),r.a.createElement("div",{className:ic.a.subscriptions},r.a.createElement(ze.a,{spinning:s},r.a.createElement(_.a,{className:ic.a.reload,onClick:m,icon:r.a.createElement(dt.a,null)},"Reload"),r.a.createElement(it.a,{columns:f,dataSource:a,pagination:!1})))}var mc=a(84),dc=a.n(mc);function pc(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(i.a)(l,2),s=o[0],u=o[1],m=function(){var e=Object(P.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,G.get("/payments/");case 4:t=e.sent,c(t.data.payments),u(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),alert(e.t0.response.data.message),u(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(P.a)(D.a.mark((function e(t,a){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,G.put("/payments/"+t,{state:a});case 4:m(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),alert(e.t0.response.data.message),u(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,a){return e.apply(this,arguments)}}(),p=[{title:"Date",dataIndex:"createdAt",render:function(e){return r.a.createElement("div",null,Xe()(e).format("MMMM Do YYYY, h:mm:ss a"))}},{title:"Name",render:function(e,t){return t.tutor.name}},{title:"Username",render:function(e,t){return t.tutor.account.username}},{title:"Email",dataIndex:"state",render:function(e,t){return t.tutor.account.email}},{title:"Price",dataIndex:"price",render:function(e){return r.a.createElement("div",null,e,"$")}},{title:"State",dataIndex:"state",render:function(e){return e===Re.COMPLETED?r.a.createElement(Ge.a,{color:"success"},"Completed"):e===Re.PENDING?r.a.createElement(Ge.a,{color:"blue"},"Pending"):r.a.createElement(Ge.a,{color:"error"},"Cancelled")}},{title:"Action",render:function(e,t){return t.state===Re.PENDING?r.a.createElement("div",null,r.a.createElement(st.a,{title:"Do you want to perform this action?",okText:"Yes",cancelText:"No",className:dc.a.acceptBtn,onConfirm:function(){return d(t.id,Re.COMPLETED)}},"Complete"),r.a.createElement(st.a,{title:"Do you want to perform this action?",okText:"Yes",cancelText:"No",className:dc.a.cancelBtn,onConfirm:function(){return d(t.id,Re.CANCELED)}},"Cancel")):t.state===Re.COMPLETED?r.a.createElement("div",null,r.a.createElement(st.a,{title:"Do you want to perform this action?",okText:"Yes",cancelText:"No",className:dc.a.pendingBtn,onConfirm:function(){return d(t.id,Re.PENDING)}},"Pending"),r.a.createElement(st.a,{title:"Do you want to perform this action?",okText:"Yes",cancelText:"No",className:dc.a.cancelBtn,onConfirm:function(){return d(t.id,Re.CANCELED)}},"Cancel")):r.a.createElement("div",null,r.a.createElement(st.a,{title:"Do you want to perform this action?",okText:"Yes",cancelText:"No",className:dc.a.acceptBtn,onConfirm:function(){return d(t.id,Re.COMPLETED)}},"Complete"),r.a.createElement(st.a,{title:"Do you want to perform this action?",okText:"Yes",cancelText:"No",className:dc.a.pendingBtn,onConfirm:function(){return d(t.id,Re.PENDING)}},"Pending"))}}];return Object(n.useEffect)((function(){m()}),[]),r.a.createElement("div",{className:dc.a.payments},r.a.createElement(ze.a,{spinning:s},r.a.createElement(_.a,{className:dc.a.reload,onClick:m,icon:r.a.createElement(dt.a,null)},"Reload"),r.a.createElement(it.a,{rowKey:"id",columns:p,dataSource:a,pagination:!1})))}var fc=a(727),Ec=a(389),vc=a.n(Ec),bc=a(103),hc=a.n(bc);function gc(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(null),o=Object(i.a)(l,2),s=o[0],u=o[1],m=Object(n.useState)(null),d=Object(i.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(null),v=Object(i.a)(E,2),b=v[0],h=v[1],g=Object(n.useState)(!1),y=Object(i.a)(g,2),C=y[0],O=y[1],w=Object(n.useState)(!1),S=Object(i.a)(w,2),N=S[0],x=S[1],j=Object(n.useState)(!1),I=Object(i.a)(j,2),T=I[0],k=I[1],M=function(){var e=Object(P.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.prev=1,e.next=4,G.get("/settings");case 4:e.sent.data.settings.forEach((function(e){"discount rate"===e.type&&u(e),"student price"===e.type&&f(e),"tutor price"===e.type&&h(e)})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.response.data.message);case 11:c(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){M()}),[]);var A=function(e,t){return t>0?Promise.resolve():Promise.reject("Invalid price!")},B=function(e,t){return t>0&&t<=1?Promise.resolve():Promise.reject("Invalid rate!")},L=function(){var e=Object(P.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,G.put("/settings/"+b.id,{content:t.tutorPrice});case 4:M(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),alert(e.t0.response.data.message);case 10:x(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(P.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,G.put("/settings/"+p.id,{content:t.studentPrice});case 4:M(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),alert(e.t0.response.data.message);case 10:O(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(P.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.prev=1,e.next=4,G.put("/settings/"+s.id,{content:JSON.stringify(t)});case 4:M(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),alert(e.t0.response.data.message);case 10:k(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(ze.a,{spinning:a},r.a.createElement("div",{className:hc.a.settings},r.a.createElement("div",{className:hc.a.settingsContent},r.a.createElement("img",{className:hc.a.settingImg,src:vc.a,alt:"",draggable:"false"})),r.a.createElement("div",null,r.a.createElement("div",{className:hc.a.settingsContent},r.a.createElement("p",{className:hc.a.settingTitle},"Set price per min"),p&&b?r.a.createElement("div",null,r.a.createElement(R.a,{name:"tutor",layout:"inline",style:{marginBottom:"20px"},onFinish:L,initialValues:{tutorPrice:Number(b.content)}},r.a.createElement(R.a.Item,{name:"tutorPrice",label:"Tutor payment",rules:[{validator:A,required:!0}]},r.a.createElement(fc.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")}})),r.a.createElement(R.a.Item,null,r.a.createElement(_.a,{type:"primary",htmlType:"submit",loading:N},"Update"))),r.a.createElement(R.a,{name:"student",layout:"inline",style:{marginLeft:"7px"},onFinish:Y,initialValues:{studentPrice:Number(p.content)}},r.a.createElement(R.a.Item,{name:"studentPrice",label:"Student price",rules:[{validator:A,required:!0}]},r.a.createElement(fc.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")}})),r.a.createElement(R.a.Item,null,r.a.createElement(_.a,{type:"primary",htmlType:"submit",loading:C},"Update")))):null),r.a.createElement("div",{className:hc.a.settingsContent},r.a.createElement("p",{className:hc.a.settingTitle},"Set discount rate"),s?r.a.createElement("div",null,r.a.createElement(R.a,{name:"discount",onFinish:V,initialValues:JSON.parse(s.content),labelCol:{span:14},wrapperCol:{span:4}},r.a.createElement(R.a.Item,{name:"NORMAL",label:"Normal tier",rules:[{validator:B,required:!0}]},r.a.createElement(fc.a,null)),r.a.createElement(R.a.Item,{name:"SILVER",label:"Silver tier",rules:[{validator:B,required:!0}]},r.a.createElement(fc.a,null)),r.a.createElement(R.a.Item,{name:"GOLD",label:"Gold tier",rules:[{validator:B,required:!0}]},r.a.createElement(fc.a,null)),r.a.createElement(R.a.Item,{name:"PLATIUM",label:"Platium tier",rules:[{validator:B,required:!0}]},r.a.createElement(fc.a,null)),r.a.createElement(R.a.Item,{wrapperCol:{offset:7}},r.a.createElement(_.a,{type:"primary",htmlType:"submit",loading:T},"Update")))):null))))}var _c=g.a.Header,yc=g.a.Content,Cc=g.a.Sider;function Oc(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],l=a[1],u=Object(n.useState)(!1),m=Object(i.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(!1),v=Object(i.a)(f,2),b=v[0],h=v[1],_=Object(n.useContext)(E),y=_.onSignOut,C=_.account,O=e.location,w=r.a.createElement(me.a,null,r.a.createElement(me.a.Item,{onClick:function(){return p(!0)}},r.a.createElement(Ee.a,null),r.a.createElement("span",null,"Change password")),r.a.createElement(me.a.Item,{onClick:y},r.a.createElement(ve.a,null),r.a.createElement("span",null,"Sign out")));return r.a.createElement(g.a,null,r.a.createElement(te,{isVisible:b,onClose:function(){return h(!1)}}),r.a.createElement(Ae,{isVisible:d,onClose:function(){return p(!1)},onForgot:function(){return h(!0)}}),r.a.createElement(Cc,{collapsible:!0,collapsed:c,onCollapse:function(e){l(e)},className:dr.a.adminMenu},r.a.createElement(Ye,{collapsed:c}),r.a.createElement(me.a,{theme:"dark",defaultSelectedKeys:["/admin"],mode:"inline",selectedKeys:[O.pathname]},r.a.createElement(me.a.Item,{key:"/admin"},r.a.createElement(fn.a,null),r.a.createElement(o.b,{to:"/admin"},r.a.createElement("span",null,"Dashboard"))),r.a.createElement(me.a.Item,{key:"/admin/students"},r.a.createElement(la.a,null),r.a.createElement(o.b,{to:"/admin/students"},r.a.createElement("span",null,"Students"))),r.a.createElement(me.a.Item,{key:"/admin/tutors"},r.a.createElement(lr.a,null),r.a.createElement(o.b,{to:"/admin/tutors"},r.a.createElement("span",null,"Tutors"))),r.a.createElement(me.a.Item,{key:"/admin/reports"},r.a.createElement(or.a,null),r.a.createElement(o.b,{to:"/admin/reports"},r.a.createElement("span",null,"Reports"))),r.a.createElement(me.a.Item,{key:"/admin/subscriptions"},r.a.createElement(lt.a,null),r.a.createElement(o.b,{to:"/admin/subscriptions"},r.a.createElement("span",null,"Subscriptions"))),r.a.createElement(me.a.Item,{key:"/admin/payments"},r.a.createElement(ge.a,null),r.a.createElement(o.b,{to:"/admin/payments"},r.a.createElement("span",null,"Payments"))),r.a.createElement(me.a.Item,{key:"/admin/settings"},r.a.createElement(sr.a,null),r.a.createElement(o.b,{to:"/admin/settings"},r.a.createElement("span",null,"Settings"))))),r.a.createElement(g.a,null,r.a.createElement(_c,{style:{background:"white"}},c?r.a.createElement(ir.a,{className:dr.a.menuIcon,onClick:function(){return l(!1)}}):r.a.createElement(ur.a,{className:dr.a.menuIcon,onClick:function(){return l(!0)}}),r.a.createElement("div",{className:dr.a.userControl},"Hello, ",C.username,r.a.createElement(de.a,{overlay:w,placement:"bottomLeft"},r.a.createElement("div",null,r.a.createElement(ue.a,{src:tc.a,size:"large",draggable:!1}),r.a.createElement(ye.a,{className:dr.a.dropDownIcon}))))),r.a.createElement(yc,null,r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/admin/students",component:Wr}),r.a.createElement(s.b,{path:"/admin/tutors",component:Xr}),r.a.createElement(s.b,{path:"/admin/reports",component:oc}),r.a.createElement(s.b,{path:"/admin/subscriptions",component:uc}),r.a.createElement(s.b,{path:"/admin/payments",component:pc}),r.a.createElement(s.b,{path:"/admin/settings",component:gc}),r.a.createElement(s.b,{path:"/admin",component:jr,exact:!0}))),r.a.createElement(j,null)))}function wc(){return Object(n.useEffect)((function(){f()}),[]),r.a.createElement(s.a,{to:"/"})}function Sc(){var e=Object(n.useContext)(E).account;return e&&e.role===we.STUDENT?r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/student",component:mn}),r.a.createElement(s.a,{to:"/student"})):e&&e.role===we.TUTOR?r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/tutor",component:cr}),r.a.createElement(s.a,{to:"/tutor"})):e&&e.role===we.ADMIN?r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/admin",component:Oc}),r.a.createElement(s.a,{to:"/admin"})):r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/",exact:!0,component:ie}),r.a.createElement(s.b,{path:"/sign-out",component:wc}),r.a.createElement(s.a,{to:"/"}))}var Nc=Object(s.g)((function(){return r.a.createElement("div",{className:"App"},r.a.createElement(v,null,r.a.createElement(Sc,null)))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(709),a(710);var xc=r.a.createElement(o.a,null,r.a.createElement(Nc,null));l.a.render(xc,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},82:function(e,t,a){e.exports={tutorInfo:"TutorCard_tutorInfo__CAOr7",tutorInfoDetail:"TutorCard_tutorInfoDetail__1eiGT",tutorCard:"TutorCard_tutorCard__1UNnv",status:"TutorCard_status__3YZHo",tutorName:"TutorCard_tutorName__2-f_B",reviewCount:"TutorCard_reviewCount__1XOXA",reviewWrapper:"TutorCard_reviewWrapper__Vicqo",viewReviews:"TutorCard_viewReviews__17v4K",removeFav:"TutorCard_removeFav__jhJln"}},83:function(e,t,a){e.exports={teaching:"Teaching_teaching__Y0Cv4",waitImg:"Teaching_waitImg__Yf0ni",wait:"Teaching_wait__2odn_",waitTxt:"Teaching_waitTxt__forEC",teachingWrapper:"Teaching_teachingWrapper__CP6F6"}},84:function(e,t,a){e.exports={payments:"Payment_payments__Op5f0",acceptBtn:"Payment_acceptBtn__3zchY",cancelBtn:"Payment_cancelBtn__3C-u6",pendingBtn:"Payment_pendingBtn__1YiPK"}},98:function(e,t,a){e.exports={callWindow:"CallWindow_callWindow__n8XLW",videoScreenContainer:"CallWindow_videoScreenContainer__gOrhc",videoScreen:"CallWindow_videoScreen__1p3lS",videoControl:"CallWindow_videoControl__FV-OE",callWindowWrapper:"CallWindow_callWindowWrapper__2wlA7",callTime:"CallWindow_callTime__29Edb"}},99:function(e,t,a){e.exports={tutorList:"TutorList_tutorList__ehXmh",tabPane:"TutorList_tabPane__IrfbB",searchBar:"TutorList_searchBar__2GQWJ",remainingTimeTitle:"TutorList_remainingTimeTitle__1A9YP",searchTool:"TutorList_searchTool__3s80a"}}},[[395,1,2]]]);
//# sourceMappingURL=main.eb667b02.chunk.js.map