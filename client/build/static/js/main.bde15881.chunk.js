(this["webpackJsonpmirage-client"]=this["webpackJsonpmirage-client"]||[]).push([[0],{100:function(e,t,a){e.exports={detailWrapper:"TutorDetailModal_detailWrapper__1-ZhW",detailTitle:"TutorDetailModal_detailTitle__1Bhfv",uploadedCert:"TutorDetailModal_uploadedCert__1t2bu",videoWrapper:"TutorDetailModal_videoWrapper__3Bco0"}},101:function(e,t,a){e.exports={study:"Study_study__1m7u8",unverify:"Study_unverify__3wQ3x",unverifyImg:"Study_unverifyImg__2WWSo",timeoutImg:"Study_timeoutImg__1giul",unverifyTxt:"Study_unverifyTxt__YjQFO"}},102:function(e,t,a){e.exports={detail:"StudentProfile_detail__Hxd7l",detailBasic:"StudentProfile_detailBasic__2XfWq",detailName:"StudentProfile_detailName__3UQZu",detailBasicInfo:"StudentProfile_detailBasicInfo__1iBLv",banBtnHolder:"StudentProfile_banBtnHolder__1xaUf",detailAdditional:"StudentProfile_detailAdditional__39B6A",detailAdditionalRow:"StudentProfile_detailAdditionalRow__s7g9Q",changeStateBtn:"StudentProfile_changeStateBtn__1pnrG"}},103:function(e,t,a){e.exports={settings:"Settings_settings__3GtsK",settingsContent:"Settings_settingsContent__2uFPT",settingTitle:"Settings_settingTitle__3XArO",settingImg:"Settings_settingImg__1p_tt"}},118:function(e,t,a){e.exports={footer:"FooterContent_footer__1QDaf",contactIcon:"FooterContent_contactIcon__1hOZQ",contactInfoContainer:"FooterContent_contactInfoContainer__1hbrq"}},119:function(e,t,a){e.exports={profile:"Profile_profile__1KsTq",accountInfoContainer:"Profile_accountInfoContainer__36-ca",accountInfo:"Profile_accountInfo__36m1O",name:"Profile_name__25jpy",collapse:"Profile_collapse__3MZ62",submitWrapper:"Profile_submitWrapper__3Aaab"}},120:function(e,t,a){e.exports={videoCall:"VideoCall_videoCall__1YbKV",endCallImg:"VideoCall_endCallImg__25Quz",afterCall:"VideoCall_afterCall__Am2pS",endUser:"VideoCall_endUser__1v2Nl",endDuration:"VideoCall_endDuration__1nRUs"}},141:function(e,t,a){e.exports={callModal:"CallModal_callModal__35GDR",controlBtns:"CallModal_controlBtns__1uJMK",caller:"CallModal_caller__3LaGC",callerTxt:"CallModal_callerTxt__dCmne",callModalWrapper:"CallModal_callModalWrapper__369uQ"}},142:function(e,t,a){e.exports={btnWrapper:"VideoRecorder_btnWrapper__12vb1",btnWrapperNoCancel:"VideoRecorder_btnWrapperNoCancel__2h8RG",videoBtn:"VideoRecorder_videoBtn__QaDyQ"}},143:function(e,t,a){e.exports={logoContainer:"Admin_logoContainer__5YP8N",logo:"Admin_logo__3y50d",logoText:"Admin_logoText__iG08w",userControl:"Admin_userControl__2CV56",dropDownIcon:"Admin_dropDownIcon__rm5ag",adminMenu:"Admin_adminMenu__2W4DE",menuIcon:"Admin_menuIcon__1kNaJ"}},156:function(e,t,a){e.exports={signInForm:"SignInModal_signInForm__1UsfZ",signInForgot:"SignInModal_signInForgot__29zQP",signInButton:"SignInModal_signInButton__2Cpbr",registerNow:"SignInModal_registerNow__1BAGD"}},158:function(e,t,a){e.exports={cancelBtn:"Subscriptions_cancelBtn__1choq",reload:"Subscriptions_reload__1iCNI",subscriptions:"Subscriptions_subscriptions__P0GgV",acceptBtn:"Subscriptions_acceptBtn__2ljPh"}},189:function(e,t,a){e.exports=a.p+"static/media/app-logo.05772604.png"},199:function(e,t,a){e.exports={headerWrapper:"AppLogo_headerWrapper__25kQj",headerTitle:"AppLogo_headerTitle__2z-ww",headerIcon:"AppLogo_headerIcon__uPmRj"}},200:function(e,t,a){e.exports={logoContainer:"SideBarLogo_logoContainer__3BU11",logo:"SideBarLogo_logo__j38kN",logoText:"SideBarLogo_logoText__1A9IP"}},202:function(e,t,a){e.exports={StudentCallHistories:"StudentCallHistories_StudentCallHistories__2-zeT",searchBar:"StudentCallHistories_searchBar__38t3d",viewRecordBtn:"StudentCallHistories_viewRecordBtn__tAVri"}},203:function(e,t,a){e.exports={TutorCallHistories:"TutorCallHistories_TutorCallHistories__2J6lF",searchBar:"TutorCallHistories_searchBar__3n7wR",payRate:"TutorCallHistories_payRate__3Daht"}},204:function(e,t,a){e.exports={dashboard:"Dashboard_dashboard__RTEsh",dashboardRow:"Dashboard_dashboardRow__3x5rH"}},205:function(e,t,a){e.exports={studentsLayout:"Students_studentsLayout__3MTqw",paginationWrapper:"Students_paginationWrapper__1ifQN",searchBar:"Students_searchBar__OgN1c"}},206:function(e,t,a){e.exports={tutorsLayout:"Tutors_tutorsLayout__1Hpzr",paginationWrapper:"Tutors_paginationWrapper__201Ai",searchBar:"Tutors_searchBar__yTg_c"}},248:function(e,t,a){e.exports={userControl:"Student_userControl__1_b1H",sideMenu:"Student_sideMenu__3WPxY",logoContainer:"Student_logoContainer__2FRB1",logo:"Student_logo__HsotE",logoText:"Student_logoText__WhrTV"}},249:function(e,t,a){e.exports={forgotPass:"ChangePasswordModal_forgotPass__2mFZo"}},253:function(e,t,a){e.exports={subscriptions:"Subscriptions_subscriptions__2TvFB",tabPaneHistory:"Subscriptions_tabPaneHistory__3jzUg"}},254:function(e,t,a){e.exports={cancelBtn:"SubscriptionHistory_cancelBtn__3bslm",reload:"SubscriptionHistory_reload__12dys"}},260:function(e,t,a){e.exports={userControl:"Tutor_userControl__1WVk4",sideMenu:"Tutor_sideMenu__3kkA_",logoContainer:"Tutor_logoContainer__3UZOu",logo:"Tutor_logo__2g0K_",logoText:"Tutor_logoText__elIkt"}},261:function(e,t,a){e.exports={recentCalls:"RecentCalls_recentCalls__2xgCD",recentCallsTitle:"RecentCalls_recentCallsTitle__2EkRx"}},262:function(e,t,a){e.exports={topPaid:"TopPaid_topPaid__3VbpS",topPaidTitle:"TopPaid_topPaidTitle__1h0Yu"}},263:function(e,t,a){e.exports={recordTitle:"CallDetailModal_recordTitle__1SF7Y"}},27:function(e,t,a){e.exports={detail:"TutorProfile_detail__ZkC-a",detailBasic:"TutorProfile_detailBasic__2K4Hu",detailName:"TutorProfile_detailName__23wlZ",detailBasicInfo:"TutorProfile_detailBasicInfo__3Rr_6",banBtnHolder:"TutorProfile_banBtnHolder__NhjcS",detailAdditional:"TutorProfile_detailAdditional__PcE06",detailAdditionalRow:"TutorProfile_detailAdditionalRow__1vG_M",statusControl:"TutorProfile_statusControl__FY7mp",statusControlBtnWrapper:"TutorProfile_statusControlBtnWrapper__eOpkW",statusControlBtn:"TutorProfile_statusControlBtn__3WbCW",changeStateBtn:"TutorProfile_changeStateBtn__10n4-",detailWrapper:"TutorProfile_detailWrapper__1cIhT",detailTitle:"TutorProfile_detailTitle__1pNY9",uploadedCert:"TutorProfile_uploadedCert__3Cyz5",videoWrapper:"TutorProfile_videoWrapper__25x9T"}},28:function(e,t,a){e.exports={extendSub:"ExtendSubscription_extendSub__3RML7",extendSubContent:"ExtendSubscription_extendSubContent__3SHYr",extendDuration:"ExtendSubscription_extendDuration__2KkDL",extendPrice:"ExtendSubscription_extendPrice__dmScz",extendSave:"ExtendSubscription_extendSave__2LkOJ",tierImage:"ExtendSubscription_tierImage__1zkZo",subTier:"ExtendSubscription_subTier__2uXtb"}},32:function(e,t,a){e.exports={reportDetail:"ReportDetailModal_reportDetail__cdxgQ",reportLabel:"ReportDetailModal_reportLabel__qepxr",reportContent:"ReportDetailModal_reportContent__2FsSe",banBtnHolder:"ReportDetailModal_banBtnHolder__2Uzt-",statusControl:"ReportDetailModal_statusControl__zr4IP",statusControlBtnWrapper:"ReportDetailModal_statusControlBtnWrapper__2a_wY",statusControlBtn:"ReportDetailModal_statusControlBtn__1QDjW"}},335:function(e,t,a){e.exports=a.p+"static/media/flame-welcome.2b090893.png"},336:function(e,t,a){e.exports=a.p+"static/media/welcome-student.0c7630e5.png"},337:function(e,t,a){e.exports=a.p+"static/media/welcome-tutor.66b32adc.png"},344:function(e,t,a){e.exports={submitBtn:"ForgotPasswordModal_submitBtn__3hdXQ"}},361:function(e,t,a){e.exports=a.p+"static/media/normal.e7bbb1c5.png"},362:function(e,t,a){e.exports=a.p+"static/media/silver.f90e93f6.png"},363:function(e,t,a){e.exports=a.p+"static/media/gold.5aac3e94.png"},364:function(e,t,a){e.exports=a.p+"static/media/platium.d927c89d.png"},37:function(e,t,a){e.exports={reviewSummary:"ReviewSummary_reviewSummary__1bXME",ratingCount:"ReviewSummary_ratingCount__2bZ6q",ratingCountList:"ReviewSummary_ratingCountList__CKzd5",rating:"ReviewSummary_rating__310az",reviewAvg:"ReviewSummary_reviewAvg__3CHGn",reviewOverall:"ReviewSummary_reviewOverall__2bnV6",reviewNumber:"ReviewSummary_reviewNumber__10U5n"}},371:function(e,t,a){e.exports=a.p+"static/media/endcall.6812f833.png"},372:function(e,t,a){e.exports=a.p+"static/media/unverify.e737cc3d.png"},373:function(e,t,a){e.exports=a.p+"static/media/timeout.5eb4aa73.png"},374:function(e,t,a){e.exports={recordHolder:"StudentCallDetailModal_recordHolder__2_tf9"}},378:function(e,t,a){e.exports={btnWrapper:"VideoPlayer_btnWrapper__2FgjL"}},379:function(e,t,a){e.exports=a.p+"static/media/tutor-wait.a732bc74.png"},380:function(e,t,a){e.exports=a.p+"static/media/complete-profile.5dfe81ca.png"},381:function(e,t,a){e.exports={stats:"Stats_stats__1dXkY"}},382:function(e,t,a){e.exports={payments:"Payments_payments__3iMPZ"}},383:function(e,t,a){e.exports={reviews:"Reviews_reviews__3g8Y-"}},384:function(e,t,a){e.exports={onlineUsers:"OnlineUsers_onlineUsers__2kML7"}},386:function(e,t,a){e.exports={moneyStats:"MoneyStats_moneyStats__2Efr9"}},387:function(e,t,a){e.exports=a.p+"static/media/admin-avatar.4fc32273.png"},388:function(e,t,a){e.exports={reports:"Reports_reports__1gCNy"}},389:function(e,t,a){e.exports=a.p+"static/media/settings.b69cd3a3.png"},395:function(e,t,a){e.exports=a(711)},42:function(e,t,a){e.exports={registerContent:"RegisterModal_registerContent__VIZjp",registerWelcome:"RegisterModal_registerWelcome__1FFXa",registerForm:"RegisterModal_registerForm__1Y3PF",registerButton:"RegisterModal_registerButton__3mZDu",formWrapper:"RegisterModal_formWrapper__QXVyV",switchMode:"RegisterModal_switchMode__1WPxv",switchModeWrapper:"RegisterModal_switchModeWrapper__1DxCN",welcomeImg:"RegisterModal_welcomeImg__1pZz7",registerWelcomeContent:"RegisterModal_registerWelcomeContent___nFxy"}},52:function(e,t){t.PREFERENCE_TYPE=Object.freeze({ENG_ACCENT:"eng_accent",ENG_FLUENCY:"eng_fluency",TEACHING_STYLE:"teaching_style",STUDENT_TYPE:"student_type",STUDENT_LVL:"student_lvl",SPECIALITY:"speciality"}),t.ENG_ACCENT=["North America","North America - Canada","North America - USA","North America - Southern USA","North America - Other","British Isles","British Isles - Received Pronunciation","British Isle - Ireland","British Isles - Scotland","British Isles - Other","South Africa","Australia / New Zealand","Australia","New Zealand","Other"],t.ENG_FLUENCY=["Native","Fluent","Conversational","Basic"],t.TEACHING_STYLE=["Kind & patient","Fun & gregarious","Scholarly & knowledgeable"],t.STUDENT_TYPE=["Adult","Child"],t.STUDENT_LVL=["Beginner","Intermeditate","Advanced"],t.SPECIALITIES=["Friendly conversation","Business English","Public speaking","Test prep (IELTS, TOEFL, etc.)","Grammar instruction, Accent coaching","Correcting speech","Discussing current events","Vocational lessons","Culture (i.e. manners, customs)","Teaching idioms and slang"]},53:function(e,t,a){e.exports={headerContent:"Default_headerContent__1AZME",userButton:"Default_userButton__1sheO",registerButton:"Default_registerButton__3_9k4",userButtonContainer:"Default_userButtonContainer__13rjh",defaultBody:"Default_defaultBody__2SFro",introContainer:"Default_introContainer__2mKMi",welcomeText:"Default_welcomeText__3V5pT",welcomeDescription:"Default_welcomeDescription__3JyFy",introContent:"Default_introContent__6VnKq",introImg:"Default_introImg__13WSl",becomeTutor:"Default_becomeTutor__r17GW"}},65:function(e,t,a){e.exports={profile:"Profile_profile__2KDIp",accountInfoContainer:"Profile_accountInfoContainer__GEChU",accountInfo:"Profile_accountInfo__Rms9a",name:"Profile_name__dgEUU",collapse:"Profile_collapse__4_nnt",submitWrapper:"Profile_submitWrapper__1Rct5",profileStatus:"Profile_profileStatus__3fk2b",uploadedCert:"Profile_uploadedCert__FfGyt",introTips:"Profile_introTips__2rDTa",introInstruct:"Profile_introInstruct__E-NsA"}},675:function(e,t){},684:function(e,t){},709:function(e,t,a){},711:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),l=a.n(c),o=a(30),s=a(96),i=a(4),u=a(196),m=a(332),d=a.n(m),p=new u.a,f=function(){p.remove("access_token")},E=Object(n.createContext)(null),v=function(e){var t=Object(n.useState)(null),a=Object(i.a)(t,2),c=a[0],l=a[1];Object(n.useEffect)((function(){var e=function(){var e=null,t=p.get("access_token");return t&&(e=d()(t)),e}();e&&l(e)}),[]);return r.a.createElement(E.Provider,Object.assign({value:{account:c,onSignIn:function(e){l(e)},onSignOut:function(){f(),localStorage.clear(),l(null)}}},e))},b=a(53),h=a.n(b),g=a(713),_=a(39),y=a(714),C=a(118),O=a.n(C),w=a(745),x=a(744),S=a(743),N=g.a.Footer;function I(){return r.a.createElement(N,{className:O.a.footer},r.a.createElement("div",{className:O.a.contactIconContainer},r.a.createElement(w.a,{className:O.a.contactIcon,onClick:function(){return window.open("https://github.com/huynguyend191")}}),r.a.createElement(x.a,{className:O.a.contactIcon,onClick:function(){return window.open("https://www.facebook.com/sneezingcat191")}}),r.a.createElement(S.a,{className:O.a.contactIcon,onClick:function(){return window.open("https://www.instagram.com/sneezingcat191/")}})),r.a.createElement("div",{className:O.a.contactInfoContainer},"Mirage 2020 - English Video Call Platform ",r.a.createElement("br",null),"Contact: huynguyend191@gmail.com"))}var j=a(335),T=a.n(j),k=a(5),D=a.n(k),P=a(6),R=a(719),M=a(720),A=a(731),B=a(723),L=a(42),F=a.n(L),V=a(336),Y=a.n(V),U=a(337),W=a.n(U),z=a(338),G=a.n(z).a.create({baseURL:"https://mirage.social/api",withCredentials:!0});function H(e){var t=Object(n.useState)(e.isStudent),a=Object(i.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(!1),s=Object(i.a)(o,2),u=s[0],m=s[1],d=Object(n.useState)(null),p=Object(i.a)(d,2),f=p[0],v=p[1],b=R.a.useForm(),h=Object(i.a)(b,1)[0],g=Object(n.useContext)(E).onSignIn;Object(n.useEffect)((function(){l(e.isStudent)}),[e.isStudent]);var y=function(){var e=Object(P.a)(D.a.mark((function e(t){var a,n,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),a=c?"/students":"/tutors",n={username:t.username,password:t.password,email:t.email,name:t.name},e.next=6,G.post(a+"/register",n);case 6:r=e.sent,m(!1),g(r.data.account),localStorage.setItem("remember",!0),window.location.reload(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),m(!1),v(e.t0.response.data.message);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),C=r.a.createElement("div",{className:F.a.registerWelcomeContent},r.a.createElement("img",{className:F.a.welcomeImg,draggable:!1,src:Y.a,alt:""}),r.a.createElement("h3",null,"Experience new way of studying English"),r.a.createElement("h4",null,"Improve your English anywhere anytime"),r.a.createElement("h4",null,"Learn from interesting people around the world")),O=r.a.createElement("div",{className:F.a.registerWelcomeContent},r.a.createElement("img",{className:F.a.welcomeImg,draggable:!1,src:W.a,alt:""}),r.a.createElement("h3",null,"Tutoring with Mirage is fun & rewarding"),r.a.createElement("h4",null,"No experience necessary"),r.a.createElement("h4",null,"Share your knowledge with people and get paid"));return r.a.createElement(M.a,{visible:e.isVisible,footer:null,title:c?"Register as student":"Register as tutor",onCancel:function(){h.resetFields(),e.onClose()},width:"800px"},r.a.createElement("div",{className:F.a.registerContent},r.a.createElement("div",{className:F.a.registerWelcome},c?r.a.createElement("div",null,C):r.a.createElement("div",null,O)),r.a.createElement("div",{className:F.a.formWrapper},f?r.a.createElement(A.a,{style:{marginBottom:"15px"},message:f,type:"error",showIcon:!0,banner:!0,closable:!0,afterClose:function(){return v(null)}}):null,r.a.createElement(R.a,Object.assign({name:"register",onFinish:y,scrollToFirstError:!0,className:F.a.registerForm,form:h},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}}),r.a.createElement(R.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]},r.a.createElement(B.a,null)),r.a.createElement(R.a.Item,{name:"username",label:"Username",rules:[{required:!0,message:"Please input your username!",whitespace:!1}]},r.a.createElement(B.a,null)),r.a.createElement(R.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please input your password!"}],hasFeedback:!0},r.a.createElement(B.a.Password,null)),r.a.createElement(R.a.Item,{name:"confirm",label:"Confirm Password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject("The two passwords that you entered do not match!"):Promise.resolve()}}}]},r.a.createElement(B.a.Password,null)),r.a.createElement(R.a.Item,{name:"name",label:"Full name",rules:[{required:!0,message:"Please input your fullname!",whitespace:!0}]},r.a.createElement(B.a,null)),r.a.createElement(R.a.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},r.a.createElement(_.a,{type:"primary",htmlType:"submit",className:F.a.registerButton,shape:"round",loading:u},"Register"),r.a.createElement("p",{className:F.a.switchModeWrapper},"Or",r.a.createElement("span",{onClick:function(){l(!c)},className:F.a.switchMode}," become a ",c?"tutor":"student"," instead")),r.a.createElement("p",{className:F.a.switchModeWrapper},"Already have an account? ",r.a.createElement("span",{onClick:function(){e.onClose(),e.onSwitchSignIn()},className:F.a.switchMode}," Sign in")))))))}var q=a(155),K=a(735),J=a(734),Q=a(156),Z=a.n(Q);function $(e){var t=e.isVisible,a=e.onClose,c=e.onSwitchRegister,l=e.onSwitchForgotPass,o=R.a.useForm(),s=Object(i.a)(o,1)[0],u=Object(n.useState)(!1),m=Object(i.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(null),v=Object(i.a)(f,2),b=v[0],h=v[1],g=Object(n.useContext)(E).onSignIn,y=function(){var e=Object(P.a)(D.a.mark((function e(t){var a,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),a={user:t.user,password:t.password,remember:t.remember},e.next=5,G.post("/accounts/sign-in",a);case 5:n=e.sent,p(!1),g(n.data.account),window.location.reload(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),p(!1),h(e.t0.response.data.message);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(M.a,{visible:t,footer:null,onCancel:function(){s.resetFields(),a()},title:"Sign in",width:"400px"},b?r.a.createElement(A.a,{style:{marginBottom:"15px"},message:b,type:"error",showIcon:!0,banner:!0,closable:!0,afterClose:function(){return h(null)}}):null,r.a.createElement(R.a,{name:"normal_sign_in",className:Z.a.signInForm,initialValues:{remember:!0},onFinish:y,form:s},r.a.createElement(R.a.Item,{name:"user",rules:[{required:!0,message:"Please input your username or email!"}]},r.a.createElement(B.a,{prefix:r.a.createElement(K.a,{className:"site-form-item-icon"}),placeholder:"Username or email"})),r.a.createElement(R.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}]},r.a.createElement(B.a,{prefix:r.a.createElement(J.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})),r.a.createElement(R.a.Item,null,r.a.createElement(R.a.Item,{name:"remember",valuePropName:"checked",noStyle:!0},r.a.createElement(q.a,null,"Remember me")),r.a.createElement("p",{onClick:function(){a(),l()},className:Z.a.signInForgot},"Forgot password?")),r.a.createElement(R.a.Item,null,r.a.createElement(_.a,{type:"primary",htmlType:"submit",className:Z.a.signInButton,shape:"round",loading:d},"Sign in"),"Don't have an account? ",r.a.createElement("span",{className:Z.a.registerNow,onClick:function(){a(),c(!0)}},"Register!"))))}var X=a(344),ee=a.n(X);function te(e){var t=e.isVisible,a=e.onClose,c=R.a.useForm(),l=Object(i.a)(c,1)[0],o=Object(n.useState)(!1),s=Object(i.a)(o,2),u=s[0],m=s[1],d=Object(n.useContext)(E).account,p=function(){var e=Object(P.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),e.next=4,G.post("/accounts/reset-password",{user:t.user});case 4:m(!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),m(!1),alert(e.t0.response.data.message);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),f=d?d.email:null;return r.a.createElement(M.a,{visible:t,footer:null,title:"Reset your password",width:"350px",onCancel:function(){l.resetFields(),a()}},r.a.createElement(R.a,{name:"forgot_password",form:l,onFinish:p,initialValues:{user:f}},r.a.createElement(R.a.Item,{name:"user",rules:[{required:!0,message:"Please input your username or email!"}]},r.a.createElement(B.a,{prefix:r.a.createElement(K.a,{className:"site-form-item-icon"}),placeholder:"Enter your username or email"})),r.a.createElement(R.a.Item,null,r.a.createElement(_.a,{type:"primary",htmlType:"submit",shape:"round",loading:u,className:ee.a.submitBtn},"Submit"))))}var ae=a(199),ne=a.n(ae),re=a(189),ce=a.n(re);function le(){return r.a.createElement("div",{className:ne.a.headerWrapper},r.a.createElement("img",{className:ne.a.headerIcon,src:ce.a,draggable:!1,alt:""}),r.a.createElement("h1",{className:ne.a.headerTitle},"MIRAGE"))}var oe=g.a.Header,se=g.a.Content;function ie(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(i.a)(l,2),s=o[0],u=o[1],m=Object(n.useState)(!1),d=Object(i.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!0),v=Object(i.a)(E,2),b=v[0],C=v[1],O=function(e){C(e),c(!0)};return r.a.createElement(g.a,null,r.a.createElement($,{isVisible:s,onClose:function(){return u(!1)},onSwitchRegister:O,onSwitchForgotPass:function(){return f(!0)}}),r.a.createElement(H,{isVisible:a,onClose:function(){c(!1)},isStudent:b,onSwitchSignIn:function(){return u(!0)}}),r.a.createElement(te,{isVisible:p,onClose:function(){return f(!1)}}),r.a.createElement(oe,null,r.a.createElement("div",{className:h.a.headerContent},r.a.createElement(le,null),r.a.createElement("div",{className:h.a.userButtonContainer},r.a.createElement(_.a,{className:h.a.userButton,type:"secondary",shape:"round",onClick:function(){return u(!0)}},"Sign in"),r.a.createElement(_.a,{className:h.a.userButton,type:"primary",shape:"round",onClick:function(){return O(!0)}},"Register")))),r.a.createElement(se,null,r.a.createElement("div",{className:h.a.defaultBody},r.a.createElement("div",{className:h.a.introContainer},r.a.createElement("img",{className:h.a.introImg,draggable:!1,src:T.a,alt:""}),r.a.createElement("div",{className:h.a.introContent},r.a.createElement("p",{className:h.a.welcomeText},"Welcome to Mirage!"),r.a.createElement("p",{className:h.a.welcomeDescription},"\u201cGo on, say something in English!\u201d"),r.a.createElement(_.a,{className:h.a.registerButton,type:"primary",shape:"round",onClick:function(){return O(!0)}},"STUDY NOW"),r.a.createElement(y.a,{style:{width:"300px"}},"OR"),r.a.createElement(_.a,{className:h.a.registerButton,type:"secondary",shape:"round",onClick:function(){return O(!1)}},"BECOME TUTOR"))))),r.a.createElement(I,null))}var ue=a(715),me=a(117),de=a(195),pe=a(248),fe=a.n(pe),Ee=a(740),ve=a(739),be=a(738),he=a(759),ge=a(758),_e=a(755),ye=a(757),Ce=a(249),Oe=a.n(Ce),we=Object.freeze({ADMIN:1,TUTOR:2,STUDENT:3}),xe=Object.freeze({ACTIVE:1,INACTIVE:0}),Se=Object.freeze({VERIFIED:1,UNVERIFIED:0}),Ne=Object.freeze({ACCEPTED:1,PENDING:2,REJECTED:3}),Ie="https://mirage.social/",je=Object.freeze({INIT:"init",REQUEST:"request",CALL:"call",END:"end",DISCONNECT:"disconnect",GET_ONLINE_TUTORS:"get_online_tutors",LEAVE:"leave",RECORD_STUDENT:"record_student",RECORD_TUTOR:"record_tutor",SAVE_VIDEOS:"save_videos",CREATE_CALL_HISTORY:"create_call_history",GET_ONLINE_STUDENTS:"get_online_students"}),Te=Object.freeze({AVAILABLE:1,BUSY:0,OFFLINE:2}),ke=Object.freeze({COMPLETED:1,PENDING:2,CANCELED:3}),De=Object.freeze({NORMAL:1,SILVER:2,GOLD:3,PLATIUM:4}),Pe=["Nudity","Harassment","Spam","Hate speech","Something else"],Re=Object.freeze({RESOLVED:1,PENDING:2,CANCELLED:3}),Me=(Object.freeze({COUNTED:1,UNCOUNTED:0}),Object.freeze({COMPLETED:1,PENDING:2,CANCELED:3})),Ae=Object.freeze({FAVORITE:1,RECOMMEND:2});function Be(e){var t=e.isVisible,a=e.onForgot,c=e.onClose,l=R.a.useForm(),o=Object(i.a)(l,1)[0],s=Object(n.useState)(!1),u=Object(i.a)(s,2),m=u[0],d=u[1],p=Object(n.useContext)(E).account,f=function(){var e=Object(P.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!0),a={oldPassword:t.oldpassword,newPassword:t.password},e.next=5,G.post("/accounts/"+p.id+"/change-password",a);case 5:d(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),d(!1),alert(e.t0.response.data.message);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){o.resetFields(),c()};return r.a.createElement(M.a,{visible:t,footer:null,title:"Change your password",onCancel:v,width:"500px"},r.a.createElement(R.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:16}},{name:"change-password",onFinish:f,form:o}),r.a.createElement(R.a.Item,{name:"oldpassword",label:"Current password",rules:[{required:!0,message:"Please input your current password!"}]},r.a.createElement(B.a.Password,null)),r.a.createElement(R.a.Item,{name:"password",label:"New password",rules:[{required:!0,message:"Please input your new password!"}],hasFeedback:!0},r.a.createElement(B.a.Password,null)),r.a.createElement(R.a.Item,{name:"confirm",label:"Retype password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject("The two passwords that you entered do not match!"):Promise.resolve()}}}]},r.a.createElement(B.a.Password,null)),r.a.createElement(R.a.Item,{wrapperCol:{offset:8,span:16}},r.a.createElement(_.a,{type:"primary",htmlType:"submit",className:Oe.a.registerButton,loading:m},"Update password"),p.role===we.ADMIN?null:r.a.createElement("span",{className:Oe.a.forgotPass,onClick:function(){v(),a()}},"Forgot password?"))))}var Le=a(200),Fe=a.n(Le);function Ve(e){var t=e.collapsed;return r.a.createElement("div",{className:Fe.a.logoContainer},r.a.createElement("img",{src:ce.a,alt:"",className:Fe.a.logo,draggable:!1}),t?null:r.a.createElement("p",{className:Fe.a.logoText},"MIRAGE"))}var Ye=a(119),Ue=a.n(Ye),We=a(154),ze=a(722),Ge=a(190),He=a(394),qe=a(727),Ke=a(721),Je=a(766),Qe=a(765),Ze=a(52),$e=a.n(Ze),Xe=a(17),et=a.n(Xe),tt=function(e){var t=(e/1e3).toFixed(0),a=Math.floor(t/60),n="";return a>59&&(a=(a-=60*(n=(n=Math.floor(a/60))>=10?n:"0"+n))>=10?a:"0"+a),t=(t=Math.floor(t%60))>=10?t:"0"+t,""!==n?n+":"+a+":"+t:a+":"+t},at=We.a.Option,nt=ze.a.Panel;function rt(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(i.a)(l,2),s=o[0],u=o[1],m=Object(n.useState)({account:{email:null}}),d=Object(i.a)(m,2),p=d[0],f=d[1],v=Object(n.useContext)(E).account,b=Object(n.useState)(!1),h=Object(i.a)(b,2),g=h[0],y=h[1],C=Object(n.useState)([]),O=Object(i.a)(C,2),w=O[0],x=O[1],S=function(){var e=Object(P.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(!0),e.next=4,G.get("/students/"+v.student.id);case 4:t=e.sent,f(t.data.student),c(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),c(!1),alert(e.t0.response.data.message);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){S()}),[]);var N=p&&p.avatar?r.a.createElement(ue.a,{src:Ie+p.avatar,size:100}):r.a.createElement(ue.a,{icon:r.a.createElement(K.a,null),size:100}),I=function(){var e=Object(P.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!0),e.next=4,G.put("/students/"+p.id,t);case 4:S(),u(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),u(!1),alert(e.t0.response.data.message);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),j={onRemove:function(e){x([])},beforeUpload:function(e){return("image/jpeg"===e.type||"image/png"===e.type)&&x([e]),!1},fileList:w},T=function(){var e=Object(P.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),(t=new FormData).append("avatar",w[0]),e.next=6,G("/students/avatar/"+p.account.username,{method:"POST",data:t});case 6:return e.next=8,S();case 8:window.location.reload(!1),y(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),y(!1),alert(e.t0.response.data.message);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(P.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.post("/accounts/resend-verify",{email:p.account.email});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert(e.t0.response.data.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Ge.a,{spinning:a},r.a.createElement("div",{className:Ue.a.profile},r.a.createElement("div",{className:Ue.a.accountInfoContainer},N,r.a.createElement("div",{className:Ue.a.accountInfo},r.a.createElement("p",{className:Ue.a.name},p.name),r.a.createElement("p",null,"Email: ",p.account.email),r.a.createElement("p",null,"Remaining time: ",tt(p.remaining_time)),v.verification?r.a.createElement(He.a,{color:"success"},"Verified"):r.a.createElement("span",null,r.a.createElement(He.a,{color:"default"},"Unverified"),r.a.createElement(_.a,{type:"link",onClick:k},"Resend confirmation email")))),r.a.createElement("div",{className:Ue.a.collapse},p.name?r.a.createElement(R.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}}},{onFinish:I,initialValues:{name:p.name,phone:p.phone,birthdate:p.birthdate?et()(p.birthdate):void 0,address:p.address,student_type:p.student_type?p.student_type:void 0,student_lvl:p.student_lvl?p.student_lvl:void 0,accent:p.accent?p.accent:void 0,specialities:p.specialities?JSON.parse(p.specialities):void 0,teaching_styles:p.teaching_styles?JSON.parse(p.teaching_styles):void 0}}),r.a.createElement(ze.a,{defaultActiveKey:["1","2"]},r.a.createElement(nt,{header:"Basic info",key:"1"},r.a.createElement(R.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please enter your name"}]},r.a.createElement(B.a,{placeholder:"Your fullname",value:p.name})),r.a.createElement(R.a.Item,{name:"phone",label:"Phone"},r.a.createElement(B.a,{placeholder:"Your phone number (optional)"})),r.a.createElement(R.a.Item,{name:"birthdate",label:"Birthdate"},r.a.createElement(qe.a,null)),r.a.createElement(R.a.Item,{name:"avatar",label:"Upload avatar"},r.a.createElement(Ke.a,Object.assign({},j,{listType:"picture-card"}),r.a.createElement(_.a,{icon:r.a.createElement(Je.a,null)},"Change avatar"))),r.a.createElement(R.a.Item,{wrapperCol:{offset:5,span:16}},r.a.createElement(_.a,{disabled:w.length<=0,onClick:T,loading:g,style:{width:"159px"}},r.a.createElement(Qe.a,null)," Upload avatar"))),r.a.createElement(nt,{header:"Study preferences",key:"2"},r.a.createElement(A.a,{style:{marginBottom:"15px"},message:"Complete your profile to help finding appropriate tutors easier",type:"info",showIcon:!0}),r.a.createElement(R.a.Item,{name:"student_type",label:"Type"},r.a.createElement(We.a,{placeholder:"What type of student are you?"},$e.a.STUDENT_TYPE.map((function(e){return r.a.createElement(at,{value:e,key:e},e)})))),r.a.createElement(R.a.Item,{name:"student_lvl",label:"Your level"},r.a.createElement(We.a,{placeholder:"Your English level"},$e.a.STUDENT_LVL.map((function(e){return r.a.createElement(at,{value:e,key:e},e)})))),r.a.createElement(R.a.Item,{name:"accent",label:"Favorite accent"},r.a.createElement(We.a,{placeholder:"What is your favorite English accent?"},$e.a.ENG_ACCENT.map((function(e){return r.a.createElement(at,{value:e,key:e},e)})))),r.a.createElement(R.a.Item,{name:"specialities",label:"Interests"},r.a.createElement(We.a,{mode:"multiple",placeholder:"What do you want to study?"},$e.a.SPECIALITIES.map((function(e){return r.a.createElement(at,{value:e,key:e},e)})))),r.a.createElement(R.a.Item,{name:"teaching_styles",label:"Teaching styles"},r.a.createElement(We.a,{mode:"multiple",placeholder:"Which styles of teaching do you prefer?"},$e.a.TEACHING_STYLE.map((function(e){return r.a.createElement(at,{value:e,key:e},e)})))))),r.a.createElement("div",{className:Ue.a.submitWrapper},r.a.createElement(_.a,{type:"primary",htmlType:"submit",loading:s},"Update profile"))):null)))}var ct=a(253),lt=a.n(ct),ot=a(756),st=a(264),it=a(716),ut=a(718),mt=a(254),dt=a.n(mt),pt=a(762);function ft(){var e=Object(n.useContext)(E).account,t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(!1),s=Object(i.a)(o,2),u=s[0],m=s[1],d=function(){var t=Object(P.a)(D.a.mark((function t(){var a;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m(!0),t.prev=1,t.next=4,G.get("/subscriptions/"+e.student.id);case 4:a=t.sent,l(a.data.subscriptions),m(!1),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),alert(t.t0.response.data.message),m(!1);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}(),p=function(){var e=Object(P.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,G.put("/subscriptions/"+t,{state:ke.CANCELED});case 4:d(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),alert(e.t0.response.data.message),m(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),f=[{title:"Date",dataIndex:"createdAt",render:function(e){return r.a.createElement("div",null,et()(e).format("MMMM Do YYYY, h:mm:ss a"))}},{title:"Tier",dataIndex:"tier",render:function(e){return e===De.SILVER?r.a.createElement(He.a,{color:"#C0C0C0"},"Silver"):e===De.GOLD?r.a.createElement(He.a,{color:"#DAA520"},"Gold"):e===De.PLATIUM?r.a.createElement(He.a,{color:"processing"},"Platium"):r.a.createElement(He.a,null,"Normal")}},{title:"Duration",dataIndex:"duration",render:function(e){return r.a.createElement("div",null,e/6e4," mins")}},{title:"Price",dataIndex:"price",render:function(e){return r.a.createElement("div",null,e,"$")}},{title:"State",dataIndex:"state",render:function(e){return e===ke.COMPLETED?r.a.createElement(He.a,{color:"success"},"Completed"):e===ke.PENDING?r.a.createElement(He.a,{color:"blue"},"Pending"):r.a.createElement(He.a,{color:"error"},"Cancelled")}},{title:"Action",dataIndex:"state",render:function(e,t){return t.state===ke.PENDING?r.a.createElement(it.a,{title:"Do you want to cancel this request?",okText:"Yes",cancelText:"No",className:dt.a.cancelBtn,onConfirm:function(){return p(t.id)}},"Cancel"):r.a.createElement("div",null,"N/A")}}];return Object(n.useEffect)((function(){d()}),[]),r.a.createElement(Ge.a,{spinning:u},r.a.createElement(_.a,{className:dt.a.reload,onClick:d,icon:r.a.createElement(pt.a,null)},"Reload"),r.a.createElement(ut.a,{columns:f,dataSource:c,pagination:!0,rowKey:"id"}))}var Et=a(28),vt=a.n(Et),bt=a(140),ht=a(64),gt=a(730),_t=a(361),yt=a.n(_t),Ct=a(362),Ot=a.n(Ct),wt=a(363),xt=a.n(wt),St=a(364),Nt=a.n(St);function It(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(i.a)(l,2),s=o[0],u=o[1],m=Object(n.useState)(null),d=Object(i.a)(m,2),p=d[0],f=d[1],v=Object(n.useState)(null),b=Object(i.a)(v,2),h=b[0],g=b[1],C=Object(n.useContext)(E).account,O=function(){var e=Object(P.a)(D.a.mark((function e(t,a){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.prev=1,e.next=4,G.post("/subscriptions",{duration:60*t*1e3,studentId:C.student.id,tier:a});case 4:c(!1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),c(!1),alert(e.t0.response.data.message);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){(function(){var e=Object(P.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,G.get("/settings");case 4:e.sent.data.settings.forEach((function(e){"discount rate"===e.type&&f(JSON.parse(e.content)),"student price"===e.type&&g(Number(e.content))})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.response.data.message);case 11:u(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement("div",{className:vt.a.extendSub},r.a.createElement(Ge.a,{spinning:s},p&&h?r.a.createElement(bt.a,{gutter:24},r.a.createElement(ht.a,{span:6},r.a.createElement(gt.a,null,r.a.createElement("div",{className:vt.a.extendSubContent},r.a.createElement("div",{className:vt.a.subTier},"Normal"),r.a.createElement("div",{className:vt.a.extendDuration},"60 minutes"),r.a.createElement(y.a,null),r.a.createElement("img",{className:vt.a.tierImage,src:yt.a,alt:"",draggable:"false"}),r.a.createElement("div",{className:vt.a.extendPrice},Number(60*h*p.NORMAL).toFixed(2),"$"),r.a.createElement(it.a,{placement:"top",title:"Do you want to create purchase request?",onConfirm:function(){return O(60,De.NORMAL)},okText:"Yes",cancelText:"No"},r.a.createElement(_.a,{type:"primary",shape:"round",loading:a},"Purchase"))))),r.a.createElement(ht.a,{span:6},r.a.createElement(gt.a,null,r.a.createElement("div",{className:vt.a.extendSubContent},r.a.createElement("div",{className:vt.a.subTier},"Silver"),r.a.createElement("div",{className:vt.a.extendDuration},"120 minutes"),r.a.createElement(y.a,null),r.a.createElement("img",{className:vt.a.tierImage,src:Ot.a,alt:"",draggable:"false"}),r.a.createElement("div",{className:vt.a.extendPrice},Number(120*h*p.SILVER).toFixed(2),"$"," ",r.a.createElement("span",{className:vt.a.extendSave},"(Save ",100-100*p.SILVER,"%)")),r.a.createElement(it.a,{placement:"top",title:"Do you want to create purchase request?",onConfirm:function(){return O(120,De.SILVER)},okText:"Yes",cancelText:"No"},r.a.createElement(_.a,{type:"primary",shape:"round",loading:a},"Purchase"))))),r.a.createElement(ht.a,{span:6},r.a.createElement(gt.a,null,r.a.createElement("div",{className:vt.a.extendSubContent},r.a.createElement("div",{className:vt.a.subTier},"Gold"),r.a.createElement("div",{className:vt.a.extendDuration},"480 minutes"),r.a.createElement(y.a,null),r.a.createElement("img",{className:vt.a.tierImage,src:xt.a,alt:"",draggable:"false"}),r.a.createElement("div",{className:vt.a.extendPrice},Number(480*h*p.GOLD).toFixed(2),"$"," ",r.a.createElement("span",{className:vt.a.extendSave},"(Save ",100-100*p.GOLD,"%)")),r.a.createElement(it.a,{placement:"top",title:"Do you want to create purchase request?",onConfirm:function(){return O(480,De.GOLD)},okText:"Yes",cancelText:"No"},r.a.createElement(_.a,{type:"primary",shape:"round",loading:a},"Purchase"))))),r.a.createElement(ht.a,{span:6},r.a.createElement(gt.a,null,r.a.createElement("div",{className:vt.a.extendSubContent},r.a.createElement("div",{className:vt.a.subTier},"Platium"),r.a.createElement("div",{className:vt.a.extendDuration},"720 minutes"),r.a.createElement(y.a,null),r.a.createElement("img",{className:vt.a.tierImage,src:Nt.a,alt:"",draggable:"false"}),r.a.createElement("div",{className:vt.a.extendPrice},Number(720*h*p.PLATIUM).toFixed(2),"$"," ",r.a.createElement("span",{className:vt.a.extendSave},"(Save ",100-100*p.PLATIUM,"%)")),r.a.createElement(it.a,{placement:"top",title:"Do you want to create purchase request?",onConfirm:function(){return O(720,De.PLATIUM)},okText:"Yes",cancelText:"No"},r.a.createElement(_.a,{type:"primary",shape:"round",loading:a},"Purchase")))))):null))}var jt=st.a.TabPane;function Tt(){return r.a.createElement("div",{className:lt.a.subscriptions},r.a.createElement(st.a,{defaultActiveKey:"extend",type:"card"},r.a.createElement(jt,{tab:r.a.createElement("span",null,r.a.createElement(ot.a,null),"Extend subscriptions"),key:"extend"},r.a.createElement(It,null)),r.a.createElement(jt,{tab:r.a.createElement("span",null,r.a.createElement(_e.a,null),"Subscriptions history"),key:"history",className:lt.a.tabPaneHistory},r.a.createElement(ft,null))))}var kt=a(366),Dt=a.n(kt),Pt=(new u.a).get("access_token"),Rt=Dt()("".concat("https://mirage.social/","?token=").concat(Pt)),Mt=a(55),At=a(68),Bt=a(135),Lt=a(127),Ft=a(136),Vt=a(115),Yt=a.n(Vt),Ut=function(){function e(){Object(Mt.a)(this,e),this.events={}}return Object(At.a)(e,[{key:"emit",value:function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return this.events[e]&&this.events[e].forEach((function(e){return e.apply(void 0,a)})),this}},{key:"on",value:function(e,t){return this.events[e]?this.events[e].push(t):this.events[e]=[t],this}},{key:"off",value:function(e,t){if(e&&Yt.a.isFunction(t)){var a=this.events[e],n=a.findIndex((function(e){return e===t}));a.splice(n,1)}else this.events[e]=[];return this}}]),e}(),Wt=function(e){function t(){return Object(Mt.a)(this,t),Object(Bt.a)(this,Object(Lt.a)(t).apply(this,arguments))}return Object(Ft.a)(t,e),Object(At.a)(t,[{key:"start",value:function(){var e=this;return navigator.mediaDevices.getUserMedia({video:{facingMode:"user",height:{min:360,ideal:720,max:1080}},audio:{echoCancellation:!1}}).then((function(t){e.stream=t,e.emit("stream",t)})).catch((function(e){e instanceof DOMException?alert("Cannot open webcam and/or microphone"):alert(e)})),this}},{key:"toggle",value:function(e,t){var a=arguments.length;return this.stream&&this.stream["get".concat(e,"Tracks")]().forEach((function(e){var n=2===a?t:!e.enabled;Yt.a.set(e,"enabled",n)})),this}},{key:"stop",value:function(){return this.stream&&this.stream.getTracks().forEach((function(e){return e.stop()})),this}}]),t}(Ut),zt={iceServers:[{urls:["stun:stun.l.google.com:19302"]}]},Gt=function(e){function t(e){var a;return Object(Mt.a)(this,t),(a=Object(Bt.a)(this,Object(Lt.a)(t).call(this))).pc=new RTCPeerConnection(zt),a.pc.onicecandidate=function(e){return Rt.emit("call",{to:a.friendID,candidate:e.candidate})},a.pc.ontrack=function(e){return a.emit("peerStream",e.streams[0])},a.mediaDevice=new Wt,a.friendID=e,a}return Object(Ft.a)(t,e),Object(At.a)(t,[{key:"start",value:function(e,t){var a=this;return this.mediaDevice.on("stream",(function(t){t.getTracks().forEach((function(e){a.pc.addTrack(e,t)})),a.emit("localStream",t),e?Rt.emit("request",{to:a.friendID}):a.createOffer()})).start(t),this}},{key:"stop",value:function(e){return e&&Rt.emit("end",{to:this.friendID}),this.mediaDevice.stop(),this.pc&&this.pc.close(),this.pc=null,this.off(),this}},{key:"createOffer",value:function(){return this.pc.createOffer().then(this.getDescription.bind(this)).catch((function(e){return alert(e)})),this}},{key:"createAnswer",value:function(){return this.pc.createAnswer().then(this.getDescription.bind(this)).catch((function(e){return alert(e)})),this}},{key:"getDescription",value:function(e){return this.pc.setLocalDescription(e),Rt.emit("call",{to:this.friendID,sdp:e}),this}},{key:"setRemoteDescription",value:function(e){var t=new RTCSessionDescription(e);return this.pc.setRemoteDescription(t),this}},{key:"addIceCandidate",value:function(e){if(e){var t=new RTCIceCandidate(e);this.pc.addIceCandidate(t)}return this}}]),t}(Ut),Ht=a(192),qt=a(752),Kt=a(751),Jt=a(750),Qt=a(749),Zt=a(747),$t=a(98),Xt=a.n($t),ea=a(157),ta=a.n(ea);function aa(e){var t=e.peerSrc,a=e.localSrc,c=e.config,l=e.mediaDevice,o=e.endCall,s=e.callWindow,u=Object(n.useRef)(null),m=Object(n.useRef)(null),d=Object(n.useState)(c.video),p=Object(i.a)(d,2),f=p[0],E=p[1],v=Object(n.useState)(c.audio),b=Object(i.a)(v,2),h=b[0],g=b[1];Object(Ht.useBeforeunload)((function(e){e.preventDefault(),o(!0)})),Object(n.useEffect)((function(){u.current&&t&&(u.current.srcObject=t),m.current&&a&&(m.current.srcObject=a)}),[a,t]),Object(n.useEffect)((function(){l&&(l.toggle("Video",f),l.toggle("Audio",h))}));var y=function(e){"video"===e&&(E(!f),l.toggle("Video")),"audio"===e&&(g(!h),l.toggle("Audio"))};return s?r.a.createElement("div",{className:Xt.a.callWindowWrapper},r.a.createElement("div",{className:Xt.a.callWindow},r.a.createElement("div",{className:Xt.a.videoScreenContainer},r.a.createElement("video",{className:Xt.a.videoScreen,ref:m,autoPlay:!0,muted:!0}),t&&r.a.createElement("video",{className:Xt.a.videoScreen,ref:u,autoPlay:!0})),t&&r.a.createElement("div",null,r.a.createElement(ta.a,{formatValue:function(e){return"".concat(e<10?"0".concat(e):e)},lastUnit:"h",className:Xt.a.callTime},r.a.createElement(ta.a.Hours,null),":",r.a.createElement(ta.a.Minutes,null),":",r.a.createElement(ta.a.Seconds,null))),r.a.createElement("div",{className:Xt.a.videoControl},r.a.createElement(_.a,{shape:"circle",type:f?"primary":"danger",icon:f?r.a.createElement(qt.a,null):r.a.createElement(Kt.a,null),onClick:function(){return y("video")},size:"large"}),r.a.createElement(_.a,{shape:"circle",type:h?"primary":"danger",icon:h?r.a.createElement(Jt.a,null):r.a.createElement(Qt.a,null),onClick:function(){return y("audio")},size:"large"}),r.a.createElement(_.a,{shape:"circle",type:"danger",onClick:function(){return o(!0)},icon:r.a.createElement(Zt.a,null),size:"large"})))):null}var na=a(141),ra=a.n(na);function ca(e){var t=e.callModal,a=e.callFrom,n=e.startCall,c=e.rejectCall;Object(Ht.useBeforeunload)((function(e){c()}));var l=function(e){var t={audio:!0,video:e};return function(){return n(!1,a.username,t)}};return t?r.a.createElement("div",{className:ra.a.callModalWrapper},r.a.createElement("div",{className:ra.a.callModal},r.a.createElement("div",{className:ra.a.caller},a.student&&a.student.avatar?r.a.createElement(ue.a,{src:Ie+a.student.avatar,size:50}):r.a.createElement(ue.a,{icon:r.a.createElement(K.a,null),size:50}),a.student&&r.a.createElement("span",{className:ra.a.callerTxt},"".concat(a.student.name," is calling..."))),r.a.createElement("div",{className:ra.a.controlBtns},r.a.createElement(_.a,{shape:"round",type:"primary",icon:r.a.createElement(qt.a,null),onClick:l(!0),size:"large"},"Video call"),r.a.createElement(_.a,{shape:"round",type:"primary",icon:r.a.createElement(Jt.a,null),onClick:l(!1),size:"large"},"Audio call"),r.a.createElement(_.a,{shape:"round",type:"danger",onClick:c,icon:r.a.createElement(Zt.a,null),size:"large"},"Reject call")))):null}var la=a(729),oa=a(769),sa=a(768),ia=a(767),ua=a(99),ma=a.n(ua),da=a(82),pa=a.n(da),fa=a(91),Ea=a(724),va=a(742),ba=a(741);function ha(e){var t=e.callWithVideo,a=e.openDetailModal,n=e.item,c=e.openReviewlModal,l=e.getPreferences,o=function(){var e=Object(P.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.delete("/preferences/"+n.preId);case 3:l(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0.response);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(gt.a,{actions:[r.a.createElement(fa.a,{title:"Video call"},r.a.createElement(qt.a,{onClick:function(){return t(!0,n)}})),r.a.createElement(fa.a,{title:"Audio call"},r.a.createElement(Jt.a,{onClick:function(){return t(!1,n)}})),r.a.createElement(fa.a,{title:"Profile"},r.a.createElement(K.a,{onClick:function(){return a(n)}}))]},r.a.createElement("div",{className:pa.a.tutorCard},r.a.createElement("div",{className:pa.a.tutorInfo},r.a.createElement("div",null,n.profile.avatar?r.a.createElement(ue.a,{src:Ie+n.profile.avatar,size:80}):r.a.createElement(ue.a,{icon:r.a.createElement(K.a,null),size:80})),r.a.createElement("div",{className:pa.a.tutorInfoDetail},r.a.createElement("div",{className:pa.a.tutorName},n.profile.name,n.status===Te.AVAILABLE?r.a.createElement(fa.a,{title:"Online"},r.a.createElement(va.a,{style:{color:"#52c41a",fontSize:"12px",marginLeft:"3px"}})):null,n.status===Te.BUSY?r.a.createElement(fa.a,{title:"Busy"},r.a.createElement(ba.a,{style:{color:"red",fontSize:"12px",marginLeft:"3px"}})):null,n.status===Te.OFFLINE?r.a.createElement(fa.a,{title:"Offline"},r.a.createElement(ba.a,{style:{color:"gray",fontSize:"12px",marginLeft:"3px"}})):null),r.a.createElement("div",null,n.profile.certificates&&JSON.parse(n.profile.certificates.length)>0?r.a.createElement(He.a,null,"Teaching certificates"):null),n.profile.review?r.a.createElement(fa.a,{placement:"bottomRight",title:"Click to show reviews"},r.a.createElement("div",{onClick:function(){return c(n)},className:pa.a.reviewWrapper},r.a.createElement(Ea.a,{disabled:!0,defaultValue:Number((Math.round(2*n.profile.review.avg)/2).toFixed(1)),allowHalf:!0}),r.a.createElement("span",{className:pa.a.reviewCount},"/ ",n.profile.review.count," review(s)"))):r.a.createElement("p",{className:pa.a.viewReviews,onClick:function(){return c(n)}},"View reviews"),n.isFav?r.a.createElement("div",{className:pa.a.removeFav,onClick:function(){return o()}},"Remove"):null)),r.a.createElement("p",null,n.profile.introduction)))}var ga=a(100),_a=a.n(ga),ya=(a(110),a(36));function Ca(e){var t=e.username,a=Object(n.useRef)(null),c=Object(n.useRef)(null),l={controls:!0,width:513,height:360,fluid:!1,sources:[{src:Ie+"api/tutors/video/"+t,type:"video/webm"}],autoplay:!1};return Object(n.useEffect)((function(){return a.current=Object(ya.default)(c.current,l,(function(){var e="Using video.js "+ya.default.VERSION;ya.default.log(e)})),function(){a.current&&a.current.dispose()}}),[]),r.a.createElement("div",{"data-vjs-player":!0},r.a.createElement("video",{id:"myVideo",ref:function(e){return c.current=e},className:"video-js vjs-default-skin vjs-big-play-centered",playsInline:!0}))}var Oa=a(736),wa=a(728);function xa(e){var t=e.selected,a=e.showDetailModal,n=e.setShowDetailModal;return r.a.createElement(M.a,{title:t?t.profile.name:null,visible:a,onCancel:function(){return n(!1)},footer:null,width:"600px",destroyOnClose:!0,bodyStyle:{height:"600px",overflow:"auto"}},r.a.createElement("div",null,r.a.createElement("div",null,t?r.a.createElement("div",null,r.a.createElement("div",{className:_a.a.detailWrapper},t.profile.video?r.a.createElement("div",{className:_a.a.videoWrapper},r.a.createElement(Ca,{username:t.username})):null,t.profile.introduction),r.a.createElement("div",{className:_a.a.detailWrapper},r.a.createElement(wa.a,{bordered:!0,size:"small",column:1,title:"Teaching preferences"},r.a.createElement(wa.a.Item,{label:"Student level"},t.profile.student_lvl),r.a.createElement(wa.a.Item,{label:"Student type"},t.profile.student_type),r.a.createElement(wa.a.Item,{label:"Accent"},t.profile.accent),r.a.createElement(wa.a.Item,{label:"Fluency"},t.profile.fluency),r.a.createElement(wa.a.Item,{label:"Tutor styles"}," ",t.profile.teaching_styles?JSON.parse(t.profile.teaching_styles).map((function(e){return r.a.createElement(He.a,{key:e},e)})):null),r.a.createElement(wa.a.Item,{label:"Specialities"},t.profile.specialities?JSON.parse(t.profile.specialities).map((function(e){return r.a.createElement(He.a,{key:e},e)})):null))),r.a.createElement("div",{className:_a.a.detailWrapper},r.a.createElement(wa.a,{bordered:!0,size:"small",column:1,title:"CV"},r.a.createElement(wa.a.Item,{label:"Interests"},t.profile.interests),r.a.createElement(wa.a.Item,{label:"Education"},t.profile.education),r.a.createElement(wa.a.Item,{label:"Experience"},t.profile.experience),r.a.createElement(wa.a.Item,{label:"Profession"},t.profile.profession),r.a.createElement(wa.a.Item,{label:"Reason"},t.profile.reason))),r.a.createElement("div",{className:_a.a.detailWrapper},r.a.createElement("p",{className:_a.a.detailTitle},"Certificates"),r.a.createElement("div",{className:_a.a.uploadedCert},t.profile.certificates?JSON.parse(t.profile.certificates).map((function(e,t){return r.a.createElement("a",{key:t,href:Ie+e.path},r.a.createElement(Oa.a,null),e.originalname)})):null))):null)))}var Sa=a(78),Na=function(e){var t=0,a=0,n=0,r=0,c=0,l=0,o=e.length;return e.forEach((function(e){switch(e.rating){case 0:t++;break;case 1:a++;break;case 2:n++;break;case 3:r++;break;case 4:c++;break;case 5:l++}})),{rating0:t/o*100,rating1:a/o*100,rating2:n/o*100,rating3:r/o*100,rating4:c/o*100,rating5:l/o*100}},Ia=a(37),ja=a.n(Ia),Ta=a(391);function ka(e){var t=e.reviews;return r.a.createElement("div",{className:ja.a.reviewSummary},r.a.createElement("div",{className:ja.a.reviewOverall},r.a.createElement("div",{className:ja.a.reviewAvg},Number(t.avg).toFixed(1)),r.a.createElement(Ea.a,{disabled:!0,defaultValue:Number((Math.round(2*t.avg)/2).toFixed(1)),allowHalf:!0,style:{fontSize:"15px"}}),r.a.createElement("div",{className:ja.a.reviewNumber},r.a.createElement(K.a,{style:{marginRight:"3px"}}),t.count)),r.a.createElement("div",{className:ja.a.ratingCountList},r.a.createElement("div",{className:ja.a.ratingCount},r.a.createElement("span",{className:ja.a.rating},"5"),r.a.createElement(Ta.a,{showInfo:!1,percent:t.ratingCount.rating5})),r.a.createElement("div",{className:ja.a.ratingCount},r.a.createElement("span",{className:ja.a.rating},"4"),r.a.createElement(Ta.a,{showInfo:!1,percent:t.ratingCount.rating4})),r.a.createElement("div",{className:ja.a.ratingCount},r.a.createElement("span",{className:ja.a.rating},"3"),r.a.createElement(Ta.a,{showInfo:!1,percent:t.ratingCount.rating3})),r.a.createElement("div",{className:ja.a.ratingCount},r.a.createElement("span",{className:ja.a.rating},"2"),r.a.createElement(Ta.a,{showInfo:!1,percent:t.ratingCount.rating2})),r.a.createElement("div",{className:ja.a.ratingCount},r.a.createElement("span",{className:ja.a.rating},"1"),r.a.createElement(Ta.a,{showInfo:!1,percent:t.ratingCount.rating1})),r.a.createElement("div",{className:ja.a.ratingCount},r.a.createElement("span",{className:ja.a.rating},"0"),r.a.createElement(Ta.a,{showInfo:!1,percent:t.ratingCount.rating0}))))}var Da=a(717);function Pa(e){var t=e.review,a=e.getTutorReview,c=Object(n.useContext)(E).account,l=function(){var e=Object(P.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.delete("/reviews/"+t);case 3:a(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.response.data.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),o=null;return(c.role===we.ADMIN||c.role===we.STUDENT&&c.student.id===t.studentId)&&(o=r.a.createElement(_.a,{type:"link",danger:!0,onClick:function(){return l(t.id)}},"Delete")),r.a.createElement(Da.a,{author:t.student.name,avatar:t.student.avatar?r.a.createElement(ue.a,{src:Ie+t.student.avatar}):r.a.createElement(ue.a,{icon:r.a.createElement(K.a,null)}),content:r.a.createElement("p",null,t.comment),datetime:et()(t.createdAt).fromNow(),actions:[r.a.createElement(Ea.a,{disabled:!0,defaultValue:t.rating,style:{fontSize:"12px"}}),o]})}function Ra(e){var t=e.selected,a=e.showReviewModal,c=e.setShowReviewModal,l=Object(n.useState)(null),o=Object(i.a)(l,2),s=o[0],u=o[1],m=function(){var e=Object(P.a)(D.a.mark((function e(){var a,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.get("/reviews/"+t.profile.id);case 3:a=e.sent,n=Na(a.data.reviews),u(Object(Sa.a)({},a.data,{ratingCount:n})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0.response.data.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){t&&m()}),[t]),r.a.createElement(M.a,{title:t?t.profile.name:null,visible:a,onCancel:function(){return c(!1)},footer:null,width:"600px",destroyOnClose:!0,bodyStyle:{maxHeight:"600px",overflow:"auto"}},s?r.a.createElement("div",null,r.a.createElement(ka,{reviews:s}),r.a.createElement(la.a,{itemLayout:"horizontal",dataSource:s.reviews,renderItem:function(e){return r.a.createElement(la.a.Item,null,r.a.createElement(Pa,{review:e,getTutorReview:m}))}})):null)}var Ma=st.a.TabPane,Aa=B.a.Search;function Ba(e){var t=e.startCall,a=e.onlineTutors,c=e.setTutor,l=e.remainingTime,o=Object(n.useState)(!1),s=Object(i.a)(o,2),u=s[0],m=s[1],d=Object(n.useState)(null),p=Object(i.a)(d,2),f=p[0],v=p[1],b=Object(n.useState)(!1),h=Object(i.a)(b,2),g=h[0],_=h[1],y=Object(n.useState)([]),C=Object(i.a)(y,2),O=C[0],w=C[1],x=Object(n.useState)(""),S=Object(i.a)(x,2),N=S[0],I=S[1],j=Object(n.useState)([]),T=Object(i.a)(j,2),k=T[0],R=T[1],M=Object(n.useContext)(E).account,A=Object(n.useState)([]),B=Object(i.a)(A,2),L=B[0],F=B[1],V=Object(n.useState)([]),Y=Object(i.a)(V,2),U=Y[0],W=Y[1];Object(n.useEffect)((function(){var e=!1;w(function(t){if(""!==N){var a=[];return t.forEach((function(t){e=!1,t.profile.name.toLowerCase().includes(N)&&(e=!0),t.profile.specialities.toLowerCase().includes(N)&&(e=!0),t.profile.teaching_styles.toLowerCase().includes(N)&&(e=!0),t.profile.accent.toLowerCase().includes(N)&&(e=!0),t.profile.student_lvl.toLowerCase().includes(N)&&(e=!0),t.profile.student_type.toLowerCase().includes(N)&&(e=!0),t.profile.interests.toLowerCase().includes(N)&&(e=!0),t.profile.fluency.toLowerCase().includes(N)&&(e=!0),e&&a.push(t)})),a}return t}(a))}),[a,N]),Object(n.useEffect)((function(){z()}),[]),Object(n.useEffect)((function(){var e=[];k.forEach((function(t){if(t.type===Ae.FAVORITE){var n={preId:t.id,profile:t.tutor,status:Te.OFFLINE,username:t.tutor.account.username,isFav:!0};a.forEach((function(e){e.profile.id===t.tutorId&&(n.status=e.status)})),e.push(n)}})),F(e)}),[a,k]),Object(n.useEffect)((function(){var e=[];k.forEach((function(t){if(t.type===Ae.RECOMMEND){var n={profile:t.tutor,status:Te.OFFLINE,username:t.tutor.account.username};a.forEach((function(e){e.profile.id===t.tutorId&&(n.status=e.status)})),e.push(n)}})),W(e)}),[a,k]);var z=function(){var e=Object(P.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.get("/preferences?studentId="+M.student.id);case 3:t=e.sent,R(t.data.preferences),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.response.data.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),H=function(e,a){if(a.status===Te.AVAILABLE){c(a.profile);var n={audio:!0,video:e};t(!0,a.username,n)}else alert("This tutor is not available at the moment!")},q=function(e){v(e),m(!0)},K=function(e){v(e),_(!0)};return r.a.createElement("div",{className:ma.a.tutorList},r.a.createElement(xa,{selected:f,showDetailModal:u,setShowDetailModal:m}),r.a.createElement(Ra,{selected:f,showReviewModal:g,setShowReviewModal:_}),r.a.createElement("div",{className:ma.a.searchTool},r.a.createElement("div",null,r.a.createElement("span",{className:ma.a.remainingTimeTitle},"Remaining time: "),tt(l)),r.a.createElement("div",{className:ma.a.searchBar},r.a.createElement(Aa,{placeholder:"Search name, interests, subjects, ... ",enterButton:!0,onSearch:function(e){I(e.toLowerCase())}}))),r.a.createElement(st.a,{defaultActiveKey:"online",type:"card"},r.a.createElement(Ma,{tab:r.a.createElement("span",null,r.a.createElement(oa.a,null),"Online"),key:"online",className:ma.a.tabPane},r.a.createElement(la.a,{grid:{gutter:16,column:3},dataSource:O,renderItem:function(e){return r.a.createElement(la.a.Item,null,r.a.createElement(ha,{item:e,callWithVideo:H,openDetailModal:q,openReviewlModal:K}))}})),r.a.createElement(Ma,{tab:r.a.createElement("span",null,r.a.createElement(sa.a,null),"Favorite"),key:"favorite",className:ma.a.tabPane},r.a.createElement(la.a,{grid:{gutter:16,column:3},dataSource:L,renderItem:function(e){return r.a.createElement(la.a.Item,null,r.a.createElement(ha,{item:e,callWithVideo:H,openDetailModal:q,openReviewlModal:K,getPreferences:z}))}})),r.a.createElement(Ma,{tab:r.a.createElement("span",null,r.a.createElement(ia.a,null),"Recommend"),key:"recommend",className:ma.a.tabPane},r.a.createElement(la.a,{grid:{gutter:16,column:3},dataSource:U,renderItem:function(e){return r.a.createElement(la.a.Item,null,r.a.createElement(ha,{item:e,callWithVideo:H,openDetailModal:q,openReviewlModal:K}))}}))))}var La=a(120),Fa=a.n(La),Va=a(371),Ya=a.n(Va),Ua=a(761);function Wa(e){var t=e.showFeedback,a=e.setShowFeedBack,c=e.tutor,l=Object(n.useState)(!1),o=Object(i.a)(l,2),s=o[0],u=o[1],m=Object(n.useState)(!1),d=Object(i.a)(m,2),p=d[0],f=d[1],v=Object(n.useState)(!1),b=Object(i.a)(v,2),h=b[0],g=b[1],y=Object(n.useContext)(E).account,C=function(){var e=Object(P.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!0),a=Object(Sa.a)({},t,{studentId:y.student.id,tutorId:c.id}),e.next=5,G.post("/reviews/",a);case 5:u(!1),f(!0),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),u(!1),g(!1),alert(e.t0.response.data.message);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(M.a,{visible:t,destroyOnClose:!0,onCancel:function(){a(!1),f(!1),g(!1)},footer:!1,title:"Feedback about this tutor"},p?r.a.createElement(A.a,{message:"Review submitted",type:"success",showIcon:!0}):null,h?r.a.createElement(A.a,{message:"Fail to submit, please try again",type:"error",showIcon:!0}):null,r.a.createElement(R.a,Object.assign({},{labelCol:{span:4},wrapperCol:{span:16}},{onFinish:C}),r.a.createElement(R.a.Item,{name:"rating",label:"Rating"},r.a.createElement(Ea.a,{allowClear:!0,defaultValue:0})),r.a.createElement(R.a.Item,{name:"comment",label:"Comment",rules:[{required:!0,message:"Please input your comment"}]},r.a.createElement(B.a.TextArea,{placeholder:"Share your experience"})),r.a.createElement(R.a.Item,{wrapperCol:{offset:4,span:16}},r.a.createElement(_.a,{type:"primary",htmlType:"submit",loading:s},"Submit"))))}function za(e){var t=e.account,a=e.remainingTime,c=e.getStudent,l=Object(n.useState)(!1),o=Object(i.a)(l,2),s=o[0],u=o[1],m=Object(n.useState)(!1),d=Object(i.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)({}),v=Object(i.a)(E,2),b=v[0],h=v[1],g=Object(n.useState)(null),y=Object(i.a)(g,2),C=y[0],O=y[1],w=Object(n.useState)(null),x=Object(i.a)(w,2),S=x[0],N=x[1],I=Object(n.useRef)({}),j=Object(n.useRef)(null),T=Object(n.useRef)(null),k=Object(n.useRef)(null),R=Object(n.useRef)(0),A=Object(n.useRef)(0),B=Object(n.useState)([]),L=Object(i.a)(B,2),F=L[0],V=L[1],Y=Object(n.useRef)(null),U=Object(n.useRef)(null),W=Object(n.useState)(!1),z=Object(i.a)(W,2),H=z[0],q=z[1],K=Object(n.useState)(!1),J=Object(i.a)(K,2),Q=J[0],Z=J[1];Object(n.useEffect)((function(){return Rt.on(je.INIT,(function(){})).on(je.REQUEST,(function(e){var t=e.from;f(!0),h(t),U.current=t})).on(je.CALL,(function(e){e.sdp?(I.current.setRemoteDescription(e.sdp),"offer"===e.sdp.type&&I.current.createAnswer(),t.role===we.TUTOR&&Rt.emit(je.SAVE_VIDEOS)):I.current.addIceCandidate(e.candidate),R.current=Date.now(),t.role===we.STUDENT&&setTimeout((function(){return ee(!0)}),a)})).on(je.END,(function(){return ee(!1)})).on(je.GET_ONLINE_TUTORS,(function(e){V(e.online)})).emit(je.INIT,{account:t}),function(){X(),Rt.emit(je.LEAVE),Rt.off(je.INIT).off(je.REQUEST).off(je.CALL).off(je.END).off(je.GET_ONLINE_TUTORS)}}),[t]),Object(n.useEffect)((function(){S&&t.role===we.TUTOR&&(T.current=new MediaRecorder(S,{mimeType:"video/webm; codecs=vp9"}),T.current.ondataavailable=function(e){e.data&&e.data.size>0&&Rt.emit(je.RECORD_STUDENT,e.data)},T.current.start(1e3))}),[S,t.role]),Object(n.useEffect)((function(){C&&t.role===we.TUTOR&&(k.current=new MediaRecorder(C,{mimeType:"video/webm; codecs=vp9"}),k.current.ondataavailable=function(e){e.data&&e.data.size>0&&Rt.emit(je.RECORD_TUTOR,e.data)},k.current.start(1e3))}),[C,t.role]);var $=function(e,t,a){j.current=a,I.current=new Gt(t).on("localStream",(function(t){e||f(!1),u(!0),O(t)})).on("peerStream",(function(e){return N(e)})).start(e,a)},X=function(){Rt.emit(je.END,{to:b.username}),f(!1)},ee=function(){var e=Object(P.a)(D.a.mark((function e(a){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.role===we.TUTOR&&Rt.emit(je.CREATE_CALL_HISTORY,U.current.student),t.role===we.STUDENT&&c(),A.current=Date.now(),R.current>0&&q(!0),Yt.a.isFunction(I.current.stop)&&I.current.stop(a),e.next=7,te();case 7:I.current={},j.current=null,f(!1),u(!1),O(null),N(null);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(P.a)(D.a.mark((function e(a){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.role===we.STUDENT&&(T.current&&S&&T.current.stop(),k.current&&C&&k.current.stop());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=null,ne=null;b.student?ae=b.student.name:Y.current&&(ae=Y.current.name,ne=r.a.createElement("div",null,r.a.createElement(it.a,{title:"Add this tutor to your favorites?",okText:"Yes",cancelText:"No",onConfirm:function(){return re()}},r.a.createElement(_.a,{shape:"round",type:"primary",icon:r.a.createElement(sa.a,null),size:"small"},"Favorite")),r.a.createElement(_.a,{shape:"round",icon:r.a.createElement(Ua.a,null),size:"small",onClick:function(){return Z(!0)}},"Feedback")));var re=function(){var e=Object(P.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.post("/preferences",{studentId:t.student.id,tutorId:Y.current.id,type:Ae.FAVORITE});case 3:alert("Tutor is added to your favorites"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.response.data.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:Fa.a.videoCall},r.a.createElement(Wa,{tutor:Y.current,showFeedback:Q,setShowFeedBack:Z}),t.role===we.STUDENT&&!s&&r.a.createElement(Ba,{onlineTutors:F,startCall:$,setTutor:function(e){Y.current=e},remainingTime:a}),!Yt.a.isEmpty(j.current)&&r.a.createElement(aa,{callWindow:s,localSrc:C,peerSrc:S,config:j.current,mediaDevice:I.current.mediaDevice,endCall:ee}),r.a.createElement(ca,{callModal:p,startCall:$,rejectCall:X,callFrom:b}),r.a.createElement(M.a,{visible:H,title:"Call ended",onCancel:function(){q(!1),R.current=0,A.current=0},destroyOnClose:!0,footer:!1,width:"600px"},r.a.createElement("div",{className:Fa.a.afterCall},r.a.createElement("img",{className:Fa.a.endCallImg,src:Ya.a,draggable:!1,alt:""}),r.a.createElement("div",null,r.a.createElement("div",{className:Fa.a.endUser},"Call with ",ae),r.a.createElement("div",{className:Fa.a.endDuration},"Duration: ",tt(A.current-R.current)),r.a.createElement("div",{className:Fa.a.btnHolder},ne)))))}var Ga=a(101),Ha=a.n(Ga),qa=a(372),Ka=a.n(qa),Ja=a(373),Qa=a.n(Ja);function Za(){var e=Object(n.useContext)(E).account,t=Object(n.useState)(null),a=Object(i.a)(t,2),c=a[0],l=a[1];Object(n.useEffect)((function(){o()}),[e]);var o=function(){var t=Object(P.a)(D.a.mark((function t(){var a;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,G.get("/students/"+e.student.id);case 3:a=t.sent,l(a.data.student),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),alert(t.t0.response.data.message);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),s=null;return s=e&&e.verification?c&&c.remaining_time>0?r.a.createElement(za,{account:e,remainingTime:c.remaining_time,getStudent:o}):r.a.createElement("div",{className:Ha.a.unverify},r.a.createElement("img",{className:Ha.a.timeoutImg,src:Qa.a,alt:"",draggable:"false"}),r.a.createElement("div",{className:Ha.a.unverifyTxt},r.a.createElement("p",null,"Sorry, you have run out of study time!"),r.a.createElement("p",null,"Please subscribe to continue."))):r.a.createElement("div",{className:Ha.a.unverify},r.a.createElement("img",{className:Ha.a.unverifyImg,src:Ka.a,alt:"",draggable:"false"}),r.a.createElement("div",{className:Ha.a.unverifyTxt},r.a.createElement("p",null,"You are almost ready!"),r.a.createElement("p",null,"Verify your account to start now!"))),r.a.createElement("div",{className:Ha.a.study},s)}var $a=a(202),Xa=a.n($a),en=a(374),tn=a.n(en);function an(e){var t=e.url,a=Object(n.useRef)(null),c=Object(n.useRef)(null),l={controls:!0,width:513,height:360,fluid:!1,sources:[{src:t,type:"video/webm"}],autoplay:!1};return Object(n.useEffect)((function(){return a.current=Object(ya.default)(c.current,l,(function(){var e="Using video.js "+ya.default.VERSION;ya.default.log(e)})),function(){a.current&&a.current.dispose()}}),[t]),r.a.createElement("div",{"data-vjs-player":!0},r.a.createElement("video",{id:"myVideo",ref:function(e){return c.current=e},className:"video-js vjs-default-skin vjs-big-play-centered",playsInline:!0}))}function nn(e){var t=e.showCallDetail,a=e.selected,n=e.setShowCallDetail;return a?r.a.createElement(M.a,{title:"Tutor recorded video - "+et()(a.createdAt).format("MMMM Do YYYY, h:mm:ss a"),visible:t,onCancel:function(){return n(!1)},footer:null,width:"600px",destroyOnClose:!0,bodyStyle:{height:"450px",overflow:"auto"}},r.a.createElement("div",{className:tn.a.recordHolder},r.a.createElement(an,{url:"".concat(Ie,"api/call-histories/").concat(a.id,"/tutorVideo")}))):null}var rn=We.a.Option;function cn(e){var t=e.showReport,a=e.selected,c=e.setShowReport,l=Object(n.useState)(!1),o=Object(i.a)(l,2),s=o[0],u=o[1],m=Object(n.useContext)(E).account,d=function(){var e=Object(P.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,n=m.role===we.STUDENT?a.tutor.account.id:a.student.account.id,u(!0),e.prev=3,e.next=6,G.post("/reports",{accountId:n,callId:a.id,description:t.description,reason:t.reason});case 6:u(!1),alert("Report submitted"),c(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),u(!1);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();return a?r.a.createElement(M.a,{title:"Report to Admin",visible:t,onCancel:function(){return c(!1)},footer:null,width:"600px",destroyOnClose:!0,bodyStyle:{height:"300px",overflow:"auto"}},r.a.createElement(R.a,Object.assign({},{labelCol:{span:6},wrapperCol:{span:16}},{onFinish:d}),r.a.createElement(R.a.Item,{name:"reason",label:"Reason",rules:[{required:!0,message:"Please select a reason"}]},r.a.createElement(We.a,{placeholder:"Select a reason"},Pe.map((function(e){return r.a.createElement(rn,{value:e,key:e},e)})))),r.a.createElement(R.a.Item,{name:"description",label:"Description"},r.a.createElement(B.a.TextArea,{autoSize:{minRows:4},placeholder:"Please specify your reasons or provide extra information (E.g timestamp)"})),r.a.createElement(R.a.Item,{wrapperCol:{offset:6,span:16}},r.a.createElement(_.a,{type:"primary",danger:!0,htmlType:"submit",loading:s},"Submit")))):null}var ln=B.a.Search;function on(){var e=Object(n.useContext)(E).account,t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(!1),s=Object(i.a)(o,2),u=s[0],m=s[1],d=Object(n.useState)(!1),p=Object(i.a)(d,2),f=p[0],v=p[1],b=Object(n.useState)(null),h=Object(i.a)(b,2),g=h[0],y=h[1],C=Object(n.useState)(""),O=Object(i.a)(C,2),w=O[0],x=O[1],S=Object(n.useState)(!1),N=Object(i.a)(S,2),I=N[0],j=N[1],T=function(){var t=Object(P.a)(D.a.mark((function t(){var a;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m(!0),t.prev=1,t.next=4,G.get("/call-histories?studentId="+e.student.id+"&search="+w);case 4:a=t.sent,l(a.data.callHistories),m(!1),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),alert(t.t0.response.data.message),m(!1);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){T()}),[w]);var k=[{title:"Date",dataIndex:"createdAt",render:function(e){return r.a.createElement("div",null,et()(e).format("MMMM Do YYYY, h:mm:ss a"))}},{title:"Tutor",dataIndex:"tutor",render:function(e){return r.a.createElement("div",null,e.name)}},{title:"Username",dataIndex:"tutor",render:function(e){return r.a.createElement("div",null,e.account.username)}},{title:"Duration",dataIndex:"duration",render:function(e){return r.a.createElement("div",null,tt(e))}},{title:"Action",render:function(e,t){return r.a.createElement("div",null,r.a.createElement(_.a,{className:Xa.a.viewRecordBtn,onClick:function(){return function(e){y(e),v(!0)}(t)}},"View record"),r.a.createElement(_.a,{danger:!0,onClick:function(){return function(e){y(e),j(!0)}(t)}},"Report"))}}];return r.a.createElement("div",{className:Xa.a.StudentCallHistories},r.a.createElement(nn,{setShowCallDetail:v,showCallDetail:f,selected:g}),r.a.createElement(cn,{setShowReport:j,showReport:I,selected:g}),r.a.createElement("div",{className:Xa.a.searchBar},r.a.createElement(ln,{placeholder:"Search for username, name",onSearch:function(e){x(e)},enterButton:!0})),r.a.createElement(Ge.a,{spinning:u},r.a.createElement(ut.a,{columns:k,dataSource:c,pagination:!0,rowKey:"id"})))}var sn=g.a.Header,un=g.a.Content,mn=g.a.Sider;function dn(e){var t=Object(n.useContext)(E),a=t.account,c=t.onSignOut,l=Object(n.useState)(!1),u=Object(i.a)(l,2),m=u[0],d=u[1],p=Object(n.useState)(!1),f=Object(i.a)(p,2),v=f[0],b=f[1],h=e.location,_=a.student&&a.student.avatar?r.a.createElement(ue.a,{style:{margin:"10px"},src:Ie+a.student.avatar}):r.a.createElement(ue.a,{style:{margin:"10px"},icon:r.a.createElement(K.a,null)}),y=r.a.createElement(me.a,null,r.a.createElement(me.a.Item,{onClick:function(){return d(!0)}},r.a.createElement(Ee.a,null),r.a.createElement("span",null,"Change password")),r.a.createElement(me.a.Item,{onClick:c},r.a.createElement(ve.a,null),r.a.createElement("span",null,"Sign out")));return r.a.createElement(g.a,{style:{minHeight:"100vh"}},r.a.createElement(te,{isVisible:v,onClose:function(){return b(!1)}}),r.a.createElement(Be,{isVisible:m,onClose:function(){return d(!1)},onForgot:function(){return b(!0)}}),r.a.createElement(mn,{collapsible:!0},r.a.createElement(Ve,{collapsed:!1}),r.a.createElement(me.a,{theme:"dark",defaultSelectedKeys:["/student/video-call"],mode:"inline",selectedKeys:[h.pathname]},r.a.createElement(me.a.Item,{key:"/student/study"},r.a.createElement(be.a,null),r.a.createElement(o.b,{to:"/student/study"},r.a.createElement("span",null,"Study"))),r.a.createElement(me.a.Item,{key:"/student"},r.a.createElement(he.a,null),r.a.createElement(o.b,{to:"/student"},r.a.createElement("span",null,"Profile"))),r.a.createElement(me.a.Item,{key:"/student/subscriptions"},r.a.createElement(ge.a,null),r.a.createElement(o.b,{to:"/student/subscriptions"},r.a.createElement("span",null,"Subscriptions"))),r.a.createElement(me.a.Item,{key:"/student/call-histories"},r.a.createElement(_e.a,null),r.a.createElement(o.b,{to:"/student/call-histories"},r.a.createElement("span",null,"Call histories"))))),r.a.createElement(g.a,null,r.a.createElement(sn,null,r.a.createElement("div",{className:fe.a.userControl},"Hello, ",a.username,r.a.createElement(de.a,{overlay:y,placement:"bottomLeft"},r.a.createElement("div",null,_,r.a.createElement(ye.a,{className:fe.a.dropDownIcon}))))),r.a.createElement(un,null,r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/student/subscriptions",component:Tt}),r.a.createElement(s.b,{path:"/student/study",component:Za}),r.a.createElement(s.b,{path:"/student/call-histories",component:on}),r.a.createElement(s.b,{path:"/student",component:rt,exact:!0}))),r.a.createElement(I,null)))}var pn=a(260),fn=a.n(pn),En=a(760),vn=a(25),bn=a(65),hn=a.n(bn),gn=a(733),_n=(a(712),a(246)),yn=a.n(_n),Cn=(a(697),a(698),a(142)),On=a.n(Cn),wn={controls:!0,width:480,height:360,fluid:!1,plugins:{record:{audio:!0,video:!0,maxLength:120,debug:!0}}};function xn(e){var t=e.cancelRecord,a=e.existedVideo,c=e.refreshProfile,l=Object(n.useRef)(null),o=Object(n.useRef)(null),s=Object(n.useState)(null),u=Object(i.a)(s,2),m=u[0],d=u[1],p=Object(n.useState)(!1),f=Object(i.a)(p,2),v=f[0],b=f[1],h=Object(n.useContext)(E).account,g=function(){var e=Object(P.a)(D.a.mark((function e(){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(!0),(a=new FormData).append("video",m,"introVideo.webm"),e.next=6,G("/tutors/video/"+h.username,{data:a,method:"POST"});case 6:t(),c(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),alert(e.t0.response.data.message),b(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return l.current=Object(ya.default)(o.current,wn,(function(){var e="Using video.js "+ya.default.VERSION+" with videojs-record "+ya.default.getPluginVersion("record")+" and recordrtc "+yn.a.version;ya.default.log(e)})),l.current.on("deviceReady",(function(){console.log("device is ready!")})),l.current.on("startRecord",(function(){console.log("started recording!")})),l.current.on("finishRecord",(function(){d(l.current.recordedData)})),l.current.on("error",(function(e,t){console.warn(t)})),l.current.on("deviceError",(function(){console.error("device error:",l.current.deviceErrorCode)})),function(){l.current&&l.current.dispose()}}),[]),r.a.createElement("div",null,r.a.createElement("div",{"data-vjs-player":!0},r.a.createElement("video",{id:"myVideoRecord",ref:function(e){return o.current=e},className:"video-js vjs-default-skin",playsInline:!0})),a?r.a.createElement("div",{className:On.a.btnWrapper},r.a.createElement(_.a,{className:On.a.videoBtn,onClick:g,loading:v},"Upload"),r.a.createElement(_.a,{className:On.a.videoBtn,type:"danger",onClick:t},"Cancel")):r.a.createElement("div",{className:On.a.btnWrapperNoCancel},r.a.createElement(_.a,{className:On.a.videoBtn,onClick:g,loading:v},"Upload")))}var Sn=a(378),Nn=a.n(Sn);function In(e){var t=e.recordNew,a=Object(n.useRef)(null),c=Object(n.useRef)(null),l=Object(n.useContext)(E).account,o={controls:!0,width:480,height:360,fluid:!1,sources:[{src:Ie+"api/tutors/video/"+l.username,type:"video/webm"}],autoplay:!1};return Object(n.useEffect)((function(){return a.current=Object(ya.default)(c.current,o,(function(){var e="Using video.js "+ya.default.VERSION;ya.default.log(e)})),function(){a.current&&a.current.dispose()}}),[]),r.a.createElement("div",null,r.a.createElement("div",{"data-vjs-player":!0},r.a.createElement("video",{id:"myVideo",ref:function(e){return c.current=e},className:"video-js vjs-default-skin vjs-big-play-centered",playsInline:!0})),r.a.createElement("div",{className:Nn.a.btnWrapper},r.a.createElement(_.a,{onClick:t},"Record new video")))}var jn=ze.a.Panel,Tn=We.a.Option;function kn(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(i.a)(l,2),s=o[0],u=o[1],m=Object(n.useState)({account:{email:null}}),d=Object(i.a)(m,2),p=d[0],f=d[1],v=Object(n.useContext)(E).account,b=Object(n.useState)([]),h=Object(i.a)(b,2),g=h[0],y=h[1],C=Object(n.useState)(!1),O=Object(i.a)(C,2),w=O[0],x=O[1],S=Object(n.useState)(!1),N=Object(i.a)(S,2),I=N[0],j=N[1],T=Object(n.useState)([]),k=Object(i.a)(T,2),M=k[0],L=k[1],F=Object(n.useState)(!0),V=Object(i.a)(F,2),Y=V[0],U=V[1],W=function(){var e=Object(P.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(!0),e.next=4,G.get("/tutors/"+v.tutor.id);case 4:t=e.sent,f(t.data.tutor),t.data.tutor.video&&U(!1),c(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),c(!0),alert(e.t0.response.data.message);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){W()}),[]);var z,H=p&&p.avatar?r.a.createElement(ue.a,{src:Ie+p.avatar,size:100}):r.a.createElement(ue.a,{icon:r.a.createElement(K.a,null),size:100}),q={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}}},J={wrapperCol:{offset:5,span:16}},Q=function(){var e=Object(P.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!0),e.next=4,G.put("/tutors/"+p.id,t);case 4:W(),u(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),u(!1),alert(e.t0.response.data.message);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Z={onRemove:function(e){var t=g.indexOf(e),a=g.slice();a.splice(t,1),y(a)},beforeUpload:function(e){return("application/pdf"===e.type||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===e.type)&&y([].concat(Object(vn.a)(g),[e])),!1},fileList:g},$={onRemove:function(e){L([])},beforeUpload:function(e){return("image/jpeg"===e.type||"image/png"===e.type)&&L([e]),!1},fileList:M},X=function(){var e=Object(P.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(!0),t=new FormData,g.forEach((function(e){t.append("certificates",e)})),e.next=6,G("/tutors/certificates/"+p.account.username,{method:"POST",data:t});case 6:return e.next=8,W();case 8:x(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),alert(e.t0.response.data.message),x(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(P.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(!0),(t=new FormData).append("avatar",M[0]),e.next=6,G("/tutors/avatar/"+p.account.username,{method:"POST",data:t});case 6:return e.next=8,W();case 8:window.location.reload(!1),j(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),j(!1),alert(e.t0.response.data.message);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(P.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.post("/accounts/resend-verify",{email:p.account.email});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert(e.t0.response.data.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return p.profileStatus===Ne.ACCEPTED?z=r.a.createElement(A.a,{message:"Your tutor profile is ready",type:"success",showIcon:!0}):p.profileStatus===Ne.PENDING?z=r.a.createElement(A.a,{message:"Your tutor profile is being reviewed by Admin",type:"info",showIcon:!0}):p.profileStatus===Ne.REJECTED&&(z=r.a.createElement(A.a,{message:"Your tutor profile is rejected, edit now",type:"error",showIcon:!0})),r.a.createElement(Ge.a,{spinning:a},r.a.createElement("div",{className:hn.a.profile},r.a.createElement("div",{className:hn.a.accountInfoContainer},H,r.a.createElement("div",{className:hn.a.accountInfo},r.a.createElement("p",{className:hn.a.name},p.name),r.a.createElement("p",null,"Email: ",p.account.email),v.verification?r.a.createElement(He.a,{color:"success"},"Verified"):r.a.createElement("span",null,r.a.createElement(He.a,{color:"default"},"Unverified"),r.a.createElement(_.a,{type:"link",onClick:te},"Resend confirmation email")),r.a.createElement("div",{className:hn.a.profileStatus},z))),r.a.createElement("div",{className:hn.a.collapse},p.name?r.a.createElement(R.a,Object.assign({},q,{onFinish:Q,initialValues:{name:p.name,phone:p.phone,birthdate:p.birthdate?et()(p.birthdate):void 0,address:p.address,interests:p.interests,education:p.education,experience:p.experience,profession:p.profession,student_type:p.student_type?p.student_type:void 0,student_lvl:p.student_lvl?p.student_lvl:void 0,accent:p.accent?p.accent:void 0,fluency:p.fluency?p.fluency:void 0,reason:p.reason,specialities:p.specialities?JSON.parse(p.specialities):void 0,introduction:p.introduction,teaching_styles:p.teaching_styles?JSON.parse(p.teaching_styles):void 0}}),r.a.createElement(ze.a,{defaultActiveKey:["1"]},r.a.createElement(jn,{header:"Basic info",key:"1"},r.a.createElement(R.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please enter your name"}]},r.a.createElement(B.a,{placeholder:"Your fullname",value:p.name})),r.a.createElement(R.a.Item,{name:"phone",label:"Phone"},r.a.createElement(B.a,{placeholder:"Your phone number (optional)"})),r.a.createElement(R.a.Item,{name:"birthdate",label:"Birthdate"},r.a.createElement(qe.a,null)),r.a.createElement(R.a.Item,{name:"address",label:"Address"},r.a.createElement(B.a,{placeholder:"Where do you from? E.g Hanoi, Vietnam"})),r.a.createElement(R.a.Item,{name:"avatar",label:"Upload avatar"},r.a.createElement(Ke.a,Object.assign({},$,{listType:"picture-card"}),r.a.createElement(_.a,{icon:r.a.createElement(Je.a,null)},"Change avatar"))),r.a.createElement(R.a.Item,J,r.a.createElement(_.a,{disabled:M.length<=0,onClick:ee,loading:I,style:{width:"159px"},icon:r.a.createElement(Qe.a,null)},"Upload avatar"))),r.a.createElement(jn,{header:"CV",key:"2"},r.a.createElement(R.a.Item,{name:"interests",label:"Interests"},r.a.createElement(B.a.TextArea,{placeholder:"Share with us everything you want such as interests, hobbies, life experiences"})),r.a.createElement(R.a.Item,{name:"education",label:"Education"},r.a.createElement(B.a.TextArea,{placeholder:"E.g Bachelor of Information Technology"})),r.a.createElement(R.a.Item,{name:"experience",label:"Experience"},r.a.createElement(B.a.TextArea,{placeholder:"Your working experience"})),r.a.createElement(R.a.Item,{name:"profession",label:"Profession"},r.a.createElement(B.a,{placeholder:"Your current or previous jobs"})),r.a.createElement(R.a.Item,{name:"reason",label:"Reason"},r.a.createElement(B.a.TextArea,{placeholder:"Why do you want to join Mirage?"}))),r.a.createElement(jn,{header:"Teaching preferences",key:"3"},r.a.createElement(R.a.Item,{name:"student_type",label:"Target"},r.a.createElement(We.a,{placeholder:"Who do you want to teach?"},$e.a.STUDENT_TYPE.map((function(e){return r.a.createElement(Tn,{value:e,key:e},e)})))),r.a.createElement(R.a.Item,{name:"student_lvl",label:"Student level"},r.a.createElement(We.a,{placeholder:"You are good at teaching students who are"},$e.a.STUDENT_LVL.map((function(e){return r.a.createElement(Tn,{value:e,key:e},e)})))),r.a.createElement(R.a.Item,{name:"accent",label:"Accent"},r.a.createElement(We.a,{placeholder:"Your English accent"},$e.a.ENG_ACCENT.map((function(e){return r.a.createElement(Tn,{value:e,key:e},e)})))),r.a.createElement(R.a.Item,{name:"fluency",label:"Fluency"},r.a.createElement(We.a,{placeholder:"Your fluency"},$e.a.ENG_FLUENCY.map((function(e){return r.a.createElement(Tn,{value:e,key:e},e)})))),r.a.createElement(R.a.Item,{name:"specialities",label:"Specialities"},r.a.createElement(We.a,{mode:"multiple",placeholder:"Select your specialities"},$e.a.SPECIALITIES.map((function(e){return r.a.createElement(Tn,{value:e,key:e},e)})))),r.a.createElement(R.a.Item,{name:"teaching_styles",label:"Teaching styles"},r.a.createElement(We.a,{mode:"multiple",placeholder:"Your styles"},$e.a.TEACHING_STYLE.map((function(e){return r.a.createElement(Tn,{value:e,key:e},e)}))))),r.a.createElement(jn,{header:"Teaching certificates (optional)",key:"4"},p.certificates&&JSON.parse(p.certificates).length>0?r.a.createElement(R.a.Item,Object.assign({},q,{label:"Uploaded file(s)"}),r.a.createElement("div",{className:hn.a.uploadedCert},p.certificates?JSON.parse(p.certificates).map((function(e,t){return r.a.createElement("a",{key:t,href:Ie+e.path},r.a.createElement(Oa.a,null),e.originalname)})):null)):null,r.a.createElement(R.a.Item,{name:"files",label:"Upload certificate"},r.a.createElement(Ke.a,Object.assign({},Z,{listType:"picture-card"}),r.a.createElement(_.a,{icon:r.a.createElement(gn.a,null)},"Select File"))),r.a.createElement(R.a.Item,J,r.a.createElement(_.a,{onClick:X,loading:w,style:{width:"132px"},icon:r.a.createElement(Qe.a,null)},"Upload")),r.a.createElement(A.a,{message:"Warning: All your previous upload will be removed when uploading new certificates",type:"warning",showIcon:!0})),r.a.createElement(jn,{header:"Introduce yourself",key:"5"},r.a.createElement(R.a.Item,{name:"introduction",label:"Introduction"},r.a.createElement(B.a.TextArea,{placeholder:"Introduce yourself"})),r.a.createElement("div",null,r.a.createElement("p",{className:hn.a.introInstruct},"Record a video to emphasize your teaching style, expertise and personality to help students overcome their nerve when speaking with foreigners. A friendly video will encourage the stundents to call you. A few helpful tips:"),r.a.createElement("div",{className:hn.a.introTips},r.a.createElement("p",null,"1. Make sure your camera/webcam is working properly"),r.a.createElement("p",null,"2. Find a clean and quiet room"),r.a.createElement("p",null,"3. Look at the camera and smile"),r.a.createElement("p",null,"4. Dress smart"),r.a.createElement("p",null,"5. Speak for 1-2 minutes"))),r.a.createElement(R.a.Item,{label:"Intro video"},Y?r.a.createElement(xn,{cancelRecord:function(){return U(!1)},existedVideo:p.video,refreshProfile:W}):r.a.createElement(In,{recordNew:function(){return U(!0)}})))),r.a.createElement("div",{className:hn.a.submitWrapper},r.a.createElement(_.a,{type:"primary",htmlType:"submit",loading:s},"Update profile"))):null)))}var Dn=a(726),Pn=a(746),Rn=a(764),Mn=a(763),An=a(83),Bn=a.n(An),Ln=a(379),Fn=a.n(Ln),Vn=a(380),Yn=a.n(Vn),Un=Dn.a.Step;function Wn(){var e,t=Object(n.useContext)(E).account,a=Object(n.useState)(!1),c=Object(i.a)(a,2),l=c[0],o=c[1],s=Object(n.useState)({}),u=Object(i.a)(s,2),m=u[0],d=u[1],p=function(){var e=Object(P.a)(D.a.mark((function e(){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(!0),e.next=4,G.get("/tutors/"+t.tutor.id);case 4:a=e.sent,t.tutor=a.data.tutor,d(a.data.tutor),o(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),o(!1),alert(e.t0.response.data.message);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){p()}),[]),m.profileStatus===Ne.ACCEPTED?e=r.a.createElement(Un,{status:"finish",title:"Profile approval",icon:r.a.createElement(Pn.a,null)}):m.profileStatus===Ne.PENDING?e=r.a.createElement(Un,{status:"wait",title:"Profile approval",icon:r.a.createElement(Pn.a,null)}):m.profileStatus===Ne.REJECTED&&(e=r.a.createElement(Un,{status:"error",title:"Profile approval",icon:r.a.createElement(Pn.a,null)})),r.a.createElement("div",{className:Bn.a.teachingWrapper},r.a.createElement("div",{className:Bn.a.teaching},r.a.createElement(Ge.a,{size:"large",spinning:l},r.a.createElement(Dn.a,{style:{width:"100%"}},r.a.createElement(Un,{status:m.account&&m.account.verification?"finish":"wait",title:"Verification",icon:r.a.createElement(Rn.a,null)}),e,r.a.createElement(Un,{status:m.account&&m.account.verification&&m.profileStatus===Ne.ACCEPTED?"finish":"wait",title:"Ready",icon:r.a.createElement(Mn.a,null)})),m.account&&m.account.verification&&m.profileStatus===Ne.ACCEPTED?r.a.createElement("div",{className:Bn.a.wait},r.a.createElement("img",{className:Bn.a.waitImg,src:Fn.a,alt:"",draggable:"false"}),r.a.createElement("div",{className:Bn.a.waitTxt},r.a.createElement("p",null,"You are all set!"),r.a.createElement("p",null,"Be patient and stay here."),r.a.createElement("p",null,"Students will start calling you soon."))):r.a.createElement("div",{className:Bn.a.wait},r.a.createElement("img",{className:Bn.a.waitImg,src:Yn.a,alt:"",draggable:"false"}),r.a.createElement("div",{className:Bn.a.waitTxt},r.a.createElement("p",null,"You are almost ready!"),r.a.createElement("p",null,"Complete your profile to start now!"),r.a.createElement("p",null,"Students are waiting to see you."))),l?null:r.a.createElement(za,{account:t}))))}var zn=a(203),Gn=a.n(zn),Hn=B.a.Search;function qn(){var e=Object(n.useContext)(E).account,t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(!1),s=Object(i.a)(o,2),u=s[0],m=s[1],d=Object(n.useState)(!1),p=Object(i.a)(d,2),f=p[0],v=p[1],b=Object(n.useState)(null),h=Object(i.a)(b,2),g=h[0],y=h[1],C=Object(n.useState)(""),O=Object(i.a)(C,2),w=O[0],x=O[1],S=Object(n.useState)(!1),N=Object(i.a)(S,2),I=N[0],j=N[1],T=Object(n.useState)(0),k=Object(i.a)(T,2),R=k[0],M=k[1],A=function(){var t=Object(P.a)(D.a.mark((function t(){var a;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m(!0),t.prev=1,t.next=4,G.get("/call-histories?tutorId="+e.tutor.id+"&search="+w);case 4:a=t.sent,l(a.data.callHistories),m(!1),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),alert(t.t0.response.data.message),m(!1);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}(),B=function(){var t=Object(P.a)(D.a.mark((function t(){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return j(!0),t.prev=1,t.next=4,G.post("/payments",{tutorId:e.tutor.id});case 4:j(!1),A(),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),alert(t.t0.response.data.message),j(!1);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=function(){var e=Object(P.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.get("/settings");case 3:e.sent.data.settings.forEach((function(e){"tutor price"===e.type&&M(Number(e.content))})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.response.data.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();A(),e()}),[w]);var L=[{title:"Date",dataIndex:"createdAt",render:function(e){return r.a.createElement("div",null,et()(e).format("MMMM Do YYYY, h:mm:ss a"))}},{title:"Student",dataIndex:"student",render:function(e){return r.a.createElement("div",null,e.name)}},{title:"Username",dataIndex:"student",render:function(e){return r.a.createElement("div",null,e.account.username)}},{title:"Duration",dataIndex:"duration",render:function(e){return r.a.createElement("div",null,tt(e))}},{title:"Payment state",dataIndex:"counted",render:function(e){return e?r.a.createElement(He.a,{color:"success"},"Counted"):r.a.createElement(He.a,null,"Uncounted")}},{title:"Action",render:function(e,t){return r.a.createElement("div",null,r.a.createElement(_.a,{danger:!0,onClick:function(){return function(e){y(e),v(!0)}(t)}},"Report"))}}];return r.a.createElement("div",{className:Gn.a.TutorCallHistories},r.a.createElement(cn,{setShowReport:v,showReport:f,selected:g}),r.a.createElement(_.a,{type:"primary",onClick:B,loading:I},"Create payment request"),r.a.createElement("span",{className:Gn.a.payRate},"*Payment rate: ",R,"$/min"),r.a.createElement("div",{className:Gn.a.searchBar},r.a.createElement(Hn,{placeholder:"Search for username, name",onSearch:function(e){x(e)},enterButton:!0})),r.a.createElement(Ge.a,{spinning:u},r.a.createElement(ut.a,{columns:L,dataSource:c,pagination:!0,rowKey:"id"})))}var Kn=a(381),Jn=a.n(Kn),Qn=a(382),Zn=a.n(Qn);function $n(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(i.a)(l,2),s=o[0],u=o[1],m=Object(n.useContext)(E).account,d=[{title:"Date",dataIndex:"createdAt",render:function(e){return r.a.createElement("div",null,et()(e).format("MMMM Do YYYY, h:mm:ss a"))}},{title:"Price",dataIndex:"price",render:function(e){return r.a.createElement("div",null,e,"$")}},{title:"State",dataIndex:"state",render:function(e){return e===Me.COMPLETED?r.a.createElement(He.a,{color:"success"},"Completed"):e===Me.PENDING?r.a.createElement(He.a,{color:"blue"},"Pending"):r.a.createElement(He.a,{color:"error"},"Cancelled")}}],p=function(){var e=Object(P.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,G.get("/payments/"+m.tutor.id);case 4:t=e.sent,c(t.data.payments),u(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),alert(e.t0.response.data.message),u(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){p()}),[]),r.a.createElement("div",{className:Zn.a.payments},r.a.createElement(Ge.a,{spinning:s},r.a.createElement(ut.a,{rowKey:"id",columns:d,dataSource:a,pagination:!0})))}var Xn=a(383),er=a.n(Xn);function tr(){var e=Object(n.useContext)(E).account,t=Object(n.useState)(null),a=Object(i.a)(t,2),c=a[0],l=a[1];Object(n.useEffect)((function(){(function(){var t=Object(P.a)(D.a.mark((function t(){var a,n;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,G.get("/reviews/"+e.tutor.id);case 3:a=t.sent,n=Na(a.data.reviews),l(Object(Sa.a)({},a.data,{ratingCount:n})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),alert(t.t0.response.data.message);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}})()()}),[e.tutor.id]);var o=null;return c&&(o=r.a.createElement("div",{className:er.a.reviews},r.a.createElement(ka,{reviews:c}),r.a.createElement(la.a,{itemLayout:"horizontal",dataSource:c.reviews,renderItem:function(e){return r.a.createElement(la.a.Item,null,r.a.createElement(Pa,{review:e}))}}))),o}function ar(){return r.a.createElement("div",{className:Jn.a.stats},r.a.createElement($n,null),r.a.createElement(tr,null))}var nr=g.a.Header,rr=g.a.Content,cr=g.a.Sider;function lr(e){var t=Object(n.useContext)(E),a=t.account,c=t.onSignOut,l=Object(n.useState)(!1),u=Object(i.a)(l,2),m=u[0],d=u[1],p=Object(n.useState)(!1),f=Object(i.a)(p,2),v=f[0],b=f[1],h=e.location,_=a.tutor&&a.tutor.avatar?r.a.createElement(ue.a,{style:{margin:"10px"},src:Ie+a.tutor.avatar}):r.a.createElement(ue.a,{style:{margin:"10px"},icon:r.a.createElement(K.a,null)}),y=r.a.createElement(me.a,null,r.a.createElement(me.a.Item,{onClick:function(){return d(!0)}},r.a.createElement(Ee.a,null),r.a.createElement("span",null,"Change password")),r.a.createElement(me.a.Item,{onClick:c},r.a.createElement(ve.a,null),r.a.createElement("span",null,"Sign out")));return r.a.createElement(g.a,{style:{minHeight:"100vh"}},r.a.createElement(te,{isVisible:v,onClose:function(){return b(!1)}}),r.a.createElement(Be,{isVisible:m,onClose:function(){return d(!1)},onForgot:function(){return b(!0)}}),r.a.createElement(cr,{collapsible:!0},r.a.createElement(Ve,{collapsed:!1}),r.a.createElement(me.a,{theme:"dark",defaultSelectedKeys:["/tutor"],mode:"inline",selectedKeys:[h.pathname]},r.a.createElement(me.a.Item,{key:"/tutor"},r.a.createElement(he.a,null),r.a.createElement(o.b,{to:"/tutor"},r.a.createElement("span",null,"Profile"))),r.a.createElement(me.a.Item,{key:"/tutor/teaching"},r.a.createElement(be.a,null),r.a.createElement(o.b,{to:"/tutor/teaching"},r.a.createElement("span",null,"Teaching"))),r.a.createElement(me.a.Item,{key:"/tutor/call-histories"},r.a.createElement(_e.a,null),r.a.createElement(o.b,{to:"/tutor/call-histories"},r.a.createElement("span",null,"Call histories"))),r.a.createElement(me.a.Item,{key:"/tutor/stats"},r.a.createElement(En.a,null),r.a.createElement(o.b,{to:"/tutor/stats"},r.a.createElement("span",null,"Stats"))))),r.a.createElement(g.a,null,r.a.createElement(nr,null,r.a.createElement("div",{className:fn.a.userControl},"Hello, ",a.username,r.a.createElement(de.a,{overlay:y,placement:"bottomLeft"},r.a.createElement("div",null,_,r.a.createElement(ye.a,{className:fn.a.dropDownIcon}))))),r.a.createElement(rr,null,r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/tutor/stats",component:ar}),r.a.createElement(s.b,{path:"/tutor/teaching",component:Wn}),r.a.createElement(s.b,{path:"/tutor/call-histories",component:qn}),r.a.createElement(s.b,{path:"/tutor",component:kn,exact:!0}))),r.a.createElement(I,null)))}var or=a(754),sr=a(753),ir=a(737),ur=a(732),mr=a(748),dr=a(143),pr=a.n(dr),fr=a(384),Er=a.n(fr),vr=a(193);function br(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),o=Object(i.a)(l,2),s=o[0],u=o[1];Object(n.useEffect)((function(){return Rt.on(je.GET_ONLINE_TUTORS,(function(e){c(e.online)})).on(je.GET_ONLINE_STUDENTS,(function(e){u(e.online)})),function(){Rt.off(je.GET_ONLINE_STUDENTS).off(je.GET_ONLINE_TUTORS)}}),[]);var m={datasets:[{data:[s.length,a.length],backgroundColor:["#FF6384","#36A2EB"],hoverBackgroundColor:["#FF6384","#36A2EB"]}],labels:["Students","Tutors"]};return r.a.createElement("div",{className:Er.a.onlineUsers},r.a.createElement("p",null,"Online users"),r.a.createElement(vr.b,{data:m}))}var hr=a(204),gr=a.n(hr),_r=a(261),yr=a.n(_r);function Cr(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){(function(){var e=Object(P.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.get("/call-histories");case 3:t=e.sent,c(t.data.callHistories.slice(0,5)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.response.data.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var l=[{title:"Date",dataIndex:"createdAt",render:function(e){return r.a.createElement("div",null,et()(e).format("MMMM Do YYYY, h:mm:ss a"))}},{title:"Student",dataIndex:"student",render:function(e){return r.a.createElement("div",null,e.name)}},{title:"Tutor",dataIndex:"tutor",render:function(e){return r.a.createElement("div",null,e.name)}},{title:"Duration",dataIndex:"duration",render:function(e){return r.a.createElement("div",null,tt(e))}}];return r.a.createElement("div",{className:yr.a.recentCalls},r.a.createElement("p",{className:yr.a.recentCallsTitle},"Recent calls"),r.a.createElement(ut.a,{columns:l,dataSource:a,pagination:!1,rowKey:"id"}))}var Or=a(386),wr=a.n(Or);function xr(){var e=Object(n.useState)({earn:0,pay:0}),t=Object(i.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){(function(){var e=Object(P.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.get("/stats/money");case 3:t=e.sent,c(t.data.stats),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.response.data.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var l={datasets:[{data:[a.earn,a.pay],backgroundColor:["#FF6384","#36A2EB"],label:"Profit: ".concat((a.earn-a.pay).toFixed(2),"$")}],labels:["Earn","Pay"]};return r.a.createElement("div",{className:wr.a.moneyStats},r.a.createElement("p",null,"Money"),r.a.createElement(vr.a,{data:l}))}var Sr=a(262),Nr=a.n(Sr);function Ir(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){(function(){var e=Object(P.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.get("/stats/top-paid");case 3:t=e.sent,c(t.data.topPaid),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.response.data.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var l=[{title:"Rank",key:"index",render:function(e,t,a){return a+1}},{title:"Name",dataIndex:"student",render:function(e){return r.a.createElement("div",null,e.name)}},{title:"Amount",dataIndex:"total",render:function(e){return r.a.createElement("div",null,e.toFixed(2),"$")}}];return r.a.createElement("div",{className:Nr.a.topPaid},r.a.createElement("p",{className:Nr.a.topPaidTitle},"Top paid student"),r.a.createElement(ut.a,{columns:l,dataSource:a,pagination:!1,rowKey:"studentId"}))}function jr(){return r.a.createElement("div",{className:gr.a.dashboard},r.a.createElement("div",{className:gr.a.dashboardRow},r.a.createElement(br,null),r.a.createElement(Cr,null)),r.a.createElement("div",{className:gr.a.dashboardRow},r.a.createElement(xr,null),r.a.createElement(Ir,null)))}var Tr=a(194),kr=a(205),Dr=a.n(kr),Pr=a(102),Rr=a.n(Pr);function Mr(e){var t=e.subscriptions,a=[{title:"Date",dataIndex:"createdAt",render:function(e){return r.a.createElement("div",null,et()(e).format("MMMM Do YYYY, h:mm:ss a"))}},{title:"Tier",dataIndex:"tier",render:function(e){return e===De.SILVER?r.a.createElement(He.a,{color:"#C0C0C0"},"Silver"):e===De.GOLD?r.a.createElement(He.a,{color:"#DAA520"},"Gold"):e===De.PLATIUM?r.a.createElement(He.a,{color:"processing"},"Platium"):r.a.createElement(He.a,null,"Normal")}},{title:"Duration",dataIndex:"duration",render:function(e){return r.a.createElement("div",null,e/6e4," mins")}},{title:"Price",dataIndex:"price",render:function(e){return r.a.createElement("div",null,e,"$")}},{title:"State",dataIndex:"state",render:function(e){return e===ke.COMPLETED?r.a.createElement(He.a,{color:"success"},"Completed"):e===ke.PENDING?r.a.createElement(He.a,{color:"blue"},"Pending"):r.a.createElement(He.a,{color:"error"},"Cancelled")}}];return r.a.createElement("div",null,r.a.createElement(ut.a,{columns:a,dataSource:t,pagination:!0,rowKey:"id",size:"small"}))}var Ar=a(263),Br=a.n(Ar);function Lr(e){var t=e.showCallDetail,a=e.selected,n=e.setShowCallDetail;return a?r.a.createElement(M.a,{title:"Call - "+et()(a.createdAt).format("MMMM Do YYYY, h:mm:ss a"),visible:t,onCancel:function(){return n(!1)},footer:null,width:"600px",destroyOnClose:!0,bodyStyle:{height:"600px",overflow:"auto"}},r.a.createElement("div",null,r.a.createElement("div",{className:Br.a.recordTitle},"Student record:"),r.a.createElement(an,{url:"".concat(Ie,"api/call-histories/").concat(a.id,"/studentVideo")}),r.a.createElement("div",{className:Br.a.recordTitle},"Tutor record:"),r.a.createElement(an,{url:"".concat(Ie,"api/call-histories/").concat(a.id,"/tutorVideo")}))):null}function Fr(e){var t=e.callHistories,a=Object(n.useState)(!1),c=Object(i.a)(a,2),l=c[0],o=c[1],s=Object(n.useState)(null),u=Object(i.a)(s,2),m=u[0],d=u[1],p=[{title:"Date",dataIndex:"createdAt",render:function(e){return r.a.createElement("div",null,et()(e).format("MMMM Do YYYY, h:mm:ss a"))}},{title:"Student",dataIndex:"student",render:function(e){return r.a.createElement("div",null,e.name)}},{title:"Tutor",dataIndex:"tutor",render:function(e){return r.a.createElement("div",null,e.name)}},{title:"Duration",dataIndex:"duration",render:function(e){return r.a.createElement("div",null,tt(e))}}];return r.a.createElement("div",null,r.a.createElement(Lr,{setShowCallDetail:o,showCallDetail:l,selected:m}),r.a.createElement(ut.a,{columns:p,dataSource:t,pagination:!0,onRow:function(e,t){return{onClick:function(t){d(e),o(!0)}}},rowKey:"id",size:"small"}))}function Vr(e){var t=e.reports,a=[{title:"Date",dataIndex:"createdAt",render:function(e){return r.a.createElement("div",null,et()(e).format("MMMM Do YYYY, h:mm:ss a"))}},{title:"Reason",dataIndex:"reason"},{title:"State",dataIndex:"state",render:function(e){return e===Re.RESOLVED?r.a.createElement(He.a,{color:"success"},"Resolved"):e===Re.PENDING?r.a.createElement(He.a,{color:"blue"},"Pending"):r.a.createElement(He.a,{color:"error"},"Cancelled")}}];return r.a.createElement("div",null,r.a.createElement(ut.a,{rowKey:"id",columns:a,dataSource:t,pagination:!0,size:"small"}))}var Yr=st.a.TabPane;function Ur(e){var t=e.selected,a=e.getStudentsData,c=e.setShowDetailModal,l=e.showDetailModal,o=Object(n.useState)(!1),s=Object(i.a)(o,2),u=s[0],m=s[1],d=Object(n.useState)(null),p=Object(i.a)(d,2),f=p[0],E=p[1],v=Object(n.useState)(!1),b=Object(i.a)(v,2),h=b[0],g=b[1],y=function(){var e=Object(P.a)(D.a.mark((function e(n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),e.next=4,G.put("/accounts/"+t.accountId,{state:n});case 4:return e.next=6,a();case 6:g(!1),c(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),g(!1),alert(e.t0.response.data.message);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){t&&function(){var e=Object(P.a)(D.a.mark((function e(){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),e.next=4,G.get("/students/"+t.id);case 4:a=e.sent,E(a.data.student),m(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),m(!1);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}()()}),[t]);var C=f?r.a.createElement(st.a,{defaultActiveKey:"profile",type:"card"},r.a.createElement(Yr,{tab:"Profile",key:"profile"},r.a.createElement("div",{className:Rr.a.detail},r.a.createElement("div",{className:Rr.a.detailBasic},f.avatar?r.a.createElement(ue.a,{src:Ie+f.avatar,size:100}):r.a.createElement(ue.a,{icon:r.a.createElement(K.a,null),size:100}),r.a.createElement("div",{className:Rr.a.detailBasicInfo},r.a.createElement(wa.a,{size:"small",column:1,title:f.name,bordered:!0},r.a.createElement(wa.a.Item,{label:"Username"},t.username),r.a.createElement(wa.a.Item,{label:"Email"},t.email),r.a.createElement(wa.a.Item,{label:"Birthdate"},f.birthdate?et()(f.birthdate).format("YYYY-MM-DD"):null),r.a.createElement(wa.a.Item,{label:"Remaining time"},tt(f.remaining_time)),r.a.createElement(wa.a.Item,{label:"Status"},t.verification?r.a.createElement(He.a,{color:"success"},"Verified"):r.a.createElement(He.a,{color:"default"},"Unverified"),t.state?r.a.createElement(He.a,{color:"success"},"Active"):r.a.createElement(He.a,{color:"error"},"Inactive"))))),r.a.createElement("div",{className:Rr.a.banBtnHolder},t.state?r.a.createElement(_.a,{loading:h,className:Rr.a.changeStateBtn,type:"primary",danger:!0,onClick:function(){return y(xe.INACTIVE)}},"Ban"):r.a.createElement(_.a,{loading:h,className:Rr.a.changeStateBtn,type:"primary",onClick:function(){return y(xe.ACTIVE)}},"Unban")),r.a.createElement("div",{className:Rr.a.detailAdditional},r.a.createElement(wa.a,{bordered:!0,size:"small",column:1},r.a.createElement(wa.a.Item,{label:"Phone"},f.phone),r.a.createElement(wa.a.Item,{label:"Birthdate"},f.birthdate?et()(f.birthdate).format("YYYY-MM-DD"):null),r.a.createElement(wa.a.Item,{label:"Student level"},f.student_lvl),r.a.createElement(wa.a.Item,{label:"Student type"},f.student_type),r.a.createElement(wa.a.Item,{label:"Favorite accent"},f.accent),r.a.createElement(wa.a.Item,{label:"Favorite tutor styles"}," ",f.teaching_styles?JSON.parse(f.teaching_styles).map((function(e){return r.a.createElement(He.a,{key:e},e)})):null),r.a.createElement(wa.a.Item,{label:"Interests"},f.specialities?JSON.parse(f.specialities).map((function(e){return r.a.createElement(He.a,{key:e},e)})):null))))),r.a.createElement(Yr,{tab:"History",key:"history"},r.a.createElement(Fr,{callHistories:f.call_histories})),r.a.createElement(Yr,{tab:"Report",key:"report"},r.a.createElement(Vr,{reports:f.account.reports})),r.a.createElement(Yr,{tab:"Subscription",key:"subscription"},r.a.createElement(Mr,{subscriptions:f.subscriptions}))):null;return r.a.createElement(M.a,{title:t?t.name:null,visible:l,onCancel:function(){return c(!1)},footer:null,width:"600px",destroyOnClose:!0,bodyStyle:{height:"400px",overflow:"auto"}},r.a.createElement(Ge.a,{spinning:u},C))}var Wr=B.a.Search;function zr(){var e=Object(n.useState)(10),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),o=Object(i.a)(l,2),s=o[0],u=o[1],m=Object(n.useState)(1),d=Object(i.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(""),v=Object(i.a)(E,2),b=v[0],h=v[1],g=Object(n.useState)(0),_=Object(i.a)(g,2),y=_[0],C=_[1],O=Object(n.useState)(!1),w=Object(i.a)(O,2),x=w[0],S=w[1],N=Object(n.useState)(!1),I=Object(i.a)(N,2),j=I[0],T=I[1],k=Object(n.useState)(null),R=Object(i.a)(k,2),M=R[0],A=R[1],B=function(){var e=Object(P.a)(D.a.mark((function e(){var t,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(!0),e.next=4,G.get("/students?page=".concat(p,"&size=").concat(a,"&search=")+b);case 4:t=e.sent,n=[],t.data.students.forEach((function(e){n.push({key:e.id,id:e.id,name:e.name,username:e.account.username,email:e.account.email,state:e.account.state,verification:e.account.verification,accountId:e.account.id})})),C(t.data.totalResults),u(n),S(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),S(!1),alert(e.t0.response.data.message);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){B()}),[p,a,b]);var L=[{title:"Name",dataIndex:"name"},{title:"Username",dataIndex:"username"},{title:"Email",dataIndex:"email"},{title:"State",dataIndex:"state",render:function(e){return e?r.a.createElement(He.a,{color:"success"},"Active"):r.a.createElement(He.a,{color:"error"},"Inactive")},filters:[{text:"Active",value:xe.ACTIVE},{text:"Inactive",value:xe.INACTIVE}],filterMultiple:!1,onFilter:function(e,t){return 0===t.state.toString().indexOf(Boolean(e))}},{title:"Verification",dataIndex:"verification",render:function(e){return e?r.a.createElement(He.a,{color:"success"},"Verified"):r.a.createElement(He.a,{color:"default"},"Unverified")},filters:[{text:"Verified",value:Se.VERIFIED},{text:"Unverified",value:Se.UNVERIFIED}],filterMultiple:!1,onFilter:function(e,t){return 0===t.verification.toString().indexOf(Boolean(e))}}];return r.a.createElement("div",{className:Dr.a.studentsLayout},r.a.createElement(Ur,{setShowDetailModal:T,showDetailModal:j,getStudentsData:B,selected:M}),r.a.createElement("div",{className:Dr.a.searchBar},r.a.createElement(Wr,{placeholder:"Search for username, name or email",onSearch:function(e){h(e)},enterButton:!0})),r.a.createElement(Ge.a,{spinning:x},r.a.createElement(ut.a,{columns:L,dataSource:s,pagination:!1,onRow:function(e,t){return{onClick:function(t){A(e),T(!0)}}}})),r.a.createElement("div",{className:Dr.a.paginationWrapper},r.a.createElement(Tr.a,{current:p,defaultCurrent:p,total:y,pageSize:a,showSizeChanger:!0,showTotal:function(){return"Total ".concat(y," results")},onShowSizeChange:function(e,t){c(t),f(Math.ceil(y/t))},onChange:function(e,t){f(e)}})))}var Gr=a(206),Hr=a.n(Gr),qr=a(27),Kr=a.n(qr);function Jr(e){var t=e.payments,a=[{title:"Date",dataIndex:"createdAt",render:function(e){return r.a.createElement("div",null,et()(e).format("MMMM Do YYYY, h:mm:ss a"))}},{title:"Price",dataIndex:"price"},{title:"State",dataIndex:"state",render:function(e){return e===Me.COMPLETED?r.a.createElement(He.a,{color:"success"},"Completed"):e===Me.PENDING?r.a.createElement(He.a,{color:"blue"},"Pending"):r.a.createElement(He.a,{color:"error"},"Cancelled")}}];return r.a.createElement("div",null,r.a.createElement(ut.a,{rowKey:"id",columns:a,dataSource:t,pagination:!0,size:"small"}))}function Qr(e){var t=e.selected,a=Object(n.useState)(null),c=Object(i.a)(a,2),l=c[0],o=c[1];Object(n.useEffect)((function(){t&&function(){var e=Object(P.a)(D.a.mark((function e(){var a,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.get("/reviews/"+t.id);case 3:a=e.sent,n=Na(a.data.reviews),o(Object(Sa.a)({},a.data,{ratingCount:n})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0.response.data.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()}),[t]);var s=function(){var e=Object(P.a)(D.a.mark((function e(){var a,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.get("/reviews/"+t.id);case 3:a=e.sent,n=Na(a.data.reviews),o(Object(Sa.a)({},a.data,{ratingCount:n})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0.response.data.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),u=null;return l&&(u=r.a.createElement("div",null,r.a.createElement(ka,{reviews:l}),r.a.createElement(la.a,{itemLayout:"horizontal",dataSource:l.reviews,renderItem:function(e){return r.a.createElement(la.a.Item,null,r.a.createElement(Pa,{review:e,getTutorReview:s}))}}))),u}var Zr=st.a.TabPane;function $r(e){var t=e.selected,a=e.setShowDetailModal,c=e.getTutorsData,l=e.showDetailModal,o=Object(n.useState)(!1),s=Object(i.a)(o,2),u=s[0],m=s[1],d=Object(n.useState)(null),p=Object(i.a)(d,2),f=p[0],E=p[1],v=Object(n.useState)(!1),b=Object(i.a)(v,2),h=b[0],g=b[1],y=Object(n.useState)(!1),C=Object(i.a)(y,2),O=C[0],w=C[1],x=function(){var e=Object(P.a)(D.a.mark((function e(n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),e.next=4,G.put("/tutors/"+t.id,{profileStatus:n});case 4:return e.next=6,c();case 6:g(!1),a(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),g(!1);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(P.a)(D.a.mark((function e(n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(!0),e.next=4,G.put("/accounts/"+t.accountId,{state:n});case 4:return e.next=6,c();case 6:w(!1),a(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),w(!1),alert(e.t0.response.data.message);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){t&&function(){var e=Object(P.a)(D.a.mark((function e(){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),e.next=4,G.get("/tutors/"+t.id);case 4:a=e.sent,E(a.data.tutor),m(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),m(!1);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}()()}),[t]);var N=r.a.createElement("div",{className:Kr.a.statusControl},r.a.createElement(A.a,{showIcon:!0,message:"Rejected",type:"error"}),r.a.createElement("div",{className:Kr.a.statusControlBtnWrapper},r.a.createElement(_.a,{type:"primary",style:{backgroundColor:"#52c41a",color:"white",borderColor:"#52c41a"},className:Kr.a.statusControlBtn,onClick:function(){return x(Ne.ACCEPTED)}},"Accept"),r.a.createElement(_.a,{className:Kr.a.statusControlBtn,onClick:function(){return x(Ne.PENDING)}},"Pending")));t&&t.profileStatus===Ne.ACCEPTED&&(N=r.a.createElement("div",{className:Kr.a.statusControl},r.a.createElement(A.a,{showIcon:!0,message:"Accepted",type:"success"}),r.a.createElement("div",{className:Kr.a.statusControlBtnWrapper},r.a.createElement(_.a,{className:Kr.a.statusControlBtn,onClick:function(){return x(Ne.PENDING)}},"Pending"),r.a.createElement(_.a,{type:"primary",danger:!0,className:Kr.a.statusControlBtn,onClick:function(){return x(Ne.REJECTED)}},"Reject")))),t&&t.profileStatus===Ne.PENDING&&(N=r.a.createElement("div",{className:Kr.a.statusControl},r.a.createElement(A.a,{showIcon:!0,message:"Pending",type:"info"}),r.a.createElement("div",{className:Kr.a.statusControlBtnWrapper},r.a.createElement(_.a,{className:Kr.a.statusControlBtn,style:{backgroundColor:"#52c41a",color:"white",borderColor:"#52c41a"},onClick:function(){return x(Ne.ACCEPTED)}},"Accept"),r.a.createElement(_.a,{type:"primary",danger:!0,className:Kr.a.statusControlBtn,onClick:function(){return x(Ne.REJECTED)}},"Reject"))));var I=r.a.createElement("div",null,r.a.createElement(Ge.a,{spinning:h},N,r.a.createElement("div",null,f?r.a.createElement("div",null,r.a.createElement("div",{className:Kr.a.detailWrapper},r.a.createElement(wa.a,{bordered:!0,size:"small",column:1,title:"Teaching preferences"},r.a.createElement(wa.a.Item,{label:"Student level"},f.student_lvl),r.a.createElement(wa.a.Item,{label:"Student type"},f.student_type),r.a.createElement(wa.a.Item,{label:"Accent"},f.accent),r.a.createElement(wa.a.Item,{label:"Fluency"},f.fluency),r.a.createElement(wa.a.Item,{label:"Tutor styles"}," ",f.teaching_styles?JSON.parse(f.teaching_styles).map((function(e){return r.a.createElement(He.a,{key:e},e)})):null),r.a.createElement(wa.a.Item,{label:"Specialities"},f.specialities?JSON.parse(f.specialities).map((function(e){return r.a.createElement(He.a,{key:e},e)})):null))),r.a.createElement("div",{className:Kr.a.detailWrapper},r.a.createElement(wa.a,{bordered:!0,size:"small",column:1,title:"CV"},r.a.createElement(wa.a.Item,{label:"Interests"},f.interests),r.a.createElement(wa.a.Item,{label:"Education"},f.education),r.a.createElement(wa.a.Item,{label:"Experience"},f.experience),r.a.createElement(wa.a.Item,{label:"Profession"},f.profession),r.a.createElement(wa.a.Item,{label:"Reason"},f.reason))),r.a.createElement("div",{className:Kr.a.detailWrapper},r.a.createElement("p",{className:Kr.a.detailTitle},"Certificates"),r.a.createElement("div",{className:Kr.a.uploadedCert},f.certificates?JSON.parse(f.certificates).map((function(e,t){return r.a.createElement("a",{key:t,href:Ie+e.path},r.a.createElement(Oa.a,null),e.originalname)})):null)),r.a.createElement("div",{className:Kr.a.detailWrapper},r.a.createElement(wa.a,{bordered:!0,size:"small",column:1,title:"Introduction"},r.a.createElement(wa.a.Item,{label:"Introduction"},f.introduction)),f.video?r.a.createElement("div",{className:Kr.a.videoWrapper},r.a.createElement(Ca,{username:t.username})):null)):null))),j=f?r.a.createElement(st.a,{defaultActiveKey:"info",type:"card"},r.a.createElement(Zr,{tab:"Info",key:"info"},r.a.createElement("div",{className:Kr.a.detail},r.a.createElement("div",{className:Kr.a.detailBasic},f.avatar?r.a.createElement(ue.a,{src:Ie+f.avatar,size:100}):r.a.createElement(ue.a,{icon:r.a.createElement(K.a,null),size:100}),r.a.createElement("div",{className:Kr.a.detailBasicInfo},r.a.createElement(wa.a,{size:"small",column:1,title:f.name,bordered:!0},r.a.createElement(wa.a.Item,{label:"Username"},t.username),r.a.createElement(wa.a.Item,{label:"Email"},t.email),r.a.createElement(wa.a.Item,{label:"Phone"},f.phone),r.a.createElement(wa.a.Item,{label:"Address"},f.address),r.a.createElement(wa.a.Item,{label:"Birthdate"},f.birthdate?et()(f.birthdate).format("YYYY-MM-DD"):null),r.a.createElement(wa.a.Item,{label:"Status"},t.verification?r.a.createElement(He.a,{color:"success"},"Verified"):r.a.createElement(He.a,{color:"default"},"Unverified"),t.state?r.a.createElement(He.a,{color:"success"},"Active"):r.a.createElement(He.a,{color:"error"},"Inactive"))))),r.a.createElement("div",{className:Kr.a.banBtnHolder},t.state?r.a.createElement(_.a,{loading:O,className:Kr.a.changeStateBtn,type:"primary",danger:!0,onClick:function(){return S(xe.INACTIVE)}},"Ban"):r.a.createElement(_.a,{loading:O,className:Kr.a.changeStateBtn,type:"primary",onClick:function(){return S(xe.ACTIVE)}},"Unban")))),r.a.createElement(Zr,{tab:"Profile",key:"profile"},I),r.a.createElement(Zr,{tab:"History",key:"history"},r.a.createElement(Fr,{callHistories:f.call_histories})),r.a.createElement(Zr,{tab:"Report",key:"report"},r.a.createElement(Vr,{reports:f.account.reports})),r.a.createElement(Zr,{tab:"Payment",key:"payment"},r.a.createElement(Jr,{payments:f.payments})),r.a.createElement(Zr,{tab:"Reviews",key:"reviews"},r.a.createElement(Qr,{selected:f}))):null;return r.a.createElement(M.a,{title:t?t.name:null,visible:l,onCancel:function(){return a(!1)},footer:null,width:"600px",destroyOnClose:!0,bodyStyle:{height:"400px",overflow:"auto"}},r.a.createElement(Ge.a,{spinning:u},j))}var Xr=B.a.Search;function ec(){var e=Object(n.useState)(10),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),o=Object(i.a)(l,2),s=o[0],u=o[1],m=Object(n.useState)(1),d=Object(i.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(""),v=Object(i.a)(E,2),b=v[0],h=v[1],g=Object(n.useState)(0),_=Object(i.a)(g,2),y=_[0],C=_[1],O=Object(n.useState)(!1),w=Object(i.a)(O,2),x=w[0],S=w[1],N=Object(n.useState)(!1),I=Object(i.a)(N,2),j=I[0],T=I[1],k=Object(n.useState)(null),R=Object(i.a)(k,2),M=R[0],A=R[1],B=function(){var e=Object(P.a)(D.a.mark((function e(){var t,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(!0),e.next=4,G.get("/tutors?page=".concat(p,"&size=").concat(a,"&search=")+b);case 4:t=e.sent,n=[],t.data.tutors.forEach((function(e){n.push({key:e.id,id:e.id,name:e.name,username:e.account.username,email:e.account.email,state:e.account.state,verification:e.account.verification,accountId:e.account.id,profileStatus:e.profileStatus})})),C(t.data.totalResults),u(n),S(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),alert(e.t0.response.data.message),S(!1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){B()}),[p,a,b]);var L=[{title:"Name",dataIndex:"name"},{title:"Username",dataIndex:"username"},{title:"Email",dataIndex:"email"},{title:"State",dataIndex:"state",render:function(e){return e?r.a.createElement(He.a,{color:"success"},"Active"):r.a.createElement(He.a,{color:"error"},"Inactive")},filters:[{text:"Active",value:xe.ACTIVE},{text:"Inactive",value:xe.INACTIVE}],filterMultiple:!1,onFilter:function(e,t){return 0===t.state.toString().indexOf(Boolean(e))}},{title:"Verification",dataIndex:"verification",render:function(e){return e?r.a.createElement(He.a,{color:"success"},"Verified"):r.a.createElement(He.a,{color:"default"},"Unverified")},filters:[{text:"Verified",value:Se.VERIFIED},{text:"Unverified",value:Se.UNVERIFIED}],filterMultiple:!1,onFilter:function(e,t){return 0===t.verification.toString().indexOf(Boolean(e))}},{title:"Profile status",dataIndex:"profileStatus",render:function(e){return e===Ne.ACCEPTED?r.a.createElement(He.a,{color:"success"},"Accepted"):e===Ne.PENDING?r.a.createElement(He.a,{color:"blue"},"Pending"):r.a.createElement(He.a,{color:"error"},"Rejected")},filters:[{text:"Accepted",value:Ne.ACCEPTED},{text:"Pending",value:Ne.PENDING},{text:"Rejected",value:Ne.REJECTED}],onFilter:function(e,t){return 0===t.profileStatus.toString().indexOf(e)}}];return r.a.createElement("div",{className:Hr.a.tutorsLayout},r.a.createElement($r,{selected:M,setShowDetailModal:T,showDetailModal:j,getTutorsData:B}),r.a.createElement("div",{className:Hr.a.searchBar},r.a.createElement(Xr,{placeholder:"Search for username, name or email",onSearch:function(e){h(e)},enterButton:!0})),r.a.createElement(Ge.a,{spinning:x},r.a.createElement(ut.a,{columns:L,dataSource:s,pagination:!1,onRow:function(e,t){return{onClick:function(t){A(e),T(!0)}}}})),r.a.createElement("div",{className:Hr.a.paginationWrapper},r.a.createElement(Tr.a,{current:p,defaultCurrent:p,total:y,pageSize:a,showSizeChanger:!0,showTotal:function(){return"Total ".concat(y," results")},onShowSizeChange:function(e,t){c(t),f(Math.ceil(y/t))},onChange:function(e,t){f(e)}})))}var tc=a(387),ac=a.n(tc),nc=a(388),rc=a.n(nc),cc=a(32),lc=a.n(cc);function oc(e){var t=e.showReportDetail,a=e.selected,n=e.setShowReportDetail,c=e.getReports,l=function(){var e=Object(P.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.put("/reports/"+a.id,{state:t});case 3:c(),n(!1),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return a?r.a.createElement(M.a,{title:"Report - "+et()(a.createdAt).format("MMMM Do YYYY, h:mm:ss a"),visible:t,onCancel:function(){return n(!1)},footer:null,width:"600px",destroyOnClose:!0,bodyStyle:{height:"600px",overflow:"auto"}},r.a.createElement("div",{className:lc.a.reportDetail},r.a.createElement("div",{className:lc.a.reportDetailContent},r.a.createElement("div",{className:lc.a.reportLabel},"Call at:"," ",r.a.createElement("span",{className:lc.a.reportContent},et()(a.call_history.createdAt).format("MMMM Do YYYY, h:mm:ss a"))),r.a.createElement("div",{className:lc.a.reportLabel},"Reason: ",r.a.createElement("span",{className:lc.a.reportContent},a.reason)),r.a.createElement("div",{className:lc.a.reportLabel},"Description: ",r.a.createElement("span",{className:lc.a.reportContent},a.description)),a.account.role===we.STUDENT?r.a.createElement("div",null,r.a.createElement("div",{className:lc.a.reportLabel},"Name: ",r.a.createElement("span",{className:lc.a.reportContent},a.call_history.student.name)),r.a.createElement(an,{url:"".concat(Ie,"api/call-histories/").concat(a.call_history.id,"/studentVideo")})):r.a.createElement("div",null,r.a.createElement("div",{className:lc.a.reportLabel},"Name: ",r.a.createElement("span",{className:lc.a.reportContent},a.call_history.tutor.name)),r.a.createElement(an,{url:"".concat(Ie,"api/call-histories/").concat(a.call_history.id,"/tutorVideo")}))),a.state===Re.PENDING?r.a.createElement("div",{className:lc.a.statusControlBtnWrapper},r.a.createElement(_.a,{className:lc.a.statusControlBtn,style:{backgroundColor:"#52c41a",color:"white",borderColor:"#52c41a"},onClick:function(){return l(Re.RESOLVED)}},"Resolve"),r.a.createElement(_.a,{type:"primary",danger:!0,className:lc.a.statusControlBtn,onClick:function(){return l(Re.CANCELLED)}},"Cancel")):null,a.state===Re.RESOLVED?r.a.createElement("div",{className:lc.a.statusControlBtnWrapper},r.a.createElement(_.a,{className:lc.a.statusControlBtn,onClick:function(){return l(Re.PENDING)}},"Pending"),r.a.createElement(_.a,{type:"primary",danger:!0,className:lc.a.statusControlBtn,onClick:function(){return l(Re.CANCELLED)}},"Cancel")):null,a.state===Re.CANCELLED?r.a.createElement("div",{className:lc.a.statusControlBtnWrapper},r.a.createElement(_.a,{className:lc.a.statusControlBtn,style:{backgroundColor:"#52c41a",color:"white",borderColor:"#52c41a"},onClick:function(){return l(Re.RESOLVED)}},"Resolve"),r.a.createElement(_.a,{className:lc.a.statusControlBtn,onClick:function(){return l(Re.PENDING)}},"Pending")):null)):null}function sc(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(i.a)(l,2),s=o[0],u=o[1],m=Object(n.useState)(null),d=Object(i.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!1),v=Object(i.a)(E,2),b=v[0],h=v[1],g=function(){var e=Object(P.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,G.get("/reports");case 4:t=e.sent,c(t.data.reports),u(!1),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),alert(e.t0.response.data.message),u(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){g()}),[]);var _=[{title:"Date",dataIndex:"createdAt",render:function(e){return r.a.createElement("div",null,et()(e).format("MMMM Do YYYY, h:mm:ss a"))}},{title:"Username",render:function(e,t){return r.a.createElement("div",null,t.account.username)}},{title:"Role",render:function(e,t){return t.account.role===we.STUDENT?r.a.createElement("div",null,"Student"):r.a.createElement("div",null,"Tutor")}},{title:"Reason",dataIndex:"reason"},{title:"State",dataIndex:"state",render:function(e){return e===Re.RESOLVED?r.a.createElement(He.a,{color:"success"},"Resolved"):e===Re.PENDING?r.a.createElement(He.a,{color:"blue"},"Pending"):r.a.createElement(He.a,{color:"error"},"Cancelled")},filters:[{text:"Resolved",value:Re.RESOLVED},{text:"Pending",value:Re.PENDING},{text:"Cancelled",value:Re.CANCELLED}],onFilter:function(e,t){return 0===t.state.toString().indexOf(e)}}];return r.a.createElement("div",{className:rc.a.reports},r.a.createElement(oc,{setShowReportDetail:h,showReportDetail:b,selected:p,getReports:g}),r.a.createElement(Ge.a,{spinning:s},r.a.createElement(ut.a,{columns:_,dataSource:a,pagination:!0,rowKey:"id",onRow:function(e,t){return{onClick:function(t){f(e),h(!0)}}}})))}var ic=a(158),uc=a.n(ic);function mc(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(i.a)(l,2),s=o[0],u=o[1],m=function(){var e=Object(P.a)(D.a.mark((function e(){var t,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,G.get("/subscriptions/");case 4:t=e.sent,a=[],t.data.subscriptions.forEach((function(e){e.key=e.id,e.username=e.student.account.username,e.name=e.student.name,a.push(e)})),c(a),u(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),alert(e.t0.response.data.message),u(!1);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(P.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,G.put("/subscriptions/"+t,{state:ke.CANCELED});case 4:m(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),alert(e.t0.response.data.message),u(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(P.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,G.put("/subscriptions/"+t,{state:ke.COMPLETED});case 4:m(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),alert(e.t0.response.data.message),u(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),f=[{title:"Date",dataIndex:"createdAt",render:function(e){return r.a.createElement("div",null,et()(e).format("MMMM Do YYYY, h:mm:ss a"))}},{title:"Name",dataIndex:"name"},{title:"Username",dataIndex:"username"},{title:"Tier",dataIndex:"tier",render:function(e){return e===De.SILVER?r.a.createElement(He.a,{color:"#C0C0C0"},"Silver"):e===De.GOLD?r.a.createElement(He.a,{color:"#DAA520"},"Gold"):e===De.PLATIUM?r.a.createElement(He.a,{color:"processing"},"Platium"):r.a.createElement(He.a,null,"Normal")},filters:[{text:"Normal",value:De.NORMAL},{text:"Silver",value:De.SILVER},{text:"Gold",value:De.GOLD},{text:"Platium",value:De.PLATIUM}],onFilter:function(e,t){return 0===t.tier.toString().indexOf(e)}},{title:"Duration",dataIndex:"duration",render:function(e){return r.a.createElement("div",null,e/6e4," mins")}},{title:"Price",dataIndex:"price",render:function(e){return r.a.createElement("div",null,e,"$")}},{title:"State",dataIndex:"state",render:function(e){return e===ke.COMPLETED?r.a.createElement(He.a,{color:"success"},"Completed"):e===ke.PENDING?r.a.createElement(He.a,{color:"blue"},"Pending"):r.a.createElement(He.a,{color:"error"},"Canceled")},filters:[{text:"Completed",value:ke.COMPLETED},{text:"Pending",value:ke.PENDING},{text:"Canceled",value:ke.CANCELED}],onFilter:function(e,t){return 0===t.state.toString().indexOf(e)}},{title:"Action",dataIndex:"state",render:function(e,t){return t.state===ke.PENDING?r.a.createElement("div",null,r.a.createElement(it.a,{title:"Do you want to accept this request?",okText:"Yes",cancelText:"No",className:uc.a.acceptBtn,onConfirm:function(){return p(t.id)}},"Complete"),r.a.createElement(it.a,{title:"Do you want to cancel this request?",okText:"Yes",cancelText:"No",className:uc.a.cancelBtn,onConfirm:function(){return d(t.id)}},"Cancel")):r.a.createElement("div",null,"N/A")}}];return Object(n.useEffect)((function(){m()}),[]),r.a.createElement("div",{className:uc.a.subscriptions},r.a.createElement(Ge.a,{spinning:s},r.a.createElement(_.a,{className:uc.a.reload,onClick:m,icon:r.a.createElement(pt.a,null)},"Reload"),r.a.createElement(ut.a,{columns:f,dataSource:a,pagination:!0})))}var dc=a(84),pc=a.n(dc);function fc(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(i.a)(l,2),s=o[0],u=o[1],m=function(){var e=Object(P.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,G.get("/payments/");case 4:t=e.sent,c(t.data.payments),u(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),alert(e.t0.response.data.message),u(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(P.a)(D.a.mark((function e(t,a){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,G.put("/payments/"+t,{state:a});case 4:m(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),alert(e.t0.response.data.message),u(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,a){return e.apply(this,arguments)}}(),p=[{title:"Date",dataIndex:"createdAt",render:function(e){return r.a.createElement("div",null,et()(e).format("MMMM Do YYYY, h:mm:ss a"))}},{title:"Name",render:function(e,t){return t.tutor.name}},{title:"Username",render:function(e,t){return t.tutor.account.username}},{title:"Email",dataIndex:"state",render:function(e,t){return t.tutor.account.email}},{title:"Price",dataIndex:"price",render:function(e){return r.a.createElement("div",null,e,"$")}},{title:"State",dataIndex:"state",render:function(e){return e===Me.COMPLETED?r.a.createElement(He.a,{color:"success"},"Completed"):e===Me.PENDING?r.a.createElement(He.a,{color:"blue"},"Pending"):r.a.createElement(He.a,{color:"error"},"Cancelled")},filters:[{text:"Completed",value:Me.COMPLETED},{text:"Pending",value:Me.PENDING},{text:"Canceled",value:Me.CANCELED}],onFilter:function(e,t){return 0===t.state.toString().indexOf(e)}},{title:"Action",render:function(e,t){return t.state===Me.PENDING?r.a.createElement("div",null,r.a.createElement(it.a,{title:"Do you want to perform this action?",okText:"Yes",cancelText:"No",className:pc.a.acceptBtn,onConfirm:function(){return d(t.id,Me.COMPLETED)}},"Complete"),r.a.createElement(it.a,{title:"Do you want to perform this action?",okText:"Yes",cancelText:"No",className:pc.a.cancelBtn,onConfirm:function(){return d(t.id,Me.CANCELED)}},"Cancel")):t.state===Me.COMPLETED?r.a.createElement("div",null,r.a.createElement(it.a,{title:"Do you want to perform this action?",okText:"Yes",cancelText:"No",className:pc.a.pendingBtn,onConfirm:function(){return d(t.id,Me.PENDING)}},"Pending"),r.a.createElement(it.a,{title:"Do you want to perform this action?",okText:"Yes",cancelText:"No",className:pc.a.cancelBtn,onConfirm:function(){return d(t.id,Me.CANCELED)}},"Cancel")):r.a.createElement("div",null,r.a.createElement(it.a,{title:"Do you want to perform this action?",okText:"Yes",cancelText:"No",className:pc.a.acceptBtn,onConfirm:function(){return d(t.id,Me.COMPLETED)}},"Complete"),r.a.createElement(it.a,{title:"Do you want to perform this action?",okText:"Yes",cancelText:"No",className:pc.a.pendingBtn,onConfirm:function(){return d(t.id,Me.PENDING)}},"Pending"))}}];return Object(n.useEffect)((function(){m()}),[]),r.a.createElement("div",{className:pc.a.payments},r.a.createElement(Ge.a,{spinning:s},r.a.createElement(_.a,{className:pc.a.reload,onClick:m,icon:r.a.createElement(pt.a,null)},"Reload"),r.a.createElement(ut.a,{rowKey:"id",columns:p,dataSource:a,pagination:!0})))}var Ec=a(725),vc=a(389),bc=a.n(vc),hc=a(103),gc=a.n(hc);function _c(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(null),o=Object(i.a)(l,2),s=o[0],u=o[1],m=Object(n.useState)(null),d=Object(i.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(null),v=Object(i.a)(E,2),b=v[0],h=v[1],g=Object(n.useState)(!1),y=Object(i.a)(g,2),C=y[0],O=y[1],w=Object(n.useState)(!1),x=Object(i.a)(w,2),S=x[0],N=x[1],I=Object(n.useState)(!1),j=Object(i.a)(I,2),T=j[0],k=j[1],M=function(){var e=Object(P.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.prev=1,e.next=4,G.get("/settings");case 4:e.sent.data.settings.forEach((function(e){"discount rate"===e.type&&u(e),"student price"===e.type&&f(e),"tutor price"===e.type&&h(e)})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.response.data.message);case 11:c(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){M()}),[]);var A=function(e,t){return t>0?Promise.resolve():Promise.reject("Invalid price!")},B=function(e,t){return t>0&&t<=1?Promise.resolve():Promise.reject("Invalid rate!")},L=function(){var e=Object(P.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.prev=1,e.next=4,G.put("/settings/"+b.id,{content:t.tutorPrice});case 4:M(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),alert(e.t0.response.data.message);case 10:N(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(P.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,G.put("/settings/"+p.id,{content:t.studentPrice});case 4:M(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),alert(e.t0.response.data.message);case 10:O(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(P.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.prev=1,e.next=4,G.put("/settings/"+s.id,{content:JSON.stringify(t)});case 4:M(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),alert(e.t0.response.data.message);case 10:k(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Ge.a,{spinning:a},r.a.createElement("div",{className:gc.a.settings},r.a.createElement("div",{className:gc.a.settingsContent},r.a.createElement("img",{className:gc.a.settingImg,src:bc.a,alt:"",draggable:"false"})),r.a.createElement("div",null,r.a.createElement("div",{className:gc.a.settingsContent},r.a.createElement("p",{className:gc.a.settingTitle},"Set price per min"),p&&b?r.a.createElement("div",null,r.a.createElement(R.a,{name:"tutor",layout:"inline",style:{marginBottom:"20px"},onFinish:L,initialValues:{tutorPrice:Number(b.content)}},r.a.createElement(R.a.Item,{name:"tutorPrice",label:"Tutor payment",rules:[{validator:A,required:!0}]},r.a.createElement(Ec.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")}})),r.a.createElement(R.a.Item,null,r.a.createElement(_.a,{type:"primary",htmlType:"submit",loading:S},"Update"))),r.a.createElement(R.a,{name:"student",layout:"inline",style:{marginLeft:"7px"},onFinish:F,initialValues:{studentPrice:Number(p.content)}},r.a.createElement(R.a.Item,{name:"studentPrice",label:"Student price",rules:[{validator:A,required:!0}]},r.a.createElement(Ec.a,{formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")}})),r.a.createElement(R.a.Item,null,r.a.createElement(_.a,{type:"primary",htmlType:"submit",loading:C},"Update")))):null),r.a.createElement("div",{className:gc.a.settingsContent},r.a.createElement("p",{className:gc.a.settingTitle},"Set discount rate"),s?r.a.createElement("div",null,r.a.createElement(R.a,{name:"discount",onFinish:V,initialValues:JSON.parse(s.content),labelCol:{span:14},wrapperCol:{span:4}},r.a.createElement(R.a.Item,{name:"NORMAL",label:"Normal tier",rules:[{validator:B,required:!0}]},r.a.createElement(Ec.a,null)),r.a.createElement(R.a.Item,{name:"SILVER",label:"Silver tier",rules:[{validator:B,required:!0}]},r.a.createElement(Ec.a,null)),r.a.createElement(R.a.Item,{name:"GOLD",label:"Gold tier",rules:[{validator:B,required:!0}]},r.a.createElement(Ec.a,null)),r.a.createElement(R.a.Item,{name:"PLATIUM",label:"Platium tier",rules:[{validator:B,required:!0}]},r.a.createElement(Ec.a,null)),r.a.createElement(R.a.Item,{wrapperCol:{offset:7}},r.a.createElement(_.a,{type:"primary",htmlType:"submit",loading:T},"Update")))):null))))}var yc=g.a.Header,Cc=g.a.Content,Oc=g.a.Sider;function wc(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],l=a[1],u=Object(n.useState)(!1),m=Object(i.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(!1),v=Object(i.a)(f,2),b=v[0],h=v[1],_=Object(n.useContext)(E),y=_.onSignOut,C=_.account,O=e.location,w=r.a.createElement(me.a,null,r.a.createElement(me.a.Item,{onClick:function(){return p(!0)}},r.a.createElement(Ee.a,null),r.a.createElement("span",null,"Change password")),r.a.createElement(me.a.Item,{onClick:y},r.a.createElement(ve.a,null),r.a.createElement("span",null,"Sign out")));return r.a.createElement(g.a,null,r.a.createElement(te,{isVisible:b,onClose:function(){return h(!1)}}),r.a.createElement(Be,{isVisible:d,onClose:function(){return p(!1)},onForgot:function(){return h(!0)}}),r.a.createElement(Oc,{collapsible:!0,collapsed:c,onCollapse:function(e){l(e)},className:pr.a.adminMenu},r.a.createElement(Ve,{collapsed:c}),r.a.createElement(me.a,{theme:"dark",defaultSelectedKeys:["/admin"],mode:"inline",selectedKeys:[O.pathname]},r.a.createElement(me.a.Item,{key:"/admin"},r.a.createElement(En.a,null),r.a.createElement(o.b,{to:"/admin"},r.a.createElement("span",null,"Dashboard"))),r.a.createElement(me.a.Item,{key:"/admin/students"},r.a.createElement(oa.a,null),r.a.createElement(o.b,{to:"/admin/students"},r.a.createElement("span",null,"Students"))),r.a.createElement(me.a.Item,{key:"/admin/tutors"},r.a.createElement(or.a,null),r.a.createElement(o.b,{to:"/admin/tutors"},r.a.createElement("span",null,"Tutors"))),r.a.createElement(me.a.Item,{key:"/admin/reports"},r.a.createElement(sr.a,null),r.a.createElement(o.b,{to:"/admin/reports"},r.a.createElement("span",null,"Reports"))),r.a.createElement(me.a.Item,{key:"/admin/subscriptions"},r.a.createElement(ot.a,null),r.a.createElement(o.b,{to:"/admin/subscriptions"},r.a.createElement("span",null,"Subscriptions"))),r.a.createElement(me.a.Item,{key:"/admin/payments"},r.a.createElement(ge.a,null),r.a.createElement(o.b,{to:"/admin/payments"},r.a.createElement("span",null,"Payments"))),r.a.createElement(me.a.Item,{key:"/admin/settings"},r.a.createElement(ir.a,null),r.a.createElement(o.b,{to:"/admin/settings"},r.a.createElement("span",null,"Settings"))))),r.a.createElement(g.a,null,r.a.createElement(yc,{style:{background:"white"}},c?r.a.createElement(ur.a,{className:pr.a.menuIcon,onClick:function(){return l(!1)}}):r.a.createElement(mr.a,{className:pr.a.menuIcon,onClick:function(){return l(!0)}}),r.a.createElement("div",{className:pr.a.userControl},"Hello, ",C.username,r.a.createElement(de.a,{overlay:w,placement:"bottomLeft"},r.a.createElement("div",null,r.a.createElement(ue.a,{src:ac.a,size:"large",draggable:!1}),r.a.createElement(ye.a,{className:pr.a.dropDownIcon}))))),r.a.createElement(Cc,null,r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/admin/students",component:zr}),r.a.createElement(s.b,{path:"/admin/tutors",component:ec}),r.a.createElement(s.b,{path:"/admin/reports",component:sc}),r.a.createElement(s.b,{path:"/admin/subscriptions",component:mc}),r.a.createElement(s.b,{path:"/admin/payments",component:fc}),r.a.createElement(s.b,{path:"/admin/settings",component:_c}),r.a.createElement(s.b,{path:"/admin",component:jr,exact:!0}))),r.a.createElement(I,null)))}function xc(){return Object(n.useEffect)((function(){f()}),[]),r.a.createElement(s.a,{to:"/"})}function Sc(){var e=Object(n.useContext)(E).account;return e&&e.role===we.STUDENT?r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/student",component:dn}),r.a.createElement(s.a,{to:"/student"})):e&&e.role===we.TUTOR?r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/tutor",component:lr}),r.a.createElement(s.a,{to:"/tutor"})):e&&e.role===we.ADMIN?r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/admin",component:wc}),r.a.createElement(s.a,{to:"/admin"})):r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/",exact:!0,component:ie}),r.a.createElement(s.b,{path:"/sign-out",component:xc}),r.a.createElement(s.a,{to:"/"}))}var Nc=Object(s.g)((function(){return r.a.createElement("div",{className:"App"},r.a.createElement(v,null,r.a.createElement(Sc,null)))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(709),a(710);var Ic=r.a.createElement(o.a,null,r.a.createElement(Nc,null));l.a.render(Ic,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},82:function(e,t,a){e.exports={tutorInfo:"TutorCard_tutorInfo__3fs99",tutorInfoDetail:"TutorCard_tutorInfoDetail__2tfkM",tutorCard:"TutorCard_tutorCard__1tngP",status:"TutorCard_status__3Qpdk",tutorName:"TutorCard_tutorName__25Xhw",reviewCount:"TutorCard_reviewCount__3uutv",reviewWrapper:"TutorCard_reviewWrapper__3gDmH",viewReviews:"TutorCard_viewReviews__Ej5t6",removeFav:"TutorCard_removeFav__3Im8y"}},83:function(e,t,a){e.exports={teaching:"Teaching_teaching__R4VgK",waitImg:"Teaching_waitImg__30A-0",wait:"Teaching_wait__Z1hyj",waitTxt:"Teaching_waitTxt__1Up26",teachingWrapper:"Teaching_teachingWrapper__2Zo8F"}},84:function(e,t,a){e.exports={payments:"Payment_payments__Qo2Af",acceptBtn:"Payment_acceptBtn__1mzcp",cancelBtn:"Payment_cancelBtn__e69t_",pendingBtn:"Payment_pendingBtn__2z9xm",reload:"Payment_reload__14ifB"}},98:function(e,t,a){e.exports={callWindow:"CallWindow_callWindow__E4L0T",videoScreenContainer:"CallWindow_videoScreenContainer__Lo45k",videoScreen:"CallWindow_videoScreen__Wmw8B",videoControl:"CallWindow_videoControl__1mmEE",callWindowWrapper:"CallWindow_callWindowWrapper__1JAqt",callTime:"CallWindow_callTime__22Crh"}},99:function(e,t,a){e.exports={tutorList:"TutorList_tutorList__3agKo",tabPane:"TutorList_tabPane__2WIHS",searchBar:"TutorList_searchBar__1s5SF",remainingTimeTitle:"TutorList_remainingTimeTitle__1lCLu",searchTool:"TutorList_searchTool__scwEp"}}},[[395,1,2]]]);
//# sourceMappingURL=main.bde15881.chunk.js.map